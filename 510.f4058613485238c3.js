(self.webpackChunkcvFelipeAcosta=self.webpackChunkcvFelipeAcosta||[]).push([[510],{510:(zg,hs,mt)=>{"use strict";mt.r(hs),mt.d(hs,{CurriculumModule:()=>Qb});var $e=mt(9808),r=mt(5e3);const om=new r.OlP("cdk-dir-doc",{providedIn:"root",factory:function h(){return(0,r.f3M)($e.K0)}}),Oe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let bn,Ci=(()=>{class a{constructor(t){if(this.value="ltr",this.change=new r.vpe,t){const g=t.documentElement?t.documentElement.dir:null;this.value=function tr(a){const s=(null==a?void 0:a.toLowerCase())||"";return"auto"===s&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?Oe.test(navigator.language)?"rtl":"ltr":"rtl"===s?"rtl":"ltr"}((t.body?t.body.dir:null)||g||"ltr")}}ngOnDestroy(){this.change.complete()}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(om,8))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),gt=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({}),a})();try{bn="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(a){bn=!1}let Xn,Rn,an,ya,st=(()=>{class a{constructor(t){this._platformId=t,this.isBrowser=this._platformId?(0,$e.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!bn)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(r.Lbi))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function rn(a){return function _t(){if(null==Xn&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Xn=!0}))}finally{Xn=Xn||!1}return Xn}()?a:!!a.capture}function ir(){if(null==an){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return an=!1,an;if("scrollBehavior"in document.documentElement.style)an=!0;else{const a=Element.prototype.scrollTo;an=!!a&&!/\{\s*\[native code\]\s*\}/.test(a.toString())}}return an}function fi(){if("object"!=typeof document||!document)return 0;if(null==Rn){const a=document.createElement("div"),s=a.style;a.dir="rtl",s.width="1px",s.overflow="auto",s.visibility="hidden",s.pointerEvents="none",s.position="absolute";const t=document.createElement("div"),c=t.style;c.width="2px",c.height="1px",a.appendChild(t),document.body.appendChild(a),Rn=0,0===a.scrollLeft&&(a.scrollLeft=1,Rn=0===a.scrollLeft?1:2),a.remove()}return Rn}function Jn(a){return a.composedPath?a.composedPath()[0]:a.target}function Kn(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}var wt=mt(7579),Bi=mt(727),Io=mt(1135),vi=mt(9646);function Sn(a,...s){return s.length?s.some(t=>a[t]):a.altKey||a.shiftKey||a.ctrlKey||a.metaKey}var Dn=mt(8505);class Ll extends Bi.w0{constructor(s,t){super()}schedule(s,t=0){return this}}const sr={setInterval(a,s,...t){const{delegate:c}=sr;return(null==c?void 0:c.setInterval)?c.setInterval(a,s,...t):setInterval(a,s,...t)},clearInterval(a){const{delegate:s}=sr;return((null==s?void 0:s.clearInterval)||clearInterval)(a)},delegate:void 0};var yu=mt(8737);class Rl extends Ll{constructor(s,t){super(s,t),this.scheduler=s,this.work=t,this.pending=!1}schedule(s,t=0){if(this.closed)return this;this.state=s;const c=this.id,g=this.scheduler;return null!=c&&(this.id=this.recycleAsyncId(g,c,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(g,this.id,t),this}requestAsyncId(s,t,c=0){return sr.setInterval(s.flush.bind(s,this),c)}recycleAsyncId(s,t,c=0){if(null!=c&&this.delay===c&&!1===this.pending)return t;sr.clearInterval(t)}execute(s,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const c=this._execute(s,t);if(c)return c;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(s,t){let g,c=!1;try{this.work(s)}catch(b){c=!0,g=b||new Error("Scheduled action threw falsy error")}if(c)return this.unsubscribe(),g}unsubscribe(){if(!this.closed){const{id:s,scheduler:t}=this,{actions:c}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,yu.P)(c,this),null!=s&&(this.id=this.recycleAsyncId(t,s,null)),this.delay=null,super.unsubscribe()}}}const Ss={now:()=>(Ss.delegate||Date).now(),delegate:void 0};class Or{constructor(s,t=Or.now){this.schedulerActionCtor=s,this.now=t}schedule(s,t=0,c){return new this.schedulerActionCtor(this,s).schedule(c,t)}}Or.now=Ss.now;class lr extends Or{constructor(s,t=Or.now){super(s,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(s){const{actions:t}=this;if(this._active)return void t.push(s);let c;this._active=!0;do{if(c=s.execute(s.state,s.delay))break}while(s=t.shift());if(this._active=!1,c){for(;s=t.shift();)s.unsubscribe();throw c}}}const Ds=new lr(Rl),Qc=Ds;var Sa=mt(4482),fo=mt(5403);function gn(a,s=Ds){return(0,Sa.e)((t,c)=>{let g=null,b=null,B=null;const N=()=>{if(g){g.unsubscribe(),g=null;const he=b;b=null,c.next(he)}};function te(){const he=B+a,we=s.now();if(we<he)return g=this.schedule(void 0,he-we),void c.add(g);N()}t.subscribe((0,fo.x)(c,he=>{b=he,B=s.now(),g||(g=s.schedule(te,a),c.add(g))},()=>{N(),c.complete()},void 0,()=>{b=g=null}))})}var Pi=mt(9300),ji=mt(4004),zi=mt(5698);function to(a){return(0,Pi.h)((s,t)=>a<=t)}var Bs=mt(4671);function cr(a,s=Bs.y){return a=null!=a?a:zr,(0,Sa.e)((t,c)=>{let g,b=!0;t.subscribe((0,fo.x)(c,B=>{const N=s(B);(b||!a(g,N))&&(b=!1,g=N,c.next(B))}))})}function zr(a,s){return a===s}var dr=mt(8421),Rt=mt(5032);function Ut(a){return(0,Sa.e)((s,t)=>{(0,dr.Xf)(a).subscribe((0,fo.x)(t,()=>t.complete(),Rt.Z)),!t.closed&&s.subscribe(t)})}function Yt(a){return null!=a&&"false"!=`${a}`}function Vr(a,s=0){return function ks(a){return!isNaN(parseFloat(a))&&!isNaN(Number(a))}(a)?Number(a):s}function Da(a){return Array.isArray(a)?a:[a]}function gi(a){return null==a?"":"string"==typeof a?a:`${a}px`}function io(a){return a instanceof r.SBq?a.nativeElement:a}var Bn=mt(8306);let Zo=(()=>{class a{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Ba=(()=>{class a{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,c)=>this._cleanupObserver(c))}observe(t){const c=io(t);return new Bn.y(g=>{const B=this._observeElement(c).subscribe(g);return()=>{B.unsubscribe(),this._unobserveElement(c)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const c=new wt.x,g=this._mutationObserverFactory.create(b=>c.next(b));g&&g.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:g,stream:c,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:c,stream:g}=this._observedElements.get(t);c&&c.disconnect(),g.complete(),this._observedElements.delete(t)}}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(Zo))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Wc=(()=>{class a{constructor(t,c,g){this._contentObserver=t,this._elementRef=c,this._ngZone=g,this.event=new r.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Yt(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Vr(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(gn(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(Ba),r.Y36(r.SBq),r.Y36(r.R0b))},a.\u0275dir=r.lG2({type:a,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),a})(),Nr=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({providers:[Zo]}),a})();class Gr extends class Ur{constructor(s){this._items=s,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new wt.x,this._typeaheadSubscription=Bi.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new wt.x,this.change=new wt.x,s instanceof r.n_E&&s.changes.subscribe(t=>{if(this._activeItem){const g=t.toArray().indexOf(this._activeItem);g>-1&&g!==this._activeItemIndex&&(this._activeItemIndex=g)}})}skipPredicate(s){return this._skipPredicateFn=s,this}withWrap(s=!0){return this._wrap=s,this}withVerticalOrientation(s=!0){return this._vertical=s,this}withHorizontalOrientation(s){return this._horizontal=s,this}withAllowedModifierKeys(s){return this._allowedModifierKeys=s,this}withTypeAhead(s=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Dn.b)(t=>this._pressedLetters.push(t)),gn(s),(0,Pi.h)(()=>this._pressedLetters.length>0),(0,ji.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const c=this._getItemsArray();for(let g=1;g<c.length+1;g++){const b=(this._activeItemIndex+g)%c.length,B=c[b];if(!this._skipPredicateFn(B)&&0===B.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(b);break}}this._pressedLetters=[]}),this}withHomeAndEnd(s=!0){return this._homeAndEnd=s,this}setActiveItem(s){const t=this._activeItem;this.updateActiveItem(s),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(s){const t=s.keyCode,g=["altKey","ctrlKey","metaKey","shiftKey"].every(b=>!s[b]||this._allowedModifierKeys.indexOf(b)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&g){this.setNextItemActive();break}return;case 38:if(this._vertical&&g){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&g){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&g){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&g){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&g){this.setLastItemActive();break}return;default:return void((g||Sn(s,"shiftKey"))&&(s.key&&1===s.key.length?this._letterKeyStream.next(s.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],s.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(s){const t=this._getItemsArray(),c="number"==typeof s?s:t.indexOf(s),g=t[c];this._activeItem=null==g?null:g,this._activeItemIndex=c}_setActiveItemByDelta(s){this._wrap?this._setActiveInWrapMode(s):this._setActiveInDefaultMode(s)}_setActiveInWrapMode(s){const t=this._getItemsArray();for(let c=1;c<=t.length;c++){const g=(this._activeItemIndex+s*c+t.length)%t.length;if(!this._skipPredicateFn(t[g]))return void this.setActiveItem(g)}}_setActiveInDefaultMode(s){this._setActiveItemByIndex(this._activeItemIndex+s,s)}_setActiveItemByIndex(s,t){const c=this._getItemsArray();if(c[s]){for(;this._skipPredicateFn(c[s]);)if(!c[s+=t])return;this.setActiveItem(s)}}_getItemsArray(){return this._items instanceof r.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(s){return this._origin=s,this}setActiveItem(s){super.setActiveItem(s),this.activeItem&&this.activeItem.focus(this._origin)}}let Un=(()=>{class a{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function $c(a){return!!(a.offsetWidth||a.offsetHeight||"function"==typeof a.getClientRects&&a.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const c=function Vl(a){try{return a.frameElement}catch(s){return null}}(function bu(a){return a.ownerDocument&&a.ownerDocument.defaultView||window}(t));if(c&&(-1===Zr(c)||!this.isVisible(c)))return!1;let g=t.nodeName.toLowerCase(),b=Zr(t);return t.hasAttribute("contenteditable")?-1!==b:!("iframe"===g||"object"===g||this._platform.WEBKIT&&this._platform.IOS&&!function td(a){let s=a.nodeName.toLowerCase(),t="input"===s&&a.type;return"text"===t||"password"===t||"select"===s||"textarea"===s}(t))&&("audio"===g?!!t.hasAttribute("controls")&&-1!==b:"video"===g?-1!==b&&(null!==b||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,c){return function Ls(a){return!function Ul(a){return function Au(a){return"input"==a.nodeName.toLowerCase()}(a)&&"hidden"==a.type}(a)&&(function Nl(a){let s=a.nodeName.toLowerCase();return"input"===s||"select"===s||"button"===s||"textarea"===s}(a)||function Gl(a){return function Zl(a){return"a"==a.nodeName.toLowerCase()}(a)&&a.hasAttribute("href")}(a)||a.hasAttribute("contenteditable")||ed(a))}(t)&&!this.isDisabled(t)&&((null==c?void 0:c.ignoreVisibility)||this.isVisible(t))}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(st))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function ed(a){if(!a.hasAttribute("tabindex")||void 0===a.tabIndex)return!1;let s=a.getAttribute("tabindex");return!(!s||isNaN(parseInt(s,10)))}function Zr(a){if(!ed(a))return null;const s=parseInt(a.getAttribute("tabindex")||"",10);return isNaN(s)?-1:s}class jl{constructor(s,t,c,g,b=!1){this._element=s,this._checker=t,this._ngZone=c,this._document=g,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,b||this.attachAnchors()}get enabled(){return this._enabled}set enabled(s){this._enabled=s,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(s,this._startAnchor),this._toggleAnchorTabIndex(s,this._endAnchor))}destroy(){const s=this._startAnchor,t=this._endAnchor;s&&(s.removeEventListener("focus",this.startAnchorListener),s.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(s){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(s)))})}focusFirstTabbableElementWhenReady(s){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(s)))})}focusLastTabbableElementWhenReady(s){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(s)))})}_getRegionBoundary(s){const t=this._element.querySelectorAll(`[cdk-focus-region-${s}], [cdkFocusRegion${s}], [cdk-focus-${s}]`);return"start"==s?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(s){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const c=this._getFirstTabbableElement(t);return null==c||c.focus(s),!!c}return t.focus(s),!0}return this.focusFirstTabbableElement(s)}focusFirstTabbableElement(s){const t=this._getRegionBoundary("start");return t&&t.focus(s),!!t}focusLastTabbableElement(s){const t=this._getRegionBoundary("end");return t&&t.focus(s),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(s){if(this._checker.isFocusable(s)&&this._checker.isTabbable(s))return s;const t=s.children;for(let c=0;c<t.length;c++){const g=t[c].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[c]):null;if(g)return g}return null}_getLastTabbableElement(s){if(this._checker.isFocusable(s)&&this._checker.isTabbable(s))return s;const t=s.children;for(let c=t.length-1;c>=0;c--){const g=t[c].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[c]):null;if(g)return g}return null}_createAnchor(){const s=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,s),s.classList.add("cdk-visually-hidden"),s.classList.add("cdk-focus-trap-anchor"),s.setAttribute("aria-hidden","true"),s}_toggleAnchorTabIndex(s,t){s?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(s){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(s,this._startAnchor),this._toggleAnchorTabIndex(s,this._endAnchor))}_executeOnStable(s){this._ngZone.isStable?s():this._ngZone.onStable.pipe((0,zi.q)(1)).subscribe(s)}}let id=(()=>{class a{constructor(t,c,g){this._checker=t,this._ngZone=c,this._document=g}create(t,c=!1){return new jl(t,this._checker,this._ngZone,this._document,c)}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(Un),r.LFG(r.R0b),r.LFG($e.K0))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function jr(a){return 0===a.buttons||0===a.offsetX&&0===a.offsetY}function Os(a){const s=a.touches&&a.touches[0]||a.changedTouches&&a.changedTouches[0];return!(!s||-1!==s.identifier||null!=s.radiusX&&1!==s.radiusX||null!=s.radiusY&&1!==s.radiusY)}const nd=new r.OlP("cdk-input-modality-detector-options"),Tu={ignoreKeys:[18,17,224,91,16]},jo=rn({passive:!0,capture:!0});let zs=(()=>{class a{constructor(t,c,g,b){this._platform=t,this._mostRecentTarget=null,this._modality=new Io.X(null),this._lastTouchMs=0,this._onKeydown=B=>{var N,te;(null===(te=null===(N=this._options)||void 0===N?void 0:N.ignoreKeys)||void 0===te?void 0:te.some(he=>he===B.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Jn(B))},this._onMousedown=B=>{Date.now()-this._lastTouchMs<650||(this._modality.next(jr(B)?"keyboard":"mouse"),this._mostRecentTarget=Jn(B))},this._onTouchstart=B=>{Os(B)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Jn(B))},this._options=Object.assign(Object.assign({},Tu),b),this.modalityDetected=this._modality.pipe(to(1)),this.modalityChanged=this.modalityDetected.pipe(cr()),t.isBrowser&&c.runOutsideAngular(()=>{g.addEventListener("keydown",this._onKeydown,jo),g.addEventListener("mousedown",this._onMousedown,jo),g.addEventListener("touchstart",this._onTouchstart,jo)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,jo),document.removeEventListener("mousedown",this._onMousedown,jo),document.removeEventListener("touchstart",this._onTouchstart,jo))}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(st),r.LFG(r.R0b),r.LFG($e.K0),r.LFG(nd,8))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Ia=new r.OlP("cdk-focus-monitor-default-options"),Fa=rn({passive:!0,capture:!0});let kn=(()=>{class a{constructor(t,c,g,b,B){this._ngZone=t,this._platform=c,this._inputModalityDetector=g,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new wt.x,this._rootNodeFocusAndBlurListener=N=>{const te=Jn(N),he="focus"===N.type?this._onFocus:this._onBlur;for(let we=te;we;we=we.parentElement)he.call(this,N,we)},this._document=b,this._detectionMode=(null==B?void 0:B.detectionMode)||0}monitor(t,c=!1){const g=io(t);if(!this._platform.isBrowser||1!==g.nodeType)return(0,vi.of)(null);const b=function Dr(a){if(function Sr(){if(null==ya){const a="undefined"!=typeof document?document.head:null;ya=!(!a||!a.createShadowRoot&&!a.attachShadow)}return ya}()){const s=a.getRootNode?a.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&s instanceof ShadowRoot)return s}return null}(g)||this._getDocument(),B=this._elementInfo.get(g);if(B)return c&&(B.checkChildren=!0),B.subject;const N={checkChildren:c,subject:new wt.x,rootNode:b};return this._elementInfo.set(g,N),this._registerGlobalListeners(N),N.subject}stopMonitoring(t){const c=io(t),g=this._elementInfo.get(c);g&&(g.subject.complete(),this._setClasses(c),this._elementInfo.delete(c),this._removeGlobalListeners(g))}focusVia(t,c,g){const b=io(t);b===this._getDocument().activeElement?this._getClosestElementsInfo(b).forEach(([N,te])=>this._originChanged(N,c,te)):(this._setOrigin(c),"function"==typeof b.focus&&b.focus(g))}ngOnDestroy(){this._elementInfo.forEach((t,c)=>this.stopMonitoring(c))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,c){t.classList.toggle("cdk-focused",!!c),t.classList.toggle("cdk-touch-focused","touch"===c),t.classList.toggle("cdk-keyboard-focused","keyboard"===c),t.classList.toggle("cdk-mouse-focused","mouse"===c),t.classList.toggle("cdk-program-focused","program"===c)}_setOrigin(t,c=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&c,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,c){const g=this._elementInfo.get(c),b=Jn(t);!g||!g.checkChildren&&c!==b||this._originChanged(c,this._getFocusOrigin(b),g)}_onBlur(t,c){const g=this._elementInfo.get(c);!g||g.checkChildren&&t.relatedTarget instanceof Node&&c.contains(t.relatedTarget)||(this._setClasses(c),this._emitOrigin(g.subject,null))}_emitOrigin(t,c){this._ngZone.run(()=>t.next(c))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const c=t.rootNode,g=this._rootNodeFocusListenerCount.get(c)||0;g||this._ngZone.runOutsideAngular(()=>{c.addEventListener("focus",this._rootNodeFocusAndBlurListener,Fa),c.addEventListener("blur",this._rootNodeFocusAndBlurListener,Fa)}),this._rootNodeFocusListenerCount.set(c,g+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ut(this._stopInputModalityDetector)).subscribe(b=>{this._setOrigin(b,!0)}))}_removeGlobalListeners(t){const c=t.rootNode;if(this._rootNodeFocusListenerCount.has(c)){const g=this._rootNodeFocusListenerCount.get(c);g>1?this._rootNodeFocusListenerCount.set(c,g-1):(c.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Fa),c.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Fa),this._rootNodeFocusListenerCount.delete(c))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,c,g){this._setClasses(t,c),this._emitOrigin(g.subject,c),this._lastFocusOrigin=c}_getClosestElementsInfo(t){const c=[];return this._elementInfo.forEach((g,b)=>{(b===t||g.checkChildren&&b.contains(t))&&c.push([b,g])}),c}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(r.R0b),r.LFG(st),r.LFG(zs),r.LFG($e.K0,8),r.LFG(Ia,8))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Vs="cdk-high-contrast-black-on-white",Ra="cdk-high-contrast-white-on-black",Et="cdk-high-contrast-active";let Oa=(()=>{class a{constructor(t,c){this._platform=t,this._document=c}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const c=this._document.defaultView||window,g=c&&c.getComputedStyle?c.getComputedStyle(t):null,b=(g&&g.backgroundColor||"").replace(/ /g,"");switch(t.remove(),b){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Et),t.remove(Vs),t.remove(Ra),this._hasCheckedHighContrastMode=!0;const c=this.getHighContrastMode();1===c?(t.add(Et),t.add(Vs)):2===c&&(t.add(Et),t.add(Ra))}}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(st),r.LFG($e.K0))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Eu=(()=>{class a{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(Oa))},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[Nr]]}),a})();var no=mt(8675),Mi=mt(6360);const Ns=new r.OlP("mat-sanity-checks",{providedIn:"root",factory:function Na(){return!0}});let ni=(()=>{class a{constructor(t,c,g){this._sanityChecks=c,this._document=g,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!Kn()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(Oa),r.LFG(Ns,8),r.LFG($e.K0))},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[gt],gt]}),a})();function Ho(a){return class extends a{constructor(...s){super(...s),this._disabled=!1}get disabled(){return this._disabled}set disabled(s){this._disabled=Yt(s)}}}function mo(a,s){return class extends a{constructor(...t){super(...t),this.defaultColor=s,this.color=s}get color(){return this._color}set color(t){const c=t||this.defaultColor;c!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),c&&this._elementRef.nativeElement.classList.add(`mat-${c}`),this._color=c)}}}function go(a){return class extends a{constructor(...s){super(...s),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(s){this._disableRipple=Yt(s)}}}function ur(a,s=0){return class extends a{constructor(...t){super(...t),this._tabIndex=s,this.defaultTabIndex=s}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Vr(t):this.defaultTabIndex}}}let pr=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275dir=r.lG2({type:a,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),a})();function Qr(a,s,t){a.nativeElement.classList.toggle(s,t)}let Za=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[ni],ni]}),a})();class ld{constructor(s,t,c){this._renderer=s,this.element=t,this.config=c,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const ja={enterDuration:225,exitDuration:150},qo=rn({passive:!0}),Ha=["mousedown","touchstart"],Xl=["mouseup","mouseleave","touchend","touchcancel"];class Hs{constructor(s,t,c,g){this._target=s,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,g.isBrowser&&(this._containerElement=io(c))}fadeInRipple(s,t,c={}){const g=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),b=Object.assign(Object.assign({},ja),c.animation);c.centered&&(s=g.left+g.width/2,t=g.top+g.height/2);const B=c.radius||function dd(a,s,t){const c=Math.max(Math.abs(a-t.left),Math.abs(a-t.right)),g=Math.max(Math.abs(s-t.top),Math.abs(s-t.bottom));return Math.sqrt(c*c+g*g)}(s,t,g),N=s-g.left,te=t-g.top,he=b.enterDuration,we=document.createElement("div");we.classList.add("mat-ripple-element"),we.style.left=N-B+"px",we.style.top=te-B+"px",we.style.height=2*B+"px",we.style.width=2*B+"px",null!=c.color&&(we.style.backgroundColor=c.color),we.style.transitionDuration=`${he}ms`,this._containerElement.appendChild(we),function Jl(a){window.getComputedStyle(a).getPropertyValue("opacity")}(we),we.style.transform="scale(1)";const Re=new ld(this,we,c);return Re.state=0,this._activeRipples.add(Re),c.persistent||(this._mostRecentTransientRipple=Re),this._runTimeoutOutsideZone(()=>{const ti=Re===this._mostRecentTransientRipple;Re.state=1,!c.persistent&&(!ti||!this._isPointerDown)&&Re.fadeOut()},he),Re}fadeOutRipple(s){const t=this._activeRipples.delete(s);if(s===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const c=s.element,g=Object.assign(Object.assign({},ja),s.config.animation);c.style.transitionDuration=`${g.exitDuration}ms`,c.style.opacity="0",s.state=2,this._runTimeoutOutsideZone(()=>{s.state=3,c.remove()},g.exitDuration)}fadeOutAll(){this._activeRipples.forEach(s=>s.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(s=>{s.config.persistent||s.fadeOut()})}setupTriggerEvents(s){const t=io(s);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(Ha))}handleEvent(s){"mousedown"===s.type?this._onMousedown(s):"touchstart"===s.type?this._onTouchStart(s):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Xl),this._pointerUpEventsRegistered=!0)}_onMousedown(s){const t=jr(s),c=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!c&&(this._isPointerDown=!0,this.fadeInRipple(s.clientX,s.clientY,this._target.rippleConfig))}_onTouchStart(s){if(!this._target.rippleDisabled&&!Os(s)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=s.changedTouches;for(let c=0;c<t.length;c++)this.fadeInRipple(t[c].clientX,t[c].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(s=>{!s.config.persistent&&(1===s.state||s.config.terminateOnPointerUp&&0===s.state)&&s.fadeOut()}))}_runTimeoutOutsideZone(s,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(s,t))}_registerEvents(s){this._ngZone.runOutsideAngular(()=>{s.forEach(t=>{this._triggerElement.addEventListener(t,this,qo)})})}_removeTriggerEvents(){this._triggerElement&&(Ha.forEach(s=>{this._triggerElement.removeEventListener(s,this,qo)}),this._pointerUpEventsRegistered&&Xl.forEach(s=>{this._triggerElement.removeEventListener(s,this,qo)}))}}const Wr=new r.OlP("mat-ripple-global-options");let ui=(()=>{class a{constructor(t,c,g,b,B){this._elementRef=t,this._animationMode=B,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=b||{},this._rippleRenderer=new Hs(this,c,t,g)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,c=0,g){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,c,Object.assign(Object.assign({},this.rippleConfig),g)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(r.R0b),r.Y36(st),r.Y36(Wr,8),r.Y36(Mi.Qb,8))},a.\u0275dir=r.lG2({type:a,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,c){2&t&&r.ekj("mat-ripple-unbounded",c.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),a})(),qa=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[ni],ni]}),a})(),Kl=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[ni]]}),a})();const hd=["mat-button",""],Qa=["*"],Wa=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Qs=mo(Ho(go(class{constructor(a){this._elementRef=a}})));let Ws=(()=>{class a extends Qs{constructor(t,c,g){super(t),this._focusMonitor=c,this._animationMode=g,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const b of Wa)this._hasHostAttributes(b)&&this._getHostElement().classList.add(b);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,c){t?this._focusMonitor.focusVia(this._getHostElement(),t,c):this._getHostElement().focus(c)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(c=>this._getHostElement().hasAttribute(c))}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(kn),r.Y36(Mi.Qb,8))},a.\u0275cmp=r.Xpm({type:a,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,c){if(1&t&&r.Gf(ui,5),2&t){let g;r.iGM(g=r.CRH())&&(c.ripple=g.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,c){2&t&&(r.uIk("disabled",c.disabled||null),r.ekj("_mat-animation-noopable","NoopAnimations"===c._animationMode)("mat-button-disabled",c.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[r.qOj],attrs:hd,ngContentSelectors:Qa,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,c){1&t&&(r.F$t(),r.TgZ(0,"span",0),r.Hsn(1),r.qZA(),r._UZ(2,"span",1)(3,"span",2)),2&t&&(r.xp6(2),r.ekj("mat-button-ripple-round",c.isRoundButton||c.isIconButton),r.Q6J("matRippleDisabled",c._isRippleDisabled())("matRippleCentered",c.isIconButton)("matRippleTrigger",c._getHostElement()))},directives:[ui],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),a})(),tc=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[qa,ni],ni]}),a})(),d=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[ni],ni]}),a})(),m=(()=>{class a{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=Yt(t)}get inset(){return this._inset}set inset(t){this._inset=Yt(t)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,c){2&t&&(r.uIk("aria-orientation",c.vertical?"vertical":"horizontal"),r.ekj("mat-divider-vertical",c.vertical)("mat-divider-horizontal",!c.vertical)("mat-divider-inset",c.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,c){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),a})(),y=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[ni],ni]}),a})();var v=mt(2843),C=mt(4742),M=mt(3269),E=mt(3268),k=mt(1810);function I(...a){const s=(0,M.jO)(a),{args:t,keys:c}=(0,C.D)(a),g=new Bn.y(b=>{const{length:B}=t;if(!B)return void b.complete();const N=new Array(B);let te=B,he=B;for(let we=0;we<B;we++){let Re=!1;(0,dr.Xf)(t[we]).subscribe((0,fo.x)(b,ti=>{Re||(Re=!0,he--),N[we]=ti},()=>te--,void 0,()=>{(!te||!Re)&&(he||b.next(c?(0,k.n)(c,N):N),b.complete())}))}});return s?g.pipe((0,E.Z)(s)):g}var L=mt(262),V=mt(8746),Z=mt(3099),H=mt(4351);class U{}class G{constructor(s){this.normalizedNames=new Map,this.lazyUpdate=null,s?this.lazyInit="string"==typeof s?()=>{this.headers=new Map,s.split("\n").forEach(t=>{const c=t.indexOf(":");if(c>0){const g=t.slice(0,c),b=g.toLowerCase(),B=t.slice(c+1).trim();this.maybeSetNormalizedName(g,b),this.headers.has(b)?this.headers.get(b).push(B):this.headers.set(b,[B])}})}:()=>{this.headers=new Map,Object.keys(s).forEach(t=>{let c=s[t];const g=t.toLowerCase();"string"==typeof c&&(c=[c]),c.length>0&&(this.headers.set(g,c),this.maybeSetNormalizedName(t,g))})}:this.headers=new Map}has(s){return this.init(),this.headers.has(s.toLowerCase())}get(s){this.init();const t=this.headers.get(s.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(s){return this.init(),this.headers.get(s.toLowerCase())||null}append(s,t){return this.clone({name:s,value:t,op:"a"})}set(s,t){return this.clone({name:s,value:t,op:"s"})}delete(s,t){return this.clone({name:s,value:t,op:"d"})}maybeSetNormalizedName(s,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,s)}init(){this.lazyInit&&(this.lazyInit instanceof G?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(s=>this.applyUpdate(s)),this.lazyUpdate=null))}copyFrom(s){s.init(),Array.from(s.headers.keys()).forEach(t=>{this.headers.set(t,s.headers.get(t)),this.normalizedNames.set(t,s.normalizedNames.get(t))})}clone(s){const t=new G;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof G?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([s]),t}applyUpdate(s){const t=s.name.toLowerCase();switch(s.op){case"a":case"s":let c=s.value;if("string"==typeof c&&(c=[c]),0===c.length)return;this.maybeSetNormalizedName(s.name,t);const g=("a"===s.op?this.headers.get(t):void 0)||[];g.push(...c),this.headers.set(t,g);break;case"d":const b=s.value;if(b){let B=this.headers.get(t);if(!B)return;B=B.filter(N=>-1===b.indexOf(N)),0===B.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,B)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(s){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>s(this.normalizedNames.get(t),this.headers.get(t)))}}class Q{encodeKey(s){return $(s)}encodeValue(s){return $(s)}decodeKey(s){return decodeURIComponent(s)}decodeValue(s){return decodeURIComponent(s)}}const ne=/%(\d[a-f0-9])/gi,J={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function $(a){return encodeURIComponent(a).replace(ne,(s,t)=>{var c;return null!==(c=J[t])&&void 0!==c?c:s})}function se(a){return`${a}`}class _e{constructor(s={}){if(this.updates=null,this.cloneFrom=null,this.encoder=s.encoder||new Q,s.fromString){if(s.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function j(a,s){const t=new Map;return a.length>0&&a.replace(/^\?/,"").split("&").forEach(g=>{const b=g.indexOf("="),[B,N]=-1==b?[s.decodeKey(g),""]:[s.decodeKey(g.slice(0,b)),s.decodeValue(g.slice(b+1))],te=t.get(B)||[];te.push(N),t.set(B,te)}),t}(s.fromString,this.encoder)}else s.fromObject?(this.map=new Map,Object.keys(s.fromObject).forEach(t=>{const c=s.fromObject[t];this.map.set(t,Array.isArray(c)?c:[c])})):this.map=null}has(s){return this.init(),this.map.has(s)}get(s){this.init();const t=this.map.get(s);return t?t[0]:null}getAll(s){return this.init(),this.map.get(s)||null}keys(){return this.init(),Array.from(this.map.keys())}append(s,t){return this.clone({param:s,value:t,op:"a"})}appendAll(s){const t=[];return Object.keys(s).forEach(c=>{const g=s[c];Array.isArray(g)?g.forEach(b=>{t.push({param:c,value:b,op:"a"})}):t.push({param:c,value:g,op:"a"})}),this.clone(t)}set(s,t){return this.clone({param:s,value:t,op:"s"})}delete(s,t){return this.clone({param:s,value:t,op:"d"})}toString(){return this.init(),this.keys().map(s=>{const t=this.encoder.encodeKey(s);return this.map.get(s).map(c=>t+"="+this.encoder.encodeValue(c)).join("&")}).filter(s=>""!==s).join("&")}clone(s){const t=new _e({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(s),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(s=>this.map.set(s,this.cloneFrom.map.get(s))),this.updates.forEach(s=>{switch(s.op){case"a":case"s":const t=("a"===s.op?this.map.get(s.param):void 0)||[];t.push(se(s.value)),this.map.set(s.param,t);break;case"d":if(void 0===s.value){this.map.delete(s.param);break}{let c=this.map.get(s.param)||[];const g=c.indexOf(se(s.value));-1!==g&&c.splice(g,1),c.length>0?this.map.set(s.param,c):this.map.delete(s.param)}}}),this.cloneFrom=this.updates=null)}}class ve{constructor(){this.map=new Map}set(s,t){return this.map.set(s,t),this}get(s){return this.map.has(s)||this.map.set(s,s.defaultValue()),this.map.get(s)}delete(s){return this.map.delete(s),this}has(s){return this.map.has(s)}keys(){return this.map.keys()}}function ie(a){return"undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer}function ge(a){return"undefined"!=typeof Blob&&a instanceof Blob}function Ee(a){return"undefined"!=typeof FormData&&a instanceof FormData}class Me{constructor(s,t,c,g){let b;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=s.toUpperCase(),function Le(a){switch(a){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||g?(this.body=void 0!==c?c:null,b=g):b=c,b&&(this.reportProgress=!!b.reportProgress,this.withCredentials=!!b.withCredentials,b.responseType&&(this.responseType=b.responseType),b.headers&&(this.headers=b.headers),b.context&&(this.context=b.context),b.params&&(this.params=b.params)),this.headers||(this.headers=new G),this.context||(this.context=new ve),this.params){const B=this.params.toString();if(0===B.length)this.urlWithParams=t;else{const N=t.indexOf("?");this.urlWithParams=t+(-1===N?"?":N<t.length-1?"&":"")+B}}else this.params=new _e,this.urlWithParams=t}serializeBody(){return null===this.body?null:ie(this.body)||ge(this.body)||Ee(this.body)||function Ze(a){return"undefined"!=typeof URLSearchParams&&a instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof _e?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ee(this.body)?null:ge(this.body)?this.body.type||null:ie(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof _e?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(s={}){var t;const c=s.method||this.method,g=s.url||this.url,b=s.responseType||this.responseType,B=void 0!==s.body?s.body:this.body,N=void 0!==s.withCredentials?s.withCredentials:this.withCredentials,te=void 0!==s.reportProgress?s.reportProgress:this.reportProgress;let he=s.headers||this.headers,we=s.params||this.params;const Re=null!==(t=s.context)&&void 0!==t?t:this.context;return void 0!==s.setHeaders&&(he=Object.keys(s.setHeaders).reduce((ti,Ft)=>ti.set(Ft,s.setHeaders[Ft]),he)),s.setParams&&(we=Object.keys(s.setParams).reduce((ti,Ft)=>ti.set(Ft,s.setParams[Ft]),we)),new Me(c,g,B,{params:we,headers:he,context:Re,reportProgress:te,responseType:b,withCredentials:N})}}var ze=(()=>((ze=ze||{})[ze.Sent=0]="Sent",ze[ze.UploadProgress=1]="UploadProgress",ze[ze.ResponseHeader=2]="ResponseHeader",ze[ze.DownloadProgress=3]="DownloadProgress",ze[ze.Response=4]="Response",ze[ze.User=5]="User",ze))();class Ge extends class Ve{constructor(s,t=200,c="OK"){this.headers=s.headers||new G,this.status=void 0!==s.status?s.status:t,this.statusText=s.statusText||c,this.url=s.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(s={}){super(s),this.type=ze.Response,this.body=void 0!==s.body?s.body:null}clone(s={}){return new Ge({body:void 0!==s.body?s.body:this.body,headers:s.headers||this.headers,status:void 0!==s.status?s.status:this.status,statusText:s.statusText||this.statusText,url:s.url||this.url||void 0})}}function Ye(a,s){return{body:s,headers:a.headers,context:a.context,observe:a.observe,params:a.params,reportProgress:a.reportProgress,responseType:a.responseType,withCredentials:a.withCredentials}}let lt=(()=>{class a{constructor(t){this.handler=t}request(t,c,g={}){let b;if(t instanceof Me)b=t;else{let te,he;te=g.headers instanceof G?g.headers:new G(g.headers),g.params&&(he=g.params instanceof _e?g.params:new _e({fromObject:g.params})),b=new Me(t,c,void 0!==g.body?g.body:null,{headers:te,context:g.context,params:he,reportProgress:g.reportProgress,responseType:g.responseType||"json",withCredentials:g.withCredentials})}const B=(0,vi.of)(b).pipe((0,H.b)(te=>this.handler.handle(te)));if(t instanceof Me||"events"===g.observe)return B;const N=B.pipe((0,Pi.h)(te=>te instanceof Ge));switch(g.observe||"body"){case"body":switch(b.responseType){case"arraybuffer":return N.pipe((0,ji.U)(te=>{if(null!==te.body&&!(te.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return te.body}));case"blob":return N.pipe((0,ji.U)(te=>{if(null!==te.body&&!(te.body instanceof Blob))throw new Error("Response is not a Blob.");return te.body}));case"text":return N.pipe((0,ji.U)(te=>{if(null!==te.body&&"string"!=typeof te.body)throw new Error("Response is not a string.");return te.body}));default:return N.pipe((0,ji.U)(te=>te.body))}case"response":return N;default:throw new Error(`Unreachable: unhandled observe type ${g.observe}}`)}}delete(t,c={}){return this.request("DELETE",t,c)}get(t,c={}){return this.request("GET",t,c)}head(t,c={}){return this.request("HEAD",t,c)}jsonp(t,c){return this.request("JSONP",t,{params:(new _e).append(c,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,c={}){return this.request("OPTIONS",t,c)}patch(t,c,g={}){return this.request("PATCH",t,Ye(g,c))}post(t,c,g={}){return this.request("POST",t,Ye(g,c))}put(t,c,g={}){return this.request("PUT",t,Ye(g,c))}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(U))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac}),a})();var vd=mt(2313);const hp=["*"];let ac;function Xs(a){var s;return(null===(s=function Hu(){if(void 0===ac&&(ac=null,"undefined"!=typeof window)){const a=window;void 0!==a.trustedTypes&&(ac=a.trustedTypes.createPolicy("angular#components",{createHTML:s=>s}))}return ac}())||void 0===s?void 0:s.createHTML(a))||a}function qu(a){return Error(`Unable to find icon with the name "${a}"`)}function Yu(a){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${a}".`)}function Qu(a){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${a}".`)}class ea{constructor(s,t,c){this.url=s,this.svgText=t,this.options=c}}let sc=(()=>{class a{constructor(t,c,g,b){this._httpClient=t,this._sanitizer=c,this._errorHandler=b,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=g}addSvgIcon(t,c,g){return this.addSvgIconInNamespace("",t,c,g)}addSvgIconLiteral(t,c,g){return this.addSvgIconLiteralInNamespace("",t,c,g)}addSvgIconInNamespace(t,c,g,b){return this._addSvgIconConfig(t,c,new ea(g,null,b))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,c,g,b){const B=this._sanitizer.sanitize(r.q3G.HTML,g);if(!B)throw Qu(g);const N=Xs(B);return this._addSvgIconConfig(t,c,new ea("",N,b))}addSvgIconSet(t,c){return this.addSvgIconSetInNamespace("",t,c)}addSvgIconSetLiteral(t,c){return this.addSvgIconSetLiteralInNamespace("",t,c)}addSvgIconSetInNamespace(t,c,g){return this._addSvgIconSetConfig(t,new ea(c,null,g))}addSvgIconSetLiteralInNamespace(t,c,g){const b=this._sanitizer.sanitize(r.q3G.HTML,c);if(!b)throw Qu(c);const B=Xs(b);return this._addSvgIconSetConfig(t,new ea("",B,g))}registerFontClassAlias(t,c=t){return this._fontCssClassesByAlias.set(t,c),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const c=this._sanitizer.sanitize(r.q3G.RESOURCE_URL,t);if(!c)throw Yu(t);const g=this._cachedIconsByUrl.get(c);return g?(0,vi.of)(lc(g)):this._loadSvgIconFromConfig(new ea(t,null)).pipe((0,Dn.b)(b=>this._cachedIconsByUrl.set(c,b)),(0,ji.U)(b=>lc(b)))}getNamedSvgIcon(t,c=""){const g=Wu(c,t);let b=this._svgIconConfigs.get(g);if(b)return this._getSvgFromConfig(b);if(b=this._getIconConfigFromResolvers(c,t),b)return this._svgIconConfigs.set(g,b),this._getSvgFromConfig(b);const B=this._iconSetConfigs.get(c);return B?this._getSvgFromIconSetConfigs(t,B):(0,v._)(qu(g))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?(0,vi.of)(lc(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,ji.U)(c=>lc(c)))}_getSvgFromIconSetConfigs(t,c){const g=this._extractIconWithNameFromAnySet(t,c);return g?(0,vi.of)(g):I(c.filter(B=>!B.svgText).map(B=>this._loadSvgIconSetFromConfig(B).pipe((0,L.K)(N=>{const he=`Loading icon set URL: ${this._sanitizer.sanitize(r.q3G.RESOURCE_URL,B.url)} failed: ${N.message}`;return this._errorHandler.handleError(new Error(he)),(0,vi.of)(null)})))).pipe((0,ji.U)(()=>{const B=this._extractIconWithNameFromAnySet(t,c);if(!B)throw qu(t);return B}))}_extractIconWithNameFromAnySet(t,c){for(let g=c.length-1;g>=0;g--){const b=c[g];if(b.svgText&&b.svgText.toString().indexOf(t)>-1){const B=this._svgElementFromConfig(b),N=this._extractSvgIconFromSet(B,t,b.options);if(N)return N}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,Dn.b)(c=>t.svgText=c),(0,ji.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?(0,vi.of)(null):this._fetchIcon(t).pipe((0,Dn.b)(c=>t.svgText=c))}_extractSvgIconFromSet(t,c,g){const b=t.querySelector(`[id="${c}"]`);if(!b)return null;const B=b.cloneNode(!0);if(B.removeAttribute("id"),"svg"===B.nodeName.toLowerCase())return this._setSvgAttributes(B,g);if("symbol"===B.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(B),g);const N=this._svgElementFromString(Xs("<svg></svg>"));return N.appendChild(B),this._setSvgAttributes(N,g)}_svgElementFromString(t){const c=this._document.createElement("DIV");c.innerHTML=t;const g=c.querySelector("svg");if(!g)throw Error("<svg> tag not found");return g}_toSvgElement(t){const c=this._svgElementFromString(Xs("<svg></svg>")),g=t.attributes;for(let b=0;b<g.length;b++){const{name:B,value:N}=g[b];"id"!==B&&c.setAttribute(B,N)}for(let b=0;b<t.childNodes.length;b++)t.childNodes[b].nodeType===this._document.ELEMENT_NODE&&c.appendChild(t.childNodes[b].cloneNode(!0));return c}_setSvgAttributes(t,c){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),c&&c.viewBox&&t.setAttribute("viewBox",c.viewBox),t}_fetchIcon(t){var c;const{url:g,options:b}=t,B=null!==(c=null==b?void 0:b.withCredentials)&&void 0!==c&&c;if(!this._httpClient)throw function pp(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==g)throw Error(`Cannot fetch icon from URL "${g}".`);const N=this._sanitizer.sanitize(r.q3G.RESOURCE_URL,g);if(!N)throw Yu(g);const te=this._inProgressUrlFetches.get(N);if(te)return te;const he=this._httpClient.get(N,{responseType:"text",withCredentials:B}).pipe((0,ji.U)(we=>Xs(we)),(0,V.x)(()=>this._inProgressUrlFetches.delete(N)),(0,Z.B)());return this._inProgressUrlFetches.set(N,he),he}_addSvgIconConfig(t,c,g){return this._svgIconConfigs.set(Wu(t,c),g),this}_addSvgIconSetConfig(t,c){const g=this._iconSetConfigs.get(t);return g?g.push(c):this._iconSetConfigs.set(t,[c]),this}_svgElementFromConfig(t){if(!t.svgElement){const c=this._svgElementFromString(t.svgText);this._setSvgAttributes(c,t.options),t.svgElement=c}return t.svgElement}_getIconConfigFromResolvers(t,c){for(let g=0;g<this._resolvers.length;g++){const b=this._resolvers[g](c,t);if(b)return mp(b)?new ea(b.url,null,b.options):new ea(b,null)}}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(lt,8),r.LFG(vd.H7),r.LFG($e.K0,8),r.LFG(r.qLn))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function lc(a){return a.cloneNode(!0)}function Wu(a,s){return a+":"+s}function mp(a){return!(!a.url||!a.options)}const am=mo(class{constructor(a){this._elementRef=a}}),sm=new r.OlP("mat-icon-location",{providedIn:"root",factory:function gp(){const a=(0,r.f3M)($e.K0),s=a?a.location:null;return{getPathname:()=>s?s.pathname+s.search:""}}}),_p=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],cc=_p.map(a=>`[${a}]`).join(", "),lm=/^url\(['"]?#(.*?)['"]?\)$/;let Js=(()=>{class a extends am{constructor(t,c,g,b,B){super(t),this._iconRegistry=c,this._location=b,this._errorHandler=B,this._inline=!1,this._currentIconFetch=Bi.w0.EMPTY,g||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Yt(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const c=this._cleanupFontValue(t);c!==this._fontSet&&(this._fontSet=c,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const c=this._cleanupFontValue(t);c!==this._fontIcon&&(this._fontIcon=c,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const c=t.split(":");switch(c.length){case 1:return["",c[0]];case 2:return c;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const c=this._location.getPathname();c!==this._previousPath&&(this._previousPath=c,this._prependPathToReferences(c))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const c=this._location.getPathname();this._previousPath=c,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(c),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let c=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();c--;){const g=t.childNodes[c];(1!==g.nodeType||"svg"===g.nodeName.toLowerCase())&&g.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,c=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();c!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),c&&t.classList.add(c),this._previousFontSetClass=c),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const c=this._elementsWithExternalReferences;c&&c.forEach((g,b)=>{g.forEach(B=>{b.setAttribute(B.name,`url('${t}#${B.value}')`)})})}_cacheChildrenWithExternalReferences(t){const c=t.querySelectorAll(cc),g=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let b=0;b<c.length;b++)_p.forEach(B=>{const N=c[b],te=N.getAttribute(B),he=te?te.match(lm):null;if(he){let we=g.get(N);we||(we=[],g.set(N,we)),we.push({name:B,value:he[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[c,g]=this._splitIconName(t);c&&(this._svgNamespace=c),g&&(this._svgName=g),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(g,c).pipe((0,zi.q)(1)).subscribe(b=>this._setSvgElement(b),b=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${c}:${g}! ${b.message}`))})}}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(sc),r.$8M("aria-hidden"),r.Y36(sm),r.Y36(r.qLn))},a.\u0275cmp=r.Xpm({type:a,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,c){2&t&&(r.uIk("data-mat-icon-type",c._usingFontIcon()?"font":"svg")("data-mat-icon-name",c._svgName||c.fontIcon)("data-mat-icon-namespace",c._svgNamespace||c.fontSet),r.ekj("mat-icon-inline",c.inline)("mat-icon-no-color","primary"!==c.color&&"accent"!==c.color&&"warn"!==c.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[r.qOj],ngContentSelectors:hp,decls:1,vars:0,template:function(t,c){1&t&&(r.F$t(),r.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),a})(),yp=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[ni],ni]}),a})();var $u=mt(2076);let Ks=(()=>{class a{constructor(t,c){this._renderer=t,this._elementRef=c,this.onChange=g=>{},this.onTouched=()=>{}}setProperty(t,c){this._renderer.setProperty(this._elementRef.nativeElement,t,c)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.Qsj),r.Y36(r.SBq))},a.\u0275dir=r.lG2({type:a}),a})(),ro=(()=>{class a extends Ks{}return a.\u0275fac=function(){let s;return function(c){return(s||(s=r.n5z(a)))(c||a)}}(),a.\u0275dir=r.lG2({type:a,features:[r.qOj]}),a})();const Vi=new r.OlP("NgValueAccessor"),Ao={provide:Vi,useExisting:(0,r.Gpc)(()=>Qo),multi:!0};let Qo=(()=>{class a extends ro{writeValue(t){this.setProperty("checked",t)}}return a.\u0275fac=function(){let s;return function(c){return(s||(s=r.n5z(a)))(c||a)}}(),a.\u0275dir=r.lG2({type:a,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,c){1&t&&r.NdJ("change",function(b){return c.onChange(b.target.checked)})("blur",function(){return c.onTouched()})},features:[r._Bn([Ao]),r.qOj]}),a})();const ia={provide:Vi,useExisting:(0,r.Gpc)(()=>eh),multi:!0},dm=new r.OlP("CompositionEventMode");let eh=(()=>{class a extends Ks{constructor(t,c,g){super(t,c),this._compositionMode=g,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ka(){const a=(0,$e.q)()?(0,$e.q)().getUserAgent():"";return/android (\d+)/.test(a.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(dm,8))},a.\u0275dir=r.lG2({type:a,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,c){1&t&&r.NdJ("input",function(b){return c._handleInput(b.target.value)})("blur",function(){return c.onTouched()})("compositionstart",function(){return c._compositionStart()})("compositionend",function(b){return c._compositionEnd(b.target.value)})},features:[r._Bn([ia]),r.qOj]}),a})();const tn=new r.OlP("NgValidators"),bo=new r.OlP("NgAsyncValidators");function oa(a){return null!=a}function Zn(a){const s=(0,r.QGY)(a)?(0,$u.D)(a):a;return(0,r.CqO)(s),s}function nn(a){let s={};return a.forEach(t=>{s=null!=t?Object.assign(Object.assign({},s),t):s}),0===Object.keys(s).length?null:s}function Ti(a,s){return s.map(t=>t(a))}function Co(a){return a.map(s=>function bp(a){return!a.validate}(s)?s:t=>s.validate(t))}function dc(a){return null!=a?function $a(a){if(!a)return null;const s=a.filter(oa);return 0==s.length?null:function(t){return nn(Ti(t,s))}}(Co(a)):null}function uc(a){return null!=a?function ih(a){if(!a)return null;const s=a.filter(oa);return 0==s.length?null:function(t){return I(Ti(t,s).map(Zn)).pipe((0,ji.U)(nn))}}(Co(a)):null}function wp(a,s){return null===a?[s]:Array.isArray(a)?[...a,s]:[a,s]}function oh(a){return a?Array.isArray(a)?a:[a]:[]}function ao(a,s){return Array.isArray(a)?a.includes(s):a===s}function ra(a,s){const t=oh(s);return oh(a).forEach(g=>{ao(t,g)||t.push(g)}),t}function hc(a,s){return oh(s).filter(t=>!ao(a,t))}class pc{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(s){this._rawValidators=s||[],this._composedValidatorFn=dc(this._rawValidators)}_setAsyncValidators(s){this._rawAsyncValidators=s||[],this._composedAsyncValidatorFn=uc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(s){this._onDestroyCallbacks.push(s)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(s=>s()),this._onDestroyCallbacks=[]}reset(s){this.control&&this.control.reset(s)}hasError(s,t){return!!this.control&&this.control.hasError(s,t)}getError(s,t){return this.control?this.control.getError(s,t):null}}class Xo extends pc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class cn extends pc{get formDirective(){return null}get path(){return null}}let Cd=(()=>{class a extends class Cp{constructor(s){this._cd=s}is(s){var t,c,g;return"submitted"===s?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(g=null===(c=this._cd)||void 0===c?void 0:c.control)||void 0===g?void 0:g[s])}}{constructor(t){super(t)}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(Xo,2))},a.\u0275dir=r.lG2({type:a,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,c){2&t&&r.ekj("ng-untouched",c.is("untouched"))("ng-touched",c.is("touched"))("ng-pristine",c.is("pristine"))("ng-dirty",c.is("dirty"))("ng-valid",c.is("valid"))("ng-invalid",c.is("invalid"))("ng-pending",c.is("pending"))},features:[r.qOj]}),a})();function To(a,s){(function Td(a,s){const t=function wd(a){return a._rawValidators}(a);null!==s.validator?a.setValidators(wp(t,s.validator)):"function"==typeof t&&a.setValidators([t]);const c=function nh(a){return a._rawAsyncValidators}(a);null!==s.asyncValidator?a.setAsyncValidators(wp(c,s.asyncValidator)):"function"==typeof c&&a.setAsyncValidators([c]);const g=()=>a.updateValueAndValidity();es(s._rawValidators,g),es(s._rawAsyncValidators,g)})(a,s),s.valueAccessor.writeValue(a.value),function ah(a,s){s.valueAccessor.registerOnChange(t=>{a._pendingValue=t,a._pendingChange=!0,a._pendingDirty=!0,"change"===a.updateOn&&$s(a,s)})}(a,s),function el(a,s){const t=(c,g)=>{s.valueAccessor.writeValue(c),g&&s.viewToModelUpdate(c)};a.registerOnChange(t),s._registerOnDestroy(()=>{a._unregisterOnChange(t)})}(a,s),function Sp(a,s){s.valueAccessor.registerOnTouched(()=>{a._pendingTouched=!0,"blur"===a.updateOn&&a._pendingChange&&$s(a,s),"submit"!==a.updateOn&&a.markAsTouched()})}(a,s),function Md(a,s){if(s.valueAccessor.setDisabledState){const t=c=>{s.valueAccessor.setDisabledState(c)};a.registerOnDisabledChange(t),s._registerOnDestroy(()=>{a._unregisterOnDisabledChange(t)})}}(a,s)}function es(a,s){a.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(s)})}function $s(a,s){a._pendingDirty&&a.markAsDirty(),a.setValue(a._pendingValue,{emitModelToViewChange:!1}),s.viewToModelUpdate(a._pendingValue),a._pendingChange=!1}function Ii(a,s){const t=a.indexOf(s);t>-1&&a.splice(t,1)}const un="VALID",Dd="INVALID",il="PENDING",nl="DISABLED";function Bd(a){return(ol(a)?a.validators:a)||null}function lh(a){return Array.isArray(a)?dc(a):a||null}function kd(a,s){return(ol(s)?s.asyncValidators:a)||null}function ch(a){return Array.isArray(a)?uc(a):a||null}function ol(a){return null!=a&&!Array.isArray(a)&&"object"==typeof a}const vc=a=>a instanceof Id;function dh(a){return(a=>a instanceof Bp)(a)?a.value:a.getRawValue()}function Dp(a,s){const t=vc(a),c=a.controls;if(!(t?Object.keys(c):c).length)throw new r.vHH(1e3,"");if(!c[s])throw new r.vHH(1001,"")}function uh(a,s){vc(a),a._forEachChild((c,g)=>{if(void 0===s[g])throw new r.vHH(1002,"")})}class hh{constructor(s,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=s,this._rawAsyncValidators=t,this._composedValidatorFn=lh(this._rawValidators),this._composedAsyncValidatorFn=ch(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(s){this._rawValidators=this._composedValidatorFn=s}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(s){this._rawAsyncValidators=this._composedAsyncValidatorFn=s}get parent(){return this._parent}get valid(){return this.status===un}get invalid(){return this.status===Dd}get pending(){return this.status==il}get disabled(){return this.status===nl}get enabled(){return this.status!==nl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(s){this._rawValidators=s,this._composedValidatorFn=lh(s)}setAsyncValidators(s){this._rawAsyncValidators=s,this._composedAsyncValidatorFn=ch(s)}addValidators(s){this.setValidators(ra(s,this._rawValidators))}addAsyncValidators(s){this.setAsyncValidators(ra(s,this._rawAsyncValidators))}removeValidators(s){this.setValidators(hc(s,this._rawValidators))}removeAsyncValidators(s){this.setAsyncValidators(hc(s,this._rawAsyncValidators))}hasValidator(s){return ao(this._rawValidators,s)}hasAsyncValidator(s){return ao(this._rawAsyncValidators,s)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(s={}){this.touched=!0,this._parent&&!s.onlySelf&&this._parent.markAsTouched(s)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(s=>s.markAllAsTouched())}markAsUntouched(s={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!s.onlySelf&&this._parent._updateTouched(s)}markAsDirty(s={}){this.pristine=!1,this._parent&&!s.onlySelf&&this._parent.markAsDirty(s)}markAsPristine(s={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!s.onlySelf&&this._parent._updatePristine(s)}markAsPending(s={}){this.status=il,!1!==s.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!s.onlySelf&&this._parent.markAsPending(s)}disable(s={}){const t=this._parentMarkedDirty(s.onlySelf);this.status=nl,this.errors=null,this._forEachChild(c=>{c.disable(Object.assign(Object.assign({},s),{onlySelf:!0}))}),this._updateValue(),!1!==s.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},s),{skipPristineCheck:t})),this._onDisabledChange.forEach(c=>c(!0))}enable(s={}){const t=this._parentMarkedDirty(s.onlySelf);this.status=un,this._forEachChild(c=>{c.enable(Object.assign(Object.assign({},s),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:s.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},s),{skipPristineCheck:t})),this._onDisabledChange.forEach(c=>c(!1))}_updateAncestors(s){this._parent&&!s.onlySelf&&(this._parent.updateValueAndValidity(s),s.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(s){this._parent=s}updateValueAndValidity(s={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===un||this.status===il)&&this._runAsyncValidator(s.emitEvent)),!1!==s.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!s.onlySelf&&this._parent.updateValueAndValidity(s)}_updateTreeValidity(s={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(s)),this.updateValueAndValidity({onlySelf:!0,emitEvent:s.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nl:un}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(s){if(this.asyncValidator){this.status=il,this._hasOwnPendingAsyncValidator=!0;const t=Zn(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(c=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(c,{emitEvent:s})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(s,t={}){this.errors=s,this._updateControlsErrors(!1!==t.emitEvent)}get(s){return function is(a,s,t){if(null==s||(Array.isArray(s)||(s=s.split(t)),Array.isArray(s)&&0===s.length))return null;let c=a;return s.forEach(g=>{c=vc(c)?c.controls.hasOwnProperty(g)?c.controls[g]:null:(a=>a instanceof kp)(c)&&c.at(g)||null}),c}(this,s,".")}getError(s,t){const c=t?this.get(t):this;return c&&c.errors?c.errors[s]:null}hasError(s,t){return!!this.getError(s,t)}get root(){let s=this;for(;s._parent;)s=s._parent;return s}_updateControlsErrors(s){this.status=this._calculateStatus(),s&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(s)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?nl:this.errors?Dd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(il)?il:this._anyControlsHaveStatus(Dd)?Dd:un}_anyControlsHaveStatus(s){return this._anyControls(t=>t.status===s)}_anyControlsDirty(){return this._anyControls(s=>s.dirty)}_anyControlsTouched(){return this._anyControls(s=>s.touched)}_updatePristine(s={}){this.pristine=!this._anyControlsDirty(),this._parent&&!s.onlySelf&&this._parent._updatePristine(s)}_updateTouched(s={}){this.touched=this._anyControlsTouched(),this._parent&&!s.onlySelf&&this._parent._updateTouched(s)}_isBoxedValue(s){return"object"==typeof s&&null!==s&&2===Object.keys(s).length&&"value"in s&&"disabled"in s}_registerOnCollectionChange(s){this._onCollectionChange=s}_setUpdateStrategy(s){ol(s)&&null!=s.updateOn&&(this._updateOn=s.updateOn)}_parentMarkedDirty(s){return!s&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Bp extends hh{constructor(s=null,t,c){super(Bd(t),kd(c,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(s),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ol(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(s)?s.value:s)}setValue(s,t={}){this.value=this._pendingValue=s,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(c=>c(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(s,t={}){this.setValue(s,t)}reset(s=this.defaultValue,t={}){this._applyFormState(s),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(s){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(s){this._onChange.push(s)}_unregisterOnChange(s){Ii(this._onChange,s)}registerOnDisabledChange(s){this._onDisabledChange.push(s)}_unregisterOnDisabledChange(s){Ii(this._onDisabledChange,s)}_forEachChild(s){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(s){this._isBoxedValue(s)?(this.value=this._pendingValue=s.value,s.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=s}}class Id extends hh{constructor(s,t,c){super(Bd(t),kd(c,t)),this.controls=s,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(s,t){return this.controls[s]?this.controls[s]:(this.controls[s]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(s,t,c={}){this.registerControl(s,t),this.updateValueAndValidity({emitEvent:c.emitEvent}),this._onCollectionChange()}removeControl(s,t={}){this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),delete this.controls[s],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(s,t,c={}){this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),delete this.controls[s],t&&this.registerControl(s,t),this.updateValueAndValidity({emitEvent:c.emitEvent}),this._onCollectionChange()}contains(s){return this.controls.hasOwnProperty(s)&&this.controls[s].enabled}setValue(s,t={}){uh(this,s),Object.keys(s).forEach(c=>{Dp(this,c),this.controls[c].setValue(s[c],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(s,t={}){null!=s&&(Object.keys(s).forEach(c=>{this.controls[c]&&this.controls[c].patchValue(s[c],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(s={},t={}){this._forEachChild((c,g)=>{c.reset(s[g],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(s,t,c)=>(s[c]=dh(t),s))}_syncPendingControls(){let s=this._reduceChildren(!1,(t,c)=>!!c._syncPendingControls()||t);return s&&this.updateValueAndValidity({onlySelf:!0}),s}_forEachChild(s){Object.keys(this.controls).forEach(t=>{const c=this.controls[t];c&&s(c,t)})}_setUpControls(){this._forEachChild(s=>{s.setParent(this),s._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(s){for(const t of Object.keys(this.controls)){const c=this.controls[t];if(this.contains(t)&&s(c))return!0}return!1}_reduceValue(){return this._reduceChildren({},(s,t,c)=>((t.enabled||this.disabled)&&(s[c]=t.value),s))}_reduceChildren(s,t){let c=s;return this._forEachChild((g,b)=>{c=t(c,g,b)}),c}_allControlsDisabled(){for(const s of Object.keys(this.controls))if(this.controls[s].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class kp extends hh{constructor(s,t,c){super(Bd(t),kd(c,t)),this.controls=s,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(s){return this.controls[s]}push(s,t={}){this.controls.push(s),this._registerControl(s),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(s,t,c={}){this.controls.splice(s,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:c.emitEvent})}removeAt(s,t={}){this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(s,t,c={}){this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),t&&(this.controls.splice(s,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:c.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(s,t={}){uh(this,s),s.forEach((c,g)=>{Dp(this,g),this.at(g).setValue(c,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(s,t={}){null!=s&&(s.forEach((c,g)=>{this.at(g)&&this.at(g).patchValue(c,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(s=[],t={}){this._forEachChild((c,g)=>{c.reset(s[g],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(s=>dh(s))}clear(s={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:s.emitEvent}))}_syncPendingControls(){let s=this.controls.reduce((t,c)=>!!c._syncPendingControls()||t,!1);return s&&this.updateValueAndValidity({onlySelf:!0}),s}_forEachChild(s){this.controls.forEach((t,c)=>{s(t,c)})}_updateValue(){this.value=this.controls.filter(s=>s.enabled||this.disabled).map(s=>s.value)}_anyControls(s){return this.controls.some(t=>t.enabled&&s(t))}_setUpControls(){this._forEachChild(s=>this._registerControl(s))}_allControlsDisabled(){for(const s of this.controls)if(s.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(s){s.setParent(this),s._registerOnCollectionChange(this._onCollectionChange)}}const xm={provide:Xo,useExisting:(0,r.Gpc)(()=>Fd)},bc=(()=>Promise.resolve(null))();let Fd=(()=>{class a extends Xo{constructor(t,c,g,b,B){super(),this._changeDetectorRef=B,this.control=new Bp,this._registered=!1,this.update=new r.vpe,this._parent=t,this._setValidators(c),this._setAsyncValidators(g),this.valueAccessor=function xc(a,s){if(!s)return null;let t,c,g;return Array.isArray(s),s.forEach(b=>{b.constructor===eh?t=b:function dn(a){return Object.getPrototypeOf(a.constructor)===ro}(b)?c=b:g=b}),g||c||t||null}(0,b)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const c=t.name.previousValue;this.formDirective.removeControl({name:c,path:this._getPath(c)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function tl(a,s){if(!a.hasOwnProperty("model"))return!1;const t=a.model;return!!t.isFirstChange()||!Object.is(s,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){To(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){bc.then(()=>{var c;this.control.setValue(t,{emitViewToModelChange:!1}),null===(c=this._changeDetectorRef)||void 0===c||c.markForCheck()})}_updateDisabled(t){const c=t.isDisabled.currentValue,g=""===c||c&&"false"!==c;bc.then(()=>{var b;g&&!this.control.disabled?this.control.disable():!g&&this.control.disabled&&this.control.enable(),null===(b=this._changeDetectorRef)||void 0===b||b.markForCheck()})}_getPath(t){return this._parent?function Mo(a,s){return[...s.path,a]}(t,this._parent):[t]}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(cn,9),r.Y36(tn,10),r.Y36(bo,10),r.Y36(Vi,10),r.Y36(r.sBO,8))},a.\u0275dir=r.lG2({type:a,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([xm]),r.qOj,r.TTD]}),a})(),Lp=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({}),a})();const fh={provide:Vi,useExisting:(0,r.Gpc)(()=>zd),multi:!0};function Od(a,s){return null==a?`${s}`:(s&&"object"==typeof s&&(s="Object"),`${a}: ${s}`.slice(0,50))}let zd=(()=>{class a extends ro{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const g=Od(this._getOptionId(t),t);this.setProperty("value",g)}registerOnChange(t){this.onChange=c=>{this.value=this._getOptionValue(c),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const c of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(c),t))return c;return null}_getOptionValue(t){const c=function wm(a){return a.split(":")[0]}(t);return this._optionMap.has(c)?this._optionMap.get(c):t}}return a.\u0275fac=function(){let s;return function(c){return(s||(s=r.n5z(a)))(c||a)}}(),a.\u0275dir=r.lG2({type:a,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,c){1&t&&r.NdJ("change",function(b){return c.onChange(b.target.value)})("blur",function(){return c.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([fh]),r.qOj]}),a})(),cl=(()=>{class a{constructor(t,c,g){this._element=t,this._renderer=c,this._select=g,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Od(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(zd,9))},a.\u0275dir=r.lG2({type:a,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),a})();const Cm={provide:Vi,useExisting:(0,r.Gpc)(()=>Cc),multi:!0};function Vd(a,s){return null==a?`${s}`:("string"==typeof s&&(s=`'${s}'`),s&&"object"==typeof s&&(s="Object"),`${a}: ${s}`.slice(0,50))}let Cc=(()=>{class a extends ro{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let c;if(this.value=t,Array.isArray(t)){const g=t.map(b=>this._getOptionId(b));c=(b,B)=>{b._setSelected(g.indexOf(B.toString())>-1)}}else c=(g,b)=>{g._setSelected(!1)};this._optionMap.forEach(c)}registerOnChange(t){this.onChange=c=>{const g=[],b=c.selectedOptions;if(void 0!==b){const B=b;for(let N=0;N<B.length;N++){const he=this._getOptionValue(B[N].value);g.push(he)}}else{const B=c.options;for(let N=0;N<B.length;N++){const te=B[N];if(te.selected){const he=this._getOptionValue(te.value);g.push(he)}}}this.value=g,t(g)}}_registerOption(t){const c=(this._idCounter++).toString();return this._optionMap.set(c,t),c}_getOptionId(t){for(const c of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(c)._value,t))return c;return null}_getOptionValue(t){const c=function Mm(a){return a.split(":")[0]}(t);return this._optionMap.has(c)?this._optionMap.get(c)._value:t}}return a.\u0275fac=function(){let s;return function(c){return(s||(s=r.n5z(a)))(c||a)}}(),a.\u0275dir=r.lG2({type:a,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,c){1&t&&r.NdJ("change",function(b){return c.onChange(b.target)})("blur",function(){return c.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Cm]),r.qOj]}),a})(),Mc=(()=>{class a{constructor(t,c,g){this._element=t,this._renderer=c,this._select=g,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Vd(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Vd(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Cc,9))},a.\u0275dir=r.lG2({type:a,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),a})(),Qp=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[Lp]]}),a})(),gh=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[Qp]}),a})();const Hi=["*"],Sc=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],Wp=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],Jp=Ho(go(class{})),Om=go(class{}),Kp=new r.OlP("MatList"),$p=new r.OlP("MatNavList");let Zd=(()=>{class a extends Jp{constructor(){super(...arguments),this._stateChanges=new wt.x}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return a.\u0275fac=function(){let s;return function(c){return(s||(s=r.n5z(a)))(c||a)}}(),a.\u0275cmp=r.Xpm({type:a,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[r._Bn([{provide:$p,useExisting:a}]),r.qOj,r.TTD],ngContentSelectors:Hi,decls:1,vars:0,template:function(t,c){1&t&&(r.F$t(),r.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),a})(),yh=(()=>{class a extends Jp{constructor(t){super(),this._elementRef=t,this._stateChanges=new wt.x,"action-list"===this._getListType()&&t.nativeElement.classList.add("mat-action-list")}_getListType(){const t=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===t?"list":"mat-action-list"===t?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq))},a.\u0275cmp=r.Xpm({type:a,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[r._Bn([{provide:Kp,useExisting:a}]),r.qOj,r.TTD],ngContentSelectors:Hi,decls:1,vars:0,template:function(t,c){1&t&&(r.F$t(),r.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),a})(),xh=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275dir=r.lG2({type:a,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),a})(),Dc=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275dir=r.lG2({type:a,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),a})(),jd=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275dir=r.lG2({type:a,selectors:[["","mat-subheader",""],["","matSubheader",""]],hostAttrs:[1,"mat-subheader"]}),a})(),Hd=(()=>{class a extends Om{constructor(t,c,g,b){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new wt.x,this._disabled=!1,this._isInteractiveList=!!(g||b&&"action-list"===b._getListType()),this._list=g||b;const B=this._getHostElement();"button"===B.nodeName.toLowerCase()&&!B.hasAttribute("type")&&B.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(Ut(this._destroyed)).subscribe(()=>{c.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(t){this._disabled=Yt(t)}ngAfterContentInit(){!function js(a,s,t="mat"){a.changes.pipe((0,no.O)(a)).subscribe(({length:c})=>{Qr(s,`${t}-2-line`,!1),Qr(s,`${t}-3-line`,!1),Qr(s,`${t}-multi-line`,!1),2===c||3===c?Qr(s,`${t}-${c}-line`,!0):c>3&&Qr(s,`${t}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(r.sBO),r.Y36($p,8),r.Y36(Kp,8))},a.\u0275cmp=r.Xpm({type:a,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(t,c,g){if(1&t&&(r.Suo(g,xh,5),r.Suo(g,Dc,5),r.Suo(g,pr,5)),2&t){let b;r.iGM(b=r.CRH())&&(c._avatar=b.first),r.iGM(b=r.CRH())&&(c._icon=b.first),r.iGM(b=r.CRH())&&(c._lines=b)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(t,c){2&t&&r.ekj("mat-list-item-disabled",c.disabled)("mat-list-item-avatar",c._avatar||c._icon)("mat-list-item-with-avatar",c._avatar||c._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[r.qOj],ngContentSelectors:Wp,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(t,c){1&t&&(r.F$t(Sc),r.TgZ(0,"span",0),r._UZ(1,"span",1),r.Hsn(2),r.TgZ(3,"span",2),r.Hsn(4,1),r.qZA(),r.Hsn(5,2),r.qZA()),2&t&&(r.xp6(1),r.Q6J("matRippleTrigger",c._getHostElement())("matRippleDisabled",c._isRippleDisabled()))},directives:[ui],encapsulation:2,changeDetection:0}),a})(),qi=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[Za,qa,ni,Kl,$e.ez],Za,ni,Kl,y]}),a})();var Yi=mt(6451);let hl,vh=1;const xr={};function nf(a){return a in xr&&(delete xr[a],!0)}const Gm={setImmediate(a){const s=vh++;return xr[s]=!0,hl||(hl=Promise.resolve()),hl.then(()=>nf(s)&&a()),s},clearImmediate(a){nf(a)}},{setImmediate:Zm,clearImmediate:jm}=Gm,Bc={setImmediate(...a){const{delegate:s}=Bc;return((null==s?void 0:s.setImmediate)||Zm)(...a)},clearImmediate(a){const{delegate:s}=Bc;return((null==s?void 0:s.clearImmediate)||jm)(a)},delegate:void 0},Qt=new class kc extends lr{flush(s){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:c}=this;let g;s=s||c.shift();do{if(g=s.execute(s.state,s.delay))break}while((s=c[0])&&s.id===t&&c.shift());if(this._active=!1,g){for(;(s=c[0])&&s.id===t&&c.shift();)s.unsubscribe();throw g}}}(class rf extends Rl{constructor(s,t){super(s,t),this.scheduler=s,this.work=t}requestAsyncId(s,t,c=0){return null!==c&&c>0?super.requestAsyncId(s,t,c):(s.actions.push(this),s._scheduled||(s._scheduled=Bc.setImmediate(s.flush.bind(s,void 0))))}recycleAsyncId(s,t,c=0){if(null!=c&&c>0||null==c&&this.delay>0)return super.recycleAsyncId(s,t,c);s.actions.some(g=>g.id===t)||(Bc.clearImmediate(t),s._scheduled=void 0)}});var Yd=mt(3900),sf=mt(7272);function sa(a){return(0,ji.U)(()=>a)}var Ah=mt(5577);function lf(a,s){return s?t=>(0,sf.z)(s.pipe((0,zi.q)(1),function vr(){return(0,Sa.e)((a,s)=>{a.subscribe((0,fo.x)(s,Rt.Z))})}()),t.pipe(lf(a))):(0,Ah.z)((t,c)=>a(t,c).pipe((0,zi.q)(1),sa(t)))}var Hm=mt(3532);function bh(a=0,s,t=Qc){let c=-1;return null!=s&&((0,Hm.K)(s)?t=s:c=s),new Bn.y(g=>{let b=function qm(a){return a instanceof Date&&!isNaN(a)}(a)?+a-t.now():a;b<0&&(b=0);let B=0;return t.schedule(function(){g.closed||(g.next(B++),0<=c?this.schedule(void 0,c):g.complete())},b)})}function cf(a,s=Ds){const t=bh(a,s);return lf(()=>t)}var It=mt(1777);class Ch{attach(s){return this._attachedHost=s,s.attach(this)}detach(){let s=this._attachedHost;null!=s&&(this._attachedHost=null,s.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(s){this._attachedHost=s}}class Qm extends Ch{constructor(s,t,c,g){super(),this.component=s,this.viewContainerRef=t,this.injector=c,this.componentFactoryResolver=g}}class df extends Ch{constructor(s,t,c){super(),this.templateRef=s,this.viewContainerRef=t,this.context=c}get origin(){return this.templateRef.elementRef}attach(s,t=this.context){return this.context=t,super.attach(s)}detach(){return this.context=void 0,super.detach()}}class Mh extends Ch{constructor(s){super(),this.element=s instanceof r.SBq?s.nativeElement:s}}class Yn extends class Th{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(s){return s instanceof Qm?(this._attachedPortal=s,this.attachComponentPortal(s)):s instanceof df?(this._attachedPortal=s,this.attachTemplatePortal(s)):this.attachDomPortal&&s instanceof Mh?(this._attachedPortal=s,this.attachDomPortal(s)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(s){this._disposeFn=s}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(s,t,c,g,b){super(),this.outletElement=s,this._componentFactoryResolver=t,this._appRef=c,this._defaultInjector=g,this.attachDomPortal=B=>{const N=B.element,te=this._document.createComment("dom-portal");N.parentNode.insertBefore(te,N),this.outletElement.appendChild(N),this._attachedPortal=B,super.setDisposeFn(()=>{te.parentNode&&te.parentNode.replaceChild(N,te)})},this._document=b}attachComponentPortal(s){const c=(s.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(s.component);let g;return s.viewContainerRef?(g=s.viewContainerRef.createComponent(c,s.viewContainerRef.length,s.injector||s.viewContainerRef.injector),this.setDisposeFn(()=>g.destroy())):(g=c.create(s.injector||this._defaultInjector||r.zs3.NULL),this._appRef.attachView(g.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(g.hostView),g.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(g)),this._attachedPortal=s,g}attachTemplatePortal(s){let t=s.viewContainerRef,c=t.createEmbeddedView(s.templateRef,s.context);return c.rootNodes.forEach(g=>this.outletElement.appendChild(g)),c.detectChanges(),this.setDisposeFn(()=>{let g=t.indexOf(c);-1!==g&&t.remove(g)}),this._attachedPortal=s,c}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(s){return s.hostView.rootNodes[0]}}let Sh=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({}),a})();var Jm=mt(1144),la=mt(576);const hf=["addListener","removeListener"],Dh=["addEventListener","removeEventListener"],Bh=["on","off"];function Ar(a,s,t,c){if((0,la.m)(t)&&(c=t,t=void 0),c)return Ar(a,s,t).pipe((0,E.Z)(c));const[g,b]=function mf(a){return(0,la.m)(a.addEventListener)&&(0,la.m)(a.removeEventListener)}(a)?Dh.map(B=>N=>a[B](s,N,t)):function ff(a){return(0,la.m)(a.addListener)&&(0,la.m)(a.removeListener)}(a)?hf.map(pf(a,s)):function br(a){return(0,la.m)(a.on)&&(0,la.m)(a.off)}(a)?Bh.map(pf(a,s)):[];if(!g&&(0,Jm.z)(a))return(0,Ah.z)(B=>Ar(B,s,t))((0,dr.Xf)(a));if(!g)throw new TypeError("Invalid event target");return new Bn.y(B=>{const N=(...te)=>B.next(1<te.length?te:te[0]);return g(N),()=>b(N)})}function pf(a,s){return t=>c=>a[t](s,c)}const pl={schedule(a){let s=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:c}=pl;c&&(s=c.requestAnimationFrame,t=c.cancelAnimationFrame);const g=s(b=>{t=void 0,a(b)});return new Bi.w0(()=>null==t?void 0:t(g))},requestAnimationFrame(...a){const{delegate:s}=pl;return((null==s?void 0:s.requestAnimationFrame)||requestAnimationFrame)(...a)},cancelAnimationFrame(...a){const{delegate:s}=pl;return((null==s?void 0:s.cancelAnimationFrame)||cancelAnimationFrame)(...a)},delegate:void 0};new class _f extends lr{flush(s){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:c}=this;let g;s=s||c.shift();do{if(g=s.execute(s.state,s.delay))break}while((s=c[0])&&s.id===t&&c.shift());if(this._active=!1,g){for(;(s=c[0])&&s.id===t&&c.shift();)s.unsubscribe();throw g}}}(class gf extends Rl{constructor(s,t){super(s,t),this.scheduler=s,this.work=t}requestAsyncId(s,t,c=0){return null!==c&&c>0?super.requestAsyncId(s,t,c):(s.actions.push(this),s._scheduled||(s._scheduled=pl.requestAnimationFrame(()=>s.flush(void 0))))}recycleAsyncId(s,t,c=0){if(null!=c&&c>0||null==c&&this.delay>0)return super.recycleAsyncId(s,t,c);s.actions.some(g=>g.id===t)||(pl.cancelAnimationFrame(t),s._scheduled=void 0)}});function kh(a,s=Ds){return function yf(a){return(0,Sa.e)((s,t)=>{let c=!1,g=null,b=null,B=!1;const N=()=>{if(null==b||b.unsubscribe(),b=null,c){c=!1;const he=g;g=null,t.next(he)}B&&t.complete()},te=()=>{b=null,B&&t.complete()};s.subscribe((0,fo.x)(t,he=>{c=!0,g=he,b||(0,dr.Xf)(a(he)).subscribe(b=(0,fo.x)(t,N,te))},()=>{B=!0,(!c||!b||b.closed)&&t.complete()}))})}(()=>bh(a,s))}let Lc=(()=>{class a{constructor(t,c,g){this._ngZone=t,this._platform=c,this._scrolled=new wt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=g}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const c=this.scrollContainers.get(t);c&&(c.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Bn.y(c=>{this._globalSubscription||this._addGlobalListener();const g=t>0?this._scrolled.pipe(kh(t)).subscribe(c):this._scrolled.subscribe(c);return this._scrolledCount++,()=>{g.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,vi.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,c)=>this.deregister(c)),this._scrolled.complete()}ancestorScrolled(t,c){const g=this.getAncestorScrollContainers(t);return this.scrolled(c).pipe((0,Pi.h)(b=>!b||g.indexOf(b)>-1))}getAncestorScrollContainers(t){const c=[];return this.scrollContainers.forEach((g,b)=>{this._scrollableContainsElement(b,t)&&c.push(b)}),c}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,c){let g=io(c),b=t.getElementRef().nativeElement;do{if(g==b)return!0}while(g=g.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Ar(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(r.R0b),r.LFG(st),r.LFG($e.K0,8))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),ca=(()=>{class a{constructor(t,c,g,b){this.elementRef=t,this.scrollDispatcher=c,this.ngZone=g,this.dir=b,this._destroyed=new wt.x,this._elementScrolled=new Bn.y(B=>this.ngZone.runOutsideAngular(()=>Ar(this.elementRef.nativeElement,"scroll").pipe(Ut(this._destroyed)).subscribe(B)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const c=this.elementRef.nativeElement,g=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=g?t.end:t.start),null==t.right&&(t.right=g?t.start:t.end),null!=t.bottom&&(t.top=c.scrollHeight-c.clientHeight-t.bottom),g&&0!=fi()?(null!=t.left&&(t.right=c.scrollWidth-c.clientWidth-t.left),2==fi()?t.left=t.right:1==fi()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=c.scrollWidth-c.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const c=this.elementRef.nativeElement;ir()?c.scrollTo(t):(null!=t.top&&(c.scrollTop=t.top),null!=t.left&&(c.scrollLeft=t.left))}measureScrollOffset(t){const c="left",g="right",b=this.elementRef.nativeElement;if("top"==t)return b.scrollTop;if("bottom"==t)return b.scrollHeight-b.clientHeight-b.scrollTop;const B=this.dir&&"rtl"==this.dir.value;return"start"==t?t=B?g:c:"end"==t&&(t=B?c:g),B&&2==fi()?t==c?b.scrollWidth-b.clientWidth-b.scrollLeft:b.scrollLeft:B&&1==fi()?t==c?b.scrollLeft+b.scrollWidth-b.clientWidth:-b.scrollLeft:t==c?b.scrollLeft:b.scrollWidth-b.clientWidth-b.scrollLeft}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(Lc),r.Y36(r.R0b),r.Y36(Ci,8))},a.\u0275dir=r.lG2({type:a,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),a})(),fl=(()=>{class a{constructor(t,c,g){this._platform=t,this._change=new wt.x,this._changeListener=b=>{this._change.next(b)},this._document=g,c.runOutsideAngular(()=>{if(t.isBrowser){const b=this._getWindow();b.addEventListener("resize",this._changeListener),b.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:c,height:g}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+g,right:t.left+c,height:g,width:c}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,c=this._getWindow(),g=t.documentElement,b=g.getBoundingClientRect();return{top:-b.top||t.body.scrollTop||c.scrollY||g.scrollTop||0,left:-b.left||t.body.scrollLeft||c.scrollX||g.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(kh(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(st),r.LFG(r.R0b),r.LFG($e.K0,8))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),ls=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({}),a})(),vf=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[gt,ls],gt,ls]}),a})();const Ph=ir();class ig{constructor(s,t){this._viewportRuler=s,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const s=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=s.style.left||"",this._previousHTMLStyles.top=s.style.top||"",s.style.left=gi(-this._previousScrollPosition.left),s.style.top=gi(-this._previousScrollPosition.top),s.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const s=this._document.documentElement,c=s.style,g=this._document.body.style,b=c.scrollBehavior||"",B=g.scrollBehavior||"";this._isEnabled=!1,c.left=this._previousHTMLStyles.left,c.top=this._previousHTMLStyles.top,s.classList.remove("cdk-global-scrollblock"),Ph&&(c.scrollBehavior=g.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Ph&&(c.scrollBehavior=b,g.scrollBehavior=B)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,c=this._viewportRuler.getViewportSize();return t.scrollHeight>c.height||t.scrollWidth>c.width}}class ng{constructor(s,t,c,g){this._scrollDispatcher=s,this._ngZone=t,this._viewportRuler=c,this._config=g,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(s){this._overlayRef=s}enable(){if(this._scrollSubscription)return;const s=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=s.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=s.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class wr{enable(){}disable(){}attach(){}}function Kd(a,s){return s.some(t=>a.bottom<t.top||a.top>t.bottom||a.right<t.left||a.left>t.right)}function Ih(a,s){return s.some(t=>a.top<t.top||a.bottom>t.bottom||a.left<t.left||a.right>t.right)}class $d{constructor(s,t,c,g){this._scrollDispatcher=s,this._viewportRuler=t,this._ngZone=c,this._config=g,this._scrollSubscription=null}attach(s){this._overlayRef=s}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:c,height:g}=this._viewportRuler.getViewportSize();Kd(t,[{width:c,height:g,bottom:g,right:c,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Fh=(()=>{class a{constructor(t,c,g,b){this._scrollDispatcher=t,this._viewportRuler=c,this._ngZone=g,this.noop=()=>new wr,this.close=B=>new ng(this._scrollDispatcher,this._ngZone,this._viewportRuler,B),this.block=()=>new ig(this._viewportRuler,this._document),this.reposition=B=>new $d(this._scrollDispatcher,this._viewportRuler,this._ngZone,B),this._document=b}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(Lc),r.LFG(fl),r.LFG(r.R0b),r.LFG($e.K0))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();class bf{constructor(s){if(this.scrollStrategy=new wr,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,s){const t=Object.keys(s);for(const c of t)void 0!==s[c]&&(this[c]=s[c])}}}class wf{constructor(s,t){this.connectionPair=s,this.scrollableViewProperties=t}}class Lh{constructor(s,t,c,g,b,B,N,te,he){this._portalOutlet=s,this._host=t,this._pane=c,this._config=g,this._ngZone=b,this._keyboardDispatcher=B,this._document=N,this._location=te,this._outsideClickDispatcher=he,this._backdropElement=null,this._backdropClick=new wt.x,this._attachments=new wt.x,this._detachments=new wt.x,this._locationChanges=Bi.w0.EMPTY,this._backdropClickHandler=we=>this._backdropClick.next(we),this._backdropTransitionendHandler=we=>{this._disposeBackdrop(we.target)},this._keydownEvents=new wt.x,this._outsidePointerEvents=new wt.x,g.scrollStrategy&&(this._scrollStrategy=g.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=g.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(s){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(s);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,zi.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const s=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),s}dispose(){var s;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(s=this._host)||void 0===s||s.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(s){s!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=s,this.hasAttached()&&(s.attach(this),this.updatePosition()))}updateSize(s){this._config=Object.assign(Object.assign({},this._config),s),this._updateElementSize()}setDirection(s){this._config=Object.assign(Object.assign({},this._config),{direction:s}),this._updateElementDirection()}addPanelClass(s){this._pane&&this._toggleClasses(this._pane,s,!0)}removePanelClass(s){this._pane&&this._toggleClasses(this._pane,s,!1)}getDirection(){const s=this._config.direction;return s?"string"==typeof s?s:s.value:"ltr"}updateScrollStrategy(s){s!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=s,this.hasAttached()&&(s.attach(this),s.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const s=this._pane.style;s.width=gi(this._config.width),s.height=gi(this._config.height),s.minWidth=gi(this._config.minWidth),s.minHeight=gi(this._config.minHeight),s.maxWidth=gi(this._config.maxWidth),s.maxHeight=gi(this._config.maxHeight)}_togglePointerEvents(s){this._pane.style.pointerEvents=s?"":"none"}_attachBackdrop(){const s="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(s)})}):this._backdropElement.classList.add(s)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const s=this._backdropElement;!s||(s.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{s.addEventListener("transitionend",this._backdropTransitionendHandler)}),s.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(s)},500)))}_toggleClasses(s,t,c){const g=Da(t||[]).filter(b=>!!b);g.length&&(c?s.classList.add(...g):s.classList.remove(...g))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const s=this._ngZone.onStable.pipe(Ut((0,Yi.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),s.unsubscribe())})})}_disposeScrollStrategy(){const s=this._scrollStrategy;s&&(s.disable(),s.detach&&s.detach())}_disposeBackdrop(s){s&&(s.removeEventListener("click",this._backdropClickHandler),s.removeEventListener("transitionend",this._backdropTransitionendHandler),s.remove(),this._backdropElement===s&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let cs=(()=>{class a{constructor(t,c){this._platform=c,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||Kn()){const g=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let b=0;b<g.length;b++)g[b].remove()}const c=this._document.createElement("div");c.classList.add(t),Kn()?c.setAttribute("platform","test"):this._platform.isBrowser||c.setAttribute("platform","server"),this._document.body.appendChild(c),this._containerElement=c}}return a.\u0275fac=function(t){return new(t||a)(r.LFG($e.K0),r.LFG(st))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const xn="cdk-overlay-connected-position-bounding-box",Ln=/([A-Za-z%]+)$/;class rg{constructor(s,t,c,g,b){this._viewportRuler=t,this._document=c,this._platform=g,this._overlayContainer=b,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new wt.x,this._resizeSubscription=Bi.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(s)}get positions(){return this._preferredPositions}attach(s){this._validatePositions(),s.hostElement.classList.add(xn),this._overlayRef=s,this._boundingBox=s.hostElement,this._pane=s.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const s=this._originRect,t=this._overlayRect,c=this._viewportRect,g=this._containerRect,b=[];let B;for(let N of this._preferredPositions){let te=this._getOriginPoint(s,g,N),he=this._getOverlayPoint(te,t,N),we=this._getOverlayFit(he,t,c,N);if(we.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(N,te);this._canFitWithFlexibleDimensions(we,he,c)?b.push({position:N,origin:te,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(te,N)}):(!B||B.overlayFit.visibleArea<we.visibleArea)&&(B={overlayFit:we,overlayPoint:he,originPoint:te,position:N,overlayRect:t})}if(b.length){let N=null,te=-1;for(const he of b){const we=he.boundingBoxRect.width*he.boundingBoxRect.height*(he.position.weight||1);we>te&&(te=we,N=he)}return this._isPushed=!1,void this._applyPosition(N.position,N.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(B.position,B.originPoint);this._applyPosition(B.position,B.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&da(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(xn),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const s=this._lastPosition;if(s){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,s);this._applyPosition(s,t)}else this.apply()}withScrollableContainers(s){return this._scrollables=s,this}withPositions(s){return this._preferredPositions=s,-1===s.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(s){return this._viewportMargin=s,this}withFlexibleDimensions(s=!0){return this._hasFlexibleDimensions=s,this}withGrowAfterOpen(s=!0){return this._growAfterOpen=s,this}withPush(s=!0){return this._canPush=s,this}withLockedPosition(s=!0){return this._positionLocked=s,this}setOrigin(s){return this._origin=s,this}withDefaultOffsetX(s){return this._offsetX=s,this}withDefaultOffsetY(s){return this._offsetY=s,this}withTransformOriginOn(s){return this._transformOriginSelector=s,this}_getOriginPoint(s,t,c){let g,b;if("center"==c.originX)g=s.left+s.width/2;else{const B=this._isRtl()?s.right:s.left,N=this._isRtl()?s.left:s.right;g="start"==c.originX?B:N}return t.left<0&&(g-=t.left),b="center"==c.originY?s.top+s.height/2:"top"==c.originY?s.top:s.bottom,t.top<0&&(b-=t.top),{x:g,y:b}}_getOverlayPoint(s,t,c){let g,b;return g="center"==c.overlayX?-t.width/2:"start"===c.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,b="center"==c.overlayY?-t.height/2:"top"==c.overlayY?0:-t.height,{x:s.x+g,y:s.y+b}}_getOverlayFit(s,t,c,g){const b=tu(t);let{x:B,y:N}=s,te=this._getOffset(g,"x"),he=this._getOffset(g,"y");te&&(B+=te),he&&(N+=he);let ti=0-N,Ft=N+b.height-c.height,Ri=this._subtractOverflows(b.width,0-B,B+b.width-c.width),Po=this._subtractOverflows(b.height,ti,Ft),Ml=Ri*Po;return{visibleArea:Ml,isCompletelyWithinViewport:b.width*b.height===Ml,fitsInViewportVertically:Po===b.height,fitsInViewportHorizontally:Ri==b.width}}_canFitWithFlexibleDimensions(s,t,c){if(this._hasFlexibleDimensions){const g=c.bottom-t.y,b=c.right-t.x,B=Cf(this._overlayRef.getConfig().minHeight),N=Cf(this._overlayRef.getConfig().minWidth),he=s.fitsInViewportHorizontally||null!=N&&N<=b;return(s.fitsInViewportVertically||null!=B&&B<=g)&&he}return!1}_pushOverlayOnScreen(s,t,c){if(this._previousPushAmount&&this._positionLocked)return{x:s.x+this._previousPushAmount.x,y:s.y+this._previousPushAmount.y};const g=tu(t),b=this._viewportRect,B=Math.max(s.x+g.width-b.width,0),N=Math.max(s.y+g.height-b.height,0),te=Math.max(b.top-c.top-s.y,0),he=Math.max(b.left-c.left-s.x,0);let we=0,Re=0;return we=g.width<=b.width?he||-B:s.x<this._viewportMargin?b.left-c.left-s.x:0,Re=g.height<=b.height?te||-N:s.y<this._viewportMargin?b.top-c.top-s.y:0,this._previousPushAmount={x:we,y:Re},{x:s.x+we,y:s.y+Re}}_applyPosition(s,t){if(this._setTransformOrigin(s),this._setOverlayElementStyles(t,s),this._setBoundingBoxStyles(t,s),s.panelClass&&this._addPanelClasses(s.panelClass),this._lastPosition=s,this._positionChanges.observers.length){const c=this._getScrollVisibility(),g=new wf(s,c);this._positionChanges.next(g)}this._isInitialRender=!1}_setTransformOrigin(s){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let c,g=s.overlayY;c="center"===s.overlayX?"center":this._isRtl()?"start"===s.overlayX?"right":"left":"start"===s.overlayX?"left":"right";for(let b=0;b<t.length;b++)t[b].style.transformOrigin=`${c} ${g}`}_calculateBoundingBoxRect(s,t){const c=this._viewportRect,g=this._isRtl();let b,B,N,we,Re,ti;if("top"===t.overlayY)B=s.y,b=c.height-B+this._viewportMargin;else if("bottom"===t.overlayY)N=c.height-s.y+2*this._viewportMargin,b=c.height-N+this._viewportMargin;else{const Ft=Math.min(c.bottom-s.y+c.top,s.y),Ri=this._lastBoundingBoxSize.height;b=2*Ft,B=s.y-Ft,b>Ri&&!this._isInitialRender&&!this._growAfterOpen&&(B=s.y-Ri/2)}if("end"===t.overlayX&&!g||"start"===t.overlayX&&g)ti=c.width-s.x+this._viewportMargin,we=s.x-this._viewportMargin;else if("start"===t.overlayX&&!g||"end"===t.overlayX&&g)Re=s.x,we=c.right-s.x;else{const Ft=Math.min(c.right-s.x+c.left,s.x),Ri=this._lastBoundingBoxSize.width;we=2*Ft,Re=s.x-Ft,we>Ri&&!this._isInitialRender&&!this._growAfterOpen&&(Re=s.x-Ri/2)}return{top:B,left:Re,bottom:N,right:ti,width:we,height:b}}_setBoundingBoxStyles(s,t){const c=this._calculateBoundingBoxRect(s,t);!this._isInitialRender&&!this._growAfterOpen&&(c.height=Math.min(c.height,this._lastBoundingBoxSize.height),c.width=Math.min(c.width,this._lastBoundingBoxSize.width));const g={};if(this._hasExactPosition())g.top=g.left="0",g.bottom=g.right=g.maxHeight=g.maxWidth="",g.width=g.height="100%";else{const b=this._overlayRef.getConfig().maxHeight,B=this._overlayRef.getConfig().maxWidth;g.height=gi(c.height),g.top=gi(c.top),g.bottom=gi(c.bottom),g.width=gi(c.width),g.left=gi(c.left),g.right=gi(c.right),g.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",g.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",b&&(g.maxHeight=gi(b)),B&&(g.maxWidth=gi(B))}this._lastBoundingBoxSize=c,da(this._boundingBox.style,g)}_resetBoundingBoxStyles(){da(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){da(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(s,t){const c={},g=this._hasExactPosition(),b=this._hasFlexibleDimensions,B=this._overlayRef.getConfig();if(g){const we=this._viewportRuler.getViewportScrollPosition();da(c,this._getExactOverlayY(t,s,we)),da(c,this._getExactOverlayX(t,s,we))}else c.position="static";let N="",te=this._getOffset(t,"x"),he=this._getOffset(t,"y");te&&(N+=`translateX(${te}px) `),he&&(N+=`translateY(${he}px)`),c.transform=N.trim(),B.maxHeight&&(g?c.maxHeight=gi(B.maxHeight):b&&(c.maxHeight="")),B.maxWidth&&(g?c.maxWidth=gi(B.maxWidth):b&&(c.maxWidth="")),da(this._pane.style,c)}_getExactOverlayY(s,t,c){let g={top:"",bottom:""},b=this._getOverlayPoint(t,this._overlayRect,s);return this._isPushed&&(b=this._pushOverlayOnScreen(b,this._overlayRect,c)),"bottom"===s.overlayY?g.bottom=this._document.documentElement.clientHeight-(b.y+this._overlayRect.height)+"px":g.top=gi(b.y),g}_getExactOverlayX(s,t,c){let B,g={left:"",right:""},b=this._getOverlayPoint(t,this._overlayRect,s);return this._isPushed&&(b=this._pushOverlayOnScreen(b,this._overlayRect,c)),B=this._isRtl()?"end"===s.overlayX?"left":"right":"end"===s.overlayX?"right":"left","right"===B?g.right=this._document.documentElement.clientWidth-(b.x+this._overlayRect.width)+"px":g.left=gi(b.x),g}_getScrollVisibility(){const s=this._getOriginRect(),t=this._pane.getBoundingClientRect(),c=this._scrollables.map(g=>g.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Ih(s,c),isOriginOutsideView:Kd(s,c),isOverlayClipped:Ih(t,c),isOverlayOutsideView:Kd(t,c)}}_subtractOverflows(s,...t){return t.reduce((c,g)=>c-Math.max(g,0),s)}_getNarrowedViewportRect(){const s=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,c=this._viewportRuler.getViewportScrollPosition();return{top:c.top+this._viewportMargin,left:c.left+this._viewportMargin,right:c.left+s-this._viewportMargin,bottom:c.top+t-this._viewportMargin,width:s-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(s,t){return"x"===t?null==s.offsetX?this._offsetX:s.offsetX:null==s.offsetY?this._offsetY:s.offsetY}_validatePositions(){}_addPanelClasses(s){this._pane&&Da(s).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(s=>{this._pane.classList.remove(s)}),this._appliedPanelClasses=[])}_getOriginRect(){const s=this._origin;if(s instanceof r.SBq)return s.nativeElement.getBoundingClientRect();if(s instanceof Element)return s.getBoundingClientRect();const t=s.width||0,c=s.height||0;return{top:s.y,bottom:s.y+c,left:s.x,right:s.x+t,height:c,width:t}}}function da(a,s){for(let t in s)s.hasOwnProperty(t)&&(a[t]=s[t]);return a}function Cf(a){if("number"!=typeof a&&null!=a){const[s,t]=a.split(Ln);return t&&"px"!==t?null:parseFloat(s)}return a||null}function tu(a){return{top:Math.floor(a.top),right:Math.floor(a.right),bottom:Math.floor(a.bottom),left:Math.floor(a.left),width:Math.floor(a.width),height:Math.floor(a.height)}}const So="cdk-global-overlay-wrapper";class ag{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(s){const t=s.getConfig();this._overlayRef=s,this._width&&!t.width&&s.updateSize({width:this._width}),this._height&&!t.height&&s.updateSize({height:this._height}),s.hostElement.classList.add(So),this._isDisposed=!1}top(s=""){return this._bottomOffset="",this._topOffset=s,this._alignItems="flex-start",this}left(s=""){return this._rightOffset="",this._leftOffset=s,this._justifyContent="flex-start",this}bottom(s=""){return this._topOffset="",this._bottomOffset=s,this._alignItems="flex-end",this}right(s=""){return this._leftOffset="",this._rightOffset=s,this._justifyContent="flex-end",this}width(s=""){return this._overlayRef?this._overlayRef.updateSize({width:s}):this._width=s,this}height(s=""){return this._overlayRef?this._overlayRef.updateSize({height:s}):this._height=s,this}centerHorizontally(s=""){return this.left(s),this._justifyContent="center",this}centerVertically(s=""){return this.top(s),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const s=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,c=this._overlayRef.getConfig(),{width:g,height:b,maxWidth:B,maxHeight:N}=c,te=!("100%"!==g&&"100vw"!==g||B&&"100%"!==B&&"100vw"!==B),he=!("100%"!==b&&"100vh"!==b||N&&"100%"!==N&&"100vh"!==N);s.position=this._cssPosition,s.marginLeft=te?"0":this._leftOffset,s.marginTop=he?"0":this._topOffset,s.marginBottom=this._bottomOffset,s.marginRight=this._rightOffset,te?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=he?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const s=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,c=t.style;t.classList.remove(So),c.justifyContent=c.alignItems=s.marginTop=s.marginBottom=s.marginLeft=s.marginRight=s.position="",this._overlayRef=null,this._isDisposed=!0}}let Rh=(()=>{class a{constructor(t,c,g,b){this._viewportRuler=t,this._document=c,this._platform=g,this._overlayContainer=b}global(){return new ag}flexibleConnectedTo(t){return new rg(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(fl),r.LFG($e.K0),r.LFG(st),r.LFG(cs))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Oh=(()=>{class a{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const c=this._attachedOverlays.indexOf(t);c>-1&&this._attachedOverlays.splice(c,1),0===this._attachedOverlays.length&&this.detach()}}return a.\u0275fac=function(t){return new(t||a)(r.LFG($e.K0))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),hn=(()=>{class a extends Oh{constructor(t,c){super(t),this._ngZone=c,this._keydownListener=g=>{const b=this._attachedOverlays;for(let B=b.length-1;B>-1;B--)if(b[B]._keydownEvents.observers.length>0){const N=b[B]._keydownEvents;this._ngZone?this._ngZone.run(()=>N.next(g)):N.next(g);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return a.\u0275fac=function(t){return new(t||a)(r.LFG($e.K0),r.LFG(r.R0b,8))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Mf=(()=>{class a extends Oh{constructor(t,c,g){super(t),this._platform=c,this._ngZone=g,this._cursorStyleIsSet=!1,this._pointerDownListener=b=>{this._pointerDownEventTarget=Jn(b)},this._clickListener=b=>{const B=Jn(b),N="click"===b.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:B;this._pointerDownEventTarget=null;const te=this._attachedOverlays.slice();for(let he=te.length-1;he>-1;he--){const we=te[he];if(we._outsidePointerEvents.observers.length<1||!we.hasAttached())continue;if(we.overlayElement.contains(B)||we.overlayElement.contains(N))break;const Re=we._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>Re.next(b)):Re.next(b)}}}add(t){if(super.add(t),!this._isAttached){const c=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(c)):this._addEventListeners(c),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=c.style.cursor,c.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return a.\u0275fac=function(t){return new(t||a)(r.LFG($e.K0),r.LFG(st),r.LFG(r.R0b,8))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),iu=0,ua=(()=>{class a{constructor(t,c,g,b,B,N,te,he,we,Re,ti){this.scrollStrategies=t,this._overlayContainer=c,this._componentFactoryResolver=g,this._positionBuilder=b,this._keyboardDispatcher=B,this._injector=N,this._ngZone=te,this._document=he,this._directionality=we,this._location=Re,this._outsideClickDispatcher=ti}create(t){const c=this._createHostElement(),g=this._createPaneElement(c),b=this._createPortalOutlet(g),B=new bf(t);return B.direction=B.direction||this._directionality.value,new Lh(b,c,g,B,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const c=this._document.createElement("div");return c.id="cdk-overlay-"+iu++,c.classList.add("cdk-overlay-pane"),t.appendChild(c),c}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(r.z2F)),new Yn(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(Fh),r.LFG(cs),r.LFG(r._Vd),r.LFG(Rh),r.LFG(hn),r.LFG(r.zs3),r.LFG(r.R0b),r.LFG($e.K0),r.LFG(Ci),r.LFG($e.Ye),r.LFG(Mf))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac}),a})();const cg={provide:new r.OlP("cdk-connected-overlay-scroll-strategy"),deps:[ua],useFactory:function Sf(a){return()=>a.scrollStrategies.reposition()}};let dg=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({providers:[ua,cg],imports:[[gt,Sh,vf],vf]}),a})();const ds=["mat-menu-item",""];function hg(a,s){1&a&&(r.O4$(),r.TgZ(0,"svg",2),r._UZ(1,"polygon",3),r.qZA())}const Cr=["*"];function pg(a,s){if(1&a){const t=r.EpF();r.TgZ(0,"div",0),r.NdJ("keydown",function(g){return r.CHM(t),r.oxw()._handleKeydown(g)})("click",function(){return r.CHM(t),r.oxw().closed.emit("click")})("@transformMenu.start",function(g){return r.CHM(t),r.oxw()._onAnimationStart(g)})("@transformMenu.done",function(g){return r.CHM(t),r.oxw()._onAnimationDone(g)}),r.TgZ(1,"div",1),r.Hsn(2),r.qZA()()}if(2&a){const t=r.oxw();r.Q6J("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),r.uIk("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const ha={transformMenu:(0,It.X$)("transformMenu",[(0,It.SB)("void",(0,It.oB)({opacity:0,transform:"scale(0.8)"})),(0,It.eR)("void => enter",(0,It.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,It.oB)({opacity:1,transform:"scale(1)"}))),(0,It.eR)("* => void",(0,It.jt)("100ms 25ms linear",(0,It.oB)({opacity:0})))]),fadeInItems:(0,It.X$)("fadeInItems",[(0,It.SB)("showing",(0,It.oB)({opacity:1})),(0,It.eR)("void => *",[(0,It.oB)({opacity:0}),(0,It.jt)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Oc=new r.OlP("MatMenuContent"),ru=new r.OlP("MAT_MENU_PANEL"),Df=go(Ho(class{}));let Nh=(()=>{class a extends Df{constructor(t,c,g,b,B){var N;super(),this._elementRef=t,this._document=c,this._focusMonitor=g,this._parentMenu=b,this._changeDetectorRef=B,this.role="menuitem",this._hovered=new wt.x,this._focused=new wt.x,this._highlighted=!1,this._triggersSubmenu=!1,null===(N=null==b?void 0:b.addItem)||void 0===N||N.call(b,this)}focus(t,c){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,c):this._getHostElement().focus(c),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var t;const c=this._elementRef.nativeElement.cloneNode(!0),g=c.querySelectorAll("mat-icon, .material-icons");for(let b=0;b<g.length;b++)g[b].remove();return(null===(t=c.textContent)||void 0===t?void 0:t.trim())||""}_setHighlighted(t){var c;this._highlighted=t,null===(c=this._changeDetectorRef)||void 0===c||c.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36($e.K0),r.Y36(kn),r.Y36(ru,8),r.Y36(r.sBO))},a.\u0275cmp=r.Xpm({type:a,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,c){1&t&&r.NdJ("click",function(b){return c._checkDisabled(b)})("mouseenter",function(){return c._handleMouseEnter()}),2&t&&(r.uIk("role",c.role)("tabindex",c._getTabIndex())("aria-disabled",c.disabled.toString())("disabled",c.disabled||null),r.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",c._highlighted)("mat-menu-item-submenu-trigger",c._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[r.qOj],attrs:ds,ngContentSelectors:Cr,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,c){1&t&&(r.F$t(),r.Hsn(0),r._UZ(1,"div",0),r.YNc(2,hg,2,0,"svg",1)),2&t&&(r.xp6(1),r.Q6J("matRippleDisabled",c.disableRipple||c.disabled)("matRippleTrigger",c._getHostElement()),r.xp6(1),r.Q6J("ngIf",c._triggersSubmenu))},directives:[ui,$e.O5],encapsulation:2,changeDetection:0}),a})();const Uh=new r.OlP("mat-menu-default-options",{providedIn:"root",factory:function fg(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let Bf=0,Vc=(()=>{class a{constructor(t,c,g,b){this._elementRef=t,this._ngZone=c,this._defaultOptions=g,this._changeDetectorRef=b,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new r.n_E,this._tabSubscription=Bi.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new wt.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new r.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+Bf++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=Yt(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Yt(t)}set panelClass(t){const c=this._previousPanelClass;c&&c.length&&c.split(" ").forEach(g=>{this._classList[g]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(g=>{this._classList[g]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new Gr(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe((0,no.O)(this._directDescendantItems),(0,Yd.w)(t=>(0,Yi.T)(...t.map(c=>c._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{var c;const g=this._keyManager;if("enter"===this._panelAnimationState&&(null===(c=g.activeItem)||void 0===c?void 0:c._hasFocus())){const b=t.toArray(),B=Math.max(0,Math.min(b.length-1,g.activeItemIndex||0));b[B]&&!b[B].disabled?g.setActiveItem(B):g.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe((0,no.O)(this._directDescendantItems),(0,Yd.w)(c=>(0,Yi.T)(...c.map(g=>g._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const c=t.keyCode,g=this._keyManager;switch(c){case 27:Sn(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===c||40===c)&&g.setFocusOrigin("keyboard"),void g.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._ngZone.onStable.pipe((0,zi.q)(1)).subscribe(()=>{let c=null;if(this._directDescendantItems.length&&(c=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!c||!c.contains(document.activeElement)){const g=this._keyManager;g.setFocusOrigin(t).setFirstItemActive(),!g.activeItem&&c&&c.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const c=Math.min(this._baseElevation+t,24),g=`${this._elevationPrefix}${c}`,b=Object.keys(this._classList).find(B=>B.startsWith(this._elevationPrefix));(!b||b===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[g]=!0,this._previousElevation=g)}setPositionClasses(t=this.xPosition,c=this.yPosition){var g;const b=this._classList;b["mat-menu-before"]="before"===t,b["mat-menu-after"]="after"===t,b["mat-menu-above"]="above"===c,b["mat-menu-below"]="below"===c,null===(g=this._changeDetectorRef)||void 0===g||g.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe((0,no.O)(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(c=>c._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(r.R0b),r.Y36(Uh),r.Y36(r.sBO))},a.\u0275dir=r.lG2({type:a,contentQueries:function(t,c,g){if(1&t&&(r.Suo(g,Oc,5),r.Suo(g,Nh,5),r.Suo(g,Nh,4)),2&t){let b;r.iGM(b=r.CRH())&&(c.lazyContent=b.first),r.iGM(b=r.CRH())&&(c._allItems=b),r.iGM(b=r.CRH())&&(c.items=b)}},viewQuery:function(t,c){if(1&t&&r.Gf(r.Rgc,5),2&t){let g;r.iGM(g=r.CRH())&&(c.templateRef=g.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),a})(),kf=(()=>{class a extends Vc{constructor(t,c,g,b){super(t,c,g,b),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(r.R0b),r.Y36(Uh),r.Y36(r.sBO))},a.\u0275cmp=r.Xpm({type:a,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,c){2&t&&r.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[r._Bn([{provide:ru,useExisting:a}]),r.qOj],ngContentSelectors:Cr,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,c){1&t&&(r.F$t(),r.YNc(0,pg,3,6,"ng-template"))},directives:[$e.mk],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::before{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[ha.transformMenu,ha.fadeInItems]},changeDetection:0}),a})();const Pf=new r.OlP("mat-menu-scroll-strategy"),au={provide:Pf,deps:[ua],useFactory:function mg(a){return()=>a.scrollStrategies.reposition()}},Uc=rn({passive:!0});let gg=(()=>{class a{constructor(t,c,g,b,B,N,te,he,we){this._overlay=t,this._element=c,this._viewContainerRef=g,this._menuItemInstance=N,this._dir=te,this._focusMonitor=he,this._ngZone=we,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Bi.w0.EMPTY,this._hoverSubscription=Bi.w0.EMPTY,this._menuCloseSubscription=Bi.w0.EMPTY,this._handleTouchStart=Re=>{Os(Re)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new r.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new r.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=b,this._parentMaterialMenu=B instanceof Vc?B:void 0,c.nativeElement.addEventListener("touchstart",this._handleTouchStart,Uc),N&&(N._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(c=>{this._destroyMenu(c),("click"===c||"tab"===c)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(c)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,Uc),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const t=this._createOverlay(),c=t.getConfig(),g=c.positionStrategy;this._setPosition(g),c.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,t.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof Vc&&(this.menu._startAnimation(),this.menu._directDescendantItems.changes.pipe(Ut(this.menu.close)).subscribe(()=>{g.withLockedPosition(!1).reapplyLastPosition(),g.withLockedPosition(!0)}))}closeMenu(){this.menu.close.emit()}focus(t,c){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,c):this._element.nativeElement.focus(c)}updatePosition(){var t;null===(t=this._overlayRef)||void 0===t||t.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const c=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,c instanceof Vc?(c._resetAnimation(),c.lazyContent?c._animationDone.pipe((0,Pi.h)(g=>"void"===g.toState),(0,zi.q)(1),Ut(c.lazyContent._attached)).subscribe({next:()=>c.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),c.lazyContent&&c.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let t=0,c=this.menu.parentMenu;for(;c;)t++,c=c.parentMenu;this.menu.setElevation(t)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new bf({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t){this.menu.setPositionClasses&&t.positionChanges.subscribe(c=>{const g="start"===c.connectionPair.overlayX?"after":"before",b="top"===c.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>this.menu.setPositionClasses(g,b)):this.menu.setPositionClasses(g,b)})}_setPosition(t){let[c,g]="before"===this.menu.xPosition?["end","start"]:["start","end"],[b,B]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[N,te]=[b,B],[he,we]=[c,g],Re=0;this.triggersSubmenu()?(we=c="before"===this.menu.xPosition?"start":"end",g=he="end"===c?"start":"end",Re="bottom"===b?8:-8):this.menu.overlapTrigger||(N="top"===b?"bottom":"top",te="top"===B?"bottom":"top"),t.withPositions([{originX:c,originY:N,overlayX:he,overlayY:b,offsetY:Re},{originX:g,originY:N,overlayX:we,overlayY:b,offsetY:Re},{originX:c,originY:te,overlayX:he,overlayY:B,offsetY:-Re},{originX:g,originY:te,overlayX:we,overlayY:B,offsetY:-Re}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),c=this._overlayRef.detachments(),g=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,vi.of)(),b=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe((0,Pi.h)(B=>B!==this._menuItemInstance),(0,Pi.h)(()=>this._menuOpen)):(0,vi.of)();return(0,Yi.T)(t,g,b,c)}_handleMousedown(t){jr(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const c=t.keyCode;(13===c||32===c)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===c&&"ltr"===this.dir||37===c&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe((0,Pi.h)(t=>t===this._menuItemInstance&&!t.disabled),cf(0,Qt)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Vc&&this.menu._isAnimating?this.menu._animationDone.pipe((0,zi.q)(1),cf(0,Qt),Ut(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new df(this.menu.templateRef,this._viewContainerRef)),this._portal}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(ua),r.Y36(r.SBq),r.Y36(r.s_b),r.Y36(Pf),r.Y36(ru,8),r.Y36(Nh,10),r.Y36(Ci,8),r.Y36(kn),r.Y36(r.R0b))},a.\u0275dir=r.lG2({type:a,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(t,c){1&t&&r.NdJ("click",function(b){return c._handleClick(b)})("mousedown",function(b){return c._handleMousedown(b)})("keydown",function(b){return c._handleKeydown(b)}),2&t&&r.uIk("aria-expanded",c.menuOpen||null)("aria-controls",c.menuOpen?c.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),a})(),Gh=(()=>{class a extends gg{}return a.\u0275fac=function(){let s;return function(c){return(s||(s=r.n5z(a)))(c||a)}}(),a.\u0275dir=r.lG2({type:a,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[r.qOj]}),a})(),Zh=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({providers:[au],imports:[[$e.ez,ni,qa,dg],ls,ni]}),a})();const Do=["*"],_g=["content"];function jh(a,s){if(1&a){const t=r.EpF();r.TgZ(0,"div",2),r.NdJ("click",function(){return r.CHM(t),r.oxw()._onBackdropClicked()}),r.qZA()}if(2&a){const t=r.oxw();r.ekj("mat-drawer-shown",t._isShowingBackdrop())}}function If(a,s){1&a&&(r.TgZ(0,"mat-drawer-content"),r.Hsn(1,2),r.qZA())}const su=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],yg=["mat-drawer","mat-drawer-content","*"];function xg(a,s){if(1&a){const t=r.EpF();r.TgZ(0,"div",2),r.NdJ("click",function(){return r.CHM(t),r.oxw()._onBackdropClicked()}),r.qZA()}if(2&a){const t=r.oxw();r.ekj("mat-drawer-shown",t._isShowingBackdrop())}}function vg(a,s){1&a&&(r.TgZ(0,"mat-sidenav-content"),r.Hsn(1,2),r.qZA())}const Ag=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Hh=["mat-sidenav","mat-sidenav-content","*"],gl={transformDrawer:(0,It.X$)("transform",[(0,It.SB)("open, open-instant",(0,It.oB)({transform:"none",visibility:"visible"})),(0,It.SB)("void",(0,It.oB)({"box-shadow":"none",visibility:"hidden"})),(0,It.eR)("void => open-instant",(0,It.jt)("0ms")),(0,It.eR)("void <=> open, open-instant => void",(0,It.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},wg=new r.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Lf(){return!1}}),qh=new r.OlP("MAT_DRAWER_CONTAINER");let lu=(()=>{class a extends ca{constructor(t,c,g,b,B){super(g,b,B),this._changeDetectorRef=t,this._container=c}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.sBO),r.Y36((0,r.Gpc)(()=>Qn)),r.Y36(r.SBq),r.Y36(Lc),r.Y36(r.R0b))},a.\u0275cmp=r.Xpm({type:a,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,c){2&t&&r.Udp("margin-left",c._container._contentMargins.left,"px")("margin-right",c._container._contentMargins.right,"px")},features:[r._Bn([{provide:ca,useExisting:a}]),r.qOj],ngContentSelectors:Do,decls:1,vars:0,template:function(t,c){1&t&&(r.F$t(),r.Hsn(0))},encapsulation:2,changeDetection:0}),a})(),Yh=(()=>{class a{constructor(t,c,g,b,B,N,te,he){this._elementRef=t,this._focusTrapFactory=c,this._focusMonitor=g,this._platform=b,this._ngZone=B,this._interactivityChecker=N,this._doc=te,this._container=he,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new wt.x,this._animationEnd=new wt.x,this._animationState="void",this.openedChange=new r.vpe(!0),this._openedStream=this.openedChange.pipe((0,Pi.h)(we=>we),(0,ji.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,Pi.h)(we=>we.fromState!==we.toState&&0===we.toState.indexOf("open")),sa(void 0)),this._closedStream=this.openedChange.pipe((0,Pi.h)(we=>!we),(0,ji.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,Pi.h)(we=>we.fromState!==we.toState&&"void"===we.toState),sa(void 0)),this._destroyed=new wt.x,this.onPositionChanged=new r.vpe,this._modeChanged=new wt.x,this.openedChange.subscribe(we=>{we?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Ar(this._elementRef.nativeElement,"keydown").pipe((0,Pi.h)(we=>27===we.keyCode&&!this.disableClose&&!Sn(we)),Ut(this._destroyed)).subscribe(we=>this._ngZone.run(()=>{this.close(),we.stopPropagation(),we.preventDefault()}))}),this._animationEnd.pipe(cr((we,Re)=>we.fromState===Re.fromState&&we.toState===Re.toState)).subscribe(we=>{const{fromState:Re,toState:ti}=we;(0===ti.indexOf("open")&&"void"===Re||"void"===ti&&0===Re.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=Yt(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"===this.mode?"dialog":"first-tabbable":t}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=Yt(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(Yt(t))}_forceFocus(t,c){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const g=()=>{t.removeEventListener("blur",g),t.removeEventListener("mousedown",g),t.removeAttribute("tabindex")};t.addEventListener("blur",g),t.addEventListener("mousedown",g)})),t.focus(c)}_focusByCssSelector(t,c){let g=this._elementRef.nativeElement.querySelector(t);g&&this._forceFocus(g,c)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(c=>{!c&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var t;this._focusTrap&&this._focusTrap.destroy(),null===(t=this._anchor)||void 0===t||t.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,c){t&&c&&(this._openedVia=c);const g=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),g}_setOpen(t,c,g){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",c&&this._restoreFocus(g)),this._updateFocusTrapState(),new Promise(b=>{this.openedChange.pipe((0,zi.q)(1)).subscribe(B=>b(B?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const c=this._elementRef.nativeElement,g=c.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),g.insertBefore(this._anchor,c)),g.appendChild(c)):this._anchor&&this._anchor.parentNode.insertBefore(c,this._anchor)}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(id),r.Y36(kn),r.Y36(st),r.Y36(r.R0b),r.Y36(Un),r.Y36($e.K0,8),r.Y36(qh,8))},a.\u0275cmp=r.Xpm({type:a,selectors:[["mat-drawer"]],viewQuery:function(t,c){if(1&t&&r.Gf(_g,5),2&t){let g;r.iGM(g=r.CRH())&&(c._content=g.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,c){1&t&&r.WFA("@transform.start",function(b){return c._animationStarted.next(b)})("@transform.done",function(b){return c._animationEnd.next(b)}),2&t&&(r.uIk("align",null),r.d8E("@transform",c._animationState),r.ekj("mat-drawer-end","end"===c.position)("mat-drawer-over","over"===c.mode)("mat-drawer-push","push"===c.mode)("mat-drawer-side","side"===c.mode)("mat-drawer-opened",c.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:Do,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,c){1&t&&(r.F$t(),r.TgZ(0,"div",0,1),r.Hsn(2),r.qZA())},directives:[ca],encapsulation:2,data:{animation:[gl.transformDrawer]},changeDetection:0}),a})(),Qn=(()=>{class a{constructor(t,c,g,b,B,N=!1,te){this._dir=t,this._element=c,this._ngZone=g,this._changeDetectorRef=b,this._animationMode=te,this._drawers=new r.n_E,this.backdropClick=new r.vpe,this._destroyed=new wt.x,this._doCheckSubject=new wt.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new wt.x,t&&t.change.pipe(Ut(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),B.change().pipe(Ut(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=N}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=Yt(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:Yt(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,no.O)(this._allDrawers),Ut(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(c=>!c._container||c._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,no.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(gn(10),Ut(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,c=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const g=this._left._getWidth();t+=g,c-=g}if(this._right&&this._right.opened)if("side"==this._right.mode)c+=this._right._getWidth();else if("push"==this._right.mode){const g=this._right._getWidth();c+=g,t-=g}t=t||null,c=c||null,(t!==this._contentMargins.left||c!==this._contentMargins.right)&&(this._contentMargins={left:t,right:c},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe((0,Pi.h)(c=>c.fromState!==c.toState),Ut(this._drawers.changes)).subscribe(c=>{"open-instant"!==c.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Ut(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(Ut(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,zi.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Ut((0,Yi.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const c=this._element.nativeElement.classList,g="mat-drawer-container-has-open";t?c.add(g):c.remove(g)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(Ci,8),r.Y36(r.SBq),r.Y36(r.R0b),r.Y36(r.sBO),r.Y36(fl),r.Y36(wg),r.Y36(Mi.Qb,8))},a.\u0275cmp=r.Xpm({type:a,selectors:[["mat-drawer-container"]],contentQueries:function(t,c,g){if(1&t&&(r.Suo(g,lu,5),r.Suo(g,Yh,5)),2&t){let b;r.iGM(b=r.CRH())&&(c._content=b.first),r.iGM(b=r.CRH())&&(c._allDrawers=b)}},viewQuery:function(t,c){if(1&t&&r.Gf(lu,5),2&t){let g;r.iGM(g=r.CRH())&&(c._userContent=g.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,c){2&t&&r.ekj("mat-drawer-container-explicit-backdrop",c._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[r._Bn([{provide:qh,useExisting:a}])],ngContentSelectors:yg,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,c){1&t&&(r.F$t(su),r.YNc(0,jh,1,2,"div",0),r.Hsn(1),r.Hsn(2,1),r.YNc(3,If,2,0,"mat-drawer-content",1)),2&t&&(r.Q6J("ngIf",c.hasBackdrop),r.xp6(3),r.Q6J("ngIf",!c._content))},directives:[lu,$e.O5],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),a})(),Bo=(()=>{class a extends lu{constructor(t,c,g,b,B){super(t,c,g,b,B)}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.sBO),r.Y36((0,r.Gpc)(()=>ko)),r.Y36(r.SBq),r.Y36(Lc),r.Y36(r.R0b))},a.\u0275cmp=r.Xpm({type:a,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(t,c){2&t&&r.Udp("margin-left",c._container._contentMargins.left,"px")("margin-right",c._container._contentMargins.right,"px")},features:[r._Bn([{provide:ca,useExisting:a}]),r.qOj],ngContentSelectors:Do,decls:1,vars:0,template:function(t,c){1&t&&(r.F$t(),r.Hsn(0))},encapsulation:2,changeDetection:0}),a})(),pa=(()=>{class a extends Yh{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=Yt(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=Vr(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=Vr(t)}}return a.\u0275fac=function(){let s;return function(c){return(s||(s=r.n5z(a)))(c||a)}}(),a.\u0275cmp=r.Xpm({type:a,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(t,c){2&t&&(r.uIk("align",null),r.Udp("top",c.fixedInViewport?c.fixedTopGap:null,"px")("bottom",c.fixedInViewport?c.fixedBottomGap:null,"px"),r.ekj("mat-drawer-end","end"===c.position)("mat-drawer-over","over"===c.mode)("mat-drawer-push","push"===c.mode)("mat-drawer-side","side"===c.mode)("mat-drawer-opened",c.opened)("mat-sidenav-fixed",c.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[r.qOj],ngContentSelectors:Do,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,c){1&t&&(r.F$t(),r.TgZ(0,"div",0,1),r.Hsn(2),r.qZA())},directives:[ca],encapsulation:2,data:{animation:[gl.transformDrawer]},changeDetection:0}),a})(),ko=(()=>{class a extends Qn{}return a.\u0275fac=function(){let s;return function(c){return(s||(s=r.n5z(a)))(c||a)}}(),a.\u0275cmp=r.Xpm({type:a,selectors:[["mat-sidenav-container"]],contentQueries:function(t,c,g){if(1&t&&(r.Suo(g,Bo,5),r.Suo(g,pa,5)),2&t){let b;r.iGM(b=r.CRH())&&(c._content=b.first),r.iGM(b=r.CRH())&&(c._allDrawers=b)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(t,c){2&t&&r.ekj("mat-drawer-container-explicit-backdrop",c._backdropOverride)},exportAs:["matSidenavContainer"],features:[r._Bn([{provide:qh,useExisting:a}]),r.qOj],ngContentSelectors:Hh,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,c){1&t&&(r.F$t(Ag),r.YNc(0,xg,1,2,"div",0),r.Hsn(1),r.Hsn(2,1),r.YNc(3,vg,2,0,"mat-sidenav-content",1)),2&t&&(r.Q6J("ngIf",c.hasBackdrop),r.xp6(3),r.Q6J("ngIf",!c._content))},directives:[Bo,$e.O5],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),a})(),fa=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[$e.ez,ni,ls],ls,ni]}),a})();var cu=mt(515);const Rf=["*"],zf=["tabListContainer"],Vf=["tabList"],Nf=["tabListInner"],Uf=["nextPaginator"],Gf=["previousPaginator"],Qh=["mat-tab-nav-bar",""],Wh=new r.OlP("MatInkBarPositioner",{providedIn:"root",factory:function Jo(){return s=>({left:s?(s.offsetLeft||0)+"px":"0",width:s?(s.offsetWidth||0)+"px":"0"})}});let uu=(()=>{class a{constructor(t,c,g,b){this._elementRef=t,this._ngZone=c,this._inkBarPositioner=g,this._animationMode=b}alignToElement(t){this.show(),this._ngZone.onStable.pipe((0,zi.q)(1)).subscribe(()=>{const c=this._inkBarPositioner(t),g=this._elementRef.nativeElement;g.style.left=c.left,g.style.width=c.width})}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(r.R0b),r.Y36(Wh),r.Y36(Mi.Qb,8))},a.\u0275dir=r.lG2({type:a,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(t,c){2&t&&r.ekj("_mat-animation-noopable","NoopAnimations"===c._animationMode)}}),a})();const n=rn({passive:!0});let u=(()=>{class a{constructor(t,c,g,b,B,N,te){this._elementRef=t,this._changeDetectorRef=c,this._viewportRuler=g,this._dir=b,this._ngZone=B,this._platform=N,this._animationMode=te,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new wt.x,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new wt.x,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new r.vpe,this.indexFocused=new r.vpe,B.runOutsideAngular(()=>{Ar(t.nativeElement,"mouseleave").pipe(Ut(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=Vr(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}ngAfterViewInit(){Ar(this._previousPaginator.nativeElement,"touchstart",n).pipe(Ut(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Ar(this._nextPaginator.nativeElement,"touchstart",n).pipe(Ut(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:(0,vi.of)("ltr"),c=this._viewportRuler.change(150),g=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new Gr(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe((0,zi.q)(1)).subscribe(g),(0,Yi.T)(t,c,this._items.changes,this._itemsResized()).pipe(Ut(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),g()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(Ut(this._destroyed)).subscribe(b=>{this.indexFocused.emit(b),this._setTabFocus(b)})}_itemsResized(){return"function"!=typeof ResizeObserver?cu.E:this._items.changes.pipe((0,no.O)(this._items),(0,Yd.w)(t=>new Bn.y(c=>this._ngZone.runOutsideAngular(()=>{const g=new ResizeObserver(()=>{c.next()});return t.forEach(b=>{g.observe(b.elementRef.nativeElement)}),()=>{g.disconnect()}}))),to(1))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!Sn(t))switch(t.keyCode){case 13:case 32:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t));break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const c=this._items?this._items.toArray()[t]:null;return!!c&&!c.disabled}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const c=this._tabListContainer.nativeElement;c.scrollLeft="ltr"==this._getLayoutDirection()?0:c.scrollWidth-c.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,c="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(c)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const c=this._items?this._items.toArray()[t]:null;if(!c)return;const g=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:b,offsetWidth:B}=c.elementRef.nativeElement;let N,te;"ltr"==this._getLayoutDirection()?(N=b,te=N+B):(te=this._tabListInner.nativeElement.offsetWidth-b,N=te-B);const he=this.scrollDistance,we=this.scrollDistance+g;N<he?this.scrollDistance-=he-N+60:te>we&&(this.scrollDistance+=te-we+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,c=t?t.elementRef.nativeElement:null;c?this._inkBar.alignToElement(c):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,c){c&&null!=c.button&&0!==c.button||(this._stopInterval(),bh(650,100).pipe(Ut((0,Yi.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:g,distance:b}=this._scrollHeader(t);(0===b||b>=g)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const c=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(c,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:c,distance:this._scrollDistance}}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(r.sBO),r.Y36(fl),r.Y36(Ci,8),r.Y36(r.R0b),r.Y36(st),r.Y36(Mi.Qb,8))},a.\u0275dir=r.lG2({type:a,inputs:{disablePagination:"disablePagination"}}),a})(),D=0,P=(()=>{class a extends u{constructor(t,c,g,b,B,N,te){super(t,b,B,c,g,N,te),this._disableRipple=!1,this.color="primary"}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const c=this._elementRef.nativeElement.classList;c.remove(`mat-background-${this.backgroundColor}`),t&&c.add(`mat-background-${t}`),this._backgroundColor=t}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Yt(t)}_itemSelected(){}ngAfterContentInit(){this._items.changes.pipe((0,no.O)(null),Ut(this._destroyed)).subscribe(()=>{this.updateActiveLink()}),super.ngAfterContentInit()}updateActiveLink(){if(!this._items)return;const t=this._items.toArray();for(let c=0;c<t.length;c++)if(t[c].active)return this.selectedIndex=c,this._changeDetectorRef.markForCheck(),void(this.tabPanel&&(this.tabPanel._activeTabId=t[c].id));this.selectedIndex=-1,this._inkBar.hide()}_getRole(){return this.tabPanel?"tablist":this._elementRef.nativeElement.getAttribute("role")}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(Ci,8),r.Y36(r.R0b),r.Y36(r.sBO),r.Y36(fl),r.Y36(st),r.Y36(Mi.Qb,8))},a.\u0275dir=r.lG2({type:a,inputs:{backgroundColor:"backgroundColor",disableRipple:"disableRipple",color:"color",tabPanel:"tabPanel"},features:[r.qOj]}),a})(),F=(()=>{class a extends P{constructor(t,c,g,b,B,N,te){super(t,c,g,b,B,N,te)}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(Ci,8),r.Y36(r.R0b),r.Y36(r.sBO),r.Y36(fl),r.Y36(st),r.Y36(Mi.Qb,8))},a.\u0275cmp=r.Xpm({type:a,selectors:[["","mat-tab-nav-bar",""]],contentQueries:function(t,c,g){if(1&t&&r.Suo(g,W,5),2&t){let b;r.iGM(b=r.CRH())&&(c._items=b)}},viewQuery:function(t,c){if(1&t&&(r.Gf(uu,7),r.Gf(zf,7),r.Gf(Vf,7),r.Gf(Nf,7),r.Gf(Uf,5),r.Gf(Gf,5)),2&t){let g;r.iGM(g=r.CRH())&&(c._inkBar=g.first),r.iGM(g=r.CRH())&&(c._tabListContainer=g.first),r.iGM(g=r.CRH())&&(c._tabList=g.first),r.iGM(g=r.CRH())&&(c._tabListInner=g.first),r.iGM(g=r.CRH())&&(c._nextPaginator=g.first),r.iGM(g=r.CRH())&&(c._previousPaginator=g.first)}},hostAttrs:[1,"mat-tab-nav-bar","mat-tab-header"],hostVars:11,hostBindings:function(t,c){2&t&&(r.uIk("role",c._getRole()),r.ekj("mat-tab-header-pagination-controls-enabled",c._showPaginationControls)("mat-tab-header-rtl","rtl"==c._getLayoutDirection())("mat-primary","warn"!==c.color&&"accent"!==c.color)("mat-accent","accent"===c.color)("mat-warn","warn"===c.color))},inputs:{color:"color"},exportAs:["matTabNavBar","matTabNav"],features:[r.qOj],attrs:Qh,ngContentSelectors:Rf,decls:14,vars:10,consts:[["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","disabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-link-container",3,"keydown"],["tabListContainer",""],[1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-links"],["tabListInner",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","disabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,c){1&t&&(r.F$t(),r.TgZ(0,"button",0,1),r.NdJ("click",function(){return c._handlePaginatorClick("before")})("mousedown",function(b){return c._handlePaginatorPress("before",b)})("touchend",function(){return c._stopInterval()}),r._UZ(2,"div",2),r.qZA(),r.TgZ(3,"div",3,4),r.NdJ("keydown",function(b){return c._handleKeydown(b)}),r.TgZ(5,"div",5,6),r.NdJ("cdkObserveContent",function(){return c._onContentChanges()}),r.TgZ(7,"div",7,8),r.Hsn(9),r.qZA(),r._UZ(10,"mat-ink-bar"),r.qZA()(),r.TgZ(11,"button",9,10),r.NdJ("mousedown",function(b){return c._handlePaginatorPress("after",b)})("click",function(){return c._handlePaginatorClick("after")})("touchend",function(){return c._stopInterval()}),r._UZ(13,"div",2),r.qZA()),2&t&&(r.ekj("mat-tab-header-pagination-disabled",c._disableScrollBefore),r.Q6J("matRippleDisabled",c._disableScrollBefore||c.disableRipple)("disabled",c._disableScrollBefore||null),r.xp6(5),r.ekj("_mat-animation-noopable","NoopAnimations"===c._animationMode),r.xp6(6),r.ekj("mat-tab-header-pagination-disabled",c._disableScrollAfter),r.Q6J("matRippleDisabled",c._disableScrollAfter||c.disableRipple)("disabled",c._disableScrollAfter||null))},directives:[ui,Wc,uu],styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-tab-header-pagination::-moz-focus-inner{border:0}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-tab-links{display:flex}[mat-align-tabs=center]>.mat-tab-link-container .mat-tab-links{justify-content:center}[mat-align-tabs=end]>.mat-tab-link-container .mat-tab-links{justify-content:flex-end}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-link-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}.mat-tab-link{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;vertical-align:top;text-decoration:none;position:relative;overflow:hidden;-webkit-tap-highlight-color:transparent}.mat-tab-link:focus{outline:none}.mat-tab-link:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-link:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-link.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-link.mat-tab-disabled{opacity:.5}.mat-tab-link .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-link{opacity:1}[mat-stretch-tabs] .mat-tab-link{flex-basis:0;flex-grow:1}.mat-tab-link.mat-tab-disabled{pointer-events:none}@media(max-width: 599px){.mat-tab-link{min-width:72px}}\n"],encapsulation:2}),a})();const z=ur(go(Ho(class{})));let q=(()=>{class a extends z{constructor(t,c,g,b,B,N){super(),this._tabNavBar=t,this.elementRef=c,this._focusMonitor=B,this._isActive=!1,this.id="mat-tab-link-"+D++,this.rippleConfig=g||{},this.tabIndex=parseInt(b)||0,"NoopAnimations"===N&&(this.rippleConfig.animation={enterDuration:0,exitDuration:0})}get active(){return this._isActive}set active(t){const c=Yt(t);c!==this._isActive&&(this._isActive=c,this._tabNavBar.updateActiveLink())}get rippleDisabled(){return this.disabled||this.disableRipple||this._tabNavBar.disableRipple||!!this.rippleConfig.disabled}focus(){this.elementRef.nativeElement.focus()}ngAfterViewInit(){this._focusMonitor.monitor(this.elementRef)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this.elementRef)}_handleFocus(){this._tabNavBar.focusIndex=this._tabNavBar._items.toArray().indexOf(this)}_handleKeydown(t){this._tabNavBar.tabPanel&&32===t.keyCode&&this.elementRef.nativeElement.click()}_getAriaControls(){var t;return this._tabNavBar.tabPanel?null===(t=this._tabNavBar.tabPanel)||void 0===t?void 0:t.id:this.elementRef.nativeElement.getAttribute("aria-controls")}_getAriaSelected(){return this._tabNavBar.tabPanel?this.active?"true":"false":this.elementRef.nativeElement.getAttribute("aria-selected")}_getAriaCurrent(){return this.active&&!this._tabNavBar.tabPanel?"page":null}_getRole(){return this._tabNavBar.tabPanel?"tab":this.elementRef.nativeElement.getAttribute("role")}_getTabIndex(){return this._tabNavBar.tabPanel?this._isActive?0:-1:this.tabIndex}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(P),r.Y36(r.SBq),r.Y36(Wr,8),r.$8M("tabindex"),r.Y36(kn),r.Y36(Mi.Qb,8))},a.\u0275dir=r.lG2({type:a,inputs:{active:"active",id:"id"},features:[r.qOj]}),a})(),W=(()=>{class a extends q{constructor(t,c,g,b,B,N,te,he){super(t,c,B,N,te,he),this._tabLinkRipple=new Hs(this,g,c,b),this._tabLinkRipple.setupTriggerEvents(c.nativeElement)}ngOnDestroy(){super.ngOnDestroy(),this._tabLinkRipple._removeTriggerEvents()}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(F),r.Y36(r.SBq),r.Y36(r.R0b),r.Y36(st),r.Y36(Wr,8),r.$8M("tabindex"),r.Y36(kn),r.Y36(Mi.Qb,8))},a.\u0275dir=r.lG2({type:a,selectors:[["","mat-tab-link",""],["","matTabLink",""]],hostAttrs:[1,"mat-tab-link","mat-focus-indicator"],hostVars:11,hostBindings:function(t,c){1&t&&r.NdJ("focus",function(){return c._handleFocus()})("keydown",function(b){return c._handleKeydown(b)}),2&t&&(r.uIk("aria-controls",c._getAriaControls())("aria-current",c._getAriaCurrent())("aria-disabled",c.disabled)("aria-selected",c._getAriaSelected())("id",c.id)("tabIndex",c._getTabIndex())("role",c._getRole()),r.ekj("mat-tab-disabled",c.disabled)("mat-tab-label-active",c.active))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matTabLink"],features:[r.qOj]}),a})(),oe=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[$e.ez,ni,Sh,qa,Nr,Eu],ni]}),a})();const ae=["*",[["mat-toolbar-row"]]],ce=["*","mat-toolbar-row"],ue=mo(class{constructor(a){this._elementRef=a}});let Ae=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275dir=r.lG2({type:a,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),a})(),be=(()=>{class a extends ue{constructor(t,c,g){super(t),this._platform=c,this._document=g}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(st),r.Y36($e.K0))},a.\u0275cmp=r.Xpm({type:a,selectors:[["mat-toolbar"]],contentQueries:function(t,c,g){if(1&t&&r.Suo(g,Ae,5),2&t){let b;r.iGM(b=r.CRH())&&(c._toolbarRows=b)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,c){2&t&&r.ekj("mat-toolbar-multiple-rows",c._toolbarRows.length>0)("mat-toolbar-single-row",0===c._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[r.qOj],ngContentSelectors:ce,decls:2,vars:0,template:function(t,c){1&t&&(r.F$t(ae),r.Hsn(0),r.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),a})(),Ie=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[ni],ni]}),a})(),ye=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[tc,d,y,yp,qi,Zh,fa,oe,Ie]}),a})(),Te=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[$e.ez,ye]]}),a})();var ke=mt(5020);function Fe(a){for(let s in a){let t=a[s]||"";switch(s){case"display":a.display="flex"===t?["-webkit-flex","flex"]:"inline-flex"===t?["-webkit-inline-flex","inline-flex"]:t;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":a["-webkit-"+s]=t;break;case"flex-direction":t=t||"row",a["-webkit-flex-direction"]=t,a["flex-direction"]=t;break;case"order":a.order=a["-webkit-"+s]=isNaN(+t)?"0":t}}return a}const qe="inline",Be=["row","column","row-reverse","column-reverse"];function He(a){let[s,t,c]=pt(a);return function Ke(a,s=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":a,"flex-wrap":s||null}}(s,t,c)}function pt(a){var s;a=null!==(s=null==a?void 0:a.toLowerCase())&&void 0!==s?s:"";let[t,c,g]=a.split(" ");return Be.find(b=>b===t)||(t=Be[0]),c===qe&&(c=g!==qe?g:"",g=qe),[t,it(c),!!g]}function ft(a){let[s]=pt(a);return s.indexOf("row")>-1}function it(a){if(a)switch(a.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":a="wrap-reverse";break;case"no":case"none":case"nowrap":a="nowrap";break;default:a="wrap"}return a}function ht(a,...s){if(null==a)throw TypeError("Cannot convert undefined or null to object");for(let t of s)if(null!=t)for(let c in t)t.hasOwnProperty(c)&&(a[c]=t[c]);return a}const et={provide:r.tb,useFactory:function xt(a,s){return()=>{if((0,$e.NF)(s)){const t=Array.from(a.querySelectorAll(`[class*=${Si}]`)),c=/\bflex-layout-.+?\b/g;t.forEach(g=>{g.classList.contains(`${Si}ssr`)&&g.parentNode?g.parentNode.removeChild(g):g.className.replace(c,"")})}}},deps:[$e.K0,r.Lbi],multi:!0},Si="flex-layout-";let pi=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({providers:[et]}),a})();class Jt{constructor(s=!1,t="all",c="",g="",b=0){this.matches=s,this.mediaQuery=t,this.mqAlias=c,this.suffix=g,this.priority=b,this.property=""}clone(){return new Jt(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let Ct=(()=>{class a{constructor(){this.stylesheet=new Map}addStyleToElement(t,c,g){const b=this.stylesheet.get(t);b?b.set(c,g):this.stylesheet.set(t,new Map([[c,g]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,c){const g=this.stylesheet.get(t);let b="";if(g){const B=g.get(c);("number"==typeof B||"string"==typeof B)&&(b=B+"")}return b}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const St={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},Dt=new r.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>St}),zt=new r.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),Zt=new r.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function ei(a,s){return a=a?a.clone():new Jt,s&&(a.mqAlias=s.alias,a.mediaQuery=s.mediaQuery,a.suffix=s.suffix,a.priority=s.priority),a}class vt{constructor(){this.shouldCache=!0}sideEffect(s,t,c){}}let Mt=(()=>{class a{constructor(t,c,g,b){this._serverStylesheet=t,this._serverModuleLoaded=c,this._platformId=g,this.layoutConfig=b}applyStyleToElement(t,c,g=null){let b={};"string"==typeof c&&(b[c]=g,c=b),b=this.layoutConfig.disableVendorPrefixes?c:Fe(c),this._applyMultiValueStyleToElement(b,t)}applyStyleToElements(t,c=[]){const g=this.layoutConfig.disableVendorPrefixes?t:Fe(t);c.forEach(b=>{this._applyMultiValueStyleToElement(g,b)})}getFlowDirection(t){const c="flex-direction";let g=this.lookupStyle(t,c);return[g||"row",this.lookupInlineStyle(t,c)||(0,$e.PM)(this._platformId)&&this._serverModuleLoaded?g:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,c){var g;return null!==(g=t.getAttribute(c))&&void 0!==g?g:""}lookupInlineStyle(t,c){return(0,$e.NF)(this._platformId)?t.style.getPropertyValue(c):function vn(a,s){var t;return null!==(t=Qi(a)[s])&&void 0!==t?t:""}(t,c)}lookupStyle(t,c,g=!1){let b="";return t&&((b=this.lookupInlineStyle(t,c))||((0,$e.NF)(this._platformId)?g||(b=getComputedStyle(t).getPropertyValue(c)):this._serverModuleLoaded&&(b=this._serverStylesheet.getStyleForElement(t,c)))),b?b.trim():""}_applyMultiValueStyleToElement(t,c){Object.keys(t).sort().forEach(g=>{const b=t[g],B=Array.isArray(b)?b:[b];B.sort();for(let N of B)N=N?N+"":"",(0,$e.NF)(this._platformId)||!this._serverModuleLoaded?(0,$e.NF)(this._platformId)?c.style.setProperty(g,N):Bt(c,g,N):this._serverStylesheet.addStyleToElement(c,g,N)})}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(Ct),r.LFG(zt),r.LFG(r.Lbi),r.LFG(Dt))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Bt(a,s,t){s=s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const c=Qi(a);c[s]=null!=t?t:"",function xi(a,s){let t="";for(const c in s)s[c]&&(t+=`${c}:${s[c]};`);a.setAttribute("style",t)}(a,c)}function Qi(a){const s={},t=a.getAttribute("style");if(t){const c=t.split(/;+/g);for(let g=0;g<c.length;g++){const b=c[g].trim();if(b.length>0){const B=b.indexOf(":");if(-1===B)throw new Error(`Invalid CSS style: ${b}`);s[b.substr(0,B).trim()]=b.substr(B+1).trim()}}}return s}function Pt(a,s){return(s&&s.priority||0)-(a&&a.priority||0)}function si(a,s){return(a.priority||0)-(s.priority||0)}let Wi=(()=>{class a{constructor(t,c,g){this._zone=t,this._platformId=c,this._document=g,this.source=new Io.X(new Jt(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((c,g)=>{c.matches&&t.push(g)}),t}isActive(t){var c;const g=this.registry.get(t);return null!==(c=null==g?void 0:g.matches)&&void 0!==c?c:this.registerQuery(t).some(b=>b.matches)}observe(t,c=!1){if(t&&t.length){const g=this._observable$.pipe((0,Pi.h)(B=>!c||t.indexOf(B.mediaQuery)>-1)),b=new Bn.y(B=>{const N=this.registerQuery(t);if(N.length){const te=N.pop();N.forEach(he=>{B.next(he)}),this.source.next(te)}B.complete()});return(0,Yi.T)(b,g)}return this._observable$}registerQuery(t){const c=Array.isArray(t)?t:[t],g=[];return function wi(a,s){const t=a.filter(c=>!oi[c]);if(t.length>0){const c=t.join(", ");try{const g=s.createElement("style");g.setAttribute("type","text/css"),g.styleSheet||g.appendChild(s.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${c} {.fx-query-test{ }}\n`)),s.head.appendChild(g),t.forEach(b=>oi[b]=g)}catch(g){console.error(g)}}}(c,this._document),c.forEach(b=>{const B=te=>{this._zone.run(()=>this.source.next(new Jt(te.matches,b)))};let N=this.registry.get(b);N||(N=this.buildMQL(b),N.addListener(B),this.pendingRemoveListenerFns.push(()=>N.removeListener(B)),this.registry.set(b,N)),N.matches&&g.push(new Jt(!0,b))}),g}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function Ni(a,s){return s&&window.matchMedia("all").addListener?window.matchMedia(a):{matches:"all"===a||""===a,media:a,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(t,(0,$e.NF)(this._platformId))}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(r.R0b),r.LFG(r.Lbi),r.LFG($e.K0))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const oi={},Fi=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],Ui="(orientation: portrait) and (max-width: 599.98px)",on="(orientation: landscape) and (max-width: 959.98px)",Li="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",$o="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",us="(orientation: portrait) and (min-width: 840px)",yl="(orientation: landscape) and (min-width: 1280px)",Wn={HANDSET:`${Ui}, ${on}`,TABLET:`${Li} , ${$o}`,WEB:`${us}, ${yl} `,HANDSET_PORTRAIT:`${Ui}`,TABLET_PORTRAIT:`${Li} `,WEB_PORTRAIT:`${us}`,HANDSET_LANDSCAPE:`${on}`,TABLET_LANDSCAPE:`${$o}`,WEB_LANDSCAPE:`${yl}`},qf=[{alias:"handset",priority:2e3,mediaQuery:Wn.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:Wn.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:Wn.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:Wn.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:Wn.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:Wn.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:Wn.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:Wn.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:Wn.WEB_PORTRAIT,overlapping:!0}],Yf=/(\.|-|_)/g;function Qf(a){let s=a.length>0?a.charAt(0):"",t=a.length>1?a.slice(1):"";return s.toUpperCase()+t}const Wf=new r.OlP("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const a=(0,r.f3M)(Zt),s=(0,r.f3M)(Dt),t=[].concat.apply([],(a||[]).map(g=>Array.isArray(g)?g:[g]));return function er(a,s=[]){const t={};return a.forEach(c=>{t[c.alias]=c}),s.forEach(c=>{t[c.alias]?ht(t[c.alias],c):t[c.alias]=c}),function Kh(a){return a.forEach(s=>{s.suffix||(s.suffix=function Jh(a){return a.replace(Yf,"|").split("|").map(Qf).join("")}(s.alias),s.overlapping=!!s.overlapping)}),a}(Object.keys(t).map(c=>t[c]))}((s.disableDefaultBps?[]:Fi).concat(s.addOrientationBps?qf:[]),t)}});let Mr=(()=>{class a{constructor(t){this.findByMap=new Map,this.items=[...t].sort(si)}findByAlias(t){return t?this.findWithPredicate(t,c=>c.alias===t):null}findByQuery(t){return this.findWithPredicate(t,c=>c.mediaQuery===t)}get overlappings(){return this.items.filter(t=>t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>{var c;return null!==(c=null==t?void 0:t.suffix)&&void 0!==c?c:""})}findWithPredicate(t,c){var g;let b=this.findByMap.get(t);return b||(b=null!==(g=this.items.find(c))&&void 0!==g?g:null,this.findByMap.set(t,b)),null!=b?b:null}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(Wf))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const ga="print",$h={alias:ga,mediaQuery:ga,priority:1e3};let _a=(()=>{class a{constructor(t,c,g){this.breakpoints=t,this.layoutConfig=c,this._document=g,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new ep,this.deactivations=[]}withPrintQuery(t){return[...t,ga]}isPrintEvent(t){return t.mediaQuery.startsWith(ga)}get printAlias(){var t;return[...null!==(t=this.layoutConfig.printWithBreakpoints)&&void 0!==t?t:[]]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const c=this.breakpoints.findByQuery(t);return(c?[...this.printBreakPoints,c]:this.printBreakPoints).sort(Pt)}updateEvent(t){var c;let g=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(g=this.getEventBreakpoints(t)[0],t.mediaQuery=null!==(c=null==g?void 0:g.mediaQuery)&&void 0!==c?c:""),ei(t,g)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const c=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new Jt(!0,ga))),t.updateStyles())},g=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",c),this._document.defaultView.addEventListener("afterprint",g),this.beforePrintEventListeners.push(c),this.afterPrintEventListeners.push(g)}interceptEvents(t){return c=>{this.isPrintEvent(c)?c.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(c)),t.updateStyles()):!c.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(t),t.updateStyles()):this.collectActivations(t,c)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,c){this.isPrinting=!0,this.formerActivations=t.activatedBreakpoints,t.activatedBreakpoints=this.queue.addPrintBreakpoints(c)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(t,c){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!c.matches){const g=this.breakpoints.findByQuery(c.mediaQuery);if(g){const b=this.formerActivations&&this.formerActivations.includes(g),B=!this.formerActivations&&t.activatedBreakpoints.includes(g);(b||B)&&(this.deactivations.push(g),this.deactivations.sort(Pt))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t)))}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(Mr),r.LFG(Dt),r.LFG($e.K0))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();class ep{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(s){return s.push($h),s.sort(Pt),s.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(s){s&&void 0===this.printBreakpoints.find(c=>c.mediaQuery===s.mediaQuery)&&(this.printBreakpoints=function Lg(a){var s;return null!==(s=null==a?void 0:a.mediaQuery.startsWith(ga))&&void 0!==s&&s}(s)?[s,...this.printBreakpoints]:[...this.printBreakpoints,s])}clear(){this.printBreakpoints=[]}}let Vt=(()=>{class a{constructor(t,c,g){this.matchMedia=t,this.breakpoints=c,this.hook=g,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new wt.x,this.observeActivations()}get activatedAlias(){var t,c;return null!==(c=null===(t=this.activatedBreakpoints[0])||void 0===t?void 0:t.alias)&&void 0!==c?c:""}set activatedBreakpoints(t){this._activatedBreakpoints=[...t]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(t){this._useFallbacks=t}onMediaChange(t){const c=this.findByQuery(t.mediaQuery);if(c){t=ei(t,c);const g=this.activatedBreakpoints.indexOf(c);t.matches&&-1===g?(this._activatedBreakpoints.push(c),this._activatedBreakpoints.sort(Pt),this.updateStyles()):!t.matches&&-1!==g&&(this._activatedBreakpoints.splice(g,1),this._activatedBreakpoints.sort(Pt),this.updateStyles())}}init(t,c,g,b,B=[]){An(this.updateMap,t,c,g),An(this.clearMap,t,c,b),this.buildElementKeyMap(t,c),this.watchExtraTriggers(t,c,B)}getValue(t,c,g){const b=this.elementMap.get(t);if(b){const B=void 0!==g?b.get(g):this.getActivatedValues(b,c);if(B)return B.get(c)}}hasValue(t,c){const g=this.elementMap.get(t);if(g){const b=this.getActivatedValues(g,c);if(b)return void 0!==b.get(c)||!1}return!1}setValue(t,c,g,b){var B;let N=this.elementMap.get(t);if(N){const he=(null!==(B=N.get(b))&&void 0!==B?B:new Map).set(c,g);N.set(b,he),this.elementMap.set(t,N)}else N=(new Map).set(b,(new Map).set(c,g)),this.elementMap.set(t,N);const te=this.getValue(t,c);void 0!==te&&this.updateElement(t,c,te)}trackValue(t,c){return this.subject.asObservable().pipe((0,Pi.h)(g=>g.element===t&&g.key===c))}updateStyles(){this.elementMap.forEach((t,c)=>{const g=new Set(this.elementKeyMap.get(c));let b=this.getActivatedValues(t);b&&b.forEach((B,N)=>{this.updateElement(c,N,B),g.delete(N)}),g.forEach(B=>{if(b=this.getActivatedValues(t,B),b){const N=b.get(B);this.updateElement(c,B,N)}else this.clearElement(c,B)})})}clearElement(t,c){const g=this.clearMap.get(t);if(g){const b=g.get(c);b&&(b(),this.subject.next({element:t,key:c,value:""}))}}updateElement(t,c,g){const b=this.updateMap.get(t);if(b){const B=b.get(c);B&&(B(g),this.subject.next({element:t,key:c,value:g}))}}releaseElement(t){const c=this.watcherMap.get(t);c&&(c.forEach(b=>b.unsubscribe()),this.watcherMap.delete(t));const g=this.elementMap.get(t);g&&(g.forEach((b,B)=>g.delete(B)),this.elementMap.delete(t))}triggerUpdate(t,c){const g=this.elementMap.get(t);if(g){const b=this.getActivatedValues(g,c);b&&(c?this.updateElement(t,c,b.get(c)):b.forEach((B,N)=>this.updateElement(t,N,B)))}}buildElementKeyMap(t,c){let g=this.elementKeyMap.get(t);g||(g=new Set,this.elementKeyMap.set(t,g)),g.add(c)}watchExtraTriggers(t,c,g){if(g&&g.length){let b=this.watcherMap.get(t);if(b||(b=new Map,this.watcherMap.set(t,b)),!b.get(c)){const N=(0,Yi.T)(...g).subscribe(()=>{const te=this.getValue(t,c);this.updateElement(t,c,te)});b.set(c,N)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,c){for(let b=0;b<this.activatedBreakpoints.length;b++){const N=t.get(this.activatedBreakpoints[b].alias);if(N&&(void 0===c||N.has(c)&&null!=N.get(c)))return N}if(!this._useFallbacks)return;const g=t.get("");return void 0===c||g&&g.has(c)?g:void 0}observeActivations(){const t=this.breakpoints.items.map(c=>c.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe((0,Dn.b)(this.hook.interceptEvents(this)),(0,Pi.h)(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(Wi),r.LFG(Mr),r.LFG(_a))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function An(a,s,t,c){var g;if(void 0!==c){const b=null!==(g=a.get(s))&&void 0!==g?g:new Map;b.set(t,c),a.set(s,b)}}let li=(()=>{class a{constructor(t,c,g,b){this.elementRef=t,this.styleBuilder=c,this.styler=g,this.marshal=b,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new wt.x,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(c=>{if(-1!==this.inputs.indexOf(c)){const g=c.split(".").slice(1).join(".");this.setValue(t[c].currentValue,g)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,c){const g=this.styleBuilder,b=g.shouldCache;let B=this.styleCache.get(t);(!B||!b)&&(B=g.buildStyles(t,c),b&&this.styleCache.set(t,B)),this.mru=Object.assign({},B),this.applyStyleToElement(B),g.sideEffect(t,B,c)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,c=!1){if(t){const[g,b]=this.styler.getFlowDirection(t);if(!b&&c){const B=He(g);this.styler.applyStyleToElements(B,[t])}return g.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,c,g=this.nativeElement){this.styler.applyStyleToElement(g,t,c)}setValue(t,c){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,c)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(vt),r.Y36(Mt),r.Y36(Vt))},a.\u0275dir=r.lG2({type:a,features:[r.TTD]}),a})();function m_(a,s="1",t="1"){let c=[s,t,a],g=a.indexOf("calc");if(g>0){c[2]=g_(a.substring(g).trim());let b=a.substr(0,g).trim().split(" ");2==b.length&&(c[0]=b[0],c[1]=b[1])}else if(0==g)c[2]=g_(a.trim());else{let b=a.split(" ");c=3===b.length?b:[s,t,a]}return c}function g_(a){return a.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}let ty=(()=>{class a extends vt{buildStyles(t,c){return{display:"true"===t?c.display||(c.isServer?"initial":""):"none"}}}return a.\u0275fac=function(){let s;return function(c){return(s||(s=r.n5z(a)))(c||a)}}(),a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),iy=(()=>{class a extends li{constructor(t,c,g,b,B,N,te){super(t,c,g,b),this.layoutConfig=B,this.platformId=N,this.serverModuleLoaded=te,this.DIRECTIVE_KEY="show-hide",this.display="",this.hasLayout=!1,this.hasFlexChild=!1}ngAfterViewInit(){this.trackExtraTriggers();const t=Array.from(this.nativeElement.children);for(let g=0;g<t.length;g++)if(this.marshal.hasValue(t[g],"flex")){this.hasFlexChild=!0;break}Rg.has(this.nativeElement)?this.display=Rg.get(this.nativeElement):(this.display=this.getDisplayStyle(),Rg.set(this.nativeElement,this.display)),this.init();const c=this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY,"");void 0===c||""===c?this.setValue(!0,""):this.triggerUpdate()}ngOnChanges(t){Object.keys(t).forEach(c=>{if(-1!==this.inputs.indexOf(c)){const g=c.split("."),b=g.slice(1).join("."),B=t[c].currentValue;let N=""===B||0!==B&&Yt(B);"fxHide"===g[0]&&(N=!N),this.setValue(N,b)}})}trackExtraTriggers(){this.hasLayout=this.marshal.hasValue(this.nativeElement,"layout"),["layout","layout-align"].forEach(t=>{this.marshal.trackValue(this.nativeElement,t).pipe(Ut(this.destroySubject)).subscribe(this.triggerUpdate.bind(this))})}getDisplayStyle(){return this.hasLayout||this.hasFlexChild&&this.layoutConfig.addFlexToParent?"flex":this.styler.lookupStyle(this.nativeElement,"display",!0)}updateWithValue(t=!0){if(""===t)return;const c=(0,$e.PM)(this.platformId);this.addStyles(t?"true":"false",{display:this.display,isServer:c}),c&&this.serverModuleLoaded&&this.nativeElement.style.setProperty("display",""),this.marshal.triggerUpdate(this.parentElement,"layout-gap")}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(ty),r.Y36(Mt),r.Y36(Vt),r.Y36(Dt),r.Y36(r.Lbi),r.Y36(zt))},a.\u0275dir=r.lG2({type:a,features:[r.qOj,r.TTD]}),a})();const Rg=new WeakMap,ny=["fxShow","fxShow.print","fxShow.xs","fxShow.sm","fxShow.md","fxShow.lg","fxShow.xl","fxShow.lt-sm","fxShow.lt-md","fxShow.lt-lg","fxShow.lt-xl","fxShow.gt-xs","fxShow.gt-sm","fxShow.gt-md","fxShow.gt-lg","fxHide","fxHide.print","fxHide.xs","fxHide.sm","fxHide.md","fxHide.lg","fxHide.xl","fxHide.lt-sm","fxHide.lt-md","fxHide.lt-lg","fxHide.lt-xl","fxHide.gt-xs","fxHide.gt-sm","fxHide.gt-md","fxHide.gt-lg"];let y_=(()=>{class a extends iy{constructor(){super(...arguments),this.inputs=ny}}return a.\u0275fac=function(){let s;return function(c){return(s||(s=r.n5z(a)))(c||a)}}(),a.\u0275dir=r.lG2({type:a,selectors:[["","fxShow",""],["","fxShow.print",""],["","fxShow.xs",""],["","fxShow.sm",""],["","fxShow.md",""],["","fxShow.lg",""],["","fxShow.xl",""],["","fxShow.lt-sm",""],["","fxShow.lt-md",""],["","fxShow.lt-lg",""],["","fxShow.lt-xl",""],["","fxShow.gt-xs",""],["","fxShow.gt-sm",""],["","fxShow.gt-md",""],["","fxShow.gt-lg",""],["","fxHide",""],["","fxHide.print",""],["","fxHide.xs",""],["","fxHide.sm",""],["","fxHide.md",""],["","fxHide.lg",""],["","fxHide.xl",""],["","fxHide.lt-sm",""],["","fxHide.lt-md",""],["","fxHide.lt-lg",""],["","fxHide.lt-xl",""],["","fxHide.gt-xs",""],["","fxHide.gt-sm",""],["","fxHide.gt-md",""],["","fxHide.gt-lg",""]],inputs:{fxShow:"fxShow","fxShow.print":"fxShow.print","fxShow.xs":"fxShow.xs","fxShow.sm":"fxShow.sm","fxShow.md":"fxShow.md","fxShow.lg":"fxShow.lg","fxShow.xl":"fxShow.xl","fxShow.lt-sm":"fxShow.lt-sm","fxShow.lt-md":"fxShow.lt-md","fxShow.lt-lg":"fxShow.lt-lg","fxShow.lt-xl":"fxShow.lt-xl","fxShow.gt-xs":"fxShow.gt-xs","fxShow.gt-sm":"fxShow.gt-sm","fxShow.gt-md":"fxShow.gt-md","fxShow.gt-lg":"fxShow.gt-lg",fxHide:"fxHide","fxHide.print":"fxHide.print","fxHide.xs":"fxHide.xs","fxHide.sm":"fxHide.sm","fxHide.md":"fxHide.md","fxHide.lg":"fxHide.lg","fxHide.xl":"fxHide.xl","fxHide.lt-sm":"fxHide.lt-sm","fxHide.lt-md":"fxHide.lt-md","fxHide.lt-lg":"fxHide.lt-lg","fxHide.lt-xl":"fxHide.lt-xl","fxHide.gt-xs":"fxHide.gt-xs","fxHide.gt-sm":"fxHide.gt-sm","fxHide.gt-md":"fxHide.gt-md","fxHide.gt-lg":"fxHide.gt-lg"},features:[r.qOj]}),a})(),C_=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[pi]]}),a})();function dy(a,s){if(1&a&&(r.ynx(0),r.TgZ(1,"a",12),r._uU(2),r.qZA(),r.BQk()),2&a){const t=s.$implicit;r.xp6(1),r.s9C("routerLink",t.link),r.xp6(1),r.Oqu(t.label)}}function uy(a,s){if(1&a&&(r.ynx(0),r.TgZ(1,"a",13),r._uU(2),r.qZA(),r.BQk()),2&a){const t=s.$implicit;r.xp6(1),r.s9C("routerLink",t.link),r.xp6(1),r.Oqu(t.label)}}let hy=(()=>{class a{constructor(){this.navItems=[{label:"Sobre mi",link:"sobre-mi"},{label:"Estudios y Conocimientos",link:"estudios"},{label:"Experiencia Laboral",link:"experiencia-laboral"},{label:"Portafolio",link:"portafolio"}]}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["app-home"]],decls:22,vars:3,consts:[[1,"navbar"],["href","sobre-mi"],["src","assets/falogo.png"],[1,"spacer"],["mat-tab-nav-bar","","fxHide.xs","","fxHide.sm",""],[4,"ngFor","ngForOf"],["mat-icon-button","","fxHide","","fxShow.xs","","fxShow.sm","",3,"matMenuTriggerFor"],["dropDownOculto","matMenu"],[1,"container"],[1,"footer"],[1,"footer-contenido"],["href","https://github.com/Piplash/facosta-portafolio","target","_blank"],["routerLinkActive","active","mat-tab-link","",3,"routerLink"],["mat-list-item","",3,"routerLink"]],template:function(t,c){if(1&t&&(r.TgZ(0,"mat-sidenav-container")(1,"mat-toolbar",0)(2,"span")(3,"a",1),r._UZ(4,"img",2),r.qZA()(),r._UZ(5,"span",3),r.TgZ(6,"nav",4),r.YNc(7,dy,3,2,"ng-container",5),r.qZA(),r.TgZ(8,"button",6)(9,"mat-icon"),r._uU(10,"more_vert"),r.qZA()(),r.TgZ(11,"mat-menu",null,7)(13,"mat-nav-list"),r.YNc(14,uy,3,2,"ng-container",5),r.qZA()()()(),r.TgZ(15,"div",8),r._UZ(16,"router-outlet"),r.qZA(),r.TgZ(17,"div",9)(18,"div",10),r._uU(19," Sitio desarrollado en Angular por Felipe Acosta. "),r.TgZ(20,"a",11),r._uU(21,"Ver en GitHub"),r.qZA()()()),2&t){const g=r.MAs(12);r.xp6(7),r.Q6J("ngForOf",c.navItems),r.xp6(1),r.Q6J("matMenuTriggerFor",g),r.xp6(6),r.Q6J("ngForOf",c.navItems)}},directives:[ko,be,F,y_,$e.sg,ke.yS,ke.Od,W,Ws,Gh,Js,kf,Zd,Hd,ke.lC],styles:["img[_ngcontent-%COMP%]{height:50px;padding-left:10px;padding-top:10px}.navbar[_ngcontent-%COMP%]{height:80px}.container[_ngcontent-%COMP%]{margin-top:2%;margin-left:15%;margin-right:15%;padding-bottom:50px}.footer[_ngcontent-%COMP%]{position:fixed;width:100%;height:50px;bottom:0;background-color:#f5f5f5;color:#555;text-align:center}.footer-contenido[_ngcontent-%COMP%]{padding-top:15px}"]}),a})();var pn=mt(655);const fy=["root"],my=["pdfSecondaryToolbarComponent"],gy=["pdfsidebar"];function _y(a,s){if(1&a){const t=r.EpF();r.TgZ(0,"div",2)(1,"div",3)(2,"button",4),r.O4$(),r.TgZ(3,"svg",5),r._UZ(4,"path",6),r.qZA(),r.kcU(),r.TgZ(5,"span",7),r._uU(6,"Presentation Mode"),r.qZA()(),r.TgZ(7,"button",8),r.O4$(),r.TgZ(8,"svg",5),r._UZ(9,"path",9),r.qZA(),r.kcU(),r.TgZ(10,"span",10),r._uU(11,"Open"),r.qZA()(),r.TgZ(12,"button",11),r.O4$(),r.TgZ(13,"svg",5),r._UZ(14,"path",12),r.qZA(),r.kcU(),r.TgZ(15,"span",13),r._uU(16,"Print"),r.qZA()(),r.TgZ(17,"button",14),r.O4$(),r.TgZ(18,"svg",5),r._UZ(19,"path",15),r.qZA(),r.kcU(),r.TgZ(20,"span",16),r._uU(21,"Download"),r.qZA()(),r.TgZ(22,"a",17),r.O4$(),r.TgZ(23,"svg",5),r._UZ(24,"path",18),r.qZA(),r.kcU(),r.TgZ(25,"span",19),r._uU(26,"Current View"),r.qZA()(),r.TgZ(27,"button",20),r.O4$(),r.TgZ(28,"svg",21),r._UZ(29,"path",22),r.qZA(),r.kcU(),r.TgZ(30,"span",23),r._uU(31,"Go to First Page"),r.qZA()(),r.TgZ(32,"button",24),r.NdJ("click",function(){return r.CHM(t),r.oxw().previousPage()}),r.O4$(),r.TgZ(33,"svg",21),r._UZ(34,"path",25),r.qZA(),r.kcU(),r.TgZ(35,"span",26),r._uU(36,"Go to Previous Page"),r.qZA()(),r.TgZ(37,"button",27),r.NdJ("click",function(){return r.CHM(t),r.oxw().nextPage()}),r.O4$(),r.TgZ(38,"svg",21),r._UZ(39,"path",28),r.qZA(),r.kcU(),r.TgZ(40,"span",29),r._uU(41,"Go to Next Page"),r.qZA()(),r.TgZ(42,"button",30),r.O4$(),r.TgZ(43,"svg",21),r._UZ(44,"path",31),r.qZA(),r.kcU(),r.TgZ(45,"span",32),r._uU(46,"Go to Last Page"),r.qZA()(),r.TgZ(47,"button",33),r.O4$(),r.TgZ(48,"svg",5),r._UZ(49,"path",34),r.qZA(),r.kcU(),r.TgZ(50,"span",35),r._uU(51,"Rotate Clockwise"),r.qZA()(),r.TgZ(52,"button",36),r.O4$(),r.TgZ(53,"svg",5),r._UZ(54,"path",37),r.qZA(),r.kcU(),r.TgZ(55,"span",38),r._uU(56,"Rotate Counterclockwise"),r.qZA()(),r.TgZ(57,"button",39),r.O4$(),r.TgZ(58,"svg",5),r._UZ(59,"path",40),r.qZA(),r.kcU(),r.TgZ(60,"span",41),r._uU(61,"Text Selection Tool"),r.qZA()(),r.TgZ(62,"button",42),r.O4$(),r.TgZ(63,"svg",5),r._UZ(64,"path",43),r.qZA(),r.kcU(),r.TgZ(65,"span",44),r._uU(66,"Hand Tool"),r.qZA()(),r.TgZ(67,"button",45),r.O4$(),r.TgZ(68,"svg",46),r._UZ(69,"path",47),r.qZA(),r.kcU(),r.TgZ(70,"span",48),r._uU(71,"Page Scrolling"),r.qZA()(),r.TgZ(72,"button",49),r.O4$(),r.TgZ(73,"svg",46),r._UZ(74,"path",47),r.qZA(),r.kcU(),r.TgZ(75,"span",50),r._uU(76,"Vertical Scrolling"),r.qZA()(),r.TgZ(77,"button",51),r.O4$(),r.TgZ(78,"svg",46),r._UZ(79,"path",52),r.qZA(),r.kcU(),r.TgZ(80,"span",53),r._uU(81,"Horizontal Scrolling"),r.qZA()(),r.TgZ(82,"button",54),r.O4$(),r.TgZ(83,"svg",46),r._UZ(84,"path",55),r.qZA(),r.kcU(),r.TgZ(85,"span",56),r._uU(86,"Wrapped Scrolling"),r.qZA()(),r.TgZ(87,"button",57),r.NdJ("click",function(){return r.CHM(t),r.oxw().onSpreadChange("off")}),r.O4$(),r.TgZ(88,"svg",58),r._UZ(89,"path",59),r.qZA(),r.kcU(),r.TgZ(90,"span",60),r._uU(91,"No Spreads"),r.qZA()(),r.TgZ(92,"button",61),r.NdJ("click",function(){return r.CHM(t),r.oxw().onSpreadChange("odd")}),r.O4$(),r.TgZ(93,"svg",46),r._UZ(94,"path",62),r.qZA(),r.kcU(),r.TgZ(95,"span",63),r._uU(96,"Odd Spreads"),r.qZA()(),r.TgZ(97,"button",64),r.NdJ("click",function(){return r.CHM(t),r.oxw().onSpreadChange("even")}),r.O4$(),r.TgZ(98,"svg",46),r._UZ(99,"path",65),r.qZA(),r.kcU(),r.TgZ(100,"span",66),r._uU(101,"Even Spreads"),r.qZA()(),r.TgZ(102,"button",67),r.O4$(),r.TgZ(103,"svg",68),r._UZ(104,"path",69)(105,"path",70)(106,"circle",71),r.qZA(),r.kcU(),r.TgZ(107,"span",72),r._uU(108,"Document Properties\u2026"),r.qZA()()()()}if(2&a){const t=r.oxw();r.Udp("top",t.secondaryToolbarTop)("transform","scale("+t.mobileFriendlyZoomScale+")")("transform-origin","right top"),r.xp6(2),r.ekj("invisible",!t.showPresentationModeButton),r.xp6(5),r.ekj("invisible",!t.showOpenFileButton),r.xp6(5),r.ekj("invisible",!t.showPrintButton),r.xp6(5),r.ekj("invisible",!t.showDownloadButton),r.xp6(5),r.ekj("invisible",!t.showBookmarkButton),r.xp6(5),r.ekj("invisible",!t.showPagingButtons),r.xp6(5),r.ekj("invisible",!t.showPagingButtons),r.Q6J("disabled",t.disablePreviousPage),r.xp6(5),r.ekj("invisible",!t.showPagingButtons),r.Q6J("disabled",t.disableNextPage),r.xp6(5),r.ekj("invisible",!t.showPagingButtons),r.xp6(5),r.ekj("invisible",!t.showRotateButton),r.xp6(5),r.ekj("invisible",!t.showRotateButton),r.xp6(5),r.ekj("invisible",!t.showHandToolButton),r.xp6(5),r.ekj("invisible",!t.showHandToolButton),r.xp6(5),r.ekj("invisible",!t.showScrollingButton),r.xp6(5),r.ekj("invisible",!t.showScrollingButton),r.xp6(5),r.ekj("invisible",!t.showScrollingButton),r.xp6(5),r.ekj("invisible",!t.showScrollingButton),r.xp6(5),r.ekj("invisible",!t.showSpreadButton),r.xp6(5),r.ekj("invisible",!t.showSpreadButton),r.xp6(5),r.ekj("invisible",!t.showSpreadButton),r.xp6(5),r.ekj("invisible",!t.showPropertiesButton)}}const yy=["thumbnailViewTemplate"];function xy(a,s){1&a&&r.Hsn(0,0,["*ngTemplateOutlet","customThumbnail ? customThumbnail : defaultThumbnail"])}function vy(a,s){1&a&&(r.TgZ(0,"a",8)(1,"div",9),r._UZ(2,"div",10),r.qZA()())}const Og=["*"];function Ay(a,s){1&a&&r.Hsn(0,0,["*ngTemplateOutlet","customSidebar ? customSidebar : defaultSidebar"])}function by(a,s){if(1&a){const t=r.EpF();r.TgZ(0,"div",2)(1,"div",3),r._UZ(2,"pdf-sidebar-toolbar",4),r.qZA(),r.TgZ(3,"pdf-sidebar-content",5),r.NdJ("thumbnailDrawn",function(g){return r.CHM(t),r.oxw().thumbnailDrawn.emit(g)}),r.qZA(),r._UZ(4,"div",6),r.qZA()}if(2&a){const t=r.oxw();r.Udp("top",t.sidebarPositionTop),r.xp6(1),r.Udp("display",t.hideSidebarToolbar?"none":""),r.xp6(1),r.Q6J("mobileFriendlyZoomScale",t.mobileFriendlyZoomScale),r.xp6(1),r.Q6J("customThumbnail",t.customThumbnail)("hideSidebarToolbar",t.hideSidebarToolbar)("mobileFriendlyZoomScale",t.mobileFriendlyZoomScale)}}function Ty(a,s){1&a&&(r.TgZ(0,"div",2),r._UZ(1,"pdf-search-input-field")(2,"pdf-find-previous")(3,"pdf-find-next"),r.qZA())}function Ey(a,s){if(1&a&&(r.TgZ(0,"div",3),r.GkF(1,0),r.qZA()),2&a){const t=r.oxw(),c=r.MAs(4);r.Udp("transform","scale("+t.mobileFriendlyZoomScale+")")("transform-origin","left center")("left",t.findbarLeft)("top",t.findbarTop),r.ekj("invisible",!t.showFindButton),r.xp6(1),r.Q6J("ngTemplateOutlet",t.customFindbarButtons?t.customFindbarButtons:c)}}function Sy(a,s){if(1&a&&r._UZ(0,"pdf-find-input-area",4)(1,"pdf-find-highlight-all")(2,"pdf-find-match-case")(3,"pdf-find-current-page-only")(4,"pdf-find-range")(5,"pdf-find-entire-word")(6,"pdf-find-entire-phrase")(7,"pdf-find-ignore-accents")(8,"pdf-find-fuzzily")(9,"pdf-find-results-count")(10,"pdf-findbar-message-container"),2&a){const t=r.oxw();r.Q6J("customFindbarInputArea",t.customFindbarInputArea),r.xp6(1),r.ekj("hidden",!t.showFindHighlightAll),r.xp6(1),r.ekj("hidden",!t.showFindMatchCase),r.xp6(1),r.ekj("hidden",!t.showFindCurrentPageOnly),r.xp6(1),r.ekj("hidden",!t.showFindPageRange),r.xp6(1),r.ekj("hidden",!t.showFindEntireWord),r.xp6(1),r.ekj("hidden",!t.showFindEntirePhrase),r.xp6(1),r.ekj("hidden",!t.showFindIgnoreAccents),r.xp6(1),r.ekj("hidden",!t.showFindFuzzySearch),r.xp6(1),r.ekj("hidden",!t.showFindResultsCount),r.xp6(1),r.ekj("hidden",!t.showFindMessages)}}const M_=["button"],By=["button1"],ky=["button2"];function Py(a,s){if(1&a){const t=r.EpF();r.TgZ(0,"button",2,3),r.NdJ("click",function(){return r.CHM(t),r.oxw().rotateCW()}),r.O4$(),r.TgZ(2,"svg",4),r._UZ(3,"path",5),r.qZA()()}if(2&a){const t=r.oxw();r.ekj("invisible",!t.showRotateButton),r.Q6J("disabled",t.disableRotate)}}function Iy(a,s){if(1&a){const t=r.EpF();r.TgZ(0,"button",6,7),r.NdJ("click",function(){return r.CHM(t),r.oxw().rotateCCW()}),r.O4$(),r.TgZ(2,"svg",4),r._UZ(3,"path",8),r.qZA()()}if(2&a){const t=r.oxw();r.ekj("invisible",!t.showRotateButton),r.Q6J("disabled",t.disableRotate)}}const Ry=["sizeSelector"];function Oy(a,s){if(1&a&&(r.TgZ(0,"option",5),r._uU(1),r.qZA()),2&a){const t=s.$implicit;r.Q6J("id",t.id),r.uIk("value",t.value)("data-l10n-id",t.dataL10nId)("data-l10n-args",t.dataL10nArgs),r.xp6(1),r.hij(" ",t.displayValue," ")}}function zy(a,s){1&a&&r.Hsn(0,0,["*ngTemplateOutlet","customToolbar ? customToolbar : defaultToolbar"])}function Vy(a,s){if(1&a&&(r.TgZ(0,"div",7)(1,"div",8),r._UZ(2,"pdf-toggle-sidebar",9)(3,"pdf-find-button",10)(4,"pdf-paging-area",11),r.qZA(),r._UZ(5,"pdf-zoom-toolbar",12),r.TgZ(6,"div",13)(7,"div",14)(8,"button",15),r.O4$(),r.TgZ(9,"svg",16),r._UZ(10,"path",17),r.qZA(),r.kcU(),r.TgZ(11,"span",18),r._uU(12,"Disable Editing"),r.qZA()(),r.TgZ(13,"button",19),r.O4$(),r.TgZ(14,"svg",16),r._UZ(15,"path",20),r.qZA(),r.kcU(),r.TgZ(16,"span",21),r._uU(17,"FreeText Annotation"),r.qZA()(),r.TgZ(18,"button",22),r.O4$(),r.TgZ(19,"svg",23)(20,"g")(21,"g",24),r._UZ(22,"path",25),r.qZA()()(),r.kcU(),r.TgZ(23,"span",26),r._uU(24,"Ink Annotation"),r.qZA()()(),r._UZ(25,"pdf-hand-tool",27)(26,"pdf-select-tool",28)(27,"pdf-rotate-page",29)(28,"pdf-rotate-page",29)(29,"pdf-presentation-mode",30)(30,"pdf-open-file",31)(31,"pdf-print",32)(32,"pdf-download",33)(33,"pdf-bookmark",34)(34,"pdf-toggle-secondary-toolbar",35),r.qZA()()),2&a){const t=r.oxw();r.xp6(2),r.Q6J("showSidebarButton",t.showSidebarButton),r.xp6(1),r.Q6J("showFindButton",t.showFindButton)("textLayer",t.textLayer),r.xp6(1),r.Q6J("showPagingButtons",t.showPagingButtons),r.xp6(1),r.Q6J("showZoomButtons",t.showZoomButtons)("zoomLevels",t.zoomLevels),r.xp6(20),r.Q6J("showHandToolButton",t.showHandToolButton),r.xp6(1),r.Q6J("showSelectToolButton",t.showHandToolButton),r.xp6(1),r.Q6J("showRotateButton",t.showRotateButton)("clockwise",!0)("counterClockwise",!1),r.xp6(1),r.Q6J("showRotateButton",t.showRotateButton)("clockwise",!1)("counterClockwise",!0),r.xp6(1),r.Q6J("showPresentationModeButton",t.showPresentationModeButton),r.xp6(1),r.Q6J("showOpenFileButton",t.showOpenFileButton),r.xp6(1),r.Q6J("showPrintButton",t.showPrintButton),r.xp6(1),r.Q6J("showDownloadButton",t.showDownloadButton),r.xp6(1),r.Q6J("showBookmarkButton",t.showBookmarkButton),r.xp6(1),r.Q6J("showSecondaryToolbarButton",t.showSecondaryToolbarButton)}}function Ny(a,s){if(1&a&&r._UZ(0,"link",6),2&a){const t=r.oxw();r.uIk("xhref",t.localeFolderPath+"/locale.properties")}}function Uy(a,s){1&a&&r._UZ(0,"pdf-dark-theme")}function Gy(a,s){1&a&&r._UZ(0,"pdf-light-theme")}function Zy(a,s){1&a&&r._UZ(0,"pdf-acroform-dark-theme")}function jy(a,s){1&a&&r._UZ(0,"pdf-acroform-default-theme")}function Hy(a,s){1&a&&r.Hsn(0,0,["*ngTemplateOutlet","customPdfViewer ? customPdfViewer : defaultPdfViewer"])}function qy(a,s){1&a&&r.Hsn(0,1,["*ngTemplateOutlet","customFreeFloatingBar ? customFreeFloatingBar : defaultFreeFloatingBar"])}function Yy(a,s){if(1&a&&(r.TgZ(0,"div",27),r.YNc(1,qy,1,0,"ng-content",3),r.qZA()),2&a){const t=r.oxw(2),c=r.MAs(10);r.xp6(1),r.Q6J("ngTemplateOutlet",t.customFreeFloatingBar?t.customFreeFloatingBar:c)}}function Qy(a,s){1&a&&(r.TgZ(0,"div",28),r._uU(1),r.ALo(2,"async"),r.ALo(3,"translate"),r.qZA()),2&a&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,r.xi3(3,3,"unverified_signature_warning","This PDF file contains a digital signature. The PDF viewer can't verify if the signature is valid. Please download the file and open it in Acrobat Reader to verify the signature is valid."))," "))}function Wy(a,s){1&a&&(r.TgZ(0,"div",29),r._uU(1),r.ALo(2,"async"),r.ALo(3,"translate"),r.qZA()),2&a&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,r.xi3(3,3,"modified_background_warning","This PDF is rendered with a custom background. It does not look the way its author intended it to look."))," "))}function Xy(a,s){if(1&a){const t=r.EpF();r.TgZ(0,"div",7,8)(2,"div",9)(3,"div",10)(4,"div",11),r.NdJ("resize",function(){return r.CHM(t),r.oxw().onResize()},!1,r.Jf7),r.YNc(5,Yy,2,1,"div",12),r.TgZ(6,"pdf-sidebar",13,14),r.NdJ("thumbnailDrawn",function(g){return r.CHM(t),r.oxw().thumbnailDrawn.emit(g)}),r.qZA(),r.TgZ(8,"div",15),r._UZ(9,"pdf-dummy-components"),r.TgZ(10,"pdf-toolbar",16),r.NdJ("onToolbarLoaded",function(){return r.CHM(t),r.oxw().onToolbarLoaded}),r.qZA(),r.TgZ(11,"pdf-secondary-toolbar",17,18),r.NdJ("spreadChange",function(g){return r.CHM(t),r.oxw().onSpreadChange(g)})("secondaryMenuIsEmpty",function(g){return r.CHM(t),r.oxw().onSecondaryMenuIsEmpty(g)}),r.qZA(),r._UZ(13,"pdf-findbar",19)(14,"pdf-context-menu"),r.TgZ(15,"div",20),r.YNc(16,Qy,4,6,"div",21),r.YNc(17,Wy,4,6,"div",22),r.TgZ(18,"div",23),r.NdJ("dblclick",function(g){return r.CHM(t),r.oxw().zoomToPageWidth(g)}),r.qZA()(),r._UZ(19,"pdf-error-message"),r.qZA(),r.TgZ(20,"div",24),r._UZ(21,"pdf-password-dialog")(22,"pdf-document-properties-dialog")(23,"pdf-prepare-printing-dialog"),r.qZA()(),r._UZ(24,"input",25)(25,"div",26),r.qZA()()()}if(2&a){const t=r.oxw();r.Udp("height",t.minHeight?t.minHeight:t.height),r.xp6(3),r.Udp("background-color",t.backgroundColor),r.xp6(2),r.Q6J("ngIf",t.showFreeFloatingBar),r.xp6(1),r.Q6J("sidebarPositionTop",t.sidebarPositionTop)("sidebarVisible",t.sidebarVisible||!1)("showSidebarButton",t.showSidebarButton)("customSidebar",t.customSidebar)("customThumbnail",t.customThumbnail)("mobileFriendlyZoomScale",t.mobileFriendlyZoomScale),r.xp6(4),r.Q6J("customToolbar",t.customToolbar)("mobileFriendlyZoomScale",t.mobileFriendlyZoomScale)("primaryMenuVisible",t.primaryMenuVisible)("showBookmarkButton",t.showBookmarkButton)("showDownloadButton",t.showDownloadButton)("showFindButton",t.showFindButton)("showHandToolButton",t.showHandToolButton)("showOpenFileButton",t.showOpenFileButton)("showPrintButton",t.showPrintButton&&t.enablePrint)("showPagingButtons",t.showPagingButtons)("showPresentationModeButton",t.showPresentationModeButton)("showRotateButton",t.showRotateButton)("showSecondaryToolbarButton",t.showSecondaryToolbarButton&&!t.hideKebabMenuForSecondaryToolbar)("showSidebarButton",t.showSidebarButton)("showZoomButtons",t.showZoomButtons)("textLayer",t.textLayer)("toolbarMarginTop",t.toolbarMarginTop)("toolbarWidth",t.toolbarWidth)("zoomLevels",t.zoomLevels),r.xp6(1),r.Q6J("customSecondaryToolbar",t.customSecondaryToolbar)("secondaryToolbarTop",t.secondaryToolbarTop)("mobileFriendlyZoomScale",t.mobileFriendlyZoomScale)("showPresentationModeButton",t.showPresentationModeButton)("showOpenFileButton",t.showOpenFileButton)("showPrintButton",t.showPrintButton&&t.enablePrint)("showDownloadButton",t.showDownloadButton)("showBookmarkButton",t.showBookmarkButton)("showPagingButtons",t.showPagingButtons)("showRotateButton",t.showRotateButton)("showHandToolButton",t.showHandToolButton)("showScrollingButton",t.showScrollingButton)("showSpreadButton",t.showSpreadButton)("showPropertiesButton",t.showPropertiesButton),r.xp6(2),r.Q6J("findbarLeft",t.findbarLeft)("findbarTop",t.findbarTop)("mobileFriendlyZoomScale",t.mobileFriendlyZoomScale)("showFindButton",t.showFindButton||!1)("customFindbarInputArea",t.customFindbarInputArea)("customFindbarButtons",t.customFindbarButtons)("showFindCurrentPageOnly",t.showFindCurrentPageOnly)("showFindEntirePhrase",t.showFindEntirePhrase)("showFindEntireWord",t.showFindEntireWord)("showFindFuzzySearch",t.showFindFuzzySearch)("showFindHighlightAll",t.showFindHighlightAll)("showFindIgnoreAccents",t.showFindIgnoreAccents)("showFindMatchCase",t.showFindMatchCase)("showFindMessages",t.showFindMessages)("showFindPageRange",t.showFindPageRange)("showFindResultsCount",t.showFindResultsCount),r.xp6(2),r.Udp("top",t.viewerPositionTop)("background-color",t.backgroundColor),r.xp6(1),r.Q6J("ngIf",t.hasSignature&&t.showUnverifiedSignatures),r.xp6(1),r.Q6J("ngIf",t.pdfBackground)}}function Jy(a,s){}const T_=["*","*"];var Kf=(()=>{return(a=Kf||(Kf={}))[a.FOUND=0]="FOUND",a[a.NOT_FOUND=1]="NOT_FOUND",a[a.WRAPPED=2]="WRAPPED",a[a.PENDING=3]="PENDING",Kf;var a})();const Ky="undefined"!=typeof window&&!!window.MSInputMethodContext&&!!document.documentMode,$y="undefined"==typeof navigator||/Edge\/\d./i.test(navigator.userAgent),ex="undefined"==typeof ReadableStream||void 0===Promise.allSettled;function vl(a){return a&&a.includes("bleeding-edge")?"2.15.442":"2.14.308"}let Wt={needsES5:Ky||$y||ex,cursorToolOnLoad:0,defaultUrl:"",defaultZoomValue:void 0,disableHistory:!1,disablePageLabels:!1,enablePrintAutoRotate:!1,enableWebGL:!1,eventBusDispatchToDOM:!1,externalLinkRel:"noopener noreferrer nofollow",externalLinkTarget:0,historyUpdateUrl:!1,ignoreDestinationZoom:!1,imageResourcesPath:"./images/",maxCanvasPixels:16777216,pdfBugEnabled:!1,rangeChunkSize:65536,removePageBorders:!1,renderer:"canvas",renderInteractiveForms:!0,renderForms:!0,enableXfa:!0,sidebarViewOnLoad:-1,scrollModeOnLoad:-1,spreadModeOnLoad:-1,textLayerMode:2,useOnlyCssZoom:!1,viewOnLoad:0,cMapPacked:!0,cMapUrl:()=>`./${Wt.assetsFolder}/cmaps/`,disableAutoFetch:!1,disableCreateObjectURL:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,isEvalSupported:!0,maxImageSize:-1,pdfBug:!1,postMessageTransfers:!0,verbosity:1,workerPort:null,assetsFolder:"assets",sandboxBundleSrc:()=>Wt.needsES5?`./${Wt.assetsFolder}/pdf.sandbox-${vl(Wt.assetsFolder)}-es5.js`:`./${Wt.assetsFolder}/pdf.sandbox-${vl(Wt.assetsFolder)}.js`,workerSrc:()=>Wt.needsES5?`./${Wt.assetsFolder}/pdf.worker-${vl(Wt.assetsFolder)}-es5.js`:`./${Wt.assetsFolder}/pdf.worker-${vl(Wt.assetsFolder)}.js`,standardFontDataUrl:()=>`../${Wt.assetsFolder}/standard_fonts/`,doubleTapZoomFactor:"page-width",enableScripting:!0,defaultCacheSize:50,passwordPrompt:void 0,annotationEditorEnabled:!1};"undefined"!=typeof window&&(window.pdfDefaultOptions?Wt=window.pdfDefaultOptions:window.pdfDefaultOptions=Wt);var Al=(()=>{return(a=Al||(Al={}))[a.ERRORS=0]="ERRORS",a[a.WARNINGS=1]="WARNINGS",a[a.INFOS=5]="INFOS",Al;var a})();const nx=["toolbarViewer","numPages","pageNumber","scaleSelectContainer","customScaleOption","scaleSelect","scrollPage","previous","next","zoomIn","zoomOut","viewFind","openFile","print","presentationMode","download","viewBookmark","secondaryToolbar","secondaryToolbarToggle","secondaryToolbarButtonContainer","secondaryPresentationMode","secondaryOpenFile","secondaryPrint","secondaryDownload","secondaryViewBookmark","firstPage","lastPage","pageRotateCw","pageRotateCcw","cursorSelectTool","cursorHandTool","scrollVertical","scrollHorizontal","scrollWrapped","spreadNone","spreadOdd","spreadEven","documentProperties","contextFirstPage","contextLastPage","contextPageRotateCw","contextPageRotateCcw","currentOutlineItem","outerContainer","viewerContainer","sidebarToggle","viewThumbnail","viewOutline","viewAttachments","thumbnailView","outlineView","attachmentsView","outerContainer","sidebarResizer","outlineOptionsContainer","findbar","viewFind","findInput","findInputMultiline","findHighlightAll","findCurrentPage","findRange","findMatchCase","findMatchDiacritics","findEntireWord","findMultipleSearchTexts","findIgnoreAccents","findMsg","findResultsCount","findPrevious","findNext","findFuzzy","passwordOverlay","passwordText","password","passwordSubmit","passwordCancel","documentPropertiesOverlay","documentPropertiesClose","fileNameField","fileSizeField","titleField","authorField","subjectField","keywordsField","creationDateField","modificationDateField","creatorField","producerField","versionField","pageCountField","pageSizeField","linearizedField","errorWrapper","errorMessage","errorClose","errorMoreInfo","errorShowMore","errorShowLess","scaleSelectContainer","viewAttachments","viewLayers","viewThumbnail","viewOutline","editorModeButtons","editorNone","editorFreeText"];let E_=(()=>{class a{addMissingStandardWidgets(){this.dummyComponentsContainer=document.getElementsByClassName("dummy-pdf-viewer-components")[0];const t=this.dummyComponentsContainer;if(t)for(let c=0;c<t.children.length;c++){const g=t.firstChild;g&&t.removeChild(g)}if(nx.forEach(c=>{if(this.needsDummyWidget(c)){const g=document.createElement("span");g.id=c,g.className="invisible dummy-component",this.dummyComponentsContainer.appendChild(g)}}),this.needsDummyWidget("scaleSelect")){const c=document.createElement("select");c.id="scaleSelect",c.className="invisible dummy-component",this.dummyComponentsContainer.appendChild(c)}}needsDummyWidget(t){return!document.getElementById(t)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-dummy-components"]],decls:1,vars:0,consts:[[1,"invisible","dummy-pdf-viewer-components"]],template:function(t,c){1&t&&r._UZ(0,"span",0)},encapsulation:2}),a})(),ox=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-dark-theme"]],decls:0,vars:0,template:function(t,c){},styles:["ngx-extended-pdf-viewer .textLayer{position:absolute;text-align:initial;left:0;top:0;right:0;bottom:0;overflow:hidden;opacity:.2;line-height:1}ngx-extended-pdf-viewer .textLayer span,ngx-extended-pdf-viewer .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}ngx-extended-pdf-viewer .textLayer .highlight{position:static;margin:-1px;padding:1px;background-color:var(#b400aa);border-radius:4px}ngx-extended-pdf-viewer .textLayer .highlight.appended{position:initial}ngx-extended-pdf-viewer .textLayer .highlight.begin{border-radius:4px 0 0 4px}ngx-extended-pdf-viewer .textLayer .highlight.end{border-radius:0 4px 4px 0}ngx-extended-pdf-viewer .textLayer .highlight.middle{border-radius:0}ngx-extended-pdf-viewer .textLayer .highlight.selected{background-color:#006400}ngx-extended-pdf-viewer .textLayer ::selection{background:blue}ngx-extended-pdf-viewer .textLayer br::selection{background:transparent}ngx-extended-pdf-viewer .textLayer .endOfContent{display:block;position:absolute;left:0;top:100%;right:0;bottom:0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}ngx-extended-pdf-viewer .textLayer .endOfContent.active{top:0}ngx-extended-pdf-viewer *{box-sizing:content-box}ngx-extended-pdf-viewer :root{--pdfViewer-padding-bottom: none;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--zoom-factor: 1}@media screen and (forced-colors: active){ngx-extended-pdf-viewer :root{--pdfViewer-padding-bottom: 9px;--page-margin: 9px auto 0;--page-border: none;--spreadHorizontalWrapped-margin-LR: 4.5px}}ngx-extended-pdf-viewer .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}ngx-extended-pdf-viewer .pdfViewer .canvasWrapper{overflow:hidden}ngx-extended-pdf-viewer .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:1px auto -8px;position:relative;overflow:visible;border:9px solid transparent;background-clip:content-box;border-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAQAAADYWf5HAAAA6UlEQVR4Xl2Pi2rEMAwE16fm1f7/r14v7w4rI0IzLAF7hLxNevBSEMEF5+OilNCsRd8ZMyn+a4NmsOT8WJw1lFbSYgGFzF2bLFoLjTClWjKKGRWpDYAGXUnZ4uhbBUzF3Oe/GG/ue2fn4GgsyXhNgysV2JnrhKEMg4fEZcALmiKbNhBBRFpSyDOj1G4QOVly6O1FV54ZZq8OVygrciDt6JazRgi1ljTPH0gbrPmHPXAbCiDd4GawIjip1TPh9tt2sz24qaCjr/jAb/GBFTbq9KZ7Ke/Cqt8nayUikZKsWZK7Fe6bg5dOUt8fZHWG2BHc+6EAAAAASUVORK5CYII=) 9 9 repeat;background-color:#fff}ngx-extended-pdf-viewer .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}ngx-extended-pdf-viewer .pdfViewer.singlePageView .page{margin:0}ngx-extended-pdf-viewer .html .pdfViewer.scrollHorizontal,ngx-extended-pdf-viewer .html .pdfViewer.scrollWrapped,ngx-extended-pdf-viewer .html .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}ngx-extended-pdf-viewer .pdfViewer.scrollHorizontal,ngx-extended-pdf-viewer .spread{white-space:nowrap}ngx-extended-pdf-viewer .pdfViewer.removePageBorders,ngx-extended-pdf-viewer .pdfViewer.scrollHorizontal .spread,ngx-extended-pdf-viewer .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}ngx-extended-pdf-viewer .spread .page,ngx-extended-pdf-viewer .pdfViewer.scrollHorizontal .page,ngx-extended-pdf-viewer .pdfViewer.scrollWrapped .page,ngx-extended-pdf-viewer .pdfViewer.scrollHorizontal .spread,ngx-extended-pdf-viewer .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}ngx-extended-pdf-viewer .spread .page,ngx-extended-pdf-viewer .pdfViewer.scrollHorizontal .page,ngx-extended-pdf-viewer .pdfViewer.scrollWrapped .page{margin-left:-3.5px;margin-right:-3.5px}ngx-extended-pdf-viewer .pdfViewer.removePageBorders .spread .page,ngx-extended-pdf-viewer .pdfViewer.removePageBorders.scrollHorizontal .page,ngx-extended-pdf-viewer .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}ngx-extended-pdf-viewer .pdfViewer .page canvas{margin:0;display:block}ngx-extended-pdf-viewer .pdfViewer .page canvas[hidden]{display:none}ngx-extended-pdf-viewer .pdfViewer .page .loadingIcon{position:absolute;display:block;left:0;top:0;right:0;bottom:0;background:url(data:image/gif;base64,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) center no-repeat}ngx-extended-pdf-viewer .pdfPresentationMode .pdfViewer{margin-left:0;margin-right:0}ngx-extended-pdf-viewer .pdfPresentationMode .pdfViewer .page,ngx-extended-pdf-viewer .pdfPresentationMode .pdfViewer .spread{display:block}ngx-extended-pdf-viewer .pdfPresentationMode .pdfViewer .page,ngx-extended-pdf-viewer .pdfPresentationMode .pdfViewer.removePageBorders .page{margin-left:auto;margin-right:auto}ngx-extended-pdf-viewer .pdfPresentationMode:-webkit-full-screen .pdfViewer .page{margin-bottom:100vh;border:0}ngx-extended-pdf-viewer .pdfPresentationMode:fullscreen .pdfViewer .page{margin-bottom:100vh;border:0}ngx-extended-pdf-viewer .html .toolbar *,ngx-extended-pdf-viewer .html .treeItem *{padding:0;margin:0}ngx-extended-pdf-viewer .html{height:100%;width:100%;font-size:10px}ngx-extended-pdf-viewer .body{height:100%;width:100%}ngx-extended-pdf-viewer .body,ngx-extended-pdf-viewer .pdf-viewer input,ngx-extended-pdf-viewer .pdf-viewer button,ngx-extended-pdf-viewer .pdf-viewer select{font:message-box;outline:none;scrollbar-color:var(--scrollbar-color) var(--scrollbar-bg-color)}ngx-extended-pdf-viewer button{cursor:pointer}ngx-extended-pdf-viewer select{background-color:#474747!important;color:#d9d9d9}ngx-extended-pdf-viewer .hidden{display:none!important}ngx-extended-pdf-viewer [hidden]{display:none!important}ngx-extended-pdf-viewer .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}ngx-extended-pdf-viewer #viewerContainer.pdfPresentationMode:-webkit-full-screen{top:0;border-top:2px solid rgba(0,0,0,0);background-color:#000;width:100%;height:100%;overflow:hidden;cursor:none;-webkit-user-select:none;user-select:none}ngx-extended-pdf-viewer #viewerContainer.pdfPresentationMode:fullscreen{top:0;border-top:2px solid rgba(0,0,0,0);background-color:#000;width:100%;height:100%;overflow:hidden;cursor:none;-webkit-user-select:none;user-select:none}ngx-extended-pdf-viewer .pdfPresentationMode:-webkit-full-screen a:not(.internalLink){display:none}ngx-extended-pdf-viewer .pdfPresentationMode:fullscreen a:not(.internalLink){display:none}ngx-extended-pdf-viewer .pdfPresentationMode:-webkit-full-screen .textLayer span{cursor:none}ngx-extended-pdf-viewer .pdfPresentationMode:fullscreen .textLayer span{cursor:none}ngx-extended-pdf-viewer .pdfPresentationMode.pdfPresentationModeControls>*,ngx-extended-pdf-viewer .pdfPresentationMode.pdfPresentationModeControls .textLayer span{cursor:default}ngx-extended-pdf-viewer #outerContainer{width:100%;height:100%;position:relative}ngx-extended-pdf-viewer #sidebarContainer{position:absolute;top:32px;bottom:0;width:200px;visibility:hidden;z-index:100;transition-duration:.2s;transition-timing-function:ease}html[dir=ltr] ngx-extended-pdf-viewer #sidebarContainer{transition-property:left;left:-200px}html[dir=rtl] ngx-extended-pdf-viewer #sidebarContainer{transition-property:right;right:-200px}ngx-extended-pdf-viewer .loadingInProgress #sidebarContainer{top:36px}ngx-extended-pdf-viewer #outerContainer.sidebarResizing #sidebarContainer{transition-duration:0s;-webkit-user-select:none;user-select:none}ngx-extended-pdf-viewer #outerContainer.sidebarMoving #sidebarContainer,ngx-extended-pdf-viewer #outerContainer.sidebarOpen #sidebarContainer{visibility:visible}html[dir=ltr] ngx-extended-pdf-viewer #outerContainer.sidebarOpen #sidebarContainer{left:0}html[dir=rtl] ngx-extended-pdf-viewer #outerContainer.sidebarOpen #sidebarContainer{right:0}ngx-extended-pdf-viewer #mainContainer{position:absolute;top:0;right:0;bottom:0;left:0;min-width:320px}ngx-extended-pdf-viewer #sidebarContent{top:32px;bottom:0;overflow:auto;-webkit-overflow-scrolling:touch;position:absolute;width:100%;background-color:#0000001a}html[dir=ltr] ngx-extended-pdf-viewer #sidebarContent{left:0}html[dir=rtl] ngx-extended-pdf-viewer #sidebarContent{right:0}ngx-extended-pdf-viewer #viewerContainer{overflow:auto;-webkit-overflow-scrolling:auto;position:absolute;top:32px;right:0;bottom:0;left:0;outline:none}ngx-extended-pdf-viewer #viewerContainer:not(.pdfPresentationMode){transition-duration:.2s;transition-timing-function:ease}ngx-extended-pdf-viewer #outerContainer.sidebarResizing #viewerContainer{transition-duration:0s}html[dir=ltr] ngx-extended-pdf-viewer #outerContainer.sidebarOpen #viewerContainer:not(.pdfPresentationMode){transition-property:left;left:200px}html[dir=rtl] ngx-extended-pdf-viewer #outerContainer.sidebarOpen #viewerContainer:not(.pdfPresentationMode){transition-property:right;right:200px}ngx-extended-pdf-viewer .toolbar{position:relative;left:0;right:0;z-index:9999;cursor:default;border:0;border-bottom:1px solid rgba(0,0,0,.5)}ngx-extended-pdf-viewer #toolbarContainer{width:100%}ngx-extended-pdf-viewer #toolbarSidebar{width:calc(100% - 10px);height:32px;background-color:#424242;color:#d9d9d9;border:none;padding-top:1px;padding-left:5px;padding-right:5px}html[dir=ltr] #toolbarSidebarRight .toolbarButton{margin-right:3px!important}html[dir=rtl] #toolbarSidebarRight .toolbarButton{margin-left:3px!important}html[dir=ltr] #sidebarToggle{margin-right:5px}html[dir=rtl] #sidebarToggle{margin-left:5px}ngx-extended-pdf-viewer #sidebarResizer{position:absolute;top:0;bottom:0;width:6px;z-index:200;cursor:ew-resize}html[dir=ltr] ngx-extended-pdf-viewer #sidebarResizer{right:-6px}html[dir=rtl] ngx-extended-pdf-viewer #sidebarResizer{left:-6px}ngx-extended-pdf-viewer #toolbarContainer,ngx-extended-pdf-viewer .findbar,ngx-extended-pdf-viewer .secondaryToolbar{position:relative;min-height:32px;background-color:#474747}ngx-extended-pdf-viewer #toolbarViewer{min-height:32px}ngx-extended-pdf-viewer #loadingBar{position:relative;width:100%;height:4px;background-color:#333;border-bottom:1px solid #333333}ngx-extended-pdf-viewer #loadingBar .progress{position:absolute;top:0;left:0;width:0%;height:100%;background-color:#ddd;overflow:hidden;transition:width .2s}@keyframes progressIndeterminate{0%{left:-142px}to{left:0}}ngx-extended-pdf-viewer #loadingBar .progress.indeterminate{background-color:#999;transition:none}ngx-extended-pdf-viewer #loadingBar .progress.indeterminate .glimmer{position:absolute;top:0;left:0;height:100%;width:calc(100% + 150px);background:repeating-linear-gradient(135deg,#bbbbbb 0,#999999 5px,#999999 45px,#dddddd 55px,#dddddd 95px,#bbbbbb 100px);animation:progressIndeterminate .95s linear infinite}ngx-extended-pdf-viewer .findbar,ngx-extended-pdf-viewer .secondaryToolbar{top:40px;position:absolute;z-index:10000;height:auto;min-width:16px;padding:0 6px;margin:4px 2px;color:#d9d9d9;font-size:12px;line-height:14px;text-align:left;cursor:default}ngx-extended-pdf-viewer .findbar{min-width:300px}ngx-extended-pdf-viewer .findbar>div{height:32px}ngx-extended-pdf-viewer .findbar.wrapContainers>div{clear:both}ngx-extended-pdf-viewer .findbar.wrapContainers>div#findbarMessageContainer{height:auto}html[dir=ltr] ngx-extended-pdf-viewer .findbar{left:34px}html[dir=rtl] ngx-extended-pdf-viewer .findbar{right:34px}ngx-extended-pdf-viewer .findbar label{-webkit-user-select:none;user-select:none}ngx-extended-pdf-viewer #findInput{width:200px}ngx-extended-pdf-viewer #findInput::placeholder{font-style:italic}ngx-extended-pdf-viewer #findInput[data-status=pending]{background-image:url(data:image/png;base64,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);background-repeat:no-repeat;background-position:right}html[dir=rtl] ngx-extended-pdf-viewer #findInput[data-status=pending]{background-position:left}#findInput[data-status=notFound]{background-color:#f66}html[dir=rtl] ngx-extended-pdf-viewer ngx-extended-pdf-viewer .secondaryToolbar{padding:6px;height:auto;z-index:3000}html[dir=ltr] ngx-extended-pdf-viewer .secondaryToolbar{right:4px}html[dir=rtl] ngx-extended-pdf-viewer .secondaryToolbar{left:4px}ngx-extended-pdf-viewer #secondaryToolbarButtonContainer{width:250px;max-height:400px;overflow-y:auto;-webkit-overflow-scrolling:touch}ngx-extended-pdf-viewer #secondaryToolbarButtonContainer.hiddenScrollModeButtons>.scrollModeButtons,ngx-extended-pdf-viewer #secondaryToolbarButtonContainer.hiddenSpreadModeButtons>.spreadModeButtons{display:none!important}ngx-extended-pdf-viewer .doorHanger,ngx-extended-pdf-viewer .doorHangerRight{border:1px solid rgba(0,0,0,.5);border-radius:2px}ngx-extended-pdf-viewer .doorHanger:after,ngx-extended-pdf-viewer .doorHanger:before,ngx-extended-pdf-viewer .doorHangerRight:after,ngx-extended-pdf-viewer .doorHangerRight:before{bottom:100%;border:solid rgba(0,0,0,0);content:\" \";height:0;width:0;position:absolute;pointer-events:none}ngx-extended-pdf-viewer .doorHanger:after,ngx-extended-pdf-viewer .doorHangerRight:after{border-bottom-color:#474747;border-width:8px}ngx-extended-pdf-viewer .doorHanger:before,ngx-extended-pdf-viewer .doorHangerRight:before{border-bottom-color:#00000080;border-width:9px}html[dir=ltr] ngx-extended-pdf-viewer .doorHanger:after,html[dir=rtl] ngx-extended-pdf-viewer .doorHangerRight:after{left:13px;margin-left:-8px}html[dir=ltr] ngx-extended-pdf-viewer .doorHanger:before,html[dir=rtl] ngx-extended-pdf-viewer .doorHangerRight:before{left:13px;margin-left:-9px}html[dir=rtl] ngx-extended-pdf-viewer .doorHanger:after,html[dir=ltr] ngx-extended-pdf-viewer .doorHangerRight:after{right:13px;margin-right:-8px}html[dir=rtl] ngx-extended-pdf-viewer .doorHanger:before,html[dir=ltr] ngx-extended-pdf-viewer .doorHangerRight:before{right:13px;margin-right:-9px}ngx-extended-pdf-viewer #findResultsCount{background-color:#d9d9d9;color:#474747;text-align:center;padding:3px 4px}ngx-extended-pdf-viewer #findMsg{font-style:italic;color:#f66}ngx-extended-pdf-viewer #findMsg:empty{display:none}ngx-extended-pdf-viewer #toolbarViewerMiddle{position:absolute;left:50%;transform:translate(-50%)}html[dir=ltr] ngx-extended-pdf-viewer #toolbarViewerLeft,html[dir=rtl] ngx-extended-pdf-viewer #toolbarViewerRight{float:left;margin-left:4px}html[dir=ltr] #toolbarSidebarLeft,html[dir=rtl] #toolbarSidebarRight{float:left}html[dir=ltr] ngx-extended-pdf-viewer #toolbarViewerRight,html[dir=rtl] ngx-extended-pdf-viewer #toolbarViewerLeft{float:right;margin-right:4px}html[dir=ltr] #toolbarSidebarRight,html[dir=rtl] #toolbarSidebarLeft{float:right}html[dir=ltr] ngx-extended-pdf-viewer #toolbarViewerLeft>*,html[dir=ltr] ngx-extended-pdf-viewer #toolbarViewerMiddle>*,html[dir=ltr] ngx-extended-pdf-viewer #toolbarViewerRight>*{position:relative;float:left}html[dir=ltr] #toolbarSidebarLeft *,html[dir=ltr] #toolbarSidebarRight *,html[dir=ltr] .findbar *{position:relative;float:left}html[dir=rtl] ngx-extended-pdf-viewer #toolbarViewerLeft>*,html[dir=rtl] ngx-extended-pdf-viewer #toolbarViewerMiddle>*,html[dir=rtl] ngx-extended-pdf-viewer #toolbarViewerRight>*,html[dir=rtl] ngx-extended-pdf-viewer .findbar *{position:relative;float:right}html[dir=rtl] #toolbarSidebarLeft *,html[dir=rtl] #toolbarSidebarRight *{position:relative;float:right}ngx-extended-pdf-viewer .toolbarButton,ngx-extended-pdf-viewer .secondaryToolbarButton,ngx-extended-pdf-viewer .dialogButton{border:0 none;background:none;width:32px;height:25px}ngx-extended-pdf-viewer .toolbarButton>span{display:inline-block;width:0;height:0;overflow:hidden}ngx-extended-pdf-viewer .toolbarButton[disabled],ngx-extended-pdf-viewer .secondaryToolbarButton[disabled],ngx-extended-pdf-viewer .dialogButton[disabled]{opacity:.5}ngx-extended-pdf-viewer .toolbarButton,ngx-extended-pdf-viewer .dropdownToolbarButton,ngx-extended-pdf-viewer .secondaryToolbarButton,ngx-extended-pdf-viewer .dialogButton{border:1px solid rgba(0,0,0,0);color:#d9d9d9}ngx-extended-pdf-viewer .toolbarButton,ngx-extended-pdf-viewer .secondaryToolbarButton,ngx-extended-pdf-viewer .dialogButton{min-width:16px;padding:2px 6px 0;border-radius:2px;font-size:12px;line-height:14px;-webkit-user-select:none;user-select:none;cursor:pointer}html[dir=ltr] ngx-extended-pdf-viewer .toolbarButton,html[dir=ltr] ngx-extended-pdf-viewer .dialogButton{margin:3px 2px 4px 0}html[dir=rtl] ngx-extended-pdf-viewer .toolbarButton,html[dir=rtl] ngx-extended-pdf-viewer .dialogButton{margin:3px 0 4px 2px}ngx-extended-pdf-viewer .dialogButton{background-color:#0003;background-clip:padding-box;border:1px solid rgba(0,0,0,.4)}ngx-extended-pdf-viewer .dropdownToolbarButton{background-color:#0003;border:1px solid rgba(0,0,0,.4)}ngx-extended-pdf-viewer .toolbarButton.toggled,ngx-extended-pdf-viewer .secondaryToolbarButton.toggled{background-color:#0003;border-color:#0006}ngx-extended-pdf-viewer .dropdownToolbarButton>select{color:#d9d9d9;background-color:#fffc}ngx-extended-pdf-viewer .dropdownToolbarButton>select>option{background:#474747}html[dir=ltr] ngx-extended-pdf-viewer .toolbarButton:first-child,html[dir=rtl] ngx-extended-pdf-viewer .toolbarButton:last-child{margin-left:4px}html[dir=ltr] ngx-extended-pdf-viewer .toolbarButton:last-child,html[dir=rtl] ngx-extended-pdf-viewer .toolbarButton:first-child{margin-right:4px}ngx-extended-pdf-viewer .toolbarButtonSpacer{width:30px;display:inline-block;height:1px}html[dir=ltr] ngx-extended-pdf-viewer #findPrevious{margin-left:3px}html[dir=ltr] ngx-extended-pdf-viewer #findNext{margin-right:3px}html[dir=rtl] ngx-extended-pdf-viewer #findPrevious{margin-right:3px}html[dir=rtl] ngx-extended-pdf-viewer #findNext{margin-left:3px}ngx-extended-pdf-viewer .toolbarButton:before,ngx-extended-pdf-viewer .secondaryToolbarButton:before{position:absolute;display:inline-block;top:4px;left:7px}html[dir=ltr] ngx-extended-pdf-viewer .secondaryToolbarButton:before{left:4px}html[dir=rtl] ngx-extended-pdf-viewer .secondaryToolbarButton:before{right:4px}ngx-extended-pdf-viewer .toolbarButton.bookmark,ngx-extended-pdf-viewer .secondaryToolbarButton.bookmark{box-sizing:border-box;outline:none;padding-top:4px;text-decoration:none}ngx-extended-pdf-viewer .secondaryToolbarButton.bookmark{padding-top:5px}ngx-extended-pdf-viewer .bookmark[href=\"#\"]{opacity:.5;pointer-events:none}ngx-extended-pdf-viewer .toolbarButton.pdfSidebarNotification:after{position:absolute;display:inline-block;top:1px;content:\"\";background-color:#70db55;height:9px;width:9px;border-radius:50%}html[dir=ltr] ngx-extended-pdf-viewer .toolbarButton.pdfSidebarNotification:after{left:17px}html[dir=rtl] ngx-extended-pdf-viewer .toolbarButton.pdfSidebarNotification:after{right:17px}ngx-extended-pdf-viewer .secondaryToolbarButton{position:relative;margin:0 0 4px;padding:3px 0 1px;height:auto;min-height:25px;width:200px;white-space:normal}html[dir=ltr] ngx-extended-pdf-viewer .secondaryToolbarButton{padding-left:24px;text-align:left}html[dir=rtl] ngx-extended-pdf-viewer .secondaryToolbarButton{padding-right:24px;text-align:right}html[dir=ltr] ngx-extended-pdf-viewer .secondaryToolbarButton.bookmark{padding-left:27px}html[dir=rtl] ngx-extended-pdf-viewer .secondaryToolbarButton.bookmark{padding-right:27px}html[dir=ltr] ngx-extended-pdf-viewer .secondaryToolbarButton>span{padding-right:4px}html[dir=rtl] ngx-extended-pdf-viewer .secondaryToolbarButton>span{padding-left:4px}ngx-extended-pdf-viewer .html .toolbarField{padding:3px 6px;margin:4px 0;border-radius:2px;background-color:#fffc;background-clip:padding-box;border-width:1px;border-style:solid;border-color:#0006;color:#4d4d4d;font-size:12px;line-height:14px;outline-style:none}ngx-extended-pdf-viewer .html .toolbarField::placeholder,ngx-extended-pdf-viewer .html .toolbarField:-ms-input-placeholder,ngx-extended-pdf-viewer .html .toolbarField::-ms-input-placeholder{color:#d9d9d9}ngx-extended-pdf-viewer .html .toolbarField[type=checkbox]{display:inline-block;margin:8px 0}ngx-extended-pdf-viewer .html .toolbarField.pageNumber{-moz-appearance:textfield;min-width:16px;text-align:right;width:40px}ngx-extended-pdf-viewer .html .toolbarField.pageNumber.visiblePageIsLoading{background-image:url(data:image/png;base64,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);background-repeat:no-repeat;background-position:1px}ngx-extended-pdf-viewer .html .toolbarField.pageNumber::-webkit-inner-spin-button,ngx-extended-pdf-viewer .html .toolbarField.pageNumber::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}ngx-extended-pdf-viewer .html .toolbarLabel{min-width:16px;padding:3px 6px 3px 2px;margin:4px 2px 4px 0;border:1px solid rgba(0,0,0,0);border-radius:2px;color:#d9d9d9;font-size:12px;line-height:14px;text-align:left;-webkit-user-select:none;user-select:none;cursor:default}ngx-extended-pdf-viewer .html #thumbnailView{position:absolute;width:calc(100% - 60px);top:0;bottom:0;padding:10px 30px 0;overflow:auto;-webkit-overflow-scrolling:touch}ngx-extended-pdf-viewer .html #thumbnailView>a:active{outline:0}ngx-extended-pdf-viewer .html .thumbnail{margin:0 10px 5px}html[dir=ltr] ngx-extended-pdf-viewer .thumbnail{float:left}html[dir=rtl] ngx-extended-pdf-viewer .thumbnail{float:right}ngx-extended-pdf-viewer #thumbnailView>a:last-of-type>.thumbnail{margin-bottom:10px}ngx-extended-pdf-viewer #thumbnailView>a:last-of-type>.thumbnail:not([data-loaded]){margin-bottom:9px}ngx-extended-pdf-viewer .thumbnail:not([data-loaded]){border:1px dashed rgba(255,0,0,.5);margin:-1px 9px 4px}ngx-extended-pdf-viewer .thumbnailImage{border:1px solid rgba(0,0,0,0);opacity:.8;z-index:1;background-color:#fff;background-clip:content-box}ngx-extended-pdf-viewer .thumbnailSelectionRing{border-radius:2px;padding:7px}ngx-extended-pdf-viewer .thumbnail.selected>.thumbnailSelectionRing>.thumbnailImage{opacity:1}ngx-extended-pdf-viewer .thumbnail.selected>.thumbnailSelectionRing{background-color:#fff6;background-clip:padding-box;color:#fff}ngx-extended-pdf-viewer #outlineView,ngx-extended-pdf-viewer #attachmentsView,ngx-extended-pdf-viewer #layersView{position:absolute;width:calc(100% - 8px);top:0;bottom:0;overflow:auto;-webkit-overflow-scrolling:touch;-webkit-user-select:none;user-select:none}ngx-extended-pdf-viewer #outlineView{padding:4px 4px 0}ngx-extended-pdf-viewer #attachmentsView{padding:3px 4px 0}html[dir=ltr] ngx-extended-pdf-viewer .treeWithDeepNesting>.treeItem,html[dir=ltr] ngx-extended-pdf-viewer .treeItem>.treeItems{margin-left:20px}html[dir=rtl] ngx-extended-pdf-viewer .treeWithDeepNesting>.treeItem,html[dir=rtl] ngx-extended-pdf-viewer .treeItem>.treeItems{margin-right:20px}ngx-extended-pdf-viewer .treeItem>a{text-decoration:none;display:inline-block;min-width:95%;min-width:calc(100% - 4px);height:auto;margin-bottom:1px;border-radius:2px;color:#424242;font-size:13px;line-height:15px;-webkit-user-select:none;user-select:none;white-space:normal;cursor:pointer}html[dir=ltr] ngx-extended-pdf-viewer .treeItem>a{padding:2px 0 5px 4px}html[dir=rtl] ngx-extended-pdf-viewer .treeItem>a{padding:2px 4px 5px 0}ngx-extended-pdf-viewer #layersView .treeItem>a>*{cursor:pointer}html[dir=ltr] ngx-extended-pdf-viewer #layersView .treeItem>a>label{padding-left:4px}html[dir=rtl] ngx-extended-pdf-viewer #layersView .treesItem>a>label{padding-right:4px}ngx-extended-pdf-viewer .treeItemToggler{position:relative;height:0;width:0}ngx-extended-pdf-viewer .treeItemToggler:before{content:url(\"data:image/svg+xml; utf8, <svg xmlns='http://www.w3.org/2000/svg' width='16' height='16'><path d='M10 13l4-7H6z'/></svg>\");display:inline-block;position:absolute;max-width:16px}ngx-extended-pdf-viewer .treeItemToggler.treeItemsHidden:before{content:url(\"data:image/svg+xml; utf8, <svg xmlns='http://www.w3.org/2000/svg' width='16' height='16'><path d='M13 9L6 5v8z'/></svg>\");max-width:16px}html[dir=rtl] ngx-extended-pdf-viewer .treeItemToggler.treeItemsHidden:before{transform:scaleX(-1)}ngx-extended-pdf-viewer .treeItemToggler.treeItemsHidden~.treeItems{display:none}html[dir=ltr] ngx-extended-pdf-viewer .treeItemToggler{float:left}html[dir=rtl] ngx-extended-pdf-viewer .treeItemToggler{float:right}html[dir=ltr] ngx-extended-pdf-viewer .treeItemToggler:before{right:4px}html[dir=rtl] ngx-extended-pdf-viewer .treeItemToggler:before{left:4px}ngx-extended-pdf-viewer .treeItemToggler:hover,ngx-extended-pdf-viewer .treeItemToggler:hover+a,ngx-extended-pdf-viewer .treeItemToggler:hover~.treeItems,ngx-extended-pdf-viewer .treeItem>a:hover{background-clip:padding-box;border-radius:2px}ngx-extended-pdf-viewer .treeItem.selected{background-clip:padding-box}ngx-extended-pdf-viewer ::selection{background:rgba(0,0,255,.3)}ngx-extended-pdf-viewer #errorWrapper{background:none repeat scroll 0 0 #ff6666;color:#fff;left:0;position:absolute;right:0;z-index:5;padding:3px;font-size:.8em}ngx-extended-pdf-viewer .loadingInProgress #errorWrapper{top:37px}ngx-extended-pdf-viewer #errorMessageLeft{float:left}ngx-extended-pdf-viewer #errorMessageRight{float:right}ngx-extended-pdf-viewer #errorMoreInfo{background-color:#fff;color:#f66;padding:3px;margin:3px;width:98%}ngx-extended-pdf-viewer .dialogButton{width:auto;margin:3px 4px 2px!important;padding:2px 11px;color:#d9d9d9;background-color:#474747;border:#474747!important}ngx-extended-pdf-viewer dialog{margin:auto;padding:15px;border-spacing:4px;color:#d9d9d9;font-size:12px;line-height:14px;background-color:#474747;border:1px solid rgba(0,0,0,.5);border-radius:4px;box-shadow:0 1px 4px #0000004d}ngx-extended-pdf-viewer dialog::-webkit-backdrop{background-color:#0003;-webkit-user-select:none;user-select:none}ngx-extended-pdf-viewer dialog::backdrop{background-color:#0003;-webkit-user-select:none;user-select:none}ngx-extended-pdf-viewer dialog>.row{display:table-row}ngx-extended-pdf-viewer dialog>.row>*{display:table-cell}ngx-extended-pdf-viewer dialog .toolbarField{margin:5px 0}ngx-extended-pdf-viewer dialog .separator{display:block;margin:4px 0;height:1px;width:100%;background-color:#0006}ngx-extended-pdf-viewer dialog .buttonRow{text-align:center;vertical-align:middle}ngx-extended-pdf-viewer dialog :link{color:#fff}ngx-extended-pdf-viewer #passwordDialog{text-align:center}ngx-extended-pdf-viewer #passwordDialog .toolbarField{width:200px}ngx-extended-pdf-viewer #documentPropertiesDialog{text-align:left}ngx-extended-pdf-viewer #documentPropertiesDialog .row>*{min-width:100px;text-align:start}html[dir=ltr] ngx-extended-pdf-viewer #documentPropertiesDialog .row>*{text-align:left}html[dir=rtl] ngx-extended-pdf-viewer #documentPropertiesDialog .row>*{text-align:right}.fileInput{background:white;color:#000;margin-top:5px;visibility:hidden;position:fixed;right:0;top:0}ngx-extended-pdf-viewer #documentPropertiesDialog .row>span{width:125px;word-wrap:break-word}ngx-extended-pdf-viewer #documentPropertiesDialog .row>p{max-width:225px;word-wrap:break-word}ngx-extended-pdf-viewer #documentPropertiesDialog .buttonRow{margin-top:10px}ngx-extended-pdf-viewer .clearBoth{clear:both}ngx-extended-pdf-viewer .grab-to-pan-grab{cursor:url(data:image/cur;base64,AAACAAEAICAAAA8ADwAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH4AAAB+AAAA/gAAAf8AAAP/AAAD/4AAB/+AAA7/gAAM/8AAAP7AAAG2wAABtkAAAzYAAAM2AAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//////////////////////////////////////////////////AP///wD///4A///8AH//+AB///gAP//wAD//4AA//+AAH//yAB///AAf//wAH//4AL//+AD///yB////z///////////////////////////////////////8=),move!important;cursor:grab!important}ngx-extended-pdf-viewer .grab-to-pan-grab *:not(input):not(textarea):not(button):not(select):not(:link){cursor:inherit!important}ngx-extended-pdf-viewer .grab-to-pan-grab:active,ngx-extended-pdf-viewer .grab-to-pan-grabbing{cursor:url(data:image/cur;base64,AAACAAEAICAAAA8ADwAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH4AAAB+AAAA/gAAAf8AAAP/AAAD/4AAAP+AAAD/gAAB/oAAAbYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//////////////////////////////////////////////////AP///wD///4A///8AH//+AB///gAP//8AD///gA///wAP//8AH///kn/////////////////////////////////////////////////////////////////8=),move!important;cursor:grabbing!important;position:fixed;background:rgba(0,0,0,0);display:block;top:0;left:0;right:0;bottom:0;overflow:hidden;z-index:10}@page{margin:0}@media screen and (-webkit-min-device-pixel-ratio: 1.1),screen and (min-resolution: 1.1dppx){ngx-extended-pdf-viewer .toolbarButton:before{transform:scale(.5);top:-5px}ngx-extended-pdf-viewer .secondaryToolbarButton:before{transform:scale(.5);top:-4px}}html[dir=ltr] ngx-extended-pdf-viewer .toolbarButton:before,html[dir=rtl] ngx-extended-pdf-viewer .toolbarButton:before{left:-1px}html[dir=ltr] ngx-extended-pdf-viewer .secondaryToolbarButton:before{left:-2px}html[dir=rtl] ngx-extended-pdf-viewer .secondaryToolbarButton:before{left:186px}ngx-extended-pdf-viewer .toolbarField.pageNumber.visiblePageIsLoading,ngx-extended-pdf-viewer #findInput[data-status=pending]{background-image:url(data:image/png;base64,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);background-size:16px 17px}ngx-extended-pdf-viewer .visibleLargeView,ngx-extended-pdf-viewer .visibleMediumView,ngx-extended-pdf-viewer .visibleSmallView{display:none}ngx-extended-pdf-viewer .html .unverified-signature-warning,ngx-extended-pdf-viewer .html .modified-background-warning{width:100%;background-color:#ff5353;font-size:12px;text-align:center;padding-top:5px;padding-bottom:5px}.treeItem.selected>a{font-weight:700}ngx-extended-pdf-viewer .invisible{display:none!important}ngx-extended-pdf-viewer #outerContainer{clip-path:inset(0 0 0 0)}ngx-extended-pdf-viewer .textLayer .highlight.color0{background-color:#b400aa66}ngx-extended-pdf-viewer .textLayer .highlight.color0.selected{background-color:#b400aa}ngx-extended-pdf-viewer .textLayer .highlight.color1{background-color:#00640066}ngx-extended-pdf-viewer .textLayer .highlight.color1.selected{background-color:#006400}ngx-extended-pdf-viewer .textLayer .highlight.color2{background-color:#00f6}ngx-extended-pdf-viewer .textLayer .highlight.color2.selected{background-color:#00f}ngx-extended-pdf-viewer .textLayer .highlight.color3{background-color:#f006}ngx-extended-pdf-viewer .textLayer .highlight.color3.selected{background-color:red}ngx-extended-pdf-viewer .textLayer .highlight.color4{background-color:#ff5e0066}ngx-extended-pdf-viewer .textLayer .highlight.color4.selected{background-color:#ff5e00}html[dir=ltr] ngx-extended-pdf-viewer .dialogButton,html[dir=ltr] ngx-extended-pdf-viewer .toolbarButton{margin:3px 0 4px}html[dir=ltr] ngx-extended-pdf-viewer .toolbarButton:last-child,html[dir=rtl] ngx-extended-pdf-viewer .toolbarButton:first-child{margin-right:0;margin-left:0}html[dir=ltr] ngx-extended-pdf-viewer #secondaryToolbarToggle{margin-right:4px;margin-left:0}html[dir=rtl] ngx-extended-pdf-viewer #secondaryToolbarToggle{margin-right:0;margin-left:4px}ngx-extended-pdf-viewer .toolbarButton,ngx-extended-pdf-viewer .secondaryToolbarButton,ngx-extended-pdf-viewer .dialogButton{padding-left:0;padding-right:0}ngx-extended-pdf-viewer .offscreen{position:fixed!important;left:-9999px!important;display:block!important;width:3000px!important}ngx-extended-pdf-viewer .offscreen #sidebarContainer{top:1000px!important}ngx-extended-pdf-viewer .toolbarButton{margin-left:-1px!important;margin-right:-2px!important}ngx-extended-pdf-viewer #numPages{padding-right:0}ngx-extended-pdf-viewer .pdf-viewer-template,ngx-extended-pdf-viewer .pdf-viewer-template *{display:none}ngx-extended-pdf-viewer button:focus,ngx-extended-pdf-viewer a:focus,ngx-extended-pdf-viewer input:focus,ngx-extended-pdf-viewer select:focus{outline:none;border:1px solid blue}ngx-extended-pdf-viewer input[type=checkbox]:focus{outline:1px solid blue}.hidden-by-fullscreen{display:none!important}:root{--scrollbar-color: rgba(121, 121, 123, 1);--scrollbar-bg-color: rgba(35, 35, 39, 1)}\n","#printContainer{display:none}@media print{#printContainer{position:static;display:block}body[data-pdfjsprinting],html{overflow-y:visible!important;margin:0;padding:0}body[data-pdfjsprinting]{background:rgba(0,0,0,0) none;height:100%;width:100%}body[data-pdfjsprinting]>*{display:none!important;outline:0;padding:0;margin:0}body[data-pdfjsprinting] #printContainer{display:block!important;height:100%;width:100%}body[data-pdfjsprinting] #printContainer img{max-width:100%;max-height:100%;direction:ltr;display:block!important}body[data-pdfjsprinting] #printContainer>.printedPage{page-break-after:always;page-break-inside:avoid;height:100%;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}body[data-pdfjsprinting] #printContainer>.xfaPrintedPage .xfaPage{position:absolute}body[data-pdfjsprinting] #printContainer>.xfaPrintedPage{page-break-after:always;page-break-inside:avoid;width:100%;height:100%;position:relative}body[data-pdfjsprinting] #printContainer>.printedPage canvas,body[data-pdfjsprinting] #printContainer>.printedPage img{max-width:100%;max-height:100%;direction:ltr;display:block}body[data-pdfjsprinting]{overflow-y:visible!important}html[data-pdfjsprinting].cdk-global-scrollblock{width:initial;position:initial}}\n"],encapsulation:2}),a})(),rx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-light-theme"]],decls:0,vars:0,template:function(t,c){},styles:["ngx-extended-pdf-viewer .textLayer{position:absolute;text-align:initial;left:0;top:0;right:0;bottom:0;overflow:hidden;opacity:.2;line-height:1}ngx-extended-pdf-viewer .textLayer span,ngx-extended-pdf-viewer .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}ngx-extended-pdf-viewer .textLayer .highlight{position:static;margin:-1px;padding:1px;background-color:var(#b400aa);border-radius:4px}ngx-extended-pdf-viewer .textLayer .highlight.appended{position:initial}ngx-extended-pdf-viewer .textLayer .highlight.begin{border-radius:4px 0 0 4px}ngx-extended-pdf-viewer .textLayer .highlight.end{border-radius:0 4px 4px 0}ngx-extended-pdf-viewer .textLayer .highlight.middle{border-radius:0}ngx-extended-pdf-viewer .textLayer .highlight.selected{background-color:#006400}ngx-extended-pdf-viewer .textLayer ::selection{background:blue}ngx-extended-pdf-viewer .textLayer br::selection{background:transparent}ngx-extended-pdf-viewer .textLayer .endOfContent{display:block;position:absolute;left:0;top:100%;right:0;bottom:0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}ngx-extended-pdf-viewer .textLayer .endOfContent.active{top:0}ngx-extended-pdf-viewer *{box-sizing:content-box}ngx-extended-pdf-viewer :root{--pdfViewer-padding-bottom: none;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--zoom-factor: 1}@media screen and (forced-colors: active){ngx-extended-pdf-viewer :root{--pdfViewer-padding-bottom: 9px;--page-margin: 9px auto 0;--page-border: none;--spreadHorizontalWrapped-margin-LR: 4.5px}}ngx-extended-pdf-viewer .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}ngx-extended-pdf-viewer .pdfViewer .canvasWrapper{overflow:hidden}ngx-extended-pdf-viewer .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:1px auto -8px;position:relative;overflow:visible;border:9px solid transparent;background-clip:content-box;border-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAQAAADYWf5HAAAA6UlEQVR4Xl2Pi2rEMAwE16fm1f7/r14v7w4rI0IzLAF7hLxNevBSEMEF5+OilNCsRd8ZMyn+a4NmsOT8WJw1lFbSYgGFzF2bLFoLjTClWjKKGRWpDYAGXUnZ4uhbBUzF3Oe/GG/ue2fn4GgsyXhNgysV2JnrhKEMg4fEZcALmiKbNhBBRFpSyDOj1G4QOVly6O1FV54ZZq8OVygrciDt6JazRgi1ljTPH0gbrPmHPXAbCiDd4GawIjip1TPh9tt2sz24qaCjr/jAb/GBFTbq9KZ7Ke/Cqt8nayUikZKsWZK7Fe6bg5dOUt8fZHWG2BHc+6EAAAAASUVORK5CYII=) 9 9 repeat;background-color:#fff}ngx-extended-pdf-viewer .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}ngx-extended-pdf-viewer .pdfViewer.singlePageView .page{margin:0}ngx-extended-pdf-viewer .html .pdfViewer.scrollHorizontal,ngx-extended-pdf-viewer .html .pdfViewer.scrollWrapped,ngx-extended-pdf-viewer .html .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}ngx-extended-pdf-viewer .pdfViewer.scrollHorizontal,ngx-extended-pdf-viewer .spread{white-space:nowrap}ngx-extended-pdf-viewer .pdfViewer.removePageBorders,ngx-extended-pdf-viewer .pdfViewer.scrollHorizontal .spread,ngx-extended-pdf-viewer .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}ngx-extended-pdf-viewer .spread .page,ngx-extended-pdf-viewer .pdfViewer.scrollHorizontal .page,ngx-extended-pdf-viewer .pdfViewer.scrollWrapped .page,ngx-extended-pdf-viewer .pdfViewer.scrollHorizontal .spread,ngx-extended-pdf-viewer .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}ngx-extended-pdf-viewer .spread .page,ngx-extended-pdf-viewer .pdfViewer.scrollHorizontal .page,ngx-extended-pdf-viewer .pdfViewer.scrollWrapped .page{margin-left:-3.5px;margin-right:-3.5px}ngx-extended-pdf-viewer .pdfViewer.removePageBorders .spread .page,ngx-extended-pdf-viewer .pdfViewer.removePageBorders.scrollHorizontal .page,ngx-extended-pdf-viewer .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}ngx-extended-pdf-viewer .pdfViewer .page canvas{margin:0;display:block}ngx-extended-pdf-viewer .pdfViewer .page canvas[hidden]{display:none}ngx-extended-pdf-viewer .pdfViewer .page .loadingIcon{position:absolute;display:block;left:0;top:0;right:0;bottom:0;background:url(data:image/gif;base64,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) center no-repeat}ngx-extended-pdf-viewer .pdfPresentationMode .pdfViewer{margin-left:0;margin-right:0}ngx-extended-pdf-viewer .pdfPresentationMode .pdfViewer .page,ngx-extended-pdf-viewer .pdfPresentationMode .pdfViewer .spread{display:block}ngx-extended-pdf-viewer .pdfPresentationMode .pdfViewer .page,ngx-extended-pdf-viewer .pdfPresentationMode .pdfViewer.removePageBorders .page{margin-left:auto;margin-right:auto}ngx-extended-pdf-viewer .pdfPresentationMode:-webkit-full-screen .pdfViewer .page{margin-bottom:100vh;border:0}ngx-extended-pdf-viewer .pdfPresentationMode:fullscreen .pdfViewer .page{margin-bottom:100vh;border:0}ngx-extended-pdf-viewer .html .toolbar *,ngx-extended-pdf-viewer .html .treeItem *{padding:0;margin:0}ngx-extended-pdf-viewer .html{height:100%;width:100%;font-size:10px}ngx-extended-pdf-viewer .body{height:100%;width:100%}ngx-extended-pdf-viewer .body,ngx-extended-pdf-viewer .pdf-viewer input,ngx-extended-pdf-viewer .pdf-viewer button,ngx-extended-pdf-viewer .pdf-viewer select{font:message-box;outline:none;scrollbar-color:var(--scrollbar-color) var(--scrollbar-bg-color)}ngx-extended-pdf-viewer button{cursor:pointer}ngx-extended-pdf-viewer select{background-color:#fff!important;color:#5a5a5a}ngx-extended-pdf-viewer .hidden{display:none!important}ngx-extended-pdf-viewer [hidden]{display:none!important}ngx-extended-pdf-viewer .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}ngx-extended-pdf-viewer #viewerContainer.pdfPresentationMode:-webkit-full-screen{top:0;border-top:2px solid rgba(0,0,0,0);background-color:#f9f9f9;width:100%;height:100%;overflow:hidden;cursor:none;-webkit-user-select:none;user-select:none}ngx-extended-pdf-viewer #viewerContainer.pdfPresentationMode:fullscreen{top:0;border-top:2px solid rgba(0,0,0,0);background-color:#f9f9f9;width:100%;height:100%;overflow:hidden;cursor:none;-webkit-user-select:none;user-select:none}ngx-extended-pdf-viewer .pdfPresentationMode:-webkit-full-screen a:not(.internalLink){display:none}ngx-extended-pdf-viewer .pdfPresentationMode:fullscreen a:not(.internalLink){display:none}ngx-extended-pdf-viewer .pdfPresentationMode:-webkit-full-screen .textLayer span{cursor:none}ngx-extended-pdf-viewer .pdfPresentationMode:fullscreen .textLayer span{cursor:none}ngx-extended-pdf-viewer .pdfPresentationMode.pdfPresentationModeControls>*,ngx-extended-pdf-viewer .pdfPresentationMode.pdfPresentationModeControls .textLayer span{cursor:default}ngx-extended-pdf-viewer #outerContainer{width:100%;height:100%;position:relative}ngx-extended-pdf-viewer #sidebarContainer{position:absolute;top:32px;bottom:0;width:200px;visibility:hidden;z-index:100;transition-duration:.2s;transition-timing-function:ease}html[dir=ltr] ngx-extended-pdf-viewer #sidebarContainer{transition-property:left;left:-200px}html[dir=rtl] ngx-extended-pdf-viewer #sidebarContainer{transition-property:right;right:-200px}ngx-extended-pdf-viewer .loadingInProgress #sidebarContainer{top:36px}ngx-extended-pdf-viewer #outerContainer.sidebarResizing #sidebarContainer{transition-duration:0s;-webkit-user-select:none;user-select:none}ngx-extended-pdf-viewer #outerContainer.sidebarMoving #sidebarContainer,ngx-extended-pdf-viewer #outerContainer.sidebarOpen #sidebarContainer{visibility:visible}html[dir=ltr] ngx-extended-pdf-viewer #outerContainer.sidebarOpen #sidebarContainer{left:0}html[dir=rtl] ngx-extended-pdf-viewer #outerContainer.sidebarOpen #sidebarContainer{right:0}ngx-extended-pdf-viewer #mainContainer{position:absolute;top:0;right:0;bottom:0;left:0;min-width:320px}ngx-extended-pdf-viewer #sidebarContent{top:32px;bottom:0;overflow:auto;-webkit-overflow-scrolling:touch;position:absolute;width:100%;background-color:#f2f2f3}html[dir=ltr] ngx-extended-pdf-viewer #sidebarContent{left:0}html[dir=rtl] ngx-extended-pdf-viewer #sidebarContent{right:0}ngx-extended-pdf-viewer #viewerContainer{overflow:auto;-webkit-overflow-scrolling:auto;position:absolute;top:32px;right:0;bottom:0;left:0;outline:none}ngx-extended-pdf-viewer #viewerContainer:not(.pdfPresentationMode){transition-duration:.2s;transition-timing-function:ease}ngx-extended-pdf-viewer #outerContainer.sidebarResizing #viewerContainer{transition-duration:0s}html[dir=ltr] ngx-extended-pdf-viewer #outerContainer.sidebarOpen #viewerContainer:not(.pdfPresentationMode){transition-property:left;left:200px}html[dir=rtl] ngx-extended-pdf-viewer #outerContainer.sidebarOpen #viewerContainer:not(.pdfPresentationMode){transition-property:right;right:200px}ngx-extended-pdf-viewer .toolbar{position:relative;left:0;right:0;z-index:9999;cursor:default;border:0;border-bottom:1px solid #ddd}ngx-extended-pdf-viewer #toolbarContainer{width:100%}ngx-extended-pdf-viewer #toolbarSidebar{width:calc(100% - 10px);height:32px;background-color:#f2f2f3;color:#5a5a5a;border:none;padding-top:1px;padding-left:5px;padding-right:5px}html[dir=ltr] #toolbarSidebarRight .toolbarButton{margin-right:3px!important}html[dir=rtl] #toolbarSidebarRight .toolbarButton{margin-left:3px!important}html[dir=ltr] #sidebarToggle{margin-right:5px}html[dir=rtl] #sidebarToggle{margin-left:5px}ngx-extended-pdf-viewer #sidebarResizer{position:absolute;top:0;bottom:0;width:6px;z-index:200;cursor:ew-resize}html[dir=ltr] ngx-extended-pdf-viewer #sidebarResizer{right:-6px}html[dir=rtl] ngx-extended-pdf-viewer #sidebarResizer{left:-6px}ngx-extended-pdf-viewer #toolbarContainer,ngx-extended-pdf-viewer .findbar,ngx-extended-pdf-viewer .secondaryToolbar{position:relative;min-height:32px;background-color:#f9f9f9}ngx-extended-pdf-viewer #toolbarViewer{min-height:32px}ngx-extended-pdf-viewer #loadingBar{position:relative;width:100%;height:4px;background-color:#333;border-bottom:1px solid #333333}ngx-extended-pdf-viewer #loadingBar .progress{position:absolute;top:0;left:0;width:0%;height:100%;background-color:#ddd;overflow:hidden;transition:width .2s}@keyframes progressIndeterminate{0%{left:-142px}to{left:0}}ngx-extended-pdf-viewer #loadingBar .progress.indeterminate{background-color:#999;transition:none}ngx-extended-pdf-viewer #loadingBar .progress.indeterminate .glimmer{position:absolute;top:0;left:0;height:100%;width:calc(100% + 150px);background:repeating-linear-gradient(135deg,#bbbbbb 0,#999999 5px,#999999 45px,#dddddd 55px,#dddddd 95px,#bbbbbb 100px);animation:progressIndeterminate .95s linear infinite}ngx-extended-pdf-viewer .findbar,ngx-extended-pdf-viewer .secondaryToolbar{top:40px;position:absolute;z-index:10000;height:auto;min-width:16px;padding:0 6px;margin:4px 2px;color:#5a5a5a;font-size:12px;line-height:14px;text-align:left;cursor:default}ngx-extended-pdf-viewer .findbar{min-width:300px}ngx-extended-pdf-viewer .findbar>div{height:32px}ngx-extended-pdf-viewer .findbar.wrapContainers>div{clear:both}ngx-extended-pdf-viewer .findbar.wrapContainers>div#findbarMessageContainer{height:auto}html[dir=ltr] ngx-extended-pdf-viewer .findbar{left:34px}html[dir=rtl] ngx-extended-pdf-viewer .findbar{right:34px}ngx-extended-pdf-viewer .findbar label{-webkit-user-select:none;user-select:none}ngx-extended-pdf-viewer #findInput{width:200px}ngx-extended-pdf-viewer #findInput::placeholder{font-style:italic}ngx-extended-pdf-viewer #findInput[data-status=pending]{background-image:url(data:image/png;base64,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);background-repeat:no-repeat;background-position:right}html[dir=rtl] ngx-extended-pdf-viewer #findInput[data-status=pending]{background-position:left}#findInput[data-status=notFound]{background-color:#f66}html[dir=rtl] ngx-extended-pdf-viewer ngx-extended-pdf-viewer .secondaryToolbar{padding:6px;height:auto;z-index:3000}html[dir=ltr] ngx-extended-pdf-viewer .secondaryToolbar{right:4px}html[dir=rtl] ngx-extended-pdf-viewer .secondaryToolbar{left:4px}ngx-extended-pdf-viewer #secondaryToolbarButtonContainer{width:250px;max-height:400px;overflow-y:auto;-webkit-overflow-scrolling:touch}ngx-extended-pdf-viewer #secondaryToolbarButtonContainer.hiddenScrollModeButtons>.scrollModeButtons,ngx-extended-pdf-viewer #secondaryToolbarButtonContainer.hiddenSpreadModeButtons>.spreadModeButtons{display:none!important}ngx-extended-pdf-viewer .doorHanger,ngx-extended-pdf-viewer .doorHangerRight{border:1px solid rgba(0,0,0,.5);border-radius:2px}ngx-extended-pdf-viewer .doorHanger:after,ngx-extended-pdf-viewer .doorHanger:before,ngx-extended-pdf-viewer .doorHangerRight:after,ngx-extended-pdf-viewer .doorHangerRight:before{bottom:100%;border:solid rgba(0,0,0,0);content:\" \";height:0;width:0;position:absolute;pointer-events:none}ngx-extended-pdf-viewer .doorHanger:after,ngx-extended-pdf-viewer .doorHangerRight:after{border-bottom-color:#f9f9f9;border-width:8px}ngx-extended-pdf-viewer .doorHanger:before,ngx-extended-pdf-viewer .doorHangerRight:before{border-bottom-color:#00000080;border-width:9px}html[dir=ltr] ngx-extended-pdf-viewer .doorHanger:after,html[dir=rtl] ngx-extended-pdf-viewer .doorHangerRight:after{left:13px;margin-left:-8px}html[dir=ltr] ngx-extended-pdf-viewer .doorHanger:before,html[dir=rtl] ngx-extended-pdf-viewer .doorHangerRight:before{left:13px;margin-left:-9px}html[dir=rtl] ngx-extended-pdf-viewer .doorHanger:after,html[dir=ltr] ngx-extended-pdf-viewer .doorHangerRight:after{right:13px;margin-right:-8px}html[dir=rtl] ngx-extended-pdf-viewer .doorHanger:before,html[dir=ltr] ngx-extended-pdf-viewer .doorHangerRight:before{right:13px;margin-right:-9px}ngx-extended-pdf-viewer #findResultsCount{background-color:#5a5a5a;color:#f9f9f9;text-align:center;padding:3px 4px}ngx-extended-pdf-viewer #findMsg{font-style:italic;color:#f66}ngx-extended-pdf-viewer #findMsg:empty{display:none}ngx-extended-pdf-viewer #toolbarViewerMiddle{position:absolute;left:50%;transform:translate(-50%)}html[dir=ltr] ngx-extended-pdf-viewer #toolbarViewerLeft,html[dir=rtl] ngx-extended-pdf-viewer #toolbarViewerRight{float:left;margin-left:4px}html[dir=ltr] #toolbarSidebarLeft,html[dir=rtl] #toolbarSidebarRight{float:left}html[dir=ltr] ngx-extended-pdf-viewer #toolbarViewerRight,html[dir=rtl] ngx-extended-pdf-viewer #toolbarViewerLeft{float:right;margin-right:4px}html[dir=ltr] #toolbarSidebarRight,html[dir=rtl] #toolbarSidebarLeft{float:right}html[dir=ltr] ngx-extended-pdf-viewer #toolbarViewerLeft>*,html[dir=ltr] ngx-extended-pdf-viewer #toolbarViewerMiddle>*,html[dir=ltr] ngx-extended-pdf-viewer #toolbarViewerRight>*{position:relative;float:left}html[dir=ltr] #toolbarSidebarLeft *,html[dir=ltr] #toolbarSidebarRight *,html[dir=ltr] .findbar *{position:relative;float:left}html[dir=rtl] ngx-extended-pdf-viewer #toolbarViewerLeft>*,html[dir=rtl] ngx-extended-pdf-viewer #toolbarViewerMiddle>*,html[dir=rtl] ngx-extended-pdf-viewer #toolbarViewerRight>*,html[dir=rtl] ngx-extended-pdf-viewer .findbar *{position:relative;float:right}html[dir=rtl] #toolbarSidebarLeft *,html[dir=rtl] #toolbarSidebarRight *{position:relative;float:right}ngx-extended-pdf-viewer .toolbarButton,ngx-extended-pdf-viewer .secondaryToolbarButton,ngx-extended-pdf-viewer .dialogButton{border:0 none;background:none;width:32px;height:25px}ngx-extended-pdf-viewer .toolbarButton>span{display:inline-block;width:0;height:0;overflow:hidden}ngx-extended-pdf-viewer .toolbarButton[disabled],ngx-extended-pdf-viewer .secondaryToolbarButton[disabled],ngx-extended-pdf-viewer .dialogButton[disabled]{opacity:.5}ngx-extended-pdf-viewer .toolbarButton,ngx-extended-pdf-viewer .dropdownToolbarButton,ngx-extended-pdf-viewer .secondaryToolbarButton,ngx-extended-pdf-viewer .dialogButton{border:1px solid rgba(0,0,0,0);color:#5a5a5a}ngx-extended-pdf-viewer .toolbarButton,ngx-extended-pdf-viewer .secondaryToolbarButton,ngx-extended-pdf-viewer .dialogButton{min-width:16px;padding:2px 6px 0;border-radius:2px;font-size:12px;line-height:14px;-webkit-user-select:none;user-select:none;cursor:pointer}html[dir=ltr] ngx-extended-pdf-viewer .toolbarButton,html[dir=ltr] ngx-extended-pdf-viewer .dialogButton{margin:3px 2px 4px 0}html[dir=rtl] ngx-extended-pdf-viewer .toolbarButton,html[dir=rtl] ngx-extended-pdf-viewer .dialogButton{margin:3px 0 4px 2px}ngx-extended-pdf-viewer .dialogButton{background-color:#0003;background-clip:padding-box;border:1px solid rgba(0,0,0,.4)}ngx-extended-pdf-viewer .dropdownToolbarButton{background-color:#0003;border:1px solid rgba(0,0,0,.4)}ngx-extended-pdf-viewer .toolbarButton.toggled,ngx-extended-pdf-viewer .secondaryToolbarButton.toggled{background-color:#0003;border-color:#0006}ngx-extended-pdf-viewer .dropdownToolbarButton>select{color:#5a5a5a;background-color:#fff}ngx-extended-pdf-viewer .dropdownToolbarButton>select>option{background:#f9f9f9}html[dir=ltr] ngx-extended-pdf-viewer .toolbarButton:first-child,html[dir=rtl] ngx-extended-pdf-viewer .toolbarButton:last-child{margin-left:4px}html[dir=ltr] ngx-extended-pdf-viewer .toolbarButton:last-child,html[dir=rtl] ngx-extended-pdf-viewer .toolbarButton:first-child{margin-right:4px}ngx-extended-pdf-viewer .toolbarButtonSpacer{width:30px;display:inline-block;height:1px}html[dir=ltr] ngx-extended-pdf-viewer #findPrevious{margin-left:3px}html[dir=ltr] ngx-extended-pdf-viewer #findNext{margin-right:3px}html[dir=rtl] ngx-extended-pdf-viewer #findPrevious{margin-right:3px}html[dir=rtl] ngx-extended-pdf-viewer #findNext{margin-left:3px}ngx-extended-pdf-viewer .toolbarButton:before,ngx-extended-pdf-viewer .secondaryToolbarButton:before{position:absolute;display:inline-block;top:4px;left:7px}html[dir=ltr] ngx-extended-pdf-viewer .secondaryToolbarButton:before{left:4px}html[dir=rtl] ngx-extended-pdf-viewer .secondaryToolbarButton:before{right:4px}ngx-extended-pdf-viewer .toolbarButton.bookmark,ngx-extended-pdf-viewer .secondaryToolbarButton.bookmark{box-sizing:border-box;outline:none;padding-top:4px;text-decoration:none}ngx-extended-pdf-viewer .secondaryToolbarButton.bookmark{padding-top:5px}ngx-extended-pdf-viewer .bookmark[href=\"#\"]{opacity:.5;pointer-events:none}ngx-extended-pdf-viewer .toolbarButton.pdfSidebarNotification:after{position:absolute;display:inline-block;top:1px;content:\"\";background-color:#70db55;height:9px;width:9px;border-radius:50%}html[dir=ltr] ngx-extended-pdf-viewer .toolbarButton.pdfSidebarNotification:after{left:17px}html[dir=rtl] ngx-extended-pdf-viewer .toolbarButton.pdfSidebarNotification:after{right:17px}ngx-extended-pdf-viewer .secondaryToolbarButton{position:relative;margin:0 0 4px;padding:3px 0 1px;height:auto;min-height:25px;width:200px;white-space:normal}html[dir=ltr] ngx-extended-pdf-viewer .secondaryToolbarButton{padding-left:24px;text-align:left}html[dir=rtl] ngx-extended-pdf-viewer .secondaryToolbarButton{padding-right:24px;text-align:right}html[dir=ltr] ngx-extended-pdf-viewer .secondaryToolbarButton.bookmark{padding-left:27px}html[dir=rtl] ngx-extended-pdf-viewer .secondaryToolbarButton.bookmark{padding-right:27px}html[dir=ltr] ngx-extended-pdf-viewer .secondaryToolbarButton>span{padding-right:4px}html[dir=rtl] ngx-extended-pdf-viewer .secondaryToolbarButton>span{padding-left:4px}ngx-extended-pdf-viewer .html .toolbarField{padding:3px 6px;margin:4px 0;border-radius:2px;background-color:#fff;background-clip:padding-box;border-width:1px;border-style:solid;border-color:#0006;color:#5a5a5a;font-size:12px;line-height:14px;outline-style:none}ngx-extended-pdf-viewer .html .toolbarField::placeholder,ngx-extended-pdf-viewer .html .toolbarField:-ms-input-placeholder,ngx-extended-pdf-viewer .html .toolbarField::-ms-input-placeholder{color:#bfbfbf}ngx-extended-pdf-viewer .html .toolbarField[type=checkbox]{display:inline-block;margin:8px 0}ngx-extended-pdf-viewer .html .toolbarField.pageNumber{-moz-appearance:textfield;min-width:16px;text-align:right;width:40px}ngx-extended-pdf-viewer .html .toolbarField.pageNumber.visiblePageIsLoading{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAARCAYAAADUryzEAAAACGFjVEwAAAAMAAAAAEy9LREAAAAaZmNUTAAAAAAAAAAQAAAAEQAAAAAAAAAAAGQD6AAAM7xH0AAAAixJREFUeNqFUk2IEmEYHowKBrpEoS1JsYc6eNA26NBiS0uwRK39uG1LtLQTjutBkpw9qIewTh0399ohEJFAMPbepQ7RDyjCCosHxQUzQdARd0Cd+Xpemg8GS3vg4X3eef+G732FcTDGjlv0R/CzxbcJ04CEe+B38Okf3ziA/mXGLjI2kmFnJzYol8trSPhqGMYX2FOwdQMNoE9rg4EEG0yn03P/mrwE3oB0dDqd99A/hsOhcqgdftI07ZuuD19RcaFQ2KAc6HPgLC8+xnRGRXkwlc1m5fpB/W0qlVpAeJ7o9/td+Xx+PRwO06BlagbK/E1smUwmMhoM3jGD5fr9/kt884AiyEHaU61Wl6hYVdVANBp9QLU8welyuXy7H3a3QqHQojABXq/3SjKZXHM4HDfhnhUIOtO30PWNrus7vV7vhTltEsSfrdYq/YXJO0Kz2YpBvCY2G4248B9UKpXHvMF+ZX9dMB9q2el03sUDPkLg5JQ7ObG9s+2z2+0+qqFaHvCAz0Cl2+3emtQAK16kySM2ekKHxYuPYI3PYSOlUklOJBLXoa/RNOtk+haPxxfoFv5aYyQSeSjL8ir01Xa77aeEWq02R49ErNUapIMUoxxJklYCgcCKdY0z5oWdxzY21Y4acLvdF6iIwSeNYpl8yqFc8IwwDlzbZaw1qCjKfbhH+WuTjsVifjQP5nK5S8IUzIiieJsfSbFYlEp7exv82MwYJk+HzaLnieMxK34DT9WZqdJAhVAAAAAaZmNUTAAAAAEAAAAQAAAAEQAAAAAAAAAAAGQD6AAAqM+tBAAAAitmZEFUAAAAAnjahVJBaBNBFF2iRVhQBA/ZFiXiQY+pVkSssaUIKtpIbKs9WM3qZiV4ahYkuZRQimC8FHJIrlJQD4HoPQfxkENBNhRbqCFkD2KgNrBuaAtJdsf3cQcWY+KHx7w///3/Z/6M8LcxxoY8/A3w3uMfEQYZBBPAWyD8x3c+g6+7sZjjOAZWuW+B8nr5JgRrtm2vYT3OHOcTFQBOABvA93q9Hv9X54vtdnsMVGo0Gq/pFPAXzF/mu1ar9bHT6WjYM/YP9suiKA6DB4AzPPkws9kK1leM2YvZbPbB1tbX5XQ6fRnhcUIul5vc/bn7oVQqvYBuGlCBGOCjGr5MJhM92NtbwsbLZrMZw94oIALciI/i+Dco2bIsJZFIzFEuF5wKBAK38/n800gkclXoY6FQ6BJONi9J0i24J90rdOdRdRGD09D9Ce/cx8TGzs59OoWLu8K3Wk0GeU6ogQv/sWq1+pAX2K5uLwjuoKb9fn8YAwwjcGzAPzm6ml0Nk5ZyKJcHzgGPANU0zev9CiA2RZou6z6mHJ58CIhRQP+iR5PJ5CT4Nerm7Ux7qVRqQtf1aM8zxuPxOVmWZ8GvYJAzJDAM4wINiWAYP4irFCMNaRVFmfU+4wggQXQar/HMMi0lGAyepSQGnzj9D/JJQ1pguOeOxWJxzGa2qmnaPbhDfNrEcbUZFFcLhcJ5YYCN4K/f4Z+kUqnIG5ubUf7Z3Bg6Dzafh4+76Ilx+w2UJZls1j53fgAAABpmY1RMAAAAAwAAABAAAAARAAAAAAAAAAAAZAPoAABFWX7tAAACLGZkQVQAAAAEeNqFU01oE1EQDvUPFqrHbIuCJ+sttV7E+lMkBPxpCjZtKahNJEYCUgPxkFxyMkaChUIOelL0HMhBYrwv9SKyidDDsiEs2MSkkLKsh4Smu89vwj5ZrBsHPt78fDOzb+at529hjB116Flgw2Ef94wSEKaBHHDVtj8ARVtfZszawrnkWqBSqVyhroPB4AXOcdM031soAP2UZVmfcX5VFGXtX53P9/v9KahivV5/Bvsl7FudTmeju7f3Zn+/9xC+LcMwPgqCMAE9BDzgyUeAJ0ACWM1kMvPSF+lpIpGYQXiWkM/nZ5s7zXflcnndstgn8H4ATeAE1RhLpVIrv3Q9Dsd6q9W6C980IABcBPL1er234OwwizUkSXpFuZxwRhTFm7nnuVW/33/JbUbZbPZ2rVZ7HQgEQjBP8yssADEM7HG73V7hnV1E+Lm7u0x8GwsetdG4xx2qotz3/EdUVf3DV1Tw7UHNe73eYKFQCCJwcsQ7Gd8sbAaJSzmUywNTtBaqquu6360AYjeIc8AO1ijHucZHFJC/yWFsZA76Nerm7Ey+dDp9XZblMHHtnLHhGuPx+FIkEqHJXu52u4tE0DRthoZE0LQW6TGKEYe40Wg05FzjJCCCdJa2YehG1OfznRt2gk06kodfSRziAhOH7lgqlS6azIwlk0l6TMf4tEnH1RZRPFYsFi+M2tIk3vod/kiq1Wrk+/Z2mD82ivHOruK8F/8XXGJD+Q37kpq30C76ogAAABpmY1RMAAAABQAAABAAAAARAAAAAAAAAAAAZAPoAACokwyXAAACO2ZkQVQAAAAGeNqFUl9oUmEUvxgLulSvulEQEfUUrhUUDTRbrILNRdv6w2p5h92y2UuKKEGUDxU9DSSix6H0JPjgiw/RSxG+jCvBkDEctxzhEEFFYer9/Pod88Yl0w78uL/vO79zzj3fOcLfxjnfY+Ay8NhwHhIGGQTHgGXg5O8zew7+mnir1ZrgjK3iPNE3QTQaHYNoubm7+wjCfcAzSgDs1zT2Ft8PiqJc+1flo8ARUEsmsyaBeyuVyrlcLvfkx/b203q9PoW71WKx+E4UxWHwSWDmT8/A/W6/0w+93svJZHJxfmGB2hgnBAKBM9ls9lUsFltijL+H7jNv8zS+eymHye/336hWy25Kks/nr+BuFBAB3YiP1mq1l9B81TTtSyqVekGxuuCwxWK5Gg6HbzkcjrNCHwsGg5PpdPqNzWa7juMhvYUZQGaMPSgUCjf1yn1MbLZaH9ucq4j5DnwSNre27lACwubGxl3hP9ZoNNB7ewf6nWazmRa6DzVtNpudkUjECcfBAXtyYCWy4rTb7bcphmJ1xwlgEZDL5fKlfgngu0gajWv3KKZnjMqa4sJDXQC3UTVjZboLhUJ2LJKLtN0YU2eMHo9nXpKkOfDzpVJplgSqqo7RAxNU9SdxmXykIa3b7Z4zjnEEsNA20jSq5arbarUe71TCmTiCO3+pbyww3NNjIpE4zTiTfT4fzXlInw5xtDaL5HI8Hj8lDLAR7PqUviSZTEb6tr7u0pet60PlwWYy8HFCj89gvwCt8Jigk+pFgAAAABpmY1RMAAAABwAAABAAAAARAAAAAAAAAAAAZAPoAABFBd9+AAACNmZkQVQAAAAIeNqFkt+LElEUxwdj2VDq1WkpiB52H4K0FUp2oTKCCtrtx5TbwxYOTDeFLQiFlO2hpIJefPEvKCVfBLFA3EcjiCVMEVaRhWVAKglEmQeHVcfpe8wJSbQDH+Z77jn33Ln3HO5f03XdNKJvAveIf4CbZkg4ASSw8MfXfNCPh7FFTdNe4OuYWCAWi1HSw46qikichfZqKAB9sNvtPoX/OpfLXZx08nFIPp/Pe6BZs9m0l0olsVKpMEVRlrD2XJblZxaLhYc+A879vRd4ABhY8W5sXE6n0+uCIJxEeJmQJOnU9pftJ5FIxK1p+iby3oL3YIZqmAKBgFtRWhIVqdVqV7BmB2ZgGGk7/uoRcuK9TieeSCQCtNdIOMbz/NVwOHzX5XKd5SYYY8yV2dradDgcN+AeNa5wHTB6vHq9vmacPMHMqrr/DvmfwGcQ53b39tapALFbrd7j/mPtdvuDrvcLyP8G/ZEbPtSK1WpdjUajqwgcnjIn8+Vy+Y3T6VyjPbTXCCyA+4C1Wq1Lkwr0ej16+Z/9fr+Kr3esjYV8wRMMBi9Qj8EhYyNpWguFQudVVf0K/Qt8B7ODNvp8vjuiKN6GXmo0GgIVw9As0gMTsvyDNKMY5WQymZfZbPbVaBvnAE/TSN1QWopks9nmB48LnzQ2D/7SmFhwZOyOqVTKoeka8/v9t+DOGN0hjasJKM6SyeRpborNmc3ma8aQFItFsbSz4zGGbRjDydPNNKKXibHYiP0GfOKZpyi1j88AAAAaZmNUTAAAAAkAAAAQAAAAEQAAAAAAAAAAAGQD6AAAqHbuIgAAAjdmZEFUAAAACnjahVNfaFJRGJf1D4R61YaNEbkRhcoaBAsiIegPbZflWhFreMnphD2phI3ywdfFCHyJqL3IHkTByeilJ4lAEmQq+DAGQ3GIL6LckAve3Xv6fXLvkMldH/w4v++c78853/cdw2lhjI0M8DmAGzrTExhcBzzApKp7CSqfZOx4BesN3QDxeHxKlmVfTxR5GF4iTgGIi70e7a2mUqlpvczjoOZCoeAmp3a77ShXyu5ypeImTnulUukt2YBPALc153PAipppdnVt7VEmk1lyuVy3cHyPQHx3Z2c5EAg8hc1rYJ3JLIL1PMUYCYVCi4LQ8VCQer3+GHsOwAhoQtzRaDTmYfNB7IqRjY1Nus1JUa+ZzeYn0Wj0ldPpvKtXI47jZr5tbfmsVuszqBbtCRxlpoI1m82XajY9Mf7tdj/KMvsCn69AxHBweLiktetgf/+N4T+Cgn5mTN6G/TZxg1qoWZPJNBeLxWhwrpwxJ2O5XO6dzWZbIB/VVxsStgx4O53OQ70AkiRtwua3oig/sC4MtXGvsOcOh8MPwO8Dlwcy35SZ/D2bzfoFQdiF/gf4BVzst9Hv97/geZ4izrRaLRcFq1arU1RggiiKUaYozWNJ+kk2iURiPZlMvh9s46g6YePUDaEjeOx2+0S/uNCJY78G/QhYJFvg6tAb0+n0HVzVGwwGn0O9oHWHeD6f/8QU1qgd1XxndWnUaDSeDEmxWOTpL2jDZrFY5tXM+jL4Lu0v6Jz15R+RjZkDa3+g7wAAABpmY1RMAAAACwAAABAAAAARAAAAAAAAAAAAZAPoAABF4D3LAAACLmZkQVQAAAAMeNqFU99r01AUDlMRAvpoa6k4LGwPPrRUUFAqKwjdxP2y/hhjk4R1mYX6lIL10UD/gFFY9zSE7r0U+m6fNqaUQKHINlgL3WixhoYOmy4kuZ4juRAsmQc+8p17v3NOTs4J868RQsYcfA4wP3LnYii4B0gAJm1fQNh8khBjHTWuCQqFQtg0zQ1d03gQXkeOCZBrus4jR41b5XGg3mq1yqGw1+uFavUaV6vXOeR4JssyhxrgdzGGBl8BrNuVZt+nUrFSqbQSj8fvw/UTBPJisbiagjvU0NYwFnOMpdPpN/2+msDDVqs1DWchAAughjzUaDRiqPl9fi5AzBLGUsEdr9c7I0nSUjQafcS4WCQSeZjNZpf9fv9zcP20hXnMih+s0+m8pZVdjP2pKGug/wj4ZBDCM8cnJyu0p+PDw1XmP9Zut0VCTAn0EnLG/lCzHo9nLpfL4eLcvGRPPOVyeS0QCCxijB1Ll4S8Awiqqj5zSzAcDkViki8mMTdBOzUyRrkqc5lMZgr4U8ANR+UABGVxvN1uNw/+LiTagefVv2NMJpOveZ5/BfyxoihxTNZsNsPw3Ad8HQwGaWJZ33Vd30HN9vbWh3w+n3KO0Wdv2DhOo6/2E8FgcAL8X5ZlnQmCEDYMA5PtAWKoBdwe6RG27QG8qiCK4ktwr4G4CzhFXqlUPhOLHBwd/VhmLjEfy7Iv6JJcXGjfNE3bo8t2y+dboJVdzdkX/RdG7hz2Bwqhl8Rp37vgAAAAGmZjVEwAAAANAAAAEAAAABEAAAAAAAAAAABkA+gAAKgqT7EAAAIiZmRBVAAAAA542oVSQWsaQRReLKWQQ6F40C4NKb30UCiSQwMNQoVC2kKyBZM0hWTjgrYVPRTrQVoSVOgv8O6h0nqrWOgf8NCcRGrxEJQoCFbsQdkYF8Wd6ftgh0hl7Qcf+8287723M/Okf8E5d8zoLaIyF7MBDHeIQeJda/0KhMYe59MQPLYFcrncqmmaryeGoZHxGjQKQBuTiQYNj13n2yTd5XI5AGO/3/dUa9VAtVYLQGOvUqkE4CG9ghyRfIUYsjptvolGN4rF4r7f779H4XUQulAoHEQpBo/lDYk7ccTj8V1dHwQRaLfbT2jPQ1wiCkB7ms3mBjy6rgdjsdgOcoVh2e12P02n03s+n29NsoHX632QTCb34KXlLXEEBVVxYd1u94XobIOl373eLvwWFal+drYvNuqnpwfSf9BoNA7JGwahJeuiNl0u11Ymk8HgXF8wJzey2ey2LMsKcqxcMSRcxV8MBoPHdgVGo9FL8hzTcWP09cw9Y6VcCSQSiUekv6DoZSJfxi9Td6XVan0gneYmP0Iu4o5wOLyjado26YdTNv3BGOsZhvGeDN+In+nZMIV54+IiCU8qdaylUqnD2WeUrQlTGeN/mMnqkUhklXH+izN2oqrq/fF4nKf4J+IavMSbc2fsdDpvydAplUofaXmV9E8qcgJNk/jOnE7zNM7PpAWQCc/FkAyHw+/6+flXMWxOp1MRnRfBMaPXwfnYJf4C0LWYznBNwdwAAAAaZmNUTAAAAA8AAAAQAAAAEQAAAAAAAAAAAGQD6AAARbycWAAAAihmZEFUAAAAEHjahVJBiBJhFF7MiBa8pi1F0WWpPSQdCjIPQrR1GCUs8zBLLmg7pYcQL3tKhN25LgxdwpssHScLL14kO4YYwhxkYEU8NNiqy7jsgPv//r23zL9IMvbgg+/973vvzbz3lv41xphrhocBkbmYg6HgFiAJWLX9NwibrzJGUqhxLFAqle5RSrcmlrUJwkvIsQByazLZRI4ap843gfoajUYChaPRyN/SWomWpiWQ41uz2UygBvgNzOHJFwApu5MgZTLr5XJZjEajaxAOIJCrqrqRgRhqbG2Kz8SVy+VipnmUxECv13sKb37AMoAbcn+n01lHjWmayWw2+xJzueC6z+d7VigU4qFQ6IHTjILB4P18Ph9HLbjX+C9EsCoOzDCMV7yzgy3/7vdjfDtnK9YPDkT+oLfbG0v/MV3Xz/VtHfT2oASv1xtWFAUP586CO/HsKXth1GIO5vLAe0AX8IcQ8tmpwPHR8RPQSISR13hYPPkywGBTZlgn1o96vZ4B/+PsxY0ZuwL+c1mWH2uahp//jlK2db7GarW6o6rlD263O3BKyLcpY7/G4/Hbs0KUycPhUGCUyrC+FOgfSpIUT6fTsdk1rtgX9mI6ZS1ySr6LongX/K9QYF8QhDXLOpHBLwBuoxZwde4fu90uXtfPSqWyDe5F4F8oY/vIi8ViEla9W6vVHi3a0gpMOMKPZDAYfOofHir82Dwej8A7LzLXDA/YmItx+ws7dpnWNX0cvAAAABpmY1RMAAAAEQAAABAAAAARAAAAAAAAAAAAZAPoAACpvStIAAACLWZkQVQAAAASeNqFU8+LEnEUFzOKgSDw4LRs9OOyQR2koECRtMtuB13EbTPYJYfG6uBSiRDSHsQO7qHDUtGpm7XHTCL8EyrIJMFg8GCsQuyAqePBdXT89nnLTAzJ2IMPfN68z3vv+/2+N7Z/jTFmN/EQsDwVszIIzgIisKD7dwk6X2BsHCeNZYF8Pn9R07R76mAgQHiEOBUgPlBVgThprDqfBuXL5XKMhJ1Ox12tVWPVWi1GnL5VKpUYacBPUY6RfAiI652C9xOJxWKxuBaJRM4j7CUQLxQK6wnESKNr48ab2FOp1KqidEUKNJvNJXxzAxxgGHF3o9FYJI2iKGIymbxBuYbgJM/z17PZbDQQCFyxWZjP57ucyWSipIU7r19h8glVfwOd0Wj0Ve9mZdwvWV41pnMw4qGqfmYTtgdnbzgcfrH9x+r1+ppRQKpL6zb9oYIejycqSdIzmveMPTm2/WI75HK5QpRzkGtamG/AD1VVX1kV6Ha710g7ZuPbfxuBHAWqwPe+orwvlUp3wDPAvKnzcSCQTqev0i5MjREz3sSGPXY4HN59df/1hLEP/X7/psbYE4g2ZFn2MU172G63aXQeQRBWRFFcMY9xDuAxhSUkfMQ13obD4QvgL5nGtvx+/7ler/cIfgI4Q1rgxNQd8YhRCN7tvNnZgHsY/DlOsUU8l8vdwr/xAKe9NGtKc06nc9lYklar9fTn7u6msWwcxwX1zjPNbuJewlTMZH8AHPeamRiFZiAAAAAaZmNUTAAAABMAAAAQAAAAEQAAAAAAAAAAAGQD6AAARCv4oQAAAjFmZEFUAAAAFHjahVJNaBNREA4lKi7kKIlFafFgEQ+JDYhUkhIRqmDiYZviobVZ2ETBUCEgTUAxJwlIS5eK1xxyCgRjKgjeq7f8EAhLDJKeLOSHhEB2SfbnOSP7IHRNHPjgmzffzLz3ZixnjRAyN8EDgMfmmNmo4BqABywZfgRh8CVC1DBqphbIZDLLmqY9G8syB8ILyLEAcnk85pCj5l+deVVVnwJ1FIvFEAp7vZ6rWquGqrVaCDmelcvlEGqAL+BNaPJFwCmgA/j+PBpdKxQKmyzL3oTwXQTyfD6/FYUYaPzGrcL0T+aOj3+813X9Fxy0RqPRJzhzARgANeSuZrO5hsmDwYCPxWJBzKWCqz6fj61UKh9SqZTfMsU8Hs/tZDL5xOFwPAT3Cn3CEUCEG9QVRflGO08x5rTV2qDT+TtiSZKOiE7K4JQkafjF8h9rNBqbtEC9Ud+yGB/ld7vdwVKp9AYCizP2xHZweBCw2+0BzMFcGggC8oToX5WR8npagX6/fw87q0TdxsWiyeeNf/jcbrc/ZrNZ+sZLk50B3kQisYq7YBpjOp1+KQjCC6vVujKUh281QoROp3MfBCjeODn5vYxJ3W6XBf0Kx3HrPM+vT45x3tiwO0Qjh/JQfuf1em9AoV3wd5xO53VIDhudF1ELuGx6I6zxA9j/PWFf2Ab3HIhfQZEd5PF4nIVYJJfL3Zo1pXmbzeanSyKKYlQUf0bosjEM84h2nmX0XXTEAHOM2h+8YZu0q2asIAAAABpmY1RMAAAAFQAAABAAAAARAAAAAAAAAAAAZAPoAACp4YrbAAACMWZkQVQAAAAWOMtjYEAD////Z0di+wGxPxKfiQEfACqIA+LHQJwL5aeBMJSt/v//n1QgrYTTgHv37iUDFTz69+/fXSAt/vfv33SoIezff/1KBLEXL15shM3m0D9//gQCmRJfvnzZB+Q/AWquv3T1UsKlq1cT3r9/bwDSfP78+QSQGiBbHu4SkOlAfAyIzwDx6q1bt+a9evVy7Zw5c5yB0tYgHBwcrL1+/frYnJwcd6AaX6irUmFhwgTUVAN0wR6gwMnv379PB4oZADEXkiNBbIP79++DDEj79OlTSlFRUShIL0yBrJmZWcDBgweby8vL3XGFka2trVlDQ0OEhISEJ5ArA/NCHxCvA+INP378mI5mMzrgev7qVRgsdsBR/Pb9+wn///5fCuQsBQbWBAYC4Pbt2zEwA27evhnLAA0oX1VV1aBdu3aBok0cTzrhnTB5gp+4uLgfSA9UL1jCDojb/v7/2wOMxlhcBnz48MEJZPOf/3/iQQkLppkViDtABty5c6esq6vPA8j2BGI+ZJtBllRWVtqD0gJGNLa0tMSXlZXFsrCwWAGjKB6YiPIfPnxoDAokEH7w4JkRSNPbt2+DgeqtEhMTQ1JSUkKQo1EKksJ+qAMDtODzh88Z+vr6amCbgMkZxAZqToXarABSC8SSGH7ctm2bBdD2nNLSUpBNrEiZibWioiIYKJe2Zs0aQ3yxJMXFxeUDSyQXLlxIBOUFWGKDykkSimrkPG8NjypMOTAAAMmmmt+QK3ABAAAAE3RFWHRTb2Z0d2FyZQBKYXBuZyByMTE5J+izYQAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:1px}ngx-extended-pdf-viewer .html .toolbarField.pageNumber::-webkit-inner-spin-button,ngx-extended-pdf-viewer .html .toolbarField.pageNumber::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}ngx-extended-pdf-viewer .html .toolbarLabel{min-width:16px;padding:3px 6px 3px 2px;margin:4px 2px 4px 0;border:1px solid rgba(0,0,0,0);border-radius:2px;color:#5a5a5a;font-size:12px;line-height:14px;text-align:left;-webkit-user-select:none;user-select:none;cursor:default}ngx-extended-pdf-viewer .html #thumbnailView{position:absolute;width:calc(100% - 60px);top:0;bottom:0;padding:10px 30px 0;overflow:auto;-webkit-overflow-scrolling:touch}ngx-extended-pdf-viewer .html #thumbnailView>a:active{outline:0}ngx-extended-pdf-viewer .html .thumbnail{margin:0 10px 5px}html[dir=ltr] ngx-extended-pdf-viewer .thumbnail{float:left}html[dir=rtl] ngx-extended-pdf-viewer .thumbnail{float:right}ngx-extended-pdf-viewer #thumbnailView>a:last-of-type>.thumbnail{margin-bottom:10px}ngx-extended-pdf-viewer #thumbnailView>a:last-of-type>.thumbnail:not([data-loaded]){margin-bottom:9px}ngx-extended-pdf-viewer .thumbnail:not([data-loaded]){border:1px dashed rgba(255,0,0,.5);margin:-1px 9px 4px}ngx-extended-pdf-viewer .thumbnailImage{border:1px solid rgba(0,0,0,0);opacity:.8;z-index:1;background-color:#fff;background-clip:content-box}ngx-extended-pdf-viewer .thumbnailSelectionRing{border-radius:2px;padding:7px}ngx-extended-pdf-viewer .thumbnail.selected>.thumbnailSelectionRing>.thumbnailImage{opacity:1}ngx-extended-pdf-viewer .thumbnail.selected>.thumbnailSelectionRing{background-color:#fff6;background-clip:padding-box;color:#fff}ngx-extended-pdf-viewer #outlineView,ngx-extended-pdf-viewer #attachmentsView,ngx-extended-pdf-viewer #layersView{position:absolute;width:calc(100% - 8px);top:0;bottom:0;overflow:auto;-webkit-overflow-scrolling:touch;-webkit-user-select:none;user-select:none}ngx-extended-pdf-viewer #outlineView{padding:4px 4px 0}ngx-extended-pdf-viewer #attachmentsView{padding:3px 4px 0}html[dir=ltr] ngx-extended-pdf-viewer .treeWithDeepNesting>.treeItem,html[dir=ltr] ngx-extended-pdf-viewer .treeItem>.treeItems{margin-left:20px}html[dir=rtl] ngx-extended-pdf-viewer .treeWithDeepNesting>.treeItem,html[dir=rtl] ngx-extended-pdf-viewer .treeItem>.treeItems{margin-right:20px}ngx-extended-pdf-viewer .treeItem>a{text-decoration:none;display:inline-block;min-width:95%;min-width:calc(100% - 4px);height:auto;margin-bottom:1px;border-radius:2px;color:#5a5a5a;font-size:13px;line-height:15px;-webkit-user-select:none;user-select:none;white-space:normal;cursor:pointer}html[dir=ltr] ngx-extended-pdf-viewer .treeItem>a{padding:2px 0 5px 4px}html[dir=rtl] ngx-extended-pdf-viewer .treeItem>a{padding:2px 4px 5px 0}ngx-extended-pdf-viewer #layersView .treeItem>a>*{cursor:pointer}html[dir=ltr] ngx-extended-pdf-viewer #layersView .treeItem>a>label{padding-left:4px}html[dir=rtl] ngx-extended-pdf-viewer #layersView .treesItem>a>label{padding-right:4px}ngx-extended-pdf-viewer .treeItemToggler{position:relative;height:0;width:0}ngx-extended-pdf-viewer .treeItemToggler:before{content:url(\"data:image/svg+xml; utf8, <svg xmlns='http://www.w3.org/2000/svg' width='16' height='16'><path d='M10 13l4-7H6z'/></svg>\");display:inline-block;position:absolute;max-width:16px}ngx-extended-pdf-viewer .treeItemToggler.treeItemsHidden:before{content:url(\"data:image/svg+xml; utf8, <svg xmlns='http://www.w3.org/2000/svg' width='16' height='16'><path d='M13 9L6 5v8z'/></svg>\");max-width:16px}html[dir=rtl] ngx-extended-pdf-viewer .treeItemToggler.treeItemsHidden:before{transform:scaleX(-1)}ngx-extended-pdf-viewer .treeItemToggler.treeItemsHidden~.treeItems{display:none}html[dir=ltr] ngx-extended-pdf-viewer .treeItemToggler{float:left}html[dir=rtl] ngx-extended-pdf-viewer .treeItemToggler{float:right}html[dir=ltr] ngx-extended-pdf-viewer .treeItemToggler:before{right:4px}html[dir=rtl] ngx-extended-pdf-viewer .treeItemToggler:before{left:4px}ngx-extended-pdf-viewer .treeItemToggler:hover,ngx-extended-pdf-viewer .treeItemToggler:hover+a,ngx-extended-pdf-viewer .treeItemToggler:hover~.treeItems,ngx-extended-pdf-viewer .treeItem>a:hover{background-clip:padding-box;border-radius:2px}ngx-extended-pdf-viewer .treeItem.selected{background-clip:padding-box}ngx-extended-pdf-viewer ::selection{background:rgba(0,0,255,.3)}ngx-extended-pdf-viewer #errorWrapper{background:none repeat scroll 0 0 #ff6666;color:#fff;left:0;position:absolute;right:0;z-index:5;padding:3px;font-size:.8em}ngx-extended-pdf-viewer .loadingInProgress #errorWrapper{top:37px}ngx-extended-pdf-viewer #errorMessageLeft{float:left}ngx-extended-pdf-viewer #errorMessageRight{float:right}ngx-extended-pdf-viewer #errorMoreInfo{background-color:#fff;color:#f66;padding:3px;margin:3px;width:98%}ngx-extended-pdf-viewer .dialogButton{width:auto;margin:3px 4px 2px!important;padding:2px 11px;color:#5a5a5a;background-color:#f9f9f9;border:#f9f9f9!important}ngx-extended-pdf-viewer dialog{margin:auto;padding:15px;border-spacing:4px;color:#5a5a5a;font-size:12px;line-height:14px;background-color:#f9f9f9;border:1px solid rgba(0,0,0,.5);border-radius:4px;box-shadow:0 1px 4px #0000004d}ngx-extended-pdf-viewer dialog::-webkit-backdrop{background-color:#0003;-webkit-user-select:none;user-select:none}ngx-extended-pdf-viewer dialog::backdrop{background-color:#0003;-webkit-user-select:none;user-select:none}ngx-extended-pdf-viewer dialog>.row{display:table-row}ngx-extended-pdf-viewer dialog>.row>*{display:table-cell}ngx-extended-pdf-viewer dialog .toolbarField{margin:5px 0}ngx-extended-pdf-viewer dialog .separator{display:block;margin:4px 0;height:1px;width:100%;background-color:#0006}ngx-extended-pdf-viewer dialog .buttonRow{text-align:center;vertical-align:middle}ngx-extended-pdf-viewer dialog :link{color:#fff}ngx-extended-pdf-viewer #passwordDialog{text-align:center}ngx-extended-pdf-viewer #passwordDialog .toolbarField{width:200px}ngx-extended-pdf-viewer #documentPropertiesDialog{text-align:left}ngx-extended-pdf-viewer #documentPropertiesDialog .row>*{min-width:100px;text-align:start}html[dir=ltr] ngx-extended-pdf-viewer #documentPropertiesDialog .row>*{text-align:left}html[dir=rtl] ngx-extended-pdf-viewer #documentPropertiesDialog .row>*{text-align:right}.fileInput{background:white;color:#f9f9f9;margin-top:5px;visibility:hidden;position:fixed;right:0;top:0}ngx-extended-pdf-viewer #documentPropertiesDialog .row>span{width:125px;word-wrap:break-word}ngx-extended-pdf-viewer #documentPropertiesDialog .row>p{max-width:225px;word-wrap:break-word}ngx-extended-pdf-viewer #documentPropertiesDialog .buttonRow{margin-top:10px}ngx-extended-pdf-viewer .clearBoth{clear:both}ngx-extended-pdf-viewer .grab-to-pan-grab{cursor:url(data:image/cur;base64,AAACAAEAICAAAA8ADwAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH4AAAB+AAAA/gAAAf8AAAP/AAAD/4AAB/+AAA7/gAAM/8AAAP7AAAG2wAABtkAAAzYAAAM2AAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//////////////////////////////////////////////////AP///wD///4A///8AH//+AB///gAP//wAD//4AA//+AAH//yAB///AAf//wAH//4AL//+AD///yB////z///////////////////////////////////////8=),move!important;cursor:grab!important}ngx-extended-pdf-viewer .grab-to-pan-grab *:not(input):not(textarea):not(button):not(select):not(:link){cursor:inherit!important}ngx-extended-pdf-viewer .grab-to-pan-grab:active,ngx-extended-pdf-viewer .grab-to-pan-grabbing{cursor:url(data:image/cur;base64,AAACAAEAICAAAA8ADwAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH4AAAB+AAAA/gAAAf8AAAP/AAAD/4AAAP+AAAD/gAAB/oAAAbYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//////////////////////////////////////////////////AP///wD///4A///8AH//+AB///gAP//8AD///gA///wAP//8AH///kn/////////////////////////////////////////////////////////////////8=),move!important;cursor:grabbing!important;position:fixed;background:rgba(0,0,0,0);display:block;top:0;left:0;right:0;bottom:0;overflow:hidden;z-index:10}@page{margin:0}@media screen and (-webkit-min-device-pixel-ratio: 1.1),screen and (min-resolution: 1.1dppx){ngx-extended-pdf-viewer .toolbarButton:before{transform:scale(.5);top:-5px}ngx-extended-pdf-viewer .secondaryToolbarButton:before{transform:scale(.5);top:-4px}}html[dir=ltr] ngx-extended-pdf-viewer .toolbarButton:before,html[dir=rtl] ngx-extended-pdf-viewer .toolbarButton:before{left:-1px}html[dir=ltr] ngx-extended-pdf-viewer .secondaryToolbarButton:before{left:-2px}html[dir=rtl] ngx-extended-pdf-viewer .secondaryToolbarButton:before{left:186px}ngx-extended-pdf-viewer .toolbarField.pageNumber.visiblePageIsLoading,ngx-extended-pdf-viewer #findInput[data-status=pending]{background-image:url(data:image/png;base64,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);background-size:16px 17px}ngx-extended-pdf-viewer .visibleLargeView,ngx-extended-pdf-viewer .visibleMediumView,ngx-extended-pdf-viewer .visibleSmallView{display:none}ngx-extended-pdf-viewer .html .unverified-signature-warning,ngx-extended-pdf-viewer .html .modified-background-warning{width:100%;background-color:#ff5353;font-size:12px;text-align:center;padding-top:5px;padding-bottom:5px}.treeItem.selected>a{font-weight:700}ngx-extended-pdf-viewer .invisible{display:none!important}ngx-extended-pdf-viewer #outerContainer{clip-path:inset(0 0 0 0)}ngx-extended-pdf-viewer .textLayer .highlight.color0{background-color:#b400aa66}ngx-extended-pdf-viewer .textLayer .highlight.color0.selected{background-color:#b400aa}ngx-extended-pdf-viewer .textLayer .highlight.color1{background-color:#00640066}ngx-extended-pdf-viewer .textLayer .highlight.color1.selected{background-color:#006400}ngx-extended-pdf-viewer .textLayer .highlight.color2{background-color:#00f6}ngx-extended-pdf-viewer .textLayer .highlight.color2.selected{background-color:#00f}ngx-extended-pdf-viewer .textLayer .highlight.color3{background-color:#f006}ngx-extended-pdf-viewer .textLayer .highlight.color3.selected{background-color:red}ngx-extended-pdf-viewer .textLayer .highlight.color4{background-color:#ff5e0066}ngx-extended-pdf-viewer .textLayer .highlight.color4.selected{background-color:#ff5e00}html[dir=ltr] ngx-extended-pdf-viewer .dialogButton,html[dir=ltr] ngx-extended-pdf-viewer .toolbarButton{margin:3px 0 4px}html[dir=ltr] ngx-extended-pdf-viewer .toolbarButton:last-child,html[dir=rtl] ngx-extended-pdf-viewer .toolbarButton:first-child{margin-right:0;margin-left:0}html[dir=ltr] ngx-extended-pdf-viewer #secondaryToolbarToggle{margin-right:4px;margin-left:0}html[dir=rtl] ngx-extended-pdf-viewer #secondaryToolbarToggle{margin-right:0;margin-left:4px}ngx-extended-pdf-viewer .toolbarButton,ngx-extended-pdf-viewer .secondaryToolbarButton,ngx-extended-pdf-viewer .dialogButton{padding-left:0;padding-right:0}ngx-extended-pdf-viewer .offscreen{position:fixed!important;left:-9999px!important;display:block!important;width:3000px!important}ngx-extended-pdf-viewer .offscreen #sidebarContainer{top:1000px!important}ngx-extended-pdf-viewer .toolbarButton{margin-left:-1px!important;margin-right:-2px!important}ngx-extended-pdf-viewer #numPages{padding-right:0}ngx-extended-pdf-viewer .pdf-viewer-template,ngx-extended-pdf-viewer .pdf-viewer-template *{display:none}ngx-extended-pdf-viewer button:focus,ngx-extended-pdf-viewer a:focus,ngx-extended-pdf-viewer input:focus,ngx-extended-pdf-viewer select:focus{outline:none;border:1px solid blue}ngx-extended-pdf-viewer input[type=checkbox]:focus{outline:1px solid blue}.hidden-by-fullscreen{display:none!important}:root{--scrollbar-color: auto;--scrollbar-bg-color: auto}\n","#printContainer{display:none}@media print{#printContainer{position:static;display:block}body[data-pdfjsprinting],html{overflow-y:visible!important;margin:0;padding:0}body[data-pdfjsprinting]{background:rgba(0,0,0,0) none;height:100%;width:100%}body[data-pdfjsprinting]>*{display:none!important;outline:0;padding:0;margin:0}body[data-pdfjsprinting] #printContainer{display:block!important;height:100%;width:100%}body[data-pdfjsprinting] #printContainer img{max-width:100%;max-height:100%;direction:ltr;display:block!important}body[data-pdfjsprinting] #printContainer>.printedPage{page-break-after:always;page-break-inside:avoid;height:100%;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}body[data-pdfjsprinting] #printContainer>.xfaPrintedPage .xfaPage{position:absolute}body[data-pdfjsprinting] #printContainer>.xfaPrintedPage{page-break-after:always;page-break-inside:avoid;width:100%;height:100%;position:relative}body[data-pdfjsprinting] #printContainer>.printedPage canvas,body[data-pdfjsprinting] #printContainer>.printedPage img{max-width:100%;max-height:100%;direction:ltr;display:block}body[data-pdfjsprinting]{overflow-y:visible!important}html[data-pdfjsprinting].cdk-global-scrollblock{width:initial;position:initial}}\n"],encapsulation:2}),a})(),ax=(()=>{class a{constructor(t,c){this.renderer=t,this.document=c,this.zoom=1,this.width=100,this.xs=490,this.sm=560,this.md=610,this.lg=660,this.xl=740,this.xxl=830}get style(){return`\n@media all and (max-width: ${this.xl}px) {\n  #toolbarViewerMiddle {\n    display: table;\n    margin: auto;\n    left: auto;\n    position: inherit;\n    transform: none;\n  }\n}\n\n@media all and (max-width: 840px) {\n  #sidebarContent {\n    background-color: rgba(0, 0, 0, 0.7);\n  }\n\n  html[dir='ltr'] #outerContainer.sidebarOpen #viewerContainer {\n    left: 0px !important;\n  }\n  html[dir='rtl'] #outerContainer.sidebarOpen #viewerContainer {\n    right: 0px !important;\n  }\n\n  #outerContainer .hiddenLargeView,\n  #outerContainer .hiddenMediumView {\n    display: inherit;\n  }\n  #outerContainer .visibleLargeView,\n  #outerContainer .visibleMediumView {\n    display: none;\n  }\n}\n\n@media all and (max-width: ${this.lg}px) {\n  .toolbarButtonSpacer {\n    width: 15px;\n  }\n\n  #outerContainer .hiddenLargeView {\n    display: none;\n  }\n  #outerContainer .visibleLargeView {\n    display: inherit;\n  }\n}\n\n@media all and (max-width: ${this.md}px) {\n  .toolbarButtonSpacer {\n    display: none;\n  }\n  #outerContainer .hiddenMediumView {\n    display: none;\n  }\n  #outerContainer .visibleMediumView {\n    display: inherit;\n  }\n}\n\n@media all and (max-width: ${this.sm}px) {\n  #outerContainer .hiddenSmallView,\n  #outerContainer .hiddenSmallView * {\n    display: none;\n  }\n  #outerContainer .visibleSmallView {\n    display: inherit;\n  }\n  .toolbarButtonSpacer {\n    width: 0;\n  }\n  html[dir='ltr'] .findbar {\n    left: 38px;\n  }\n  html[dir='rtl'] .findbar {\n    right: 38px;\n  }\n}\n\n@media all and (max-width: ${this.xs}px) {\n  #scaleSelectContainer {\n    display: none;\n  }\n}\n\n#outerContainer .visibleXLView,\n#outerContainer .visibleXXLView,\n#outerContainer .visibleTinyView {\n  display: none;\n}\n\n#outerContainer .hiddenXLView,\n#outerContainer .hiddenXXLView {\n  display: unset;\n}\n\n@media all and (max-width: ${this.xl}px) {\n  #outerContainer .hiddenXLView {\n    display: none;\n  }\n  #outerContainer .visibleXLView {\n    display: inherit;\n  }\n\n  #toolbarViewerMiddle {\n    -webkit-transform: translateX(-36%);\n    transform: translateX(-36%);\n    display: unset;\n    margin: unset;\n    left: 50%;\n    position: absolute;\n  }\n}\n\n@media all and (max-width: ${this.xxl}px) {\n  #outerContainer .hiddenXXLView {\n    display: none;\n  }\n  #outerContainer .visibleXXLView {\n    display: inherit;\n  }\n}\n\n@media all and (max-width: ${this.md}px) {\n  #toolbarViewerMiddle {\n    -webkit-transform: translateX(-26%);\n    transform: translateX(-26%);\n  }\n}\n\n@media all and (max-width: ${this.xs}px) {\n  #outerContainer .hiddenTinyView,\n  #outerContainer .hiddenTinyView * {\n    display: none;\n  }\n  #outerContainer .visibleTinyView {\n    display: inherit;\n  }\n}\n  `}ngOnInit(){this.injectStyle()}ngOnChanges(){const g=this.document.body.clientWidth/this.width*(this.zoom?this.zoom:1);this.xs=490*g,this.sm=560*g,this.md=610*g,this.lg=660*g,this.xl=740*g,this.xxl=830*g;const b=this.document.getElementById("pdf-dynamic-css");b&&(b.innerHTML=this.style)}injectStyle(){const t=this.document.createElement("STYLE");t.id="pdf-dynamic-css",t.innerHTML=this.style,this.renderer.appendChild(this.document.head,t)}ngOnDestroy(){const t=this.document.getElementById("pdf-dynamic-css");t&&t.parentElement&&t.parentElement.removeChild(t)}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.Qsj),r.Y36($e.K0))},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-dynamic-css"]],inputs:{zoom:"zoom",width:"width"},features:[r.TTD],decls:0,vars:0,template:function(t,c){},styles:[""]}),a})(),sx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-document-properties-dialog"]],decls:78,vars:0,consts:[["id","documentPropertiesDialog"],[1,"row"],["id","fileNameLabel","data-l10n-id","document_properties_file_name"],["id","fileNameField","aria-labelledby","fileNameLabel"],["id","fileSizeLabel","data-l10n-id","document_properties_file_size"],["id","fileSizeField","aria-labelledby","fileSizeLabel"],[1,"separator"],["id","titleLabel","data-l10n-id","document_properties_title"],["id","titleField","aria-labelledby","titleLabel"],["id","authorLabel","data-l10n-id","document_properties_author"],["id","authorField","aria-labelledby","authorLabel"],["id","subjectLabel","data-l10n-id","document_properties_subject"],["id","subjectField","aria-labelledby","subjectLabel"],["id","keywordsLabel","data-l10n-id","document_properties_keywords"],["id","keywordsField","aria-labelledby","keywordsLabel"],["id","creationDateLabel","data-l10n-id","document_properties_creation_date"],["id","creationDateField","aria-labelledby","creationDateLabel"],["id","modificationDateLabel","data-l10n-id","document_properties_modification_date"],["id","modificationDateField","aria-labelledby","modificationDateLabel"],["id","creatorLabel","data-l10n-id","document_properties_creator"],["id","creatorField","aria-labelledby","creatorLabel"],["id","producerLabel","data-l10n-id","document_properties_producer"],["id","producerField","aria-labelledby","producerLabel"],["id","versionLabel","data-l10n-id","document_properties_version"],["id","versionField","aria-labelledby","versionLabel"],["id","pageCountLabel","data-l10n-id","document_properties_page_count"],["id","pageCountField","aria-labelledby","pageCountLabel"],["id","pageSizeLabel","data-l10n-id","document_properties_page_size"],["id","pageSizeField","aria-labelledby","pageSizeLabel"],["id","linearizedLabel","data-l10n-id","document_properties_linearized"],["id","linearizedField","aria-labelledby","linearizedLabel"],[1,"buttonRow"],["id","documentPropertiesClose",1,"dialogButton"],["data-l10n-id","document_properties_close"]],template:function(t,c){1&t&&(r.TgZ(0,"dialog",0)(1,"div",1)(2,"span",2),r._uU(3,"File name:"),r.qZA(),r.TgZ(4,"p",3),r._uU(5,"-"),r.qZA()(),r.TgZ(6,"div",1)(7,"span",4),r._uU(8,"File size:"),r.qZA(),r.TgZ(9,"p",5),r._uU(10,"-"),r.qZA()(),r._UZ(11,"div",6),r.TgZ(12,"div",1)(13,"span",7),r._uU(14,"Title:"),r.qZA(),r.TgZ(15,"p",8),r._uU(16,"-"),r.qZA()(),r.TgZ(17,"div",1)(18,"span",9),r._uU(19,"Author:"),r.qZA(),r.TgZ(20,"p",10),r._uU(21,"-"),r.qZA()(),r.TgZ(22,"div",1)(23,"span",11),r._uU(24,"Subject:"),r.qZA(),r.TgZ(25,"p",12),r._uU(26,"-"),r.qZA()(),r.TgZ(27,"div",1)(28,"span",13),r._uU(29,"Keywords:"),r.qZA(),r.TgZ(30,"p",14),r._uU(31,"-"),r.qZA()(),r.TgZ(32,"div",1)(33,"span",15),r._uU(34,"Creation Date:"),r.qZA(),r.TgZ(35,"p",16),r._uU(36,"-"),r.qZA()(),r.TgZ(37,"div",1)(38,"span",17),r._uU(39,"Modification Date:"),r.qZA(),r.TgZ(40,"p",18),r._uU(41,"-"),r.qZA()(),r.TgZ(42,"div",1)(43,"span",19),r._uU(44,"Creator:"),r.qZA(),r.TgZ(45,"p",20),r._uU(46,"-"),r.qZA()(),r._UZ(47,"div",6),r.TgZ(48,"div",1)(49,"span",21),r._uU(50,"PDF Producer:"),r.qZA(),r.TgZ(51,"p",22),r._uU(52,"-"),r.qZA()(),r.TgZ(53,"div",1)(54,"span",23),r._uU(55,"PDF Version:"),r.qZA(),r.TgZ(56,"p",24),r._uU(57,"-"),r.qZA()(),r.TgZ(58,"div",1)(59,"span",25),r._uU(60,"Page Count:"),r.qZA(),r.TgZ(61,"p",26),r._uU(62,"-"),r.qZA()(),r.TgZ(63,"div",1)(64,"span",27),r._uU(65,"Page Size:"),r.qZA(),r.TgZ(66,"p",28),r._uU(67,"-"),r.qZA()(),r._UZ(68,"div",6),r.TgZ(69,"div",1)(70,"span",29),r._uU(71,"Fast Web View:"),r.qZA(),r.TgZ(72,"p",30),r._uU(73,"-"),r.qZA()(),r.TgZ(74,"div",31)(75,"button",32)(76,"span",33),r._uU(77,"Close"),r.qZA()()()())},encapsulation:2}),a})(),lx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-error-message"]],decls:12,vars:0,consts:[["id","errorWrapper","hidden","true"],["id","errorMessageLeft"],["id","errorMessage"],["type","button","id","errorShowMore","data-l10n-id","error_more_info"],["type","button","id","errorShowLess","data-l10n-id","error_less_info","hidden","true"],["id","errorMessageRight"],["type","button","id","errorClose","data-l10n-id","error_close"],[1,"clearBoth"],["id","errorMoreInfo","hidden","true","readonly","readonly"]],template:function(t,c){1&t&&(r.TgZ(0,"div",0)(1,"div",1),r._UZ(2,"span",2),r.TgZ(3,"button",3),r._uU(4,"More Information"),r.qZA(),r.TgZ(5,"button",4),r._uU(6,"Less Information"),r.qZA()(),r.TgZ(7,"div",5)(8,"button",6),r._uU(9,"Close"),r.qZA()(),r._UZ(10,"div",7)(11,"textarea",8),r.qZA())},encapsulation:2}),a})(),cx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-password-dialog"]],decls:13,vars:0,consts:[["id","passwordDialog"],[1,"row"],["for","password","id","passwordText","data-l10n-id","password_label"],["type","password","id","password",1,"toolbarField"],[1,"buttonRow"],["id","passwordCancel",1,"dialogButton"],["data-l10n-id","password_cancel"],["id","passwordSubmit",1,"dialogButton"],["data-l10n-id","password_ok"]],template:function(t,c){1&t&&(r.TgZ(0,"dialog",0)(1,"div",1)(2,"label",2),r._uU(3,"Enter the password to open this PDF file:"),r.qZA()(),r.TgZ(4,"div",1),r._UZ(5,"input",3),r.qZA(),r.TgZ(6,"div",4)(7,"button",5)(8,"span",6),r._uU(9,"Cancel"),r.qZA()(),r.TgZ(10,"button",7)(11,"span",8),r._uU(12,"OK"),r.qZA()()()())},encapsulation:2}),a})(),dx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-prepare-printing-dialog"]],decls:12,vars:0,consts:[["id","printServiceDialog",2,"min-width","200px"],[1,"row"],["data-l10n-id","print_progress_message"],["value","0","max","100"],["data-l10n-id","print_progress_percent","data-l10n-args",'{ "progress": 0 }',1,"relative-progress"],[1,"buttonRow"],["id","printCancel",1,"dialogButton"],["data-l10n-id","print_progress_close"]],template:function(t,c){1&t&&(r.TgZ(0,"dialog",0)(1,"div",1)(2,"span",2),r._uU(3,"Preparing document for printing\u2026"),r.qZA()(),r.TgZ(4,"div",1),r._UZ(5,"progress",3),r.TgZ(6,"span",4),r._uU(7,"0%"),r.qZA()(),r.TgZ(8,"div",5)(9,"button",6)(10,"span",7),r._uU(11,"Cancel"),r.qZA()()()())},encapsulation:2}),a})(),bl=(()=>{class a{constructor(){this.onPDFJSInit=new wt.x,this.pdfjsVersion=vl(Wt.assetsFolder)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),ux=(()=>{class a{constructor(t,c){this.element=t,this.notificationService=c,this.showPresentationModeButton=!0,this.showOpenFileButton=!0,this.showPrintButton=!0,this.showDownloadButton=!0,this.showBookmarkButton=!0,this.showPagingButtons=!0,this.showRotateButton=!0,this.showHandToolButton=!0,this.showScrollingButton=!0,this.showSpreadButton=!0,this.showPropertiesButton=!0,this.spreadChange=new r.vpe,this.secondaryMenuIsEmpty=new r.vpe,this.disablePreviousPage=!0,this.disableNextPage=!0,this.notificationService.onPDFJSInit.pipe((0,zi.q)(1)).subscribe(()=>{this.onPdfJsInit()})}onPdfJsInit(){const t=window.PDFViewerApplication;t.eventBus.on("pagechanging",()=>{this.updateUIState()}),t.eventBus.on("pagerendered",()=>{this.updateUIState()})}updateUIState(){setTimeout(()=>{const t=window.PDFViewerApplication,c=t.pdfViewer.currentPageNumber,g=document.getElementById("previousPage");g&&(this.disablePreviousPage=Number(c)<=1,g.disabled=this.disablePreviousPage);const b=document.getElementById("nextPage");b&&(this.disableNextPage=c===t.pagesCount,b.disabled=this.disableNextPage)})}onSpreadChange(t){this.spreadChange.emit(t)}ngOnChanges(t){setTimeout(()=>this.checkVisibility())}onResize(){setTimeout(()=>this.checkVisibility())}ngAfterViewInit(){const t=this.element.nativeElement;this.mutationObserver=new MutationObserver((g,b)=>{for(const B of g)"attributes"===B.type&&"class"===B.attributeName&&this.checkVisibility()}),this.mutationObserver.observe(t,{attributes:!0,childList:!0,subtree:!0})}ngOnDestroy(){this.mutationObserver&&(this.mutationObserver=void 0)}checkVisibility(){let t=0;const g=this.element.nativeElement.children.item(0);if(g){const b=g.children.item(0);b&&b instanceof HTMLElement&&(t=this.checkVisibilityRecursively(b))}this.secondaryMenuIsEmpty.emit(0===t)}checkVisibilityRecursively(t){if("undefined"==typeof window||"none"===t.style.display||t.classList.contains("hidden")||t.classList.contains("invisible")||"none"===window.getComputedStyle(t).display)return 0;if(t instanceof HTMLButtonElement||t instanceof HTMLAnchorElement)return 1;let g=0;const b=t.children;if(b&&b.length)for(let B=0;B<b.length&&0===g;B++){const N=b.item(B);N&&N instanceof HTMLElement&&(g+=this.checkVisibilityRecursively(N))}return g}previousPage(){window.PDFViewerApplication.eventBus.dispatch("previouspage")}nextPage(){window.PDFViewerApplication.eventBus.dispatch("nextpage")}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(bl))},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-secondary-toolbar"]],hostBindings:function(t,c){1&t&&r.NdJ("resize",function(){return c.onResize()},!1,r.Jf7)},inputs:{customSecondaryToolbar:"customSecondaryToolbar",secondaryToolbarTop:"secondaryToolbarTop",mobileFriendlyZoomScale:"mobileFriendlyZoomScale",showPresentationModeButton:"showPresentationModeButton",showOpenFileButton:"showOpenFileButton",showPrintButton:"showPrintButton",showDownloadButton:"showDownloadButton",showBookmarkButton:"showBookmarkButton",showPagingButtons:"showPagingButtons",showRotateButton:"showRotateButton",showHandToolButton:"showHandToolButton",showScrollingButton:"showScrollingButton",showSpreadButton:"showSpreadButton",showPropertiesButton:"showPropertiesButton"},outputs:{spreadChange:"spreadChange",secondaryMenuIsEmpty:"secondaryMenuIsEmpty"},features:[r.TTD],decls:3,vars:1,consts:[[3,"ngTemplateOutlet"],["defaultSecondaryToolbar",""],["id","secondaryToolbar",1,"secondaryToolbar","hidden","doorHangerRight"],["id","secondaryToolbarButtonContainer"],["type","button","id","secondaryPresentationMode","title","Switch to Presentation Mode","data-l10n-id","presentation_mode",1,"secondaryToolbarButton","visibleLargeView"],["viewBox","0 0 24 24",2,"width","22px","height","22px"],["fill","currentColor","d","M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z"],["data-l10n-id","presentation_mode_label"],["type","button","id","secondaryOpenFile","title","Open File","data-l10n-id","open_file",1,"secondaryToolbarButton","visibleMediumView"],["fill","currentColor","d","M14,2L20,8V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2H14M18,20V9H13V4H6V20H18M12,12L16,16H13.5V19H10.5V16H8L12,12Z"],["data-l10n-id","open_file_label"],["type","button","id","secondaryPrint","title","Print","data-l10n-id","print",1,"secondaryToolbarButton","visibleSmallView"],["fill","currentColor","d","M18,3H6V7H18M19,12A1,1 0 0,1 18,11A1,1 0 0,1 19,10A1,1 0 0,1 20,11A1,1 0 0,1 19,12M16,19H8V14H16M19,8H5A3,3 0 0,0 2,11V17H6V21H18V17H22V11A3,3 0 0,0 19,8Z"],["data-l10n-id","print_label"],["type","button","id","secondaryDownload","title","Download","data-l10n-id","download",1,"secondaryToolbarButton","visibleSmallView"],["fill","currentColor","d","M14,2L20,8V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2H14M18,20V9H13V4H6V20H18M12,19L8,15H10.5V12H13.5V15H16L12,19Z"],["data-l10n-id","download_label"],["href","#","id","secondaryViewBookmark","title","Current view (copy or open in new window)","data-l10n-id","bookmark",1,"secondaryToolbarButton","bookmark","visibleTinyView"],["fill","currentColor","d","M17,18L12,15.82L7,18V5H17M17,3H7A2,2 0 0,0 5,5V21L12,18L19,21V5C19,3.89 18.1,3 17,3Z"],["data-l10n-id","bookmark_label"],["type","button","id","firstPage","title","Go to First Page","data-l10n-id","first_page",1,"secondaryToolbarButton","firstPage","visibleLargeView"],["viewBox","0 0 24 24",2,"width","24px","height","24px"],["fill","currentColor","d","M18.41,16.59L13.82,12L18.41,7.41L17,6L11,12L17,18L18.41,16.59M6,6H8V18H6V6Z"],["data-l10n-id","first_page_label"],["type","button","id","previousPage","title","Go to Previous Page","data-l10n-id","previous",1,"secondaryToolbarButton","previousPage","visibleTinyView",3,"disabled","click"],["fill","currentColor","d","M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"],["data-l10n-id","previous_label"],["type","button","id","nextPage","title","Go to Next Page","data-l10n-id","next",1,"secondaryToolbarButton","nextPage","visibleTinyView",3,"disabled","click"],["fill","currentColor","d","M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"],["data-l10n-id","next_label"],["type","button","id","lastPage","title","Go to Last Page","data-l10n-id","last_page",1,"secondaryToolbarButton","lastPage","visibleLargeView"],["fill","currentColor","d","M5.59,7.41L10.18,12L5.59,16.59L7,18L13,12L7,6L5.59,7.41M16,6H18V18H16V6Z"],["data-l10n-id","last_page_label"],["type","button","id","pageRotateCw","title","Rotate Clockwise","data-l10n-id","page_rotate_cw",1,"secondaryToolbarButton","rotateCw","visibleXLView"],["fill","currentColor","d","M12 3C7.03 3 3 7.03 3 12S7.03 21 12 21C14 21 15.92 20.34 17.5 19.14L16.06 17.7C14.87 18.54 13.45 19 12 19C8.13 19 5 15.87 5 12S8.13 5 12 5 19 8.13 19 12H16L20 16L24 12H21C21 7.03 16.97 3 12 3"],["data-l10n-id","page_rotate_cw_label"],["type","button","id","pageRotateCcw","title","Rotate Counterclockwise","data-l10n-id","page_rotate_ccw",1,"secondaryToolbarButton","rotateCcw","visibleXLView"],["fill","currentColor","d","M12 3C7.03 3 3 7.03 3 12H0L4 16L8 12H5C5 8.13 8.13 5 12 5S19 8.13 19 12 15.87 19 12 19C10.55 19 9.13 18.54 7.94 17.7L6.5 19.14C8.08 20.34 10 21 12 21C16.97 21 21 16.97 21 12S16.97 3 12 3"],["data-l10n-id","page_rotate_ccw_label"],["type","button","id","cursorSelectTool","title","Enable Text Selection Tool","data-l10n-id","cursor_text_select_tool",1,"secondaryToolbarButton","toggled","visibleXXLView"],["fill","currentColor","d","M2 4C2 2.89 2.9 2 4 2H7V4H4V7H2V4M22 4V7H20V4H17V2H20C21.1 2 22 2.89 22 4M2 20V17H4V20H7V22H4C2.9 22 2 21.11 2 20M10 2H14V4H10V2M10 20H14V22H10V20M2 10H4V14H2V10M18.5 13C20.4 13 22 14.6 22 16.5C22 19.1 18.5 23 18.5 23C18.5 23 15 19.1 15 16.5C15 14.6 16.6 13 18.5 13M18.5 17.8C19.2 17.8 19.8 17.2 19.7 16.6C19.7 16 19.1 15.4 18.5 15.4C17.9 15.4 17.3 15.9 17.3 16.6C17.3 17.2 17.8 17.8 18.5 17.8M20 10H22V12.34C21.42 11.84 20.74 11.45 20 11.23V10Z"],["data-l10n-id","cursor_text_select_tool_label"],["type","button","id","cursorHandTool","title","Enable Hand Tool","data-l10n-id","cursor_hand_tool",1,"secondaryToolbarButton","visibleXXLView"],["fill","currentColor","d","M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"],["data-l10n-id","cursor_hand_tool_label"],["type","button","id","scrollPage","title","Use Page Scrolling","data-l10n-id","scroll_page",1,"secondaryToolbarButton","scrollPage"],[2,"width","24px","height","24px","margin-top","3px"],["fill","currentColor","d","M9.5 4c1 0 1.5.5 1.5 1.5v5c0 1-.5 1.5-1.5 1.5h-3c-1 0-1.5-.5-1.5-1.5v-5C5 4.5 5.5 4 6.5 4zM11 0v.5c0 1-.5 1.5-1.5 1.5h-3C5.5 2 5 1.5 5 .5V0h6zM11 16v-.5c0-1-.5-1.5-1.5-1.5h-3c-1 0-1.5.5-1.5 1.5v.5h6z"],["data-l10n-id","scroll_page"],["type","button","id","scrollVertical","title","Use Vertical Scrolling","data-l10n-id","scroll_vertical",1,"secondaryToolbarButton","scrollVertical","toggled"],["data-l10n-id","scroll_vertical_label"],["type","button","id","scrollHorizontal","title","Use Horizontal Scrolling","data-l10n-id","scroll_horizontal",1,"secondaryToolbarButton","scrollHorizontal"],["fill","currentColor","d","M0 4h1.5c1 0 1.5.5 1.5 1.5v5c0 1-.5 1.5-1.5 1.5H0zM9.5 4c1 0 1.5.5 1.5 1.5v5c0 1-.5 1.5-1.5 1.5h-3c-1 0-1.5-.5-1.5-1.5v-5C5 4.5 5.5 4 6.5 4zM16 4h-1.5c-1 0-1.5.5-1.5 1.5v5c0 1 .5 1.5 1.5 1.5H16z"],["data-l10n-id","scroll_horizontal_label"],["type","button","id","scrollWrapped","title","Use Wrapped Scrolling","data-l10n-id","scroll_wrapped",1,"secondaryToolbarButton","scrollWrapped"],["fill","currentColor","d","M5.5 4c1 0 1.5.5 1.5 1.5v5c0 1-.5 1.5-1.5 1.5h-3c-1 0-1.5-.5-1.5-1.5v-5C1 4.5 1.5 4 2.5 4zM7 0v.5C7 1.5 6.5 2 5.5 2h-3C1.5 2 1 1.5 1 .5V0h6zM7 16v-.5c0-1-.5-1.5-1.5-1.5h-3c-1 0-1.5.5-1.5 1.5v.5h6zM13.5 4c1 0 1.5.5 1.5 1.5v5c0 1-.5 1.5-1.5 1.5h-3c-1 0-1.5-.5-1.5-1.5v-5c0-1 .5-1.5 1.5-1.5zM15 0v.5c0 1-.5 1.5-1.5 1.5h-3C9.5 2 9 1.5 9 .5V0h6zM15 16v-.507c0-1-.5-1.5-1.5-1.5h-3C9.5 14 9 14.5 9 15.5v.5h6z"],["data-l10n-id","scroll_wrapped_label"],["type","button","id","spreadNone","title","Do not join page spreads","data-l10n-id","spread_none",1,"secondaryToolbarButton","spreadNone","toggled",3,"click"],["height","16","width","16"],["fill","currentColor","d","M6 3c-1 0-1.5.5-1.5 1.5v7c0 1 .5 1.5 1.5 1.5h4c1 0 1.5-.5 1.5-1.5v-7c0-1-.5-1.5-1.5-1.5z"],["data-l10n-id","spread_none_label"],["type","button","id","spreadOdd","title","Join page spreads starting with odd-numbered pages","data-l10n-id","spread_odd",1,"secondaryToolbarButton","spreadOdd",3,"click"],["fill","currentColor","d","M10.56 3.5C9.56 3.5 9 4 9 5v6.5c0 1 .5 1.5 1.5 1.5h4c1 0 1.5-.5 1.5-1.5V5c0-1-.5-1.5-1.5-1.5zm1.93 1.2c.8 0 1.4.2 1.8.64.5.4.7 1 .7 1.7 0 .5-.2 1-.5 1.44-.2.3-.6.6-1 .93l-.6.4c-.4.3-.6.4-.7.55-.1.1-.2.2-.3.4h3.2v1.27h-5c0-.5.1-1 .3-1.43.2-.49.7-1 1.5-1.54.7-.5 1.1-.8 1.3-1.02.3-.3.4-.7.4-1.05 0-.3-.1-.6-.3-.77-.2-.2-.4-.3-.7-.3-.4 0-.7.2-.9.5-.1.2-.1.5-.2.9h-1.4c0-.6.2-1.1.3-1.5.4-.7 1.1-1.1 2-1.1zM1.54 3.5C.54 3.5 0 4 0 5v6.5c0 1 .5 1.5 1.54 1.5h4c1 0 1.5-.5 1.5-1.5V5c0-1-.5-1.5-1.5-1.5zm1.8 1.125H4.5V12H3V6.9H1.3v-1c.5 0 .8 0 .97-.03.33-.07.53-.17.73-.37.1-.2.2-.3.25-.5.05-.2.05-.3.05-.3z"],["data-l10n-id","spread_odd_label"],["type","button","id","spreadEven","title","Join page spreads starting with even-numbered pages","data-l10n-id","spread_even",1,"secondaryToolbarButton","spreadEven",3,"click"],["fill","currentColor","d","M1.5 3.5C.5 3.5 0 4 0 5v6.5c0 1 .5 1.5 1.5 1.5h4c1 0 1.5-.5 1.5-1.5V5c0-1-.5-1.5-1.5-1.5zm2 1.2c.8 0 1.4.2 1.8.6.5.4.7 1 .7 1.7 0 .5-.2 1-.5 1.4-.2.3-.5.7-1 1l-.6.4c-.4.3-.6.4-.75.56-.15.14-.25.24-.35.44H6v1.3H1c0-.6.1-1.1.3-1.5.3-.6.7-1 1.5-1.6.7-.4 1.1-.8 1.28-1 .32-.3.42-.6.42-1 0-.3-.1-.6-.23-.8-.17-.2-.37-.3-.77-.3s-.7.1-.9.5c-.04.2-.1.5-.1.9H1.1c0-.6.1-1.1.3-1.5.4-.7 1.1-1.1 2.1-1.1zM10.54 3.54C9.5 3.54 9 4 9 5v6.5c0 1 .5 1.5 1.54 1.5h4c.96 0 1.46-.5 1.46-1.5V5c0-1-.5-1.46-1.5-1.46zm1.9.95c.7 0 1.3.2 1.7.5.4.4.6.8.6 1.4 0 .4-.1.8-.4 1.1-.2.2-.3.3-.5.4.1 0 .3.1.6.3.4.3.5.8.5 1.4 0 .6-.2 1.2-.6 1.6-.4.5-1.1.7-1.9.7-1 0-1.8-.3-2.2-1-.14-.29-.24-.69-.24-1.29h1.4c0 .3 0 .5.1.7.2.4.5.5 1 .5.3 0 .5-.1.7-.3.2-.2.3-.5.3-.8 0-.5-.2-.8-.6-.95-.2-.05-.5-.15-1-.15v-1c.5 0 .8-.1 1-.14.3-.1.5-.4.5-.9 0-.3-.1-.5-.2-.7-.2-.2-.4-.3-.7-.3-.3 0-.6.1-.75.3-.2.2-.2.5-.2.86h-1.34c0-.4.1-.7.19-1.1 0-.12.2-.32.4-.62.2-.2.4-.3.7-.4.3-.1.6-.1 1-.1z"],["data-l10n-id","spread_even_label"],["type","button","id","documentProperties","title","Document Properties\u2026","data-l10n-id","document_properties","aria-controls","documentPropertiesDialog",1,"secondaryToolbarButton","documentProperties"],["viewBox","0 0 16 16",2,"width","16px","height","16px","margin-top","3px"],["fill","currentColor","d","M8 16a8 8 0 1 1 8-8 8.009 8.009 0 0 1-8 8zM8 2a6 6 0 1 0 6 6 6.006 6.006 0 0 0-6-6z"],["fill","currentColor","d","M8 7a1 1 0 0 0-1 1v3a1 1 0 0 0 2 0V8a1 1 0 0 0-1-1z"],["fill","currentColor","cx","8","cy","5","r","1.188"],["data-l10n-id","document_properties_label"]],template:function(t,c){if(1&t&&(r.GkF(0,0),r.YNc(1,_y,109,50,"ng-template",null,1,r.W1O)),2&t){const g=r.MAs(2);r.Q6J("ngTemplateOutlet",c.customSecondaryToolbar?c.customSecondaryToolbar:g)}},directives:[$e.tP],styles:["svg[_ngcontent-%COMP%]{position:absolute;display:inline-block;top:0px;left:0px}"]}),a})(),px=(()=>{class a{constructor(){this.hideSidebarToolbar=!1,this.mobileFriendlyZoomScale=1,this.thumbnailDrawn=new r.vpe,"undefined"!=typeof window&&(window.pdfThumbnailGeneratorReady=()=>this.pdfThumbnailGeneratorReady(),window.pdfThumbnailGenerator=(t,c,g,b,B)=>this.createThumbnail(t,c,g,b,B))}get top(){let t=0;return this.hideSidebarToolbar||(t=32*this.mobileFriendlyZoomScale,32===t&&(t=33)),`${t}px`}ngOnDestroy(){this.linkService=void 0}pdfThumbnailGeneratorReady(){if(!this.thumbnailViewTemplate)return!1;const t=this.thumbnailViewTemplate.nativeElement;return!!t&&!!t.innerHTML&&t.innerHTML.length>0}createThumbnail(t,c,g,b,B){this.linkService=c;const te=this.thumbnailViewTemplate.nativeElement.innerHTML.split(/_ng\w+-\w+-\w+=""/g).join("").split(/ng-\w+-\w+/g).join("").split(/<!--[\s\S]*?-->/g).join(""),we=`${t.canvasWidth+2}px`,Re=`${t.canvasHeight+2}px`,ti=te.split("WIDTH_OF_RING").join(we).split("HEIGHT_OF_RING").join(Re).split("PAGE_NUMBER").join(g),Ft=this.createElementFromHTML(ti);Ft.classList.remove("pdf-viewer-template");const Ri=Ft;Ri.href=c.getAnchorUrl(`#page=${g}`),B.then(Oi=>{Ri.title=Oi}),Ri.onclick=()=>(c.page=g,!1),t.anchor=Ri;const Po=Ft.getElementsByClassName("image-container")[0];t.ring=Po,t.div=Ft.getElementsByClassName("thumbnail")[0],b.appendChild(Ft),this.thumbnailDrawn.emit({thumbnail:Ft,container:b,pageId:g})}createElementFromHTML(t){const c=document.createElement("div");return c.innerHTML=t.trim(),c.firstChild}onKeyDown(t){"ArrowDown"===t.code?this.linkService&&(t.ctrlKey||t.metaKey?this.linkService.page=this.linkService.pagesCount:this.linkService.page<this.linkService.pagesCount&&(this.linkService.page=this.linkService.page+1),t.preventDefault()):"ArrowUp"===t.code&&this.linkService&&(t.ctrlKey||t.metaKey?this.linkService.page=1:this.linkService.page>1&&(this.linkService.page=this.linkService.page-1),t.preventDefault())}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-sidebar-content"]],viewQuery:function(t,c){if(1&t&&r.Gf(yy,5),2&t){let g;r.iGM(g=r.CRH())&&(c.thumbnailViewTemplate=g.first)}},inputs:{customThumbnail:"customThumbnail",hideSidebarToolbar:"hideSidebarToolbar",mobileFriendlyZoomScale:"mobileFriendlyZoomScale"},outputs:{thumbnailDrawn:"thumbnailDrawn"},ngContentSelectors:Og,decls:10,vars:3,consts:[["id","sidebarContent"],["thumbnailViewTemplate",""],[4,"ngTemplateOutlet"],["id","thumbnailView",3,"keydown"],["id","outlineView",1,"hidden"],["id","attachmentsView",1,"hidden"],["id","layersView",1,"hidden"],["defaultThumbnail",""],[1,"pdf-viewer-template"],["data-page-number","$page",1,"thumbnail"],[1,"thumbnailSelectionRing","image-container",2,"width","WIDTH_OF_RING","height","HEIGHT_OF_RING"]],template:function(t,c){if(1&t&&(r.F$t(),r.TgZ(0,"div",0)(1,"div",null,1),r.YNc(3,xy,1,0,"ng-content",2),r.qZA(),r.TgZ(4,"div",3),r.NdJ("keydown",function(b){return c.onKeyDown(b)}),r.qZA(),r._UZ(5,"div",4)(6,"div",5)(7,"div",6),r.qZA(),r.YNc(8,vy,3,0,"ng-template",null,7,r.W1O)),2&t){const g=r.MAs(9);r.Udp("top",c.top),r.xp6(3),r.Q6J("ngTemplateOutlet",c.customThumbnail?c.customThumbnail:g)}},directives:[$e.tP],styles:[""]}),a})(),fx=(()=>{class a{constructor(){this.mobileFriendlyZoomScale=1}get height(){return 32*this.mobileFriendlyZoomScale+"px"}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-sidebar-toolbar"]],inputs:{mobileFriendlyZoomScale:"mobileFriendlyZoomScale"},decls:31,vars:12,consts:[["id","toolbarSidebar"],["id","toolbarSidebarLeft"],["type","button","id","viewThumbnail","title","Show Thumbnails","data-l10n-id","thumbs",1,"toolbarButton","toggled"],["data-l10n-id","thumbs_label"],["viewBox","0 0 24 24",2,"width","20px","height","20px"],["fill","currentColor","d","M19,19H5V5H19M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M13.96,12.29L11.21,15.83L9.25,13.47L6.5,17H17.5L13.96,12.29Z"],["type","button","id","viewOutline","title","Show Document Outline (double-click to expand/collapse all items)","data-l10n-id","document_outline","hidden","true",1,"toolbarButton"],["data-l10n-id","document_outline_label"],["fill","currentColor","d","M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z"],["type","button","id","viewAttachments","title","Show Attachments","data-l10n-id","attachments","hidden","true",1,"toolbarButton"],["data-l10n-id","attachments_label"],["fill","currentColor","d","M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z"],["id","viewLayers","title","Show Layers (double-click to reset all layers to the default state)","data-l10n-id","layers","hidden","true",1,"toolbarButton"],["data-l10n-id","layers_label"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 4.233 4.233",2,"width","20px","height","20px","margin-left","1px"],["d","M.15 2.992c-.198.1-.2.266-.002.365l1.604.802a.93.93 0 00.729-.001l1.602-.801c.198-.1.197-.264 0-.364l-.695-.348c-1.306.595-2.542 0-2.542 0m-.264.53l.658-.329c.6.252 1.238.244 1.754 0l.659.329-1.536.768zM.15 1.935c-.198.1-.198.265 0 .364l1.604.802a.926.926 0 00.727 0l1.603-.802c.198-.099.198-.264 0-.363l-.694-.35c-1.14.56-2.546.001-2.546.001m-.264.53l.664-.332c.52.266 1.261.235 1.75.002l.659.33-1.537.768zM.15.877c-.198.099-.198.264 0 .363l1.604.802a.926.926 0 00.727 0l1.603-.802c.198-.099.198-.264 0-.363L2.481.075a.926.926 0 00-.727 0zm.43.182L2.117.29l1.538.769-1.538.768z"],["id","toolbarSidebarRight"],["id","outlineOptionsContainer",1,"hidden"],[1,"verticalToolbarSeparator"],["id","currentOutlineItem","disabled","disabled","title","Find Current Outline Item","tabindex","6","data-l10n-id","current_outline_item",1,"toolbarButton"],["data-l10n-id","current_outline_item_label"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor",2,"width","20px","height","20px"],["d","m14 9h-6c-1.3 0-1.3 2 0 2h6c1.3 0 1.3-2 0-2zm-5.2-8h-3.8c-1.3 0-1.3 2 0 2h1.7zm-6.8 0c-1 0-1.3 1-0.7 1.7 0.7 0.6 1.7 0.3 1.7-0.7 0-0.5-0.4-1-1-1zm3 8c-1 0-1.3 1-0.7 1.7 0.6 0.6 1.7 0.2 1.7-0.7 0-0.5-0.4-1-1-1zm0.3-4h-0.3c-1.4 0-1.4 2 0 2h2.3zm-3.3 0c-0.9 0-1.4 1-0.7 1.7 0.7 0.6 1.7 0.2 1.7-0.7 0-0.6-0.5-1-1-1zm12 8h-9c-1.3 0-1.3 2 0 2h9c1.3 0 1.3-2 0-2zm-12 0c-1 0-1.3 1-0.7 1.7 0.7 0.6 1.7 0.2 1.7-0.712 0-0.5-0.4-1-1-1z"],["d","m7.37 4.838 3.93-3.911v2.138h3.629v3.546h-3.629v2.138l-3.93-3.911"]],template:function(t,c){1&t&&(r.TgZ(0,"div",0)(1,"div",1)(2,"button",2)(3,"span",3),r._uU(4,"Thumbnails"),r.qZA(),r.O4$(),r.TgZ(5,"svg",4),r._UZ(6,"path",5),r.qZA()(),r.kcU(),r.TgZ(7,"button",6)(8,"span",7),r._uU(9,"Document Outline"),r.qZA(),r.O4$(),r.TgZ(10,"svg",4),r._UZ(11,"path",8),r.qZA()(),r.kcU(),r.TgZ(12,"button",9)(13,"span",10),r._uU(14,"Attachments"),r.qZA(),r.O4$(),r.TgZ(15,"svg",4),r._UZ(16,"path",11),r.qZA()(),r.kcU(),r.TgZ(17,"button",12)(18,"span",13),r._uU(19,"Layers"),r.qZA(),r.O4$(),r.TgZ(20,"svg",14),r._UZ(21,"path",15),r.qZA()()(),r.kcU(),r.TgZ(22,"div",16)(23,"div",17),r._UZ(24,"div",18),r.TgZ(25,"button",19)(26,"span",20),r._uU(27,"Current Outline Item"),r.qZA(),r.O4$(),r.TgZ(28,"svg",21),r._UZ(29,"path",22)(30,"path",23),r.qZA()()()()()),2&t&&(r.Udp("height",c.height),r.xp6(2),r.Udp("zoom",c.mobileFriendlyZoomScale),r.xp6(5),r.Udp("zoom",c.mobileFriendlyZoomScale),r.xp6(5),r.Udp("zoom",c.mobileFriendlyZoomScale),r.xp6(5),r.Udp("zoom",c.mobileFriendlyZoomScale),r.xp6(8),r.Udp("zoom",c.mobileFriendlyZoomScale))},styles:["button.toolbarButton[_ngcontent-%COMP%]{margin-right:4px!important}button.toolbarButton[_ngcontent-%COMP%]{width:22px;height:22px}div#toolbarSidebar[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:first-child{margin-left:4px!important}"]}),a})(),mx=(()=>{class a{constructor(t,c){this.elementRef=t,this.ref=c,this.sidebarVisible=!0,this.mobileFriendlyZoomScale=1,this.showSidebarButton=!0,this.thumbnailDrawn=new r.vpe,this.hideSidebarToolbar=!0}showToolbarWhenNecessary(){const c=this.elementRef.nativeElement.querySelectorAll("button");let g=0;for(let b=0;b<c.length;b++)c.item(b).hidden||g++;this.hideSidebarToolbar=g<=1,this.ref.markForCheck()}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(r.sBO))},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-sidebar"]],inputs:{sidebarPositionTop:"sidebarPositionTop",sidebarVisible:"sidebarVisible",mobileFriendlyZoomScale:"mobileFriendlyZoomScale",showSidebarButton:"showSidebarButton",customSidebar:"customSidebar",customThumbnail:"customThumbnail"},outputs:{thumbnailDrawn:"thumbnailDrawn"},ngContentSelectors:Og,decls:4,vars:1,consts:[[4,"ngTemplateOutlet"],["defaultSidebar",""],["id","sidebarContainer"],["id","additionalSidebarContainer"],[3,"mobileFriendlyZoomScale"],[3,"customThumbnail","hideSidebarToolbar","mobileFriendlyZoomScale","thumbnailDrawn"],["id","sidebarResizer",1,"hidden"]],template:function(t,c){if(1&t&&(r.F$t(),r.TgZ(0,"div"),r.YNc(1,Ay,1,0,"ng-content",0),r.qZA(),r.YNc(2,by,5,8,"ng-template",null,1,r.W1O)),2&t){const g=r.MAs(3);r.xp6(1),r.Q6J("ngTemplateOutlet",c.customSidebar?c.customSidebar:g)}},directives:[fx,px,$e.tP],styles:[""]}),a})(),gx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-acroform-dark-theme"]],decls:0,vars:0,template:function(t,c){},styles:[":root{--form-anchor-hover-color: rgba(255, 255, 0, 1);--annotation-unfocused-field-background: unset;--form-widget-border-color: lightgrey;--form-widget-color: lightgrey;--form-widget-background-color: black;--form-check-color: lightgrey;--annotation-popup-background-color: rgba(255, 255, 153, 1);--annotation-popup-shadow-color: rgba(136, 136, 136, 1);--annotation-popup-border-top-color: lightgrey;--xfa-layer-highlight: rgba(239, 203, 237, 1);--xfa-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\");--xfa-highlight-selected-background-color: rgba(203, 223, 203, 1);--xfa-selection-background-color: rgba(0, 0, 255, 1)}\n",'@media (forced-colors: active){.annotationLayer .textWidgetAnnotation input:required,.annotationLayer .textWidgetAnnotation textarea:required,.annotationLayer .choiceWidgetAnnotation select:required,.annotationLayer .buttonWidgetAnnotation.checkBox input:required,.annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid selectedItem}}.annotationLayer section{position:absolute;text-align:initial}.annotationLayer .linkAnnotation>a,.annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}.annotationLayer .buttonWidgetAnnotation.pushButton>canvas{position:relative;top:0;left:0;z-index:-1}.annotationLayer .linkAnnotation>a:hover,.annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:var(--form-anchor-hover-color);box-shadow:0 2px 10px var(--form-anchor-hover-color)}.annotationLayer .textAnnotation img{position:absolute;cursor:pointer}.annotationLayer .textWidgetAnnotation input,.annotationLayer .textWidgetAnnotation textarea,.annotationLayer .choiceWidgetAnnotation select,.annotationLayer .buttonWidgetAnnotation.checkBox input,.annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font-size:9px;height:100%;margin:0;padding:0 3px;vertical-align:top;width:100%;background-color:var(--form-widget-background-color);color:var(--form-widget-color)}.annotationLayer .textWidgetAnnotation input:required,.annotationLayer .textWidgetAnnotation textarea:required,.annotationLayer .choiceWidgetAnnotation select:required,.annotationLayer .buttonWidgetAnnotation.checkBox input:required,.annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid red}.annotationLayer .choiceWidgetAnnotation select option{padding:0}.annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}.annotationLayer .textWidgetAnnotation textarea{font:message-box;font-size:9px;resize:none}.annotationLayer .textWidgetAnnotation input[disabled],.annotationLayer .textWidgetAnnotation textarea[disabled],.annotationLayer .choiceWidgetAnnotation select[disabled],.annotationLayer .buttonWidgetAnnotation.checkBox input[disabled],.annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}.annotationLayer .textWidgetAnnotation input:hover,.annotationLayer .textWidgetAnnotation textarea:hover,.annotationLayer .choiceWidgetAnnotation select:hover,.annotationLayer .buttonWidgetAnnotation.checkBox input:hover,.annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid var(--form-widget-border-color)}.annotationLayer .textWidgetAnnotation input:focus,.annotationLayer .textWidgetAnnotation textarea:focus,.annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}.annotationLayer .textWidgetAnnotation input :focus,.annotationLayer .textWidgetAnnotation textarea :focus,.annotationLayer .choiceWidgetAnnotation select :focus,.annotationLayer .buttonWidgetAnnotation.checkBox :focus,.annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before,.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after,.annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:var(--form-check-color);content:"";display:block;position:absolute}.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before,.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}.annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}.annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}.annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}.annotationLayer .buttonWidgetAnnotation.checkBox input,.annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;appearance:none;padding:0}.annotationLayer .popupWrapper{position:absolute;width:20em}.annotationLayer .popup{position:absolute;z-index:200;max-width:20em;background-color:var(--annotation-popup-background-color);box-shadow:0 2px 5px var(--annotation-popup-shadow-color);border-radius:2px;padding:6px;margin-left:5px;cursor:pointer;font:message-box;font-size:9px;white-space:normal;word-wrap:break-word}.annotationLayer .popup>*{font-size:9px}.annotationLayer .popup h1{display:inline-block}.annotationLayer .popupDate{display:inline-block;margin-left:5px}.annotationLayer .popupContent{border-top:1px solid var(--annotation-popup-border-top-color);margin-top:2px;padding-top:2px}.annotationLayer .richText>*{white-space:pre-wrap}.annotationLayer .highlightAnnotation,.annotationLayer .underlineAnnotation,.annotationLayer .squigglyAnnotation,.annotationLayer .strikeoutAnnotation,.annotationLayer .freeTextAnnotation,.annotationLayer .lineAnnotation svg line,.annotationLayer .squareAnnotation svg rect,.annotationLayer .circleAnnotation svg ellipse,.annotationLayer .polylineAnnotation svg polyline,.annotationLayer .polygonAnnotation svg polygon,.annotationLayer .caretAnnotation,.annotationLayer .inkAnnotation svg polyline,.annotationLayer .stampAnnotation,.annotationLayer .fileAttachmentAnnotation{cursor:pointer}\n','.xfaLayer .highlight{margin:-1px;padding:1px;background-color:var(--xfa-layer-highlight);border-radius:4px}.xfaLayer .highlight.appended{position:initial}.xfaLayer .highlight.begin{border-radius:4px 0 0 4px}.xfaLayer .highlight.end{border-radius:0 4px 4px 0}.xfaLayer .highlight.middle{border-radius:0}.xfaLayer .highlight.selected{background-color:var(--xfa-highlight-selected-background-color)}.xfaLayer ::selection{background:var(--xfa-selection-background-color)}.xfaPage{overflow:hidden;position:relative}.xfaContentarea{position:absolute}.xfaPrintOnly{display:none}.xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}.xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-feature-settings:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}.xfaLayer div{pointer-events:none}.xfaLayer svg{pointer-events:none}.xfaLayer svg *{pointer-events:none}.xfaLayer a{color:#00f}.xfaRich li{margin-left:3em}.xfaFont{color:#000;font-weight:400;font-feature-settings:"kern" off;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}.xfaCaption{overflow:hidden;flex:0 0 auto}.xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}.xfaLabel{height:100%;width:100%}.xfaLeft{display:flex;flex-direction:row;align-items:center}.xfaRight{display:flex;flex-direction:row-reverse;align-items:center}.xfaLeft>.xfaCaption,.xfaLeft>.xfaCaptionForCheckButton,.xfaRight>.xfaCaption,.xfaRight>.xfaCaptionForCheckButton{max-height:100%}.xfaTop{display:flex;flex-direction:column;align-items:flex-start}.xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}.xfaTop>.xfaCaption,.xfaTop>.xfaCaptionForCheckButton,.xfaBottom>.xfaCaption,.xfaBottom>.xfaCaptionForCheckButton{width:100%}.xfaBorder{background-color:transparent;position:absolute;pointer-events:none}.xfaWrapped{width:100%;height:100%}.xfaTextfield:focus,.xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}.xfaCheckbox:focus,.xfaRadio:focus{outline:auto}.xfaTextfield,.xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}.xfaTop>.xfaTextfield,.xfaTop>.xfaSelect,.xfaBottom>.xfaTextfield,.xfaBottom>.xfaSelect{flex:0 1 auto}.xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}.xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}.xfaCheckbox,.xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}.xfaRich{white-space:pre-wrap;width:100%;height:100%}.xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}.xfaLrTb,.xfaRlTb,.xfaTb{display:flex;flex-direction:column;align-items:stretch}.xfaLr{display:flex;flex-direction:row;align-items:stretch}.xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}.xfaTb>div{justify-content:left}.xfaPosition,.xfaArea{position:relative}.xfaValignMiddle{display:flex;align-items:center}.xfaTable{display:flex;flex-direction:column;align-items:stretch}.xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}.xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}.xfaTable .xfaRlRow>div{flex:1}.xfaNonInteractive input,.xfaNonInteractive textarea,.xfaDisabled input,.xfaDisabled textarea,.xfaReadOnly input,.xfaReadOnly textarea{background:initial}@media print{.xfaTextfield,.xfaSelect{background:transparent}.xfaSelect{-webkit-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}\n',":root{--focus-outline: solid 2px red;--hover-outline: dashed 2px blue;--freetext-line-height: 1.35;--freetext-padding: 2px}.annotationEditorLayer{background:transparent;width:100%;height:100%;position:absolute;top:0;left:0}.annotationEditorLayer .freeTextEditor{position:absolute;background:transparent;border-radius:3px;padding:calc(var(--freetext-padding) * var(--zoom-factor));resize:none;width:auto;height:auto}.annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;left:0;overflow:visible;white-space:nowrap;resize:none;font:10px sans-serif;line-height:var(--freetext-line-height)}.annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;left:0;width:100%;height:100%}.annotationEditorLayer .freeTextEditor .overlay.enabled{display:block}.annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}.annotationEditorLayer .freeTextEditor .internal:focus{outline:none}.annotationEditorLayer .freeTextEditor:focus-within{outline:var(--focus-outline)}.annotationEditorLayer .inkEditor:not(:focus){resize:none}.annotationEditorLayer .freeTextEditor:hover:not(:focus-within),.annotationEditorLayer .inkEditor:hover:not(:focus){outline:var(--hover-outline)}.annotationEditorLayer .inkEditor.disabled:focus{resize:horizontal}.annotationEditorLayer .inkEditor{position:absolute;background:transparent;border-radius:3px;overflow:auto;width:100%;height:100%;z-index:1}.annotationEditorLayer .background{z-index:0}.annotationEditorLayer .inkEditor:focus{left:0;width:100%;height:100%}.annotationEditorLayer .selectedEditor{outline:var(--focus-outline);resize:none}\n"],encapsulation:2}),a})(),_x=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-acroform-default-theme"]],decls:0,vars:0,template:function(t,c){},styles:[":root{--form-anchor-hover-color: rgba(255, 255, 0, 1);--annotation-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\");--form-widget-border-color: rgba(0, 0, 0, 1);--form-widget-color: inherit;--form-widget-background-color: inherit;--form-check-color: rgba(0, 0, 0, 1);--annotation-popup-background-color: rgba(255, 255, 153, 1);--annotation-popup-shadow-color: rgba(136, 136, 136, 1);--annotation-popup-border-top-color: rgba(51, 51, 51, 1);--xfa-layer-highlight: rgba(239, 203, 237, 1);--xfa-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\");--xfa-highlight-selected-background-color: rgba(203, 223, 203, 1);--xfa-selection-background-color: rgba(0, 0, 255, 1)}\n",'@media (forced-colors: active){.annotationLayer .textWidgetAnnotation input:required,.annotationLayer .textWidgetAnnotation textarea:required,.annotationLayer .choiceWidgetAnnotation select:required,.annotationLayer .buttonWidgetAnnotation.checkBox input:required,.annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid selectedItem}}.annotationLayer section{position:absolute;text-align:initial}.annotationLayer .linkAnnotation>a,.annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}.annotationLayer .buttonWidgetAnnotation.pushButton>canvas{position:relative;top:0;left:0;z-index:-1}.annotationLayer .linkAnnotation>a:hover,.annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:var(--form-anchor-hover-color);box-shadow:0 2px 10px var(--form-anchor-hover-color)}.annotationLayer .textAnnotation img{position:absolute;cursor:pointer}.annotationLayer .textWidgetAnnotation input,.annotationLayer .textWidgetAnnotation textarea,.annotationLayer .choiceWidgetAnnotation select,.annotationLayer .buttonWidgetAnnotation.checkBox input,.annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font-size:9px;height:100%;margin:0;padding:0 3px;vertical-align:top;width:100%;background-color:var(--form-widget-background-color);color:var(--form-widget-color)}.annotationLayer .textWidgetAnnotation input:required,.annotationLayer .textWidgetAnnotation textarea:required,.annotationLayer .choiceWidgetAnnotation select:required,.annotationLayer .buttonWidgetAnnotation.checkBox input:required,.annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid red}.annotationLayer .choiceWidgetAnnotation select option{padding:0}.annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}.annotationLayer .textWidgetAnnotation textarea{font:message-box;font-size:9px;resize:none}.annotationLayer .textWidgetAnnotation input[disabled],.annotationLayer .textWidgetAnnotation textarea[disabled],.annotationLayer .choiceWidgetAnnotation select[disabled],.annotationLayer .buttonWidgetAnnotation.checkBox input[disabled],.annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}.annotationLayer .textWidgetAnnotation input:hover,.annotationLayer .textWidgetAnnotation textarea:hover,.annotationLayer .choiceWidgetAnnotation select:hover,.annotationLayer .buttonWidgetAnnotation.checkBox input:hover,.annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid var(--form-widget-border-color)}.annotationLayer .textWidgetAnnotation input:focus,.annotationLayer .textWidgetAnnotation textarea:focus,.annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}.annotationLayer .textWidgetAnnotation input :focus,.annotationLayer .textWidgetAnnotation textarea :focus,.annotationLayer .choiceWidgetAnnotation select :focus,.annotationLayer .buttonWidgetAnnotation.checkBox :focus,.annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before,.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after,.annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:var(--form-check-color);content:"";display:block;position:absolute}.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before,.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}.annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}.annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}.annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}.annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}.annotationLayer .buttonWidgetAnnotation.checkBox input,.annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;appearance:none;padding:0}.annotationLayer .popupWrapper{position:absolute;width:20em}.annotationLayer .popup{position:absolute;z-index:200;max-width:20em;background-color:var(--annotation-popup-background-color);box-shadow:0 2px 5px var(--annotation-popup-shadow-color);border-radius:2px;padding:6px;margin-left:5px;cursor:pointer;font:message-box;font-size:9px;white-space:normal;word-wrap:break-word}.annotationLayer .popup>*{font-size:9px}.annotationLayer .popup h1{display:inline-block}.annotationLayer .popupDate{display:inline-block;margin-left:5px}.annotationLayer .popupContent{border-top:1px solid var(--annotation-popup-border-top-color);margin-top:2px;padding-top:2px}.annotationLayer .richText>*{white-space:pre-wrap}.annotationLayer .highlightAnnotation,.annotationLayer .underlineAnnotation,.annotationLayer .squigglyAnnotation,.annotationLayer .strikeoutAnnotation,.annotationLayer .freeTextAnnotation,.annotationLayer .lineAnnotation svg line,.annotationLayer .squareAnnotation svg rect,.annotationLayer .circleAnnotation svg ellipse,.annotationLayer .polylineAnnotation svg polyline,.annotationLayer .polygonAnnotation svg polygon,.annotationLayer .caretAnnotation,.annotationLayer .inkAnnotation svg polyline,.annotationLayer .stampAnnotation,.annotationLayer .fileAttachmentAnnotation{cursor:pointer}\n','.xfaLayer .highlight{margin:-1px;padding:1px;background-color:var(--xfa-layer-highlight);border-radius:4px}.xfaLayer .highlight.appended{position:initial}.xfaLayer .highlight.begin{border-radius:4px 0 0 4px}.xfaLayer .highlight.end{border-radius:0 4px 4px 0}.xfaLayer .highlight.middle{border-radius:0}.xfaLayer .highlight.selected{background-color:var(--xfa-highlight-selected-background-color)}.xfaLayer ::selection{background:var(--xfa-selection-background-color)}.xfaPage{overflow:hidden;position:relative}.xfaContentarea{position:absolute}.xfaPrintOnly{display:none}.xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}.xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-feature-settings:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}.xfaLayer div{pointer-events:none}.xfaLayer svg{pointer-events:none}.xfaLayer svg *{pointer-events:none}.xfaLayer a{color:#00f}.xfaRich li{margin-left:3em}.xfaFont{color:#000;font-weight:400;font-feature-settings:"kern" off;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}.xfaCaption{overflow:hidden;flex:0 0 auto}.xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}.xfaLabel{height:100%;width:100%}.xfaLeft{display:flex;flex-direction:row;align-items:center}.xfaRight{display:flex;flex-direction:row-reverse;align-items:center}.xfaLeft>.xfaCaption,.xfaLeft>.xfaCaptionForCheckButton,.xfaRight>.xfaCaption,.xfaRight>.xfaCaptionForCheckButton{max-height:100%}.xfaTop{display:flex;flex-direction:column;align-items:flex-start}.xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}.xfaTop>.xfaCaption,.xfaTop>.xfaCaptionForCheckButton,.xfaBottom>.xfaCaption,.xfaBottom>.xfaCaptionForCheckButton{width:100%}.xfaBorder{background-color:transparent;position:absolute;pointer-events:none}.xfaWrapped{width:100%;height:100%}.xfaTextfield:focus,.xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}.xfaCheckbox:focus,.xfaRadio:focus{outline:auto}.xfaTextfield,.xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}.xfaTop>.xfaTextfield,.xfaTop>.xfaSelect,.xfaBottom>.xfaTextfield,.xfaBottom>.xfaSelect{flex:0 1 auto}.xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}.xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}.xfaCheckbox,.xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}.xfaRich{white-space:pre-wrap;width:100%;height:100%}.xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}.xfaLrTb,.xfaRlTb,.xfaTb{display:flex;flex-direction:column;align-items:stretch}.xfaLr{display:flex;flex-direction:row;align-items:stretch}.xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}.xfaTb>div{justify-content:left}.xfaPosition,.xfaArea{position:relative}.xfaValignMiddle{display:flex;align-items:center}.xfaTable{display:flex;flex-direction:column;align-items:stretch}.xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}.xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}.xfaTable .xfaRlRow>div{flex:1}.xfaNonInteractive input,.xfaNonInteractive textarea,.xfaDisabled input,.xfaDisabled textarea,.xfaReadOnly input,.xfaReadOnly textarea{background:initial}@media print{.xfaTextfield,.xfaSelect{background:transparent}.xfaSelect{-webkit-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}\n',":root{--focus-outline: solid 2px red;--hover-outline: dashed 2px blue;--freetext-line-height: 1.35;--freetext-padding: 2px}.annotationEditorLayer{background:transparent;width:100%;height:100%;position:absolute;top:0;left:0}.annotationEditorLayer .freeTextEditor{position:absolute;background:transparent;border-radius:3px;padding:calc(var(--freetext-padding) * var(--zoom-factor));resize:none;width:auto;height:auto}.annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;left:0;overflow:visible;white-space:nowrap;resize:none;font:10px sans-serif;line-height:var(--freetext-line-height)}.annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;left:0;width:100%;height:100%}.annotationEditorLayer .freeTextEditor .overlay.enabled{display:block}.annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}.annotationEditorLayer .freeTextEditor .internal:focus{outline:none}.annotationEditorLayer .freeTextEditor:focus-within{outline:var(--focus-outline)}.annotationEditorLayer .inkEditor:not(:focus){resize:none}.annotationEditorLayer .freeTextEditor:hover:not(:focus-within),.annotationEditorLayer .inkEditor:hover:not(:focus){outline:var(--hover-outline)}.annotationEditorLayer .inkEditor.disabled:focus{resize:horizontal}.annotationEditorLayer .inkEditor{position:absolute;background:transparent;border-radius:3px;overflow:auto;width:100%;height:100%;z-index:1}.annotationEditorLayer .background{z-index:0}.annotationEditorLayer .inkEditor:focus{left:0;width:100%;height:100%}.annotationEditorLayer .selectedEditor{outline:var(--focus-outline);resize:none}\n"],encapsulation:2}),a})(),yx=(()=>{class a{constructor(){this.showBookmarkButton=!0}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-bookmark"]],inputs:{showBookmarkButton:"showBookmarkButton"},decls:5,vars:2,consts:[["href","#","id","viewBookmark","title","Current view (copy or open in new window)","data-l10n-id","bookmark",1,"toolbarButton","hiddenTinyView"],["viewBox","0 0 24 24",2,"width","24px","height","24px"],["fill","currentColor","d","M17,18L12,15.82L7,18V5H17M17,3H7A2,2 0 0,0 5,5V21L12,18L19,21V5C19,3.89 18.1,3 17,3Z"],["data-l10n-id","bookmark_label"]],template:function(t,c){1&t&&(r.TgZ(0,"a",0),r.O4$(),r.TgZ(1,"svg",1),r._UZ(2,"path",2),r.qZA(),r.kcU(),r.TgZ(3,"span",3),r._uU(4,"Current View"),r.qZA()()),2&t&&r.ekj("invisible",!c.showBookmarkButton)},styles:["[_nghost-%COMP%]   a.toolbarButton[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:4px}[_nghost-%COMP%]:focus{outline:none}a[_ngcontent-%COMP%]:focus{outline:none}svg[_ngcontent-%COMP%]:focus{outline:none}"]}),a})(),xx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-context-menu"]],decls:5,vars:0,consts:[["type","context","id","viewerContextMenu",2,"display","none"],["id","contextFirstPage",2,"display","none"],["id","contextLastPage",2,"display","none"],["id","contextPageRotateCw",2,"display","none"],["id","contextPageRotateCcw",2,"display","none"]],template:function(t,c){1&t&&(r.TgZ(0,"div",0),r._UZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),r.qZA())},styles:["[_nghost-%COMP%]{margin-top:4px}"]}),a})(),vx=(()=>{class a{constructor(){this.showDownloadButton=!0}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-download"]],inputs:{showDownloadButton:"showDownloadButton"},decls:5,vars:2,consts:[["type","button","id","download","title","Download","data-l10n-id","download",1,"toolbarButton","hiddenSmallView"],["viewBox","0 0 24 24",2,"width","20px","height","20px"],["fill","currentColor","d","M14,2L20,8V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2H14M18,20V9H13V4H6V20H18M12,19L8,15H10.5V12H13.5V15H16L12,19Z"],["data-l10n-id","download_label"]],template:function(t,c){1&t&&(r.TgZ(0,"button",0),r.O4$(),r.TgZ(1,"svg",1),r._UZ(2,"path",2),r.qZA(),r.kcU(),r.TgZ(3,"span",3),r._uU(4,"Download"),r.qZA()()),2&t&&r.ekj("invisible",!c.showDownloadButton)},styles:["[_nghost-%COMP%]{margin-top:0}[_nghost-%COMP%]:focus{outline:none}button[_ngcontent-%COMP%]:focus{outline:none}svg[_ngcontent-%COMP%]:focus{outline:none}"]}),a})(),Ax=(()=>{class a{constructor(){this.showFindButton=void 0,this.textLayer=void 0}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-find-button"]],inputs:{showFindButton:"showFindButton",textLayer:"textLayer"},decls:5,vars:2,consts:[["type","button","id","viewFind","title","Find in Document","data-l10n-id","findbar",1,"toolbarButton"],["viewBox","0 0 24 24",2,"width","24px","height","24px"],["fill","currentColor","d","M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"],["data-l10n-id","findbar_label"]],template:function(t,c){1&t&&(r.TgZ(0,"button",0),r.O4$(),r.TgZ(1,"svg",1),r._UZ(2,"path",2),r.qZA(),r.kcU(),r.TgZ(3,"span",3),r._uU(4,"Find"),r.qZA()()),2&t&&r.ekj("invisible",!c.showFindButton||!c.textLayer)},styles:["[_nghost-%COMP%]:focus{outline:none}button[_ngcontent-%COMP%]:focus{outline:none}svg[_ngcontent-%COMP%]:focus{outline:none}"]}),a})(),bx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-find-current-page-only"]],decls:3,vars:0,consts:[["type","checkbox","id","findCurrentPage",1,"toolbarField"],["for","findCurrentPage","data-l10n-id","find_current_page",1,"toolbarLabel"]],template:function(t,c){1&t&&(r._UZ(0,"input",0),r.TgZ(1,"label",1),r._uU(2," Current page only\n"),r.qZA())},styles:["#findRange[_ngcontent-%COMP%]{margin-right:14px}"]}),a})(),S_=(()=>{class a{constructor(){this.individualWordsMode=!0,this.multipleSearchTexts=!1}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),wx=(()=>{class a{constructor(t){this.pdfFindbarService=t}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(S_))},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-search-input-field"]],decls:2,vars:5,consts:[["autocomplete","search-input-field","id","findInput","title","Find","data-l10n-id","find_input","name","search-input-field",1,"toolbarField",3,"placeholder"],["id","findInputMultiline","type","checkbox","placeholder","Multiple search terms. Each line is a search term.","data-l10n-id","find_input_line_by_line","lines","3",1,"toolbarField"]],template:function(t,c){1&t&&r._UZ(0,"input",0)(1,"textarea",1),2&t&&(r.ekj("hidden",!c.pdfFindbarService.individualWordsMode),r.Q6J("placeholder","Find in document\u2026"),r.xp6(1),r.ekj("hidden",c.pdfFindbarService.individualWordsMode))},styles:["textarea[_ngcontent-%COMP%]{width:200px;height:3.5em}textarea[_ngcontent-%COMP%]::placeholder{font-style:italic}"]}),a})(),Cx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-find-previous"]],decls:5,vars:0,consts:[["type","button","id","findPrevious","title","Find the previous occurrence of the phrase","data-l10n-id","find_previous",1,"toolbarButton"],["viewBox","0 0 24 24",2,"width","24px","height","24px"],["fill","currentColor","d","M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"],["data-l10n-id","find_previous_label"]],template:function(t,c){1&t&&(r.TgZ(0,"button",0),r.O4$(),r.TgZ(1,"svg",1),r._UZ(2,"path",2),r.qZA(),r.kcU(),r.TgZ(3,"span",3),r._uU(4,"Previous"),r.qZA()())},styles:["button.toolbarButton#findPrevious[_ngcontent-%COMP%]{margin-top:0;width:24px;margin-left:1px!important}"]}),a})(),Mx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-find-next"]],decls:5,vars:0,consts:[["type","button","id","findNext","title","Find the next occurrence of the phrase","data-l10n-id","find_next",1,"toolbarButton"],["viewBox","0 0 24 24",2,"width","24px","height","24px"],["fill","currentColor","d","M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"],["data-l10n-id","find_next_label"]],template:function(t,c){1&t&&(r.TgZ(0,"button",0),r.O4$(),r.TgZ(1,"svg",1),r._UZ(2,"path",2),r.qZA(),r.kcU(),r.TgZ(3,"span",3),r._uU(4,"Next"),r.qZA()())},styles:["button.toolbarButton#findNext[_ngcontent-%COMP%]{margin-top:0;margin-left:-4px!important;margin-right:3px!important;width:24px}"]}),a})(),Tx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-find-input-area"]],inputs:{customFindbarInputArea:"customFindbarInputArea"},decls:2,vars:2,consts:[["id","findbarInputContainer",4,"ngIf"],[3,"ngTemplateOutlet"],["id","findbarInputContainer"]],template:function(t,c){1&t&&(r.YNc(0,Ty,4,0,"div",0),r.GkF(1,1)),2&t&&(r.Q6J("ngIf",!c.customFindbarInputArea),r.xp6(1),r.Q6J("ngTemplateOutlet",c.customFindbarInputArea||null))},directives:[wx,Cx,Mx,$e.O5,$e.tP],styles:[""]}),a})(),Ex=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-find-range"]],decls:1,vars:1,consts:[["autocomplete","search-range-field","id","findRange","title","pages to search","data-l10n-id","find_range","name","search-range-field",1,"toolbarField",3,"placeholder"]],template:function(t,c){1&t&&r._UZ(0,"input",0),2&t&&r.Q6J("placeholder","pages (e.g. 6-10)")},styles:["#findRange[_ngcontent-%COMP%]{margin-right:14px}"]}),a})(),Sx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-findbar-message-container"]],decls:2,vars:0,consts:[["id","findbarMessageContainer"],["id","findMsg",1,"toolbarLabel"]],template:function(t,c){1&t&&(r.TgZ(0,"div",0),r._UZ(1,"span",1),r.qZA())},styles:[""]}),a})(),Dx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-find-highlight-all"]],decls:3,vars:0,consts:[["type","checkbox","id","findHighlightAll",1,"toolbarField"],["for","findHighlightAll","data-l10n-id","find_highlight",1,"toolbarLabel"]],template:function(t,c){1&t&&(r._UZ(0,"input",0),r.TgZ(1,"label",1),r._uU(2," Highlight all\n"),r.qZA())},styles:[""]}),a})(),Bx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-find-match-case"]],decls:3,vars:0,consts:[["type","checkbox","id","findMatchCase",1,"toolbarField"],["for","findMatchCase","data-l10n-id","find_match_case_label",1,"toolbarLabel"]],template:function(t,c){1&t&&(r._UZ(0,"input",0),r.TgZ(1,"label",1),r._uU(2," Match case\n"),r.qZA())},styles:[""]}),a})(),kx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-find-fuzzily"]],decls:3,vars:0,consts:[["type","checkbox","id","findFuzzy",1,"toolbarField"],["for","findFuzzy","data-l10n-id","find_fuzzy",1,"toolbarLabel"]],template:function(t,c){1&t&&(r._UZ(0,"input",0),r.TgZ(1,"label",1),r._uU(2," Fuzzy search\n"),r.qZA())},styles:[""]}),a})(),Px=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-find-ignore-accents"]],decls:3,vars:0,consts:[["type","checkbox","id","findIgnoreAccents",1,"toolbarField"],["for","findIgnoreAccents","data-l10n-id","find_ignore_accents",1,"toolbarLabel"]],template:function(t,c){1&t&&(r._UZ(0,"input",0),r.TgZ(1,"label",1),r._uU(2," Ignore accents and diacritics\n"),r.qZA())},styles:[""]}),a})(),Ix=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-find-results-count"]],decls:1,vars:0,consts:[["id","findResultsCount",1,"toolbarLabel","hidden"]],template:function(t,c){1&t&&r._UZ(0,"span",0)},styles:[""]}),a})(),Fx=(()=>{class a{constructor(t){this.pdfFindbarService=t}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(S_))},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-find-entire-phrase"]],decls:6,vars:6,consts:[["type","checkbox","id","findMultipleSearchTexts",1,"toolbarField",3,"ngModel","ngModelChange"],["for","findMultipleSearchTexts","data-l10n-id","find_multiple_texts_label",1,"toolbarLabel"],["type","checkbox","id","individualWordsMode",1,"toolbarField",3,"ngModel","ngModelChange"],["for","individualWordsMode","id","individualWordsModeLabel","data-l10n-id","find_individual_words_label",1,"toolbarLabel"]],template:function(t,c){1&t&&(r.TgZ(0,"input",0),r.NdJ("ngModelChange",function(b){return c.pdfFindbarService.multipleSearchTexts=b}),r.qZA(),r.TgZ(1,"label",1),r._uU(2," multiple search texts\n"),r.qZA(),r.TgZ(3,"input",2),r.NdJ("ngModelChange",function(b){return c.pdfFindbarService.individualWordsMode=b}),r.qZA(),r.TgZ(4,"label",3),r._uU(5," separated by word boundaries\n"),r.qZA()),2&t&&(r.Q6J("ngModel",c.pdfFindbarService.multipleSearchTexts),r.xp6(3),r.ekj("hidden",!c.pdfFindbarService.multipleSearchTexts),r.Q6J("ngModel",c.pdfFindbarService.individualWordsMode),r.xp6(1),r.ekj("hidden",!c.pdfFindbarService.multipleSearchTexts))},directives:[Qo,Cd,Fd],styles:[""]}),a})(),Lx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-find-entire-word"]],decls:3,vars:0,consts:[["type","checkbox","id","findEntireWord",1,"toolbarField"],["for","findEntireWord","data-l10n-id","find_entire_word_label",1,"toolbarLabel"]],template:function(t,c){1&t&&(r._UZ(0,"input",0),r.TgZ(1,"label",1),r._uU(2," Whole words\n"),r.qZA())},styles:[""]}),a})(),Rx=(()=>{class a{constructor(){this.showFindButton=!0,this.showFindHighlightAll=!0,this.showFindMatchCase=!0,this.showFindCurrentPageOnly=!0,this.showFindPageRange=!0,this.showFindEntireWord=!0,this.showFindEntirePhrase=!0,this.showFindIgnoreAccents=!0,this.showFindFuzzySearch=!0,this.showFindResultsCount=!0,this.showFindMessages=!0,this.pdfJsVersion=vl(Wt.assetsFolder)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-findbar"]],inputs:{showFindButton:"showFindButton",mobileFriendlyZoomScale:"mobileFriendlyZoomScale",findbarLeft:"findbarLeft",findbarTop:"findbarTop",customFindbarInputArea:"customFindbarInputArea",customFindbar:"customFindbar",customFindbarButtons:"customFindbarButtons",showFindHighlightAll:"showFindHighlightAll",showFindMatchCase:"showFindMatchCase",showFindCurrentPageOnly:"showFindCurrentPageOnly",showFindPageRange:"showFindPageRange",showFindEntireWord:"showFindEntireWord",showFindEntirePhrase:"showFindEntirePhrase",showFindIgnoreAccents:"showFindIgnoreAccents",showFindFuzzySearch:"showFindFuzzySearch",showFindResultsCount:"showFindResultsCount",showFindMessages:"showFindMessages"},decls:5,vars:1,consts:[[3,"ngTemplateOutlet"],["defaultFindbar",""],["defaultFindbarButtons",""],["id","findbar",1,"findbar","hidden","doorHanger"],[3,"customFindbarInputArea"]],template:function(t,c){if(1&t&&(r.GkF(0,0),r.YNc(1,Ey,2,11,"ng-template",null,1,r.W1O),r.YNc(3,Sy,11,21,"ng-template",null,2,r.W1O)),2&t){const g=r.MAs(2);r.Q6J("ngTemplateOutlet",c.customFindbar?c.customFindbar:g)}},directives:[Tx,Dx,Bx,bx,Ex,Lx,Fx,Px,kx,Ix,Sx,$e.tP],styles:[""]}),a})();var wl=(()=>{return(a=wl||(wl={}))[a.SELECT=0]="SELECT",a[a.HAND=1]="HAND",a[a.ZOOM=2]="ZOOM",wl;var a})();let Ox=(()=>{class a{constructor(t){this.notificationService=t,this.showHandToolButton=!0,this.isSelected=!1;const c=this.notificationService.onPDFJSInit.subscribe(()=>{this.onPdfJsInit(),c.unsubscribe()})}onPdfJsInit(){window.PDFViewerApplication.eventBus.on("cursortoolchanged",({tool:c})=>this.isSelected=c===wl.HAND)}onClick(){window.PDFViewerApplication.eventBus.dispatch("switchcursortool",{tool:wl.HAND})}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(bl))},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-hand-tool"]],inputs:{showHandToolButton:"showHandToolButton"},decls:5,vars:4,consts:[["type","button","id","primaryCursorHandTool","title","Enable hand tool","data-l10n-id","cursor_hand_tool",1,"toolbarButton","hiddenXXLView",3,"click"],["viewBox","0 0 24 24",2,"width","22px","height","22px"],["fill","currentColor","d","M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"],["data-l10n-id","cursor_hand_tool_label"]],template:function(t,c){1&t&&(r.TgZ(0,"button",0),r.NdJ("click",function(){return c.onClick()}),r.O4$(),r.TgZ(1,"svg",1),r._UZ(2,"path",2),r.qZA(),r.kcU(),r.TgZ(3,"span",3),r._uU(4,"Hand Tool"),r.qZA()()),2&t&&r.ekj("invisible",!c.showHandToolButton)("toggled",c.isSelected)},styles:["[_nghost-%COMP%]{margin-top:0}[_nghost-%COMP%]:focus{outline:none}button[_ngcontent-%COMP%]:focus{outline:none}svg[_ngcontent-%COMP%]:focus{outline:none}.toggled[_ngcontent-%COMP%]{background-color:#646464;border-color:rgba(0,0,0,.4) rgba(0,0,0,.45) rgba(0,0,0,.5);box-shadow:0 1px 1px #0000001a inset,0 0 1px #0003 inset,0 1px #ffffff0d}"]}),a})(),zx=(()=>{class a{constructor(){this.showOpenFileButton=!0}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-open-file"]],inputs:{showOpenFileButton:"showOpenFileButton"},decls:5,vars:2,consts:[["type","button","id","openFile","title","Open File","data-l10n-id","open_file",1,"toolbarButton","hiddenMediumView"],["viewBox","0 0 24 24",2,"width","24px","height","20px"],["fill","currentColor","d","M14,2L20,8V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2H14M18,20V9H13V4H6V20H18M12,12L16,16H13.5V19H10.5V16H8L12,12Z"],["data-l10n-id","open_file_label"]],template:function(t,c){1&t&&(r.TgZ(0,"button",0),r.O4$(),r.TgZ(1,"svg",1),r._UZ(2,"path",2),r.qZA(),r.kcU(),r.TgZ(3,"span",3),r._uU(4,"Open"),r.qZA()()),2&t&&r.ekj("invisible",!c.showOpenFileButton)},styles:["[_nghost-%COMP%]{margin-top:0}[_nghost-%COMP%]:focus{outline:none}button[_ngcontent-%COMP%]:focus{outline:none}svg[_ngcontent-%COMP%]:focus{outline:none}"]}),a})(),Vx=(()=>{class a{constructor(t){this.notificationService=t,this.disableFirstPage=!0;const c=this.notificationService.onPDFJSInit.subscribe(()=>{this.onPdfJsInit(),c.unsubscribe()})}firstPage(){window.PDFViewerApplication.eventBus.dispatch("firstpage")}onPdfJsInit(){window.PDFViewerApplication.eventBus.on("updateuistate",c=>this.updateUIState(c))}updateUIState(t){this.disableFirstPage=t.pageNumber<=1,this.button.nativeElement.disabled=this.disableFirstPage}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(bl))},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-first-page"]],viewQuery:function(t,c){if(1&t&&r.Gf(M_,5),2&t){let g;r.iGM(g=r.CRH())&&(c.button=g.first)}},decls:6,vars:1,consts:[["type","button","title","First page","id","primaryFirstPage","data-l10n-id","first_page",1,"toolbarButton","hiddenLargeView",3,"disabled","click"],["button",""],["viewBox","0 0 24 24",2,"width","24px","height","24px"],["fill","currentColor","d","M18.41,16.59L13.82,12L18.41,7.41L17,6L11,12L17,18L18.41,16.59M6,6H8V18H6V6Z"],["data-l10n-id","first_page_label"]],template:function(t,c){1&t&&(r.TgZ(0,"button",0,1),r.NdJ("click",function(){return c.firstPage()}),r.O4$(),r.TgZ(2,"svg",2),r._UZ(3,"path",3),r.qZA(),r.kcU(),r.TgZ(4,"span",4),r._uU(5,"First page"),r.qZA()()),2&t&&r.Q6J("disabled",c.disableFirstPage)},styles:[""]}),a})(),Nx=(()=>{class a{constructor(t){this.notificationService=t,this.disableLastPage=!0;const c=this.notificationService.onPDFJSInit.subscribe(()=>{this.onPdfJsInit(),c.unsubscribe()})}firstPage(){window.PDFViewerApplication.eventBus.dispatch("firstpage")}onPdfJsInit(){window.PDFViewerApplication.eventBus.on("updateuistate",c=>this.updateUIState(c))}updateUIState(t){this.disableLastPage=t.pageNumber===t.pagesCount,this.button.nativeElement.disabled=this.disableLastPage}lastPage(){window.PDFViewerApplication.eventBus.dispatch("lastpage")}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(bl))},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-last-page"]],viewQuery:function(t,c){if(1&t&&r.Gf(M_,5),2&t){let g;r.iGM(g=r.CRH())&&(c.button=g.first)}},decls:6,vars:1,consts:[["type","button","title","Last page","id","primaryLastPage","data-l10n-id","last_page",1,"toolbarButton","hiddenLargeView",3,"disabled","click"],["button",""],["viewBox","0 0 24 24",2,"width","24px","height","24px"],["fill","currentColor","d","M5.59,7.41L10.18,12L5.59,16.59L7,18L13,12L7,6L5.59,7.41M16,6H18V18H16V6Z"],["data-l10n-id","last_page_label"]],template:function(t,c){1&t&&(r.TgZ(0,"button",0,1),r.NdJ("click",function(){return c.lastPage()}),r.O4$(),r.TgZ(2,"svg",2),r._UZ(3,"path",3),r.qZA(),r.kcU(),r.TgZ(4,"span",4),r._uU(5,"Last page"),r.qZA()()),2&t&&r.Q6J("disabled",c.disableLastPage)},styles:[""]}),a})(),Ux=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-next-page"]],decls:5,vars:0,consts:[["type","button","title","Next Page","id","next","data-l10n-id","next",1,"toolbarButton"],["viewBox","0 0 24 24",2,"width","24px","height","24px"],["fill","currentColor","d","M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"],["data-l10n-id","next_label"]],template:function(t,c){1&t&&(r.TgZ(0,"button",0),r.O4$(),r.TgZ(1,"svg",1),r._UZ(2,"path",2),r.qZA(),r.kcU(),r.TgZ(3,"span",3),r._uU(4,"Next"),r.qZA()())},styles:[""]}),a})(),Gx=(()=>{class a{constructor(){this.showPagingButtons=!0}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-page-number"]],inputs:{showPagingButtons:"showPagingButtons"},decls:2,vars:4,consts:[["type","number","id","pageNumber","title","Page","value","1","size","4","min","1","data-l10n-id","page",1,"toolbarField","pageNumber"],["id","numPages",1,"toolbarLabel","hiddenXLView"]],template:function(t,c){1&t&&r._UZ(0,"input",0)(1,"span",1),2&t&&(r.ekj("invisible",!c.showPagingButtons),r.xp6(1),r.ekj("invisible",!c.showPagingButtons))},styles:[""]}),a})(),Zx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-previous-page"]],decls:5,vars:0,consts:[["type","button","title","Previous Page","id","previous","data-l10n-id","previous",1,"toolbarButton"],["viewBox","0 0 24 24",2,"width","24px","height","24px"],["fill","currentColor","d","M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"],["data-l10n-id","previous_label"]],template:function(t,c){1&t&&(r.TgZ(0,"button",0),r.O4$(),r.TgZ(1,"svg",1),r._UZ(2,"path",2),r.qZA(),r.kcU(),r.TgZ(3,"span",3),r._uU(4,"Previous"),r.qZA()())},styles:[""]}),a})(),jx=(()=>{class a{constructor(){this.showPagingButtons=!0}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-paging-area"]],inputs:{showPagingButtons:"showPagingButtons"},decls:7,vars:5,consts:[[1,"paging-left","hiddenTinyView"],[2,"margin-right","-3px"],[2,"margin-left","-3px"],[3,"showPagingButtons"],[1,"paging-right","hiddenTinyView"],[2,"margin-right","-3px","margin-left","-3px"]],template:function(t,c){1&t&&(r.TgZ(0,"div",0),r._UZ(1,"pdf-first-page",1)(2,"pdf-previous-page",2),r.qZA(),r._UZ(3,"pdf-page-number",3),r.TgZ(4,"div",4),r._UZ(5,"pdf-next-page",5)(6,"pdf-last-page",2),r.qZA()),2&t&&(r.ekj("invisible",!c.showPagingButtons),r.xp6(3),r.Q6J("showPagingButtons",c.showPagingButtons),r.xp6(1),r.ekj("invisible",!c.showPagingButtons))},directives:[Vx,Zx,Gx,Ux,Nx],styles:[".paging-right[_ngcontent-%COMP%]{float:right;display:block;margin-top:-2px}.paging-left[_ngcontent-%COMP%]{float:left;display:block;margin-top:-2px}"]}),a})(),Hx=(()=>{class a{constructor(){this.showPresentationModeButton=!0}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-presentation-mode"]],inputs:{showPresentationModeButton:"showPresentationModeButton"},decls:5,vars:2,consts:[["type","button","id","presentationMode","title","Switch to Presentation Mode","data-l10n-id","presentation_mode",1,"toolbarButton","hiddenLargeView"],["viewBox","0 0 24 24",2,"width","27px","height","27px"],["fill","currentColor","d","M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z"],["data-l10n-id","presentation_mode_label"]],template:function(t,c){1&t&&(r.TgZ(0,"button",0),r.O4$(),r.TgZ(1,"svg",1),r._UZ(2,"path",2),r.qZA(),r.kcU(),r.TgZ(3,"span",3),r._uU(4,"Presentation Mode"),r.qZA()()),2&t&&r.ekj("invisible",!c.showPresentationModeButton)},styles:["[_nghost-%COMP%]   button.toolbarButton[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]:focus{outline:none}button[_ngcontent-%COMP%]:focus{outline:none}svg[_ngcontent-%COMP%]:focus{outline:none}"]}),a})(),qx=(()=>{class a{constructor(){this.showPrintButton=!0}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-print"]],inputs:{showPrintButton:"showPrintButton"},decls:5,vars:2,consts:[["type","button","id","print","title","Print","data-l10n-id","print",1,"toolbarButton","hiddenSmallView"],["viewBox","0 0 24 24",2,"width","22px","height","22px"],["fill","currentColor","d","M18,3H6V7H18M19,12A1,1 0 0,1 18,11A1,1 0 0,1 19,10A1,1 0 0,1 20,11A1,1 0 0,1 19,12M16,19H8V14H16M19,8H5A3,3 0 0,0 2,11V17H6V21H18V17H22V11A3,3 0 0,0 19,8Z"],["data-l10n-id","print_label"]],template:function(t,c){1&t&&(r.TgZ(0,"button",0),r.O4$(),r.TgZ(1,"svg",1),r._UZ(2,"path",2),r.qZA(),r.kcU(),r.TgZ(3,"span",3),r._uU(4,"Print"),r.qZA()()),2&t&&r.ekj("invisible",!c.showPrintButton)},styles:["[_nghost-%COMP%]{margin-top:-1px}[_nghost-%COMP%]:focus{outline:none}button[_ngcontent-%COMP%]:focus{outline:none}svg[_ngcontent-%COMP%]:focus{outline:none}"]}),a})(),Yx=(()=>{class a{constructor(t){this.notificationService=t,this.showRotateButton=!0,this.disableRotate=!0,this.clockwise=!0,this.counterClockwise=!0;const c=this.notificationService.onPDFJSInit.subscribe(()=>{this.onPdfJsInit(),c.unsubscribe()})}rotateCW(){window.PDFViewerApplication.eventBus.dispatch("rotatecw")}rotateCCW(){window.PDFViewerApplication.eventBus.dispatch("rotateccw")}onPdfJsInit(){window.PDFViewerApplication.eventBus.on("updateuistate",c=>this.updateUIState(c))}updateUIState(t){this.disableRotate=0===t.pagesCount,this.button1&&(this.button1.nativeElement.disabled=this.disableRotate),this.button2&&(this.button2.nativeElement.disabled=this.disableRotate)}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(bl))},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-rotate-page"]],viewQuery:function(t,c){if(1&t&&(r.Gf(By,5),r.Gf(ky,5)),2&t){let g;r.iGM(g=r.CRH())&&(c.button1=g.first),r.iGM(g=r.CRH())&&(c.button2=g.first)}},inputs:{showRotateButton:"showRotateButton",clockwise:"clockwise",counterClockwise:"counterClockwise"},decls:2,vars:2,consts:[["type","button","id","primaryPageRotateCw","class","toolbarButton hiddenXLView rotateCw","title","Rotate Clockwise","data-l10n-id","page_rotate_cw",3,"invisible","disabled","click",4,"ngIf"],["type","button","id","primaryPageRotateCcw","class","toolbarButton hiddenXLView rotateCcw","title","Rotate Counterclockwise","data-l10n-id","page_rotate_ccw",3,"invisible","disabled","click",4,"ngIf"],["type","button","id","primaryPageRotateCw","title","Rotate Clockwise","data-l10n-id","page_rotate_cw",1,"toolbarButton","hiddenXLView","rotateCw",3,"disabled","click"],["button1",""],["viewBox","0 0 24 24",2,"width","23px","height","23px"],["fill","currentColor","d","M12 3C7.03 3 3 7.03 3 12S7.03 21 12 21C14 21 15.92 20.34 17.5 19.14L16.06 17.7C14.87 18.54 13.45 19 12 19C8.13 19 5 15.87 5 12S8.13 5 12 5 19 8.13 19 12H16L20 16L24 12H21C21 7.03 16.97 3 12 3"],["type","button","id","primaryPageRotateCcw","title","Rotate Counterclockwise","data-l10n-id","page_rotate_ccw",1,"toolbarButton","hiddenXLView","rotateCcw",3,"disabled","click"],["button2",""],["fill","currentColor","d","M12 3C7.03 3 3 7.03 3 12H0L4 16L8 12H5C5 8.13 8.13 5 12 5S19 8.13 19 12 15.87 19 12 19C10.55 19 9.13 18.54 7.94 17.7L6.5 19.14C8.08 20.34 10 21 12 21C16.97 21 21 16.97 21 12S16.97 3 12 3"]],template:function(t,c){1&t&&(r.YNc(0,Py,4,3,"button",0),r.YNc(1,Iy,4,3,"button",1)),2&t&&(r.Q6J("ngIf",c.clockwise),r.xp6(1),r.Q6J("ngIf",c.counterClockwise))},directives:[$e.O5],styles:["[_nghost-%COMP%]{margin-top:-1px}[_nghost-%COMP%]:focus{outline:none}button[_ngcontent-%COMP%]:focus{outline:none}svg[_ngcontent-%COMP%]:focus{outline:none}"]}),a})(),Qx=(()=>{class a{constructor(t){this.notificationService=t,this.showSelectToolButton=!0,this.isSelected=!0;const c=this.notificationService.onPDFJSInit.subscribe(()=>{this.onPdfJsInit(),c.unsubscribe()})}onPdfJsInit(){window.PDFViewerApplication.eventBus.on("cursortoolchanged",({tool:c})=>this.isSelected=c===wl.SELECT)}onClick(){window.PDFViewerApplication.eventBus.dispatch("switchcursortool",{tool:wl.SELECT})}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(bl))},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-select-tool"]],inputs:{showSelectToolButton:"showSelectToolButton"},decls:5,vars:4,consts:[["type","button","id","primaryCursorSelectTool","title","Enable text selection tool","data-l10n-id","cursor_text_select_tool",1,"toolbarButton","hiddenXXLView",3,"click"],["viewBox","0 0 24 24",2,"width","22px","height","22px"],["fill","currentColor","d","M2 4C2 2.89 2.9 2 4 2H7V4H4V7H2V4M22 4V7H20V4H17V2H20C21.1 2 22 2.89 22 4M2 20V17H4V20H7V22H4C2.9 22 2 21.11 2 20M10 2H14V4H10V2M10 20H14V22H10V20M2 10H4V14H2V10M18.5 13C20.4 13 22 14.6 22 16.5C22 19.1 18.5 23 18.5 23C18.5 23 15 19.1 15 16.5C15 14.6 16.6 13 18.5 13M18.5 17.8C19.2 17.8 19.8 17.2 19.7 16.6C19.7 16 19.1 15.4 18.5 15.4C17.9 15.4 17.3 15.9 17.3 16.6C17.3 17.2 17.8 17.8 18.5 17.8M20 10H22V12.34C21.42 11.84 20.74 11.45 20 11.23V10Z"],["data-l10n-id","cursor_text_select_tool_label"]],template:function(t,c){1&t&&(r.TgZ(0,"button",0),r.NdJ("click",function(){return c.onClick()}),r.O4$(),r.TgZ(1,"svg",1),r._UZ(2,"path",2),r.qZA(),r.kcU(),r.TgZ(3,"span",3),r._uU(4,"Text selection tool"),r.qZA()()),2&t&&r.ekj("invisible",!c.showSelectToolButton)("toggled",c.isSelected)},styles:["[_nghost-%COMP%]{margin-top:0;margin-right:-3px}[_nghost-%COMP%]:focus{outline:none}button[_ngcontent-%COMP%]:focus{outline:none}svg[_ngcontent-%COMP%]:focus{outline:none}.toggled[_ngcontent-%COMP%]{background-color:#646464;border-color:rgba(0,0,0,.4) rgba(0,0,0,.45) rgba(0,0,0,.5);box-shadow:0 1px 1px #0000001a inset,0 0 1px #0003 inset,0 1px #ffffff0d}"]}),a})(),Wx=(()=>{class a{constructor(){this.showSecondaryToolbarButton=!0}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-toggle-secondary-toolbar"]],inputs:{showSecondaryToolbarButton:"showSecondaryToolbarButton"},decls:5,vars:2,consts:[["type","button","id","secondaryToolbarToggle","title","Tools","data-l10n-id","tools",1,"toolbarButton"],["viewBox","0 0 24 24","onclick","event.preventDefault(); return false;",2,"width","27px","height","27px"],["fill","currentColor","d","M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"],["data-l10n-id","tools_label"]],template:function(t,c){1&t&&(r.TgZ(0,"button",0),r.O4$(),r.TgZ(1,"svg",1),r._UZ(2,"path",2),r.qZA(),r.kcU(),r.TgZ(3,"span",3),r._uU(4,"Tools"),r.qZA()()),2&t&&r.ekj("invisible",!c.showSecondaryToolbarButton)},styles:["button[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{margin-top:-3px}[_nghost-%COMP%]:focus{outline:none}button[_ngcontent-%COMP%]:focus{outline:none}svg[_ngcontent-%COMP%]:focus{outline:none}"]}),a})(),Xx=(()=>{class a{constructor(){this.showSidebarButton=!0}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-toggle-sidebar"]],inputs:{showSidebarButton:"showSidebarButton"},decls:5,vars:2,consts:[["type","button","id","sidebarToggle","title","Toggle Sidebar","data-l10n-id","toggle_sidebar",1,"toolbarButton"],["viewBox","0 0 24 24",2,"width","24px","height","24px"],["fill","currentColor","d","M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z"],["data-l10n-id","toggle_sidebar_label"]],template:function(t,c){1&t&&(r.TgZ(0,"button",0),r.O4$(),r.TgZ(1,"svg",1),r._UZ(2,"path",2),r.qZA(),r.kcU(),r.TgZ(3,"span",3),r._uU(4,"Toggle Sidebar"),r.qZA()()),2&t&&r.ekj("invisible",!c.showSidebarButton)},styles:["[_nghost-%COMP%]:focus{outline:none}button[_ngcontent-%COMP%]:focus{outline:none}svg[_ngcontent-%COMP%]:focus{outline:none}button#sidebarToggle[_ngcontent-%COMP%]{height:24px;width:24px;margin-right:5px!important}"]}),a})(),Jx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-zoom-out"]],decls:5,vars:0,consts:[["type","button","id","zoomOut","title","Zoom Out","data-l10n-id","zoom_out",1,"toolbarButton","zoomOut"],["viewBox","0 0 24 24",2,"width","24px","height","24px"],["fill","currentColor","d","M19,13H5V11H19V13Z"],["data-l10n-id","zoom_out_label"]],template:function(t,c){1&t&&(r.TgZ(0,"button",0),r.O4$(),r.TgZ(1,"svg",1),r._UZ(2,"path",2),r.qZA(),r.kcU(),r.TgZ(3,"span",3),r._uU(4,"Zoom Out"),r.qZA()())},styles:["button[_ngcontent-%COMP%]{margin-left:-2px!important;margin-right:-2px!important}"]}),a})(),Kx=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-zoom-in"]],decls:5,vars:0,consts:[["type","button","id","zoomIn","title","Zoom In","data-l10n-id","zoom_in",1,"toolbarButton","zoomIn"],["viewBox","0 0 24 24",2,"width","24px","height","24px"],["fill","currentColor","d","M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"],["data-l10n-id","zoom_in_label"]],template:function(t,c){1&t&&(r.TgZ(0,"button",0),r.O4$(),r.TgZ(1,"svg",1),r._UZ(2,"path",2),r.qZA(),r.kcU(),r.TgZ(3,"span",3),r._uU(4,"Zoom In"),r.qZA()())},styles:["button[_ngcontent-%COMP%]{margin-left:-2px!important;margin-right:-2px!important}"]}),a})(),$x=(()=>{class a{constructor(t){this.element=t,this._zoomLevels=[]}set zoomLevels(t){this._zoomLevels=t.map(c=>this.valueToZoomLevel(c))}valueToZoomLevel(t){t.toString().endsWith("%")&&(t=t.toString().replace("%",""),t=Number(t)/100);const c=Number(t);if(!c){const b=String(t);return{id:this.snakeToCamel(t+"Option"),value:b,dataL10nId:"page_scale_"+b.replace("page-",""),dataL10nArgs:void 0,displayValue:b}}const g=Math.round(100*c);return{id:`scale_${g}`,value:String(c),dataL10nId:"page_scale_percent",dataL10nArgs:`{ "scale": ${g} }`,displayValue:String(g)+"%"}}snakeToCamel(t){return t.replace(/([-_][a-z])/g,c=>c.toUpperCase().replace("-","").replace("_",""))}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq))},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-zoom-dropdown"]],viewQuery:function(t,c){if(1&t&&r.Gf(Ry,5),2&t){let g;r.iGM(g=r.CRH())&&(c.sizeSelector=g.first)}},inputs:{zoomLevels:"zoomLevels"},decls:5,vars:1,consts:[["id","scaleSelectContainer"],["id","scaleSelect","title","Zoom","data-l10n-id","zoom"],["sizeSelector",""],[3,"id",4,"ngFor","ngForOf"],["id","customScaleOption","title","","value","custom","disabled","disabled","hidden","true"],[3,"id"]],template:function(t,c){1&t&&(r.TgZ(0,"span",0)(1,"select",1,2),r.YNc(3,Oy,2,5,"option",3),r._UZ(4,"option",4),r.qZA()()),2&t&&(r.xp6(3),r.Q6J("ngForOf",c._zoomLevels))},directives:[$e.sg,cl,Mc],styles:["select[_ngcontent-%COMP%]{font-size:12px;height:26px;cursor:pointer;border-radius:2px;border-width:1px;border-style:solid}#customScaleOption[_ngcontent-%COMP%]{display:none}"]}),a})(),ev=(()=>{class a{constructor(){this.showZoomButtons=!0,this.zoomLevels=["auto","page-actual","page-fit","page-width",.5,.75,1,1.25,1.5,2,3,4]}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-zoom-toolbar"]],inputs:{showZoomButtons:"showZoomButtons",zoomLevels:"zoomLevels"},decls:4,vars:3,consts:[["id","toolbarViewerMiddle"],[2,"width","unset","max-width","unset","padding-top","3px",3,"zoomLevels"]],template:function(t,c){1&t&&(r.TgZ(0,"div",0),r._UZ(1,"pdf-zoom-out")(2,"pdf-zoom-in")(3,"pdf-zoom-dropdown",1),r.qZA()),2&t&&(r.ekj("invisible",!c.showZoomButtons),r.xp6(3),r.Q6J("zoomLevels",c.zoomLevels))},directives:[Jx,Kx,$x],styles:[""]}),a})(),tv=(()=>{class a{constructor(t){this.mobileFriendlyZoomScale=1,this.primaryMenuVisible=!0,this.showBookmarkButton=!0,this.showDownloadButton=!0,this.showFindButton=void 0,this.showHandToolButton=!0,this.showOpenFileButton=!0,this.showPrintButton=!0,this.showPagingButtons=!0,this.showPresentationModeButton=!1,this.showRotateButton=!0,this.showSecondaryToolbarButton=!0,this.showSidebarButton=!0,this.showZoomButtons=!0,this.textLayer=void 0,this.toolbarMarginTop="0px",this.toolbarWidth="100%",this.zoomLevels=["auto","page-actual","page-fit","page-width",.5,.75,1,1.25,1.5,2,3,4],this.onToolbarLoaded=new r.vpe,this.onToolbarLoaded.emit(t.nativeElement.getElementsByClassName("toolbar")[0])}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq))},a.\u0275cmp=r.Xpm({type:a,selectors:[["pdf-toolbar"]],inputs:{customToolbar:"customToolbar",mobileFriendlyZoomScale:"mobileFriendlyZoomScale",primaryMenuVisible:"primaryMenuVisible",showBookmarkButton:"showBookmarkButton",showDownloadButton:"showDownloadButton",showFindButton:"showFindButton",showHandToolButton:"showHandToolButton",showOpenFileButton:"showOpenFileButton",showPrintButton:"showPrintButton",showPagingButtons:"showPagingButtons",showPresentationModeButton:"showPresentationModeButton",showRotateButton:"showRotateButton",showSecondaryToolbarButton:"showSecondaryToolbarButton",showSidebarButton:"showSidebarButton",showZoomButtons:"showZoomButtons",textLayer:"textLayer",toolbarMarginTop:"toolbarMarginTop",toolbarWidth:"toolbarWidth",zoomLevels:"zoomLevels"},outputs:{onToolbarLoaded:"onToolbarLoaded"},ngContentSelectors:Og,decls:8,vars:11,consts:[[1,"toolbar"],["id","toolbarContainer"],[4,"ngTemplateOutlet"],["id","loadingBar"],[1,"progress"],[1,"glimmer"],["defaultToolbar",""],["id","toolbarViewer"],["id","toolbarViewerLeft"],[3,"showSidebarButton"],[3,"showFindButton","textLayer"],[3,"showPagingButtons"],[3,"showZoomButtons","zoomLevels"],["id","toolbarViewerRight"],["id","editorModeButtons","role","radiogroup",1,"splitToolbarButton","hidden"],["id","editorNone","title","Disable Annotation Editing","role","radio","aria-checked","false","data-l10n-id","editor_none",1,"toolbarButton"],["viewBox","0 0 24 24",2,"width","24px","height","24px"],["fill","currentColor","d","M12.07 5L9.24 7.83L19 17.59L17.58 19L7.82 9.25L5 12.07V5Z"],["data-l10n-id","editor_none_label"],["id","editorFreeText","title","Add FreeText Annotation","role","radio","aria-checked","false","data-l10n-id","editor_free_text",1,"toolbarButton"],["fill","currentColor","d","M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"],["data-l10n-id","editor_free_text_label"],["id","editorInk","title","Add Ink Annotation","role","radio","aria-checked","false","tabindex","33","data-l10n-id","editor_ink",1,"toolbarButton"],["version","1.1","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 16 16",0,"xmlns","xlink","http://www.w3.org/1999/xlink","enable-background","new 0 0 16 16"],["transform","scale(0.03125)"],["d","m455.1,137.9l-32.4,32.4-81-81.1 32.4-32.4c6.6-6.6 18.1-6.6 24.7,0l56.3,56.4c6.8,6.8 6.8,17.9 0,24.7zm-270.7,271l-81-81.1 209.4-209.7 81,81.1-209.4,209.7zm-99.7-42l60.6,60.7-84.4,23.8 23.8-84.5zm399.3-282.6l-56.3-56.4c-11-11-50.7-31.8-82.4,0l-285.3,285.5c-2.5,2.5-4.3,5.5-5.2,8.9l-43,153.1c-2,7.1 0.1,14.7 5.2,20 5.2,5.3 15.6,6.2 20,5.2l153-43.1c3.4-0.9 6.4-2.7 8.9-5.2l285.1-285.5c22.7-22.7 22.7-59.7 0-82.5z"],["data-l10n-id","editor_ink_label"],[3,"showHandToolButton"],[3,"showSelectToolButton"],[3,"showRotateButton","clockwise","counterClockwise"],[3,"showPresentationModeButton"],[3,"showOpenFileButton"],[3,"showPrintButton"],[3,"showDownloadButton"],[3,"showBookmarkButton"],[3,"showSecondaryToolbarButton"]],template:function(t,c){if(1&t&&(r.F$t(),r.TgZ(0,"div",0)(1,"div",1),r.YNc(2,zy,1,0,"ng-content",2),r.TgZ(3,"div",3)(4,"div",4),r._UZ(5,"div",5),r.qZA()()()(),r.YNc(6,Vy,35,20,"ng-template",null,6,r.W1O)),2&t){const g=r.MAs(7);r.Udp("transform","scale("+c.mobileFriendlyZoomScale+")")("transform-origin","left center")("width",c.toolbarWidth)("margin-top",c.toolbarMarginTop),r.ekj("invisible",!c.primaryMenuVisible),r.xp6(2),r.Q6J("ngTemplateOutlet",c.customToolbar?c.customToolbar:g)}},directives:[Xx,Ax,jx,ev,Ox,Qx,Yx,Hx,zx,qx,vx,yx,Wx,$e.tP],styles:[""]}),a})(),iv=(()=>{class a{transform(t,c){return this.translate(t,c)}translate(t,c){return(0,pn.mG)(this,void 0,void 0,function*(){return window.PDFViewerApplication.l10n.get(t,null,c)})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275pipe=r.Yjl({name:"translate",type:a,pure:!0}),a})(),nv=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({providers:[bl,$e.Ye],imports:[[$e.ez,gh]]}),a})();var Cl=(()=>{return(a=Cl||(Cl={}))[a.vertical=0]="vertical",a[a.horizontal=1]="horizontal",a[a.wrapped=2]="wrapped",a[a.page=3]="page",Cl;var a})();class D_{constructor(s){this._zone=s,this.startX=0,this.startY=0,this.initialPinchDistance=0,this.pinchScale=1,this.boundOnViewerTouchStart=this.onViewerTouchStart.bind(this),this.boundOnViewerTouchMove=this.onViewerTouchMove.bind(this),this.boundOnViewerTouchEnd=this.onViewerTouchEnd.bind(this),this.initializePinchZoom()}isMobile(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}onViewerTouchStart(s){if(this.initialPinchDistance=0,2===s.touches.length){const c=document.getElementById("viewerContainer").getBoundingClientRect();s.touches[0].pageX>=c.left&&s.touches[0].pageX<=c.right&&s.touches[0].pageY>=c.top+window.scrollY&&s.touches[0].pageY<=c.bottom+window.scrollY&&s.touches[1].pageX>=c.left&&s.touches[1].pageX<=c.right&&s.touches[1].pageY>=c.top+window.scrollY&&s.touches[1].pageY<=c.bottom+window.scrollY&&(this.startX=(s.touches[0].pageX+s.touches[1].pageX)/2,this.startY=(s.touches[0].pageY+s.touches[1].pageY)/2,this.initialPinchDistance=Math.hypot(s.touches[1].pageX-s.touches[0].pageX,s.touches[1].pageY-s.touches[0].pageY),s.cancelable&&s.preventDefault(),s.stopPropagation())}}onViewerTouchMove(s){const t=window.PDFViewerApplicationOptions,c=window.PDFViewerApplication;if(this.initialPinchDistance<=0||2!==s.touches.length)return;const g=Math.hypot(s.touches[1].pageX-s.touches[0].pageX,s.touches[1].pageY-s.touches[0].pageY),b=document.getElementById("viewerContainer"),B=this.startX+b.scrollLeft,N=this.startY+b.scrollTop;this.pinchScale=g/this.initialPinchDistance;let te=Number(t.get("minZoom"));te||(te=.1);const he=c.pdfViewer._currentScale;he*this.pinchScale<te&&(this.pinchScale=te/he);let we=Number(t.get("maxZoom"));we||(we=10),he*this.pinchScale>we&&(this.pinchScale=we/he),this.viewer.style.transform=`scale(${this.pinchScale})`,this.viewer.style.transformOrigin=`${B}px ${N}px`,s.cancelable&&s.preventDefault(),s.stopPropagation()}onViewerTouchEnd(s){const t=window.PDFViewerApplication;if(this.initialPinchDistance<=0)return;this.viewer.style.transform="none",this.viewer.style.transformOrigin="unset",t.pdfViewer.currentScale*=this.pinchScale;const c=document.getElementById("viewerContainer"),g=c.getBoundingClientRect(),B=this.startY-g.top;c.scrollLeft+=(this.startX-g.left)*(this.pinchScale-1),c.scrollTop+=B*(this.pinchScale-1),this.resetPinchZoomParams(),s.cancelable&&s.preventDefault(),s.stopPropagation()}resetPinchZoomParams(){this.startX=this.startY=this.initialPinchDistance=0,this.pinchScale=1}initializePinchZoom(){!this.isMobile()||(this.viewer=document.getElementById("viewer"),this._zone.runOutsideAngular(()=>{document.addEventListener("touchstart",this.boundOnViewerTouchStart),document.addEventListener("touchmove",this.boundOnViewerTouchMove,{passive:!1}),document.addEventListener("touchend",this.boundOnViewerTouchEnd)}))}destroyPinchZoom(){!this.isMobile()||(document.removeEventListener("touchstart",this.boundOnViewerTouchStart),document.removeEventListener("touchmove",this.boundOnViewerTouchMove),document.removeEventListener("touchend",this.boundOnViewerTouchEnd))}}class pu{static initElements(){!document||((!this.con||!this.el)&&(this.con=document.createElement("div"),this.el=document.createElement("div")),this.con.style.position="absolute",this.con.style.width="0",this.con.style.height="0",this.con.style.visibility="hidden",this.con.style.overflow="hidden",this.con.appendChild(this.el))}static pxPerUnit(s){if(!this.pxPerUnitCache[s]){if((!this.con||!this.el)&&this.initElements(),!this.con||!this.el)return 1;this.el.style.width=this.sample+s,document.body.appendChild(this.con);const t=this.el.getBoundingClientRect();this.con.parentNode.removeChild(this.con),this.pxPerUnitCache[s]=t.width/this.sample}return this.pxPerUnitCache[s]}static toPx(s){const c=/^\s*([+-]?[\d\.]*)\s*(.*)\s*$/i.exec(s);if(null!=c&&c.length>2){const b=""===c[1]?1:Number(c[1]),B=c[2];if(!isNaN(b)&&B)return"px"===B?b:this.pxPerUnit(B)*b}throw new TypeError("Error parsing length")}}pu.con=void 0,pu.el=void 0,pu.sample=100,pu.pxPerUnitCache={};class B_{constructor(){this.recalculateSize$=new wt.x}findMultiple(s,t={}){t=Object.assign(Object.assign({},t),{findMultipleSearchTexts:!0});const c=s.join("\n")+"\n";return this.find(c,t)}find(s,t={}){if($f.ngxExtendedPdfViewerInitialized){const c=document.getElementById("findHighlightAll");c&&(c.checked=t.highlightAll||!1);const g=document.getElementById("findRange");g&&(g.value=t.pageRange||"");const b=document.getElementById("findCurrentPage");b&&(b.checked=t.currentPage||!1);const B=document.getElementById("findMatchCase");B&&(B.checked=t.matchCase||!1);const N=document.getElementById("findEntireWord");N&&(N.checked=t.wholeWords||!1);const te=document.getElementById("findIgnoreAccents");te&&(te.checked=t.ignoreAccents||!1);const he=t.findMultipleSearchTexts||s.includes("\n")||!1,we=document.getElementById("findMultipleSearchTexts");we&&(we.checked=he);const Re=document.getElementById("individualWordsMode");Re&&(Re.checked=!1);const ti=document.getElementById("findFuzzy");ti&&(ti.checked=t.fuzzySearch||!1);const Ft=he?document.getElementById("findInputMultiline"):document.getElementById("findInput");return Ft?(Ft instanceof HTMLTextAreaElement?(Ft.value=s,Ft.classList.remove("hidden"),document.getElementById("findInput").classList.add("hidden"),document.getElementById("individualWordsModeLabel").classList.remove("hidden"),document.getElementById("individualWordsMode").classList.remove("hidden")):Ft instanceof HTMLInputElement&&(Ft.value=s,Ft.classList.remove("hidden"),document.getElementById("findInputMultiline").classList.add("hidden"),document.getElementById("individualWordsModeLabel").classList.add("hidden"),document.getElementById("individualWordsMode").classList.add("hidden")),Ft.dispatchEvent(new Event("input")),!0):(console.error("Unexpected error: the input field used to search isn't part of the DOM."),!1)}return console.error("The PDF viewer hasn't finished initializing. Please call find() later."),!1}findNext(){if($f.ngxExtendedPdfViewerInitialized){const s=document.getElementById("findNext");return!!s&&(s.click(),!0)}return console.error("The PDF viewer hasn't finished initializing. Please call findNext() later."),!1}findPrevious(){if($f.ngxExtendedPdfViewerInitialized){const s=document.getElementById("findPrevious");return!!s&&(s.click(),!0)}return console.error("The PDF viewer hasn't finished initializing. Please call findPrevious() later."),!1}print(s){const t=window.PDFViewerApplication,c=!!window.isInPDFPrintRange&&!s;c||(s||(s={}),this.setPrintRange(s)),window.printPDF(),c||t.eventBus.on("afterprint",()=>{this.removePrintRange()})}removePrintRange(){window.isInPDFPrintRange=void 0,window.filteredPageCount=void 0}setPrintRange(s){const t=window.PDFViewerApplication;window.isInPDFPrintRange=c=>this.isInPDFPrintRange(c,s),window.filteredPageCount=this.filteredPageCount(t.pagesCount,s)}filteredPageCount(s,t){let c=0;for(let g=1;g<=s;g++)this.isInPDFPrintRange(g,t)&&c++;return c}isInPDFPrintRange(s,t){const c=s+1;return!(t.from&&c<t.from||t.to&&c>t.to||t.excluded&&t.excluded.some(b=>b===c)||t.included&&!t.included.some(g=>g===c))}getPageAsText(s){return window.PDFViewerApplication.pdfDocument.getPage(s).then(N=>new Promise((te,he)=>{te(N.getTextContent())})).then(N=>new Promise((te,he)=>{te(this.convertTextInfoToText(N))}))}convertTextInfoToText(s){return s?s.items.map(t=>t.str).join(""):""}getPageAsImage(s,t,c,g="#FFFFFF"){return window.PDFViewerApplication.pdfDocument.getPage(s).then(he=>new Promise((we,Re)=>{we(this.draw(he,t,c,g))}))}draw(s,t,c,g="#FFFFFF"){let b=1;t.scale?b=t.scale:t.width?b=t.width/s.getViewport({scale:1}).width:t.height&&(b=t.height/s.getViewport({scale:1}).height);const B=s.getViewport({scale:b}),{ctx:N,canvas:te}=this.getPageDrawContext(B.width,B.height),he=B.clone();return s.render({canvasContext:N,viewport:he,background:c,backgroundColorToReplace:g}).promise.then(()=>new Promise((Ft,Ri)=>{Ft(te.toDataURL())}))}getPageDrawContext(s,t){const c=document.createElement("canvas"),g=c.getContext("2d",{alpha:!0});if(!g)throw new Error("Couldn't create the 2d context");return c.width=s,c.height=t,c.style.width=s+"px",c.style.height=t+"px",{ctx:g,canvas:c}}getCurrentDocumentAsBlob(){return(0,pn.mG)(this,void 0,void 0,function*(){const s=window.PDFViewerApplication,t=yield s.pdfDocument.saveDocument(s.pdfDocument.annotationStorage);return new Blob([t],{type:"application/pdf"})})}getFormData(s=!0){return(0,pn.mG)(this,void 0,void 0,function*(){const t=window.PDFViewerApplication,c=t.pdfDocument,b=[];for(let B=1;B<=c.numPages;B++){const N=yield c.getPage(B);(yield N.getAnnotations()).filter(he=>"Widget"===he.subtype).map(he=>Object.assign({},he)).forEach(he=>{const we=N.getViewport({scale:1.3333333333333333}).convertToViewportRectangle(he.rect);if(s&&he.fieldName)try{if(he.exportValue){const Re=t.pdfDocument.annotationStorage.getValue(he.id,he.fieldName+"/"+he.exportValue,"");he.value=null==Re?void 0:Re.value}else if(he.radioButton){const Re=t.pdfDocument.annotationStorage.getValue(he.id,he.fieldName+"/"+he.fieldValue,"");he.value=null==Re?void 0:Re.value}else{const Re=t.pdfDocument.annotationStorage.getValue(he.id,he.fieldName,"");he.value=null==Re?void 0:Re.value}}catch(Re){}b.push({fieldAnnotation:he,fieldRect:we,pageNumber:B})})}return b})}addPageToRenderQueue(s){return window.PDFViewerApplication.pdfViewer.addPageToRenderQueue(s)}isRenderQueueEmpty(){const c=window.PDFViewerApplication;return!c.pdfViewer.renderingQueue.getHighestPriority(c.pdfViewer._getVisiblePages(),c.pdfViewer._pages,!0,!1)}hasPageBeenRendered(s){const c=window.PDFViewerApplication.pdfViewer._pages;return c.length>s&&s>=0&&!c[s].div.querySelector(".loadingIcon")}currentlyRenderedPages(){return window.PDFViewerApplication.pdfViewer._pages.filter(c=>!c.div.querySelector(".loadingIcon")).map(c=>c.id)}numberOfPages(){return window.PDFViewerApplication.pdfViewer._pages.length}getCurrentlyVisiblePageNumbers(){const t=window.PDFViewerApplication.pdfViewer._getVisiblePages().views;return null==t?void 0:t.map(g=>g.id)}recalculateSize(){this.recalculateSize$.next()}listLayers(){return(0,pn.mG)(this,void 0,void 0,function*(){const t=yield window.PDFViewerApplication.pdfViewer.optionalContentConfigPromise;if(t){const c=t.getOrder();return console.log(c),c.filter(b=>"object"!=typeof b).map(b=>{const B=t.getGroup(b);return{layerId:b,name:B.name,visible:B.visible}})}})}toggleLayer(s){return(0,pn.mG)(this,void 0,void 0,function*(){const t=window.PDFViewerApplication,c=yield t.pdfViewer.optionalContentConfigPromise;if(c){let g=c.isVisible(s);const b=document.querySelector(`input[id='${s}']`);b&&(g=b.checked,b.checked=!g),c.setVisibility(s,!g),t.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(c)})}})}scrollPageIntoView(s,t){window.PDFViewerApplication.pdfViewer.scrollPagePosIntoView(s,t)}}let $f=(()=>{class a{constructor(t,c,g,b,B,N,te,he){this.ngZone=t,this.platformId=c,this.notificationService=g,this.location=b,this.elementRef=B,this.platformLocation=N,this.cdr=te,this.service=he,this.ngxExtendedPdfViewerIncompletelyInitialized=!0,this.showFreeFloatingBar=!0,this.enableDragAndDrop=!0,this.formData={},this.formIdToFieldName={},this.formRadioButtonValueToId={},this.formDataChange=new r.vpe,this._pageViewMode="multiple",this.progress=new r.vpe,this.srcChange=new r.vpe,this.scrollMode=void 0,this.scrollModeChange=new r.vpe,this.authorization=void 0,this.httpHeaders=void 0,this.contextMenuAllowed=!0,this.afterPrint=new r.vpe,this.beforePrint=new r.vpe,this.currentZoomFactor=new r.vpe,this.enablePrint=!0,this.delayFirstView=0,this.logLevel=Al.WARNINGS,this.enablePinchOnMobile=!1,this.minifiedJSLibraries=!0,this.primaryMenuVisible=!0,this.printResolution=null,this.rotationChange=new r.vpe,this.autoHeight=!1,this.minHeight=void 0,this._height="100%",this.useBrowserLocale=!1,this.forceUsingLegacyES5=!1,this.backgroundColor="#e8e8eb",this.pdfBackground=void 0,this.pdfBackgroundColorToReplace="#ffffff",this.filenameForDownload=void 0,this.ignoreKeyboard=!1,this.ignoreKeys=[],this.acceptKeys=[],this.imageResourcesPath="./"+Wt.assetsFolder+"/images/",this.localeFolderPath="./"+Wt.assetsFolder+"/locale",this.language=void 0,this.listenToURL=!1,this.nameddest=void 0,this.password=void 0,this._showSidebarButton=!0,this.viewerPositionTop="32px",this.showUnverifiedSignatures=!1,this.sidebarVisible=void 0,this.sidebarVisibleChange=new r.vpe,this.showFindButton=void 0,this.showFindHighlightAll=!0,this.showFindMatchCase=!0,this.showFindCurrentPageOnly=!0,this.showFindPageRange=!0,this.showFindEntireWord=!0,this.showFindEntirePhrase=!0,this.showFindIgnoreAccents=!0,this.showFindFuzzySearch=!0,this.showFindResultsCount=!0,this.showFindMessages=!0,this.showPagingButtons=!0,this.showZoomButtons=!0,this.showPresentationModeButton=!1,this.showOpenFileButton=!0,this.showPrintButton=!0,this.showDownloadButton=!0,this.showBookmarkButton=!0,this.theme="light",this.formTheme="light",this.showToolbar=!0,this.showSecondaryToolbarButton=!0,this.hideKebabMenuForSecondaryToolbar=!1,this.showRotateButton=!0,this.handTool=!0,this.handToolChange=new r.vpe,this.showHandToolButton=!1,this._showScrollingButton=!0,this._showSpreadButton=!0,this.showPropertiesButton=!0,this.showBorders=!0,this.spreadChange=new r.vpe,this.thumbnailDrawn=new r.vpe,this._page=void 0,this.pageChange=new r.vpe,this.pageLabel=void 0,this.pageLabelChange=new r.vpe,this.pagesLoaded=new r.vpe,this.pageRender=new r.vpe,this.pageRendered=new r.vpe,this.pdfDownloaded=new r.vpe,this.pdfLoaded=new r.vpe,this.pdfLoadingStarts=new r.vpe,this.pdfLoadingFailed=new r.vpe,this.textLayer=void 0,this.textLayerRendered=new r.vpe,this.updateFindMatchesCount=new r.vpe,this.updateFindState=new r.vpe,this.zoom=void 0,this.zoomChange=new r.vpe,this.zoomLevels=["auto","page-actual","page-fit","page-width",.5,1,1.25,1.5,2,3,4],this.maxZoom=10,this.minZoom=.1,this._mobileFriendlyZoom="100%",this.mobileFriendlyZoomScale=1,this.wheelAction="scroll",this.toolbarMarginTop="0px",this.toolbarWidth="100%",this.toolbar=void 0,this.toolbarWidthInPixels=100,this.secondaryToolbarTop=void 0,this.sidebarPositionTop=void 0,this.findbarTop=void 0,this.findbarLeft=void 0,this.buttonValues={},this.shuttingDown=!1,this.baseHref=this.platformLocation.getBaseHrefFromDOM(),this.service.recalculateSize$.subscribe(()=>this.onResize())}get pageViewMode(){return this._pageViewMode}set pageViewMode(t){this._pageViewMode=t,"infinite-scroll"===t?(this.scrollMode=Cl.vertical,this.spread="off"):"multiple"!==t&&(this.scrollMode=Cl.vertical),"single"===t&&(this.scrollMode=Cl.page,this._pageViewMode="multiple"),"book"===t&&(this.showBorders=!1)}set src(t){if(t instanceof Uint8Array)this._src=t.buffer;else if(t instanceof URL)this._src=t.toString();else if("undefined"!=typeof Blob&&t instanceof Blob){const c=new FileReader;c.onloadend=()=>{setTimeout(()=>{this.src=new Uint8Array(c.result),a.ngxExtendedPdfViewerInitialized&&(this.ngxExtendedPdfViewerIncompletelyInitialized?this.openPDF():(0,pn.mG)(this,void 0,void 0,function*(){return yield this.openPDF2()}))})},c.readAsArrayBuffer(t)}else"string"==typeof t?(this._src=t,t.length>980&&t.length%4==0&&/^[a-zA-Z\d\/+]+={0,2}$/.test(t)&&console.error("The URL looks like a base64 encoded string. If so, please use the attribute [base64Src] instead of [src]")):this._src=t}set base64Src(t){if(t){const c=window.atob(t),g=c.length,b=new Uint8Array(g);for(let B=0;B<g;B++)b[B]=c.charCodeAt(B);this.src=b.buffer}else this._src=void 0}set height(t){this.minHeight=void 0,this.autoHeight=!1,t?this._height=t:this.height="100%",setTimeout(()=>{this.checkHeight()})}get height(){return this._height}get showSidebarButton(){return this._showSidebarButton}set showSidebarButton(t){this._showSidebarButton=t;let g=1;/msie\s|trident\//i.test(window.navigator.userAgent)&&(g=Number((this._mobileFriendlyZoom||"100").replace("%",""))/100),this.findbarLeft=this._showSidebarButton?(68*g).toString()+"px":"0px"}get showScrollingButton(){return"multiple"===this.pageViewMode&&this._showScrollingButton}set showScrollingButton(t){this._showScrollingButton=t}get showSpreadButton(){return"infinite-scroll"!==this.pageViewMode&&this._showSpreadButton}set showSpreadButton(t){this._showSpreadButton=t}get page(){return this._page}set page(t){this._page=t?Number(t):void 0}onToolbarLoaded(t){this.toolbar=t}get mobileFriendlyZoom(){return this._mobileFriendlyZoom}get pdfJsVersion(){return vl(Wt.assetsFolder)}set mobileFriendlyZoom(t){"true"==t?t="150%":("false"==t||null==t)&&(t="100%"),this._mobileFriendlyZoom=t;let c=1;String(t).includes("%")||(t=100*Number(t)+"%"),c=Number((t||"100").replace("%",""))/100,this.mobileFriendlyZoomScale=c,this.toolbarWidth=(100/c).toString()+"%",this.toolbarMarginTop=16*(c-1)+"px",setTimeout(()=>this.calcViewerPositionTop())}calcViewerPositionTop(){if(void 0===this.toolbar)return;let t=this.toolbar.getBoundingClientRect().height;this.viewerPositionTop=t+"px";const c=t/33;this.sidebarPositionTop=(33+33*(c-1)).toString()+"px",this.secondaryToolbarTop=(33+38*(c-1)).toString()+"px",this.findbarTop=(34+54*(c-1)).toString()+"px";const g=document.getElementById("viewFind");if(g){const b=this.toolbar.getBoundingClientRect().left,N=g.getBoundingClientRect().left-b;this.findbarLeft=N+"px"}else this.findbarLeft=this.showSidebarButton?34+(32*c).toString()+"px":"0px"}iOSVersionRequiresES5(){const t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return null!=t&&parseInt(t[1],10)<14}needsES5(){return(0,pn.mG)(this,void 0,void 0,function*(){const t=!!window.MSInputMethodContext&&!!document.documentMode,c=/Edge\/\d./i.test(navigator.userAgent),g=this.iOSVersionRequiresES5();return!!("undefined"==typeof ReadableStream||void 0===Promise.allSettled||t||c||g||this.forceUsingLegacyES5)||!(yield this.supportsOptionalChaining())})}supportsOptionalChaining(){return new Promise(t=>{const c=window.supportsOptionalChaining;t(void 0!==c?c:this.addScriptOpChainingSupport())})}addScriptOpChainingSupport(){return new Promise(t=>{const c=this.createScriptElement(Wt.assetsFolder+"/op-chaining-support.js");c.onload=()=>{c.remove(),t(window.supportsOptionalChaining)},c.onerror=()=>{c.remove(),window.supportsOptionalChaining=!1,t(!1)},document.body.appendChild(c)})}createScriptElement(t){const c=document.createElement("script");return c.async=!0,c.type="text/javascript",c.src=this.location.normalize(t),c}getPdfJsPath(t,c){const g=this.minifiedJSLibraries?".min.js":".js",b=Wt.assetsFolder;return b+`/${t}-`+vl(b)+(c?"-es5":"")+g}loadViewer(){window.ngxZone=this.ngZone,this.ngZone.runOutsideAngular(()=>{window["pdfjs-dist/build/pdf"]?this.needsES5().then(t=>{const c=this.getPdfJsPath("viewer",t),g=this.createScriptElement(c);document.getElementsByTagName("head")[0].appendChild(g)}):setTimeout(()=>this.loadViewer(),25)})}addFeatures(){return new Promise(t=>{const c=this.createScriptElement(Wt.assetsFolder+"/additional-features.js");c.onload=()=>{c.remove()},c.onerror=()=>{c.remove(),t()},document.body.appendChild(c)})}ngOnInit(){if(window.setNgxExtendedPdfViewerSource=t=>{this._src=t,console.log(t),this.srcChange.emit(t)},(0,$e.NF)(this.platformId)){const t=document.createElement("link");t.href=this.localeFolderPath+"/locale.properties",t.setAttribute("origin","ngx-extended-pdf-viewer"),t.rel="resource",t.type="application/l10n",this.elementRef.nativeElement.appendChild(t),window.getFormValue=g=>this.getFormValue(g),window.setFormValue=(g,b)=>this.setFormValue(g,b),window.registerAcroformAnnotations=g=>this.registerAcroformAnnotations(g),window.assignFormIdAndFieldName=(g,b,B)=>this.assignFormIdAndFieldName(g,b,B),this.loadPdfJs()}}loadPdfJs(){window.ngxZone=this.ngZone,this.ngZone.runOutsideAngular(()=>{window["pdfjs-dist/build/pdf"]||this.needsES5().then(t=>{if(t&&(Wt.needsES5||console.log("If you see the error message \"expected expression, got '='\" above: you can safely ignore it as long as you know what you're doing. It means your browser is out-of-date. Please update your browser to benefit from the latest security updates and to enjoy a faster PDF viewer."),Wt.needsES5=!0,console.log("Using the ES5 version of the PDF viewer. Your PDF files show faster if you update your browser.")),window.ngxZone=this.ngZone,this.minifiedJSLibraries&&!Wt.workerSrc().endsWith(".min.js")){const b=Wt.workerSrc();Wt.workerSrc=()=>b.replace(".js",".min.js")}const c=this.getPdfJsPath("pdf",t),g=this.createScriptElement(c);document.getElementsByTagName("head")[0].appendChild(g)}),window.webViewerLoad||this.loadViewer()})}ngAfterViewInit(){"undefined"!=typeof window&&(this.shuttingDown||(window.webViewerLoad?this.ngZone.runOutsideAngular(()=>this.doInitPDFViewer()):setTimeout(()=>this.ngAfterViewInit(),50)))}assignTabindexes(){if(this.startTabindex){const t=this.root.nativeElement.cloneNode(!0);t.classList.add("offscreen"),this.showElementsRecursively(t),document.body.appendChild(t);const c=this.collectElementPositions(t,this.root.nativeElement,[]);document.body.removeChild(t);const g=c.sort((b,B)=>b.y-B.y>15?1:B.y-b.y>15?-1:b.x-B.x);for(let b=0;b<g.length;b++)g[b].element.tabIndex=this.startTabindex+b}}showElementsRecursively(t){if(t.classList.remove("hidden"),t.classList.remove("invisible"),t.classList.remove("hiddenXXLView"),t.classList.remove("hiddenXLView"),t.classList.remove("hiddenLargeView"),t.classList.remove("hiddenMediumView"),t.classList.remove("hiddenSmallView"),t.classList.remove("hiddenTinyView"),t.classList.remove("visibleXXLView"),t.classList.remove("visibleXLView"),t.classList.remove("visibleLargeView"),t.classList.remove("visibleMediumView"),t.classList.remove("visibleSmallView"),t.classList.remove("visibleTinyView"),!(t instanceof HTMLButtonElement||t instanceof HTMLAnchorElement||t instanceof HTMLInputElement||t instanceof HTMLSelectElement)&&t.childElementCount>0)for(let c=0;c<t.childElementCount;c++){const g=t.children.item(c);g&&this.showElementsRecursively(g)}}collectElementPositions(t,c,g){if(t instanceof HTMLButtonElement||t instanceof HTMLAnchorElement||t instanceof HTMLInputElement||t instanceof HTMLSelectElement){const b=t.getBoundingClientRect(),B={element:c,x:Math.round(b.left),y:Math.round(b.top)};g.push(B)}else if(t.childElementCount>0)for(let b=0;b<t.childElementCount;b++){const B=t.children.item(b),N=c.children.item(b);B&&N&&(g=this.collectElementPositions(B,N,g))}return g}doInitPDFViewer(){if("undefined"==typeof window)return;const t=document.querySelectorAll('link[type="application/l10n"]');if(0===t.length)document.querySelector('script[type="application/l10n"]')?this.useBrowserLocale&&console.error("Please set the attribute 'useBrowserLocale' to false if you provide the translations yourself in a script or link tag."):this.useBrowserLocale||(console.error("If you set the attribute 'useBrowserLocale' to false, you must provide the translations yourself in a script or link tag."),console.error("The easiest way to do this is to add them to the index.html."));else if(this.useBrowserLocale){const B=t[0].attributes.origin;B&&"ngx-extended-pdf-viewer"!==B.value&&console.error("Please set the attribute 'useBrowserLocale' to false if you provide the translations yourself in a script or link tag.")}const g=()=>{document.removeEventListener("localized",g),this.initTimeout=setTimeout(()=>{this.shuttingDown||(this.calcViewerPositionTop(),this.afterLibraryInit(),this.openPDF(),this.assignTabindexes())},this.delayFirstView)};window.addEventListener("afterprint",()=>{this.afterPrint.emit()}),window.addEventListener("beforeprint",()=>{this.beforePrint.emit()}),document.addEventListener("localized",g),a.ngxExtendedPdfViewerInitialized&&console.error("You're trying to open two instances of the PDF viewer. Most likely, this will result in errors.");const b=()=>{this.overrideDefaultSettings(),document.removeEventListener("webviewerloaded",b),this.enablePinchOnMobile&&(this.pinchOnMobileSupport=new D_(this.ngZone))};document.addEventListener("webviewerloaded",b),this.activateTextlayerIfNecessary(null),setTimeout(()=>{if(!this.shuttingDown){this.onResize(),this.primaryMenuVisible=this.showToolbar,this.hideKebabMenuForSecondaryToolbar&&!this.showSecondaryToolbarButton&&(this.isPrimaryMenuVisible()||(this.primaryMenuVisible=!1)),this.dummyComponents.addMissingStandardWidgets(),this.ngZone.runOutsideAngular(()=>window.webViewerLoad());const N=window.PDFViewerApplication;N.appConfig.defaultUrl="",this.filenameForDownload&&(N.appConfig.filenameForDownload=this.filenameForDownload);const te=window.PDFViewerApplicationOptions;te.set("enableDragAndDrop",this.enableDragAndDrop);let he=""===this.language?void 0:this.language;he||(he=navigator.language),te.set("locale",he),te.set("imageResourcesPath",this.imageResourcesPath),te.set("minZoom",this.minZoom),te.set("maxZoom",this.maxZoom),te.set("pageViewMode",this.pageViewMode),te.set("verbosity",this.logLevel),te.set("initialZoom",this.zoom),te.set("pdfBackgroundColor",this.pdfBackground),te.set("pdfBackgroundColorToReplace",this.pdfBackgroundColorToReplace),N.isViewerEmbedded=!0,N.printKeyDownListener&&window.addEventListener("keydown",N.printKeyDownListener,!0);const we=document.getElementById("printContainer");we&&document.getElementsByTagName("body")[0].appendChild(we)}},0)}afterLibraryInit(){this.notificationService.onPDFJSInit.next()}checkHeight(){if("undefined"!=typeof document){const t=document.getElementsByClassName("zoom")[0];if(t&&(0===t.clientHeight&&(this.autoHeight||(console.warn("The height of the PDF viewer widget is zero pixels. Please check the height attribute. Is there a syntax error? Or are you using a percentage with a CSS framework that doesn't support this? The height is adjusted automatedly."),this.autoHeight=!0)),this.autoHeight)){let B=window.innerHeight-t.getBoundingClientRect().top;B-=this.calculateBorderMarging(t),B=B*Number(this._height.replace("%",""))/100,this.minHeight=B>100?`${B}px`:"100px",this.cdr.markForCheck()}}}calculateBorderMarging(t){if(t){const c=window.getComputedStyle(t),g=pu.toPx(c.paddingBottom),b=pu.toPx(c.marginBottom);return t.style.zIndex?g+b:g+b+this.calculateBorderMarging(t.parentElement)}return 0}onSpreadChange(t){this.spreadChange.emit(t)}activateTextlayerIfNecessary(t){void 0===this.textLayer?this.handTool?(t&&t.set("textLayerMode",this.showHandToolButton?Wt.textLayerMode:0),this.showHandToolButton||((this.showFindButton||void 0===this.showFindButton)&&(this.ngZone.run(()=>{this.showFindButton=!1}),this.logLevel>=Al.WARNINGS&&console.warn('Hiding the "find" button because the text layer of the PDF file is not rendered. Use [textLayer]="true" to enable the find button.')),this.showHandToolButton&&this.logLevel>=Al.WARNINGS&&(console.warn('Hiding the "hand tool / selection mode" menu because the text layer of the PDF file is not rendered. Use [textLayer]="true" to enable the the menu items.'),this.showHandToolButton=!1))):(t&&t.set("textLayerMode",Wt.textLayerMode),this.textLayer=!0,void 0===this.showFindButton&&(this.showFindButton=!0,setTimeout(()=>{const c=document.getElementById("viewFind");c&&c.classList.remove("invisible");const g=document.getElementById("findbar");g&&g.classList.remove("invisible")}))):this.textLayer?(t&&t.set("textLayerMode",Wt.textLayerMode),this.textLayer=!0,void 0===this.showFindButton&&(this.showFindButton=!0,setTimeout(()=>{const c=document.getElementById("viewFind");c&&c.classList.remove("invisible");const g=document.getElementById("findbar");g&&g.classList.remove("invisible")}))):(t&&t.set("textLayerMode",0),this.textLayer=!1,this.showFindButton&&this.logLevel>=Al.WARNINGS&&(console.warn('Hiding the "find" button because the text layer of the PDF file is not rendered. Use [textLayer]="true" to enable the find button.'),this.ngZone.run(()=>{this.showFindButton=!1})),this.showHandToolButton&&this.logLevel>=Al.WARNINGS&&(console.warn('Hiding the "hand tool / selection mode" menu because the text layer of the PDF file is not rendered. Use [textLayer]="true" to enable the the menu items.'),this.showHandToolButton=!1))}overrideDefaultSettings(){return(0,pn.mG)(this,void 0,void 0,function*(){const t=window.PDFViewerApplicationOptions;for(const b in Wt)t.set(b,Wt[b]);t.set("disablePreferences",!0),yield this.setZoom(),t.set("ignoreKeyboard",this.ignoreKeyboard),t.set("ignoreKeys",this.ignoreKeys),t.set("acceptKeys",this.acceptKeys),t.set("wheelAction",this.wheelAction),this.activateTextlayerIfNecessary(t),(this.scrollMode||this.scrollMode===Cl.vertical)&&t.set("scrollModeOnLoad",this.scrollMode);const c=this.sidebarVisible,g=window.PDFViewerApplication;void 0!==c&&(g.sidebarViewOnLoad=c?1:0,g.appConfig&&(g.appConfig.sidebarViewOnLoad=c?1:0),t.set("sidebarViewOnLoad",this.sidebarVisible?1:0)),"even"===this.spread?(t.set("spreadModeOnLoad",2),g.pdfViewer&&(g.pdfViewer.spreadMode=2),this.onSpreadChange("even")):"odd"===this.spread?(t.set("spreadModeOnLoad",1),g.pdfViewer&&(g.pdfViewer.spreadMode=1),this.onSpreadChange("odd")):(t.set("spreadModeOnLoad",0),g.pdfViewer&&(g.pdfViewer.spreadMode=0),this.onSpreadChange("off")),this.printResolution&&t.set("printResolution",this.printResolution),!1===this.showBorders&&t.set("removePageBorders",!this.showBorders)})}openPDF(){ServiceWorkerOptions.showUnverifiedSignatures=this.showUnverifiedSignatures;const t=window.PDFViewerApplication;if(t.enablePrint=this.enablePrint,a.ngxExtendedPdfViewerInitialized=!0,this._src){this.ngxExtendedPdfViewerIncompletelyInitialized=!1,this.listenToURL||(t.pdfLinkService.setHash=function(){}),this.initTimeout=null,this.selectCursorTool(),t.eventBus.on("textlayerrendered",g=>{this.textLayerRendered.emit(g)}),t.eventBus.on("scrollmodechanged",g=>{this.ngZone.run(()=>this.scrollModeChange.emit(g.mode))}),t.eventBus.on("progress",g=>{this.progress.emit(g)}),t.eventBus.on("pagesloaded",g=>(0,pn.mG)(this,void 0,void 0,function*(){if(this.pagesLoaded.emit(g),this.removeScrollbarInInititeScrollMode(),null!=this.rotation){const b=Number(this.rotation);(0===b||90===b||180===b||270===b)&&(t.pdfViewer.pagesRotation=b)}setTimeout(()=>{this.shuttingDown||(this.nameddest?t.pdfLinkService.goToDestination(this.nameddest):this.page?t.page=Number(this.page):this.pageLabel&&(t.pdfViewer.currentPageLabel=this.pageLabel))}),yield this.setZoom()})),t.eventBus.on("pagerendered",g=>{this.ngZone.run(()=>{this.pageRendered.emit(g),this.removeScrollbarInInititeScrollMode()})}),t.eventBus.on("pagerender",g=>{this.ngZone.run(()=>{this.pageRender.emit(g)})}),t.eventBus.on("download",g=>{this.ngZone.run(()=>{this.pdfDownloaded.emit(g)})}),t.eventBus.on("scalechanging",g=>{{const N=this.root.nativeElement.querySelector("#scaleSelect");let te="";N&&(te=N.value)}setTimeout(()=>{this.currentZoomFactor.emit(g.scale),this.cdr.markForCheck()});const b=this.root.nativeElement.querySelector("#scaleSelect");let B=this.zoom;if(b&&(B=b.value),"auto"!==B&&"page-fit"!==B&&"page-actual"!==B&&"page-width"!==B){const te=100*g.scale;Math.abs(this.zoom-te)>1e-6&&(this.zoom=te,this.zoomChange.emit(100*g.scale))}else this.zoom!==B&&this.zoomChange.emit(B)}),t.eventBus.on("rotationchanging",g=>{this.ngZone.run(()=>{this.rotationChange.emit(g.pagesRotation)})}),t.eventBus.on("fileinputchange",g=>{this.ngZone.run(()=>{var b,B;if(g.fileInput.files&&g.fileInput.files.length>=1)this.srcChange.emit(g.fileInput.files[0].name);else{const N=null===(B=null===(b=g.fileInput)||void 0===b?void 0:b.value)||void 0===B?void 0:B.replace("C:\\fakepath\\","");this.srcChange.emit(N)}})}),t.eventBus.on("cursortoolchanged",g=>{this.ngZone.run(()=>{this.handToolChange.emit(g.tool===wl.HAND)})}),t.eventBus.on("sidebarviewchanged",g=>{this.ngZone.run(()=>{this.sidebarVisibleChange.emit(g.view>0),this.sidebarComponent&&this.sidebarComponent.showToolbarWhenNecessary()})}),t.eventBus.on("documentloaded",g=>{this.ngZone.run(()=>{this.loadComplete(g.source.pdfDocument)})});const c=()=>{this.ngZone.run(()=>{this.sidebarComponent&&this.sidebarComponent.showToolbarWhenNecessary()})};if(t.eventBus.on("outlineloaded",c),t.eventBus.on("attachmentsloaded",c),t.eventBus.on("layersloaded",c),t.eventBus.on("updatefindcontrolstate",g=>{g.state===Kf.NOT_FOUND?this.updateFindMatchesCount.emit({current:0,total:0}):g.matchesCount.total&&(g.matchesCount.matches=t.findController._pageMatches,g.matchesCount.matchesLength=t.findController._pageMatchesLength,g.matchesCount.matchesColor=t.findController._pageMatchesColor,this.updateFindMatchesCount.emit(g.matchesCount)),this.updateFindState&&this.updateFindState.emit(g.state)}),t.eventBus.on("updatefindmatchescount",g=>{g.matchesCount.matches=t.findController._pageMatches,g.matchesCount.matchesLength=t.findController._pageMatchesLength,g.matchesCount.matchesColor=t.findController._pageMatchesColor,this.updateFindMatchesCount.emit(g.matchesCount)}),t.eventBus.on("pagechanging",g=>{this.shuttingDown||this.ngZone.run(()=>{const b=t.pdfViewer.currentPageNumber,B=t.pdfViewer.currentPageLabel;b!==this.page&&this.pageChange.emit(b),B!==this.pageLabel&&this.pageLabelChange.emit(B)})}),setTimeout(()=>(0,pn.mG)(this,void 0,void 0,function*(){return yield this.checkHeight()}),100),this._src){const g={password:this.password,verbosity:this.logLevel};this._src.range&&(g.range=this._src.range),this.httpHeaders&&(g.httpHeaders=this.httpHeaders),this.authorization&&(g.withCredentials=!0,g.httpHeaders?g.httpHeaders.Authorization||(g.httpHeaders.Authorization=this.authorization):g.httpHeaders={Authorization:this.authorization}),g.baseHref=this.baseHref,t.onError=b=>this.pdfLoadingFailed.emit(b),this.ngZone.runOutsideAngular(()=>(0,pn.mG)(this,void 0,void 0,function*(){yield t.open(this._src,g),this.pdfLoadingStarts.emit({}),setTimeout(()=>(0,pn.mG)(this,void 0,void 0,function*(){return yield this.setZoom()}))}))}setTimeout(()=>{this.shuttingDown||this.page&&(t.page=Number(this.page))},100)}}removeScrollbarInInititeScrollMode(){"infinite-scroll"===this.pageViewMode&&setTimeout(()=>{if("infinite-scroll"===this.pageViewMode){const t=document.getElementById("viewer");if(t){const c=t.clientHeight+17,g=document.getElementsByClassName("zoom")[0];this.primaryMenuVisible?this.height=c+35+"px":c>17&&(this.height=c+"px"),g&&(g.style.height=this.height)}}})}openPDF2(){var t,c;return(0,pn.mG)(this,void 0,void 0,function*(){this.overrideDefaultSettings();const g=window.PDFViewerApplication;null===(c=null===(t=g.pdfDocument)||void 0===t?void 0:t.annotationStorage)||void 0===c||c.resetModified(),yield g.close(),this.formData={},this.formIdToFieldName={},this.formRadioButtonValueToId={};const b={password:this.password,verbosity:this.logLevel};this._src&&this._src.range&&(b.range=this._src.range),this.httpHeaders&&(b.httpHeaders=this.httpHeaders),this.authorization&&(b.withCredentials=!0,b.httpHeaders?b.httpHeaders.Authorization||(b.httpHeaders.Authorization=this.authorization):b.httpHeaders={Authorization:this.authorization}),b.baseHref=this.baseHref,g.open(this._src,b).then(()=>{this.pdfLoaded.emit({pagesCount:g.pagesCount})},B=>this.pdfLoadingFailed.emit(B))})}selectCursorTool(){window.PDFViewerApplication.eventBus.dispatch("switchcursortool",{tool:this.handTool?1:0})}ngOnDestroy(){var t,c;return(0,pn.mG)(this,void 0,void 0,function*(){if("undefined"==typeof window)return;window.getFormValue=void 0,window.setFormValue=void 0,window.registerAcroformAnnotations=void 0;const g=window.PDFViewerApplication;this.shuttingDown=!0,a.ngxExtendedPdfViewerInitialized=!1,this.initTimeout&&(clearTimeout(this.initTimeout),this.initTimeout=void 0),g&&(this.pinchOnMobileSupport&&(this.pinchOnMobileSupport.destroyPinchZoom(),this.pinchOnMobileSupport=void 0),null===(c=null===(t=g.pdfDocument)||void 0===t?void 0:t.annotationStorage)||void 0===c||c.resetModified(),this.formData={},this.formIdToFieldName={},this.formRadioButtonValueToId={},g._cleanup(),yield g.close(),g.printKeyDownListener&&removeEventListener("keydown",g.printKeyDownListener,!0),setTimeout(()=>{g._boundEvents&&g.unbindWindowEvents();const B=g.eventBus;if(B){g.unbindEvents();for(const N in B._listeners)if(B._listeners[N]){const te=B._listeners[N];for(let he=0;he<te.length;he++)te[he]=void 0;B._listeners[N]=void 0}}g.eventBus=null}));const b=document.getElementsByTagName("body");if(b[0]){const B=b[0].children;for(let N=B.length-1;N>=0;N--){const te=B.item(N);(te&&"printContainer"===te.id||te&&"fileInput"===te.id)&&b[0].removeChild(te)}}})}isPrimaryMenuVisible(){return!(!this.showToolbar||!(this.showBookmarkButton||this.showDownloadButton||this.showFindButton||this.showOpenFileButton||this.showPagingButtons||this.showPresentationModeButton||this.showPrintButton||this.showPropertiesButton||this.showRotateButton||this.showHandToolButton||this.showScrollingButton||this.showSpreadButton||this.showSidebarButton||this.showZoomButtons))}ngOnChanges(t){var c,g,b;return(0,pn.mG)(this,void 0,void 0,function*(){if("undefined"==typeof window)return;const B=window.PDFViewerApplication,N=window.PDFViewerApplicationOptions;if(a.ngxExtendedPdfViewerInitialized){if("src"in t||"base64Src"in t)if(this._src)this.ngxExtendedPdfViewerIncompletelyInitialized?this.openPDF():yield this.openPDF2();else{null===(g=null===(c=B.pdfDocument)||void 0===c?void 0:c.annotationStorage)||void 0===g||g.resetModified(),this.formData={},this.formIdToFieldName={},this.formRadioButtonValueToId={};let te=null===(b=B.appConfig)||void 0===b?void 0:b.openFileInput;te||(te=document.querySelector("#fileInput")),te&&(te.value=""),yield B.close()}if("enableDragAndDrop"in t&&N.set("enableDragAndDrop",this.enableDragAndDrop),"zoom"in t&&(0,pn.mG)(this,void 0,void 0,function*(){return yield this.setZoom()}),"maxZoom"in t&&N.set("maxZoom",this.maxZoom),"minZoom"in t&&N.set("minZoom",this.minZoom),"handTool"in t&&this.selectCursorTool(),"page"in t&&this.page&&this.page!=B.page&&(B.page=this.page),"pageLabel"in t&&this.pageLabel&&this.pageLabel!==B.pdfViewer.currentPageLabel&&(B.pdfViewer.currentPageLabel=this.pageLabel),"rotation"in t)if(this.rotation){const te=Number(this.rotation);(0===te||90===te||180===te||270===te)&&(B.pdfViewer.pagesRotation=te)}else B.pdfViewer.pagesRotation=0;"scrollMode"in t&&(this.scrollMode||this.scrollMode===Cl.vertical)&&(B.pdfViewer.scrollMode=this.scrollMode),"sidebarVisible"in t&&(this.sidebarVisible?B.pdfSidebar.open():B.pdfSidebar.close()),"filenameForDownload"in t&&(B.appConfig.filenameForDownload=this.filenameForDownload),"nameddest"in t&&this.nameddest&&B.pdfLinkService.goToDestination(this.nameddest),"spread"in t&&("even"===this.spread?(B.spreadModeOnLoad=2,B.pdfViewer.spreadMode=2,this.onSpreadChange("even")):"odd"===this.spread?(B.spreadModeOnLoad=1,B.pdfViewer.spreadMode=1,this.onSpreadChange("odd")):(B.spreadModeOnLoad=0,B.pdfViewer.spreadMode=0,this.onSpreadChange("off"))),"enablePinchOnMobile"in t&&(t.enablePinchOnMobile.isFirstChange()||t.enablePinchOnMobile.currentValue!==t.enablePinchOnMobile.previousValue&&(this.enablePinchOnMobile?this.pinchOnMobileSupport=new D_(this.ngZone):this.pinchOnMobileSupport&&(this.pinchOnMobileSupport.destroyPinchZoom(),this.pinchOnMobileSupport=void 0))),"wheelAction"in t&&N.set("wheelAction",this.wheelAction),this.primaryMenuVisible=this.showToolbar,(!this.showSecondaryToolbarButton||this.hideKebabMenuForSecondaryToolbar)&&(this.isPrimaryMenuVisible()||(this.primaryMenuVisible=!1)),setTimeout(()=>this.calcViewerPositionTop())}if("printResolution"in t){const te=N;te&&te.set("printResolution",this.printResolution)}if("ignoreKeyboard"in t&&N&&this.overrideDefaultSettings(),"ignoreKeys"in t&&N&&this.overrideDefaultSettings(),"acceptKeys"in t&&N&&this.overrideDefaultSettings(),"showBorders"in t&&!t.showBorders.isFirstChange()&&N){this.overrideDefaultSettings();const he=document.getElementById("viewer");this.showBorders?he.classList.remove("removePageBorders"):he.classList.add("removePageBorders"),B.pdfViewer&&(B.pdfViewer.removePageBorders=!this.showBorders);const we={source:he,scale:(100|Number(this.zoom))/100,presetValue:this.zoom};B.eventBus.dispatch("scalechanging",we)}"showUnverifiedSignatures"in t&&B&&B.pdfDocument&&B.pdfDocument._transport.messageHandler.send("showUnverifiedSignatures",this.showUnverifiedSignatures),"formData"in t&&(t.formData.isFirstChange()||this.updateFormFields(this.formData,t.formData.previousValue)),"enablePrint"in t&&(t.enablePrint.isFirstChange()||(B.enablePrint=this.enablePrint)),("customFindbar"in t&&!t.customFindbar.isFirstChange()||"customFindbarButtons"in t&&!t.customFindbarButtons.isFirstChange()||"customFindbarInputArea"in t&&!t.customFindbarInputArea.isFirstChange()||"customToolbar"in t&&!t.customToolbar.isFirstChange())&&this.dummyComponents&&this.dummyComponents.addMissingStandardWidgets(),"pdfBackgroundColor"in t&&!t["pdfBackgroundColor "].isFirstChange()&&N.set("pdfBackgroundColor",this.pdfBackground),"pdfBackgroundColorToReplace"in t&&!t.pdfBackgroundColorToReplace.isFirstChange()&&N.set("pdfBackgroundColorToReplace",this.pdfBackgroundColorToReplace)})}setZoom(){return(0,pn.mG)(this,void 0,void 0,function*(){if(this.root){const t=window.PDFViewerApplication;let c=this.zoom;if(String(c).endsWith("%")?c=Number(String(c).replace("%",""))/100:isNaN(Number(c))||(c=Number(c)/100),!c&&t.store){const b=yield t.store.get("zoom");c=b?isNaN(Number(b))?b:Number(b)/100:"auto"}t&&window.PDFViewerApplicationOptions.set("defaultZoomValue",c);const g=this.root.nativeElement.querySelector("#scaleSelect");if(g)if("auto"===this.zoom||"page-fit"===this.zoom||"page-actual"===this.zoom||"page-width"===this.zoom)g.value=this.zoom;else if(g.value="custom",g.options)for(const b of g.options)"custom"===b.value&&(b.textContent=Math.round(1e5*Number(c))/1e3+"%");t.pdfViewer&&(t.pdfViewer.currentScaleValue=c||"auto")}})}onResize(){const t=document.getElementsByClassName("html");if(t&&t.length>0){const c=document.getElementById("outerContainer");c&&(this.toolbarWidthInPixels=c.clientWidth,this.secondaryToolbarComponent&&this.secondaryToolbarComponent.checkVisibility()),this.checkHeight()}try{const c=new ResizeObserver(()=>this.removeScrollbarInInititeScrollMode()),g=document.getElementById("viewer");g&&c.observe(g)}catch(c){console.log("ResizeObserver is not supported by your browser")}}onContextMenu(){return this.contextMenuAllowed}onSecondaryMenuIsEmpty(t){this.hideKebabMenuForSecondaryToolbar=t,t&&(this.isPrimaryMenuVisible()||(this.primaryMenuVisible=!1))}registerAcroformAnnotations(t){let c={},g={};for(let b of t)b.fieldName&&(c[b.fieldName]&&(g[b.fieldName]=b),c[b.fieldName]=b);for(let b of t)b.fieldName&&g[b.fieldName]&&(this.formIdToFieldName[b.id]=b.fieldName)}getFormValue(t){return void 0===this.formData[t]&&t.includes("/")&&(t=t.split("/")[0]),{value:this.formData[t]}}setFormValue(t,c){this.formData||(this.formData={}),this.formIdToFieldName[t]?this.formData[this.formIdToFieldName[t]]=c:this.formData[t]=c,this.ngZone.run(()=>this.formDataChange.emit(this.formData))}assignFormIdAndFieldName(t,c,g){this.formIdToFieldName[t]=c,g&&(this.formRadioButtonValueToId[g]=t)}updateFormFields(t,c){const g=window.PDFViewerApplication;if(!g||!g.pdfDocument||!g.pdfDocument.annotationStorage)return;const b=g.pdfDocument.annotationStorage;for(const B in t)if(t.hasOwnProperty(B)&&t[B]!==c[B]){const N=document.querySelector("input[name='"+B+"']");if(N instanceof HTMLInputElement)if("radio"===N.type){b.setValue(N.id,B,{value:t[B]===N.value,emitMessage:!1});const te=document.querySelectorAll("input[name='"+B+"']"),he=this.formRadioButtonValueToId[t[B]];te.forEach(we=>{we.checked=we.id===he})}else"checkbox"===N.type?(b.setValue(N.id,B,{value:t[B],emitMessage:!1}),N.checked=t[B]):(b.setValue(N.id,B,{value:t[B],emitMessage:!1}),N.value=t[B]);else if(N);else{const te=document.querySelector("textarea[name='"+B+"']");if(te)b.setValue(te.id,B,{value:t[B],emitMessage:!1}),te.value=t[B];else{const he=document.querySelector("select[name='"+B+"']");if(he)if(b.setValue(he.id,B,{value:t[B],emitMessage:!1}),he.multiple){const we=this.formData[B];for(let Re=0;Re<he.options.length;Re++)he.options[Re].selected=we.indexOf(he.options[Re].value)>=0}else he.value=t[B]}}}for(const B in c)if(c.hasOwnProperty(B)&&!t.hasOwnProperty(B)){const N=document.querySelector("input[name='"+B+"']");if(N instanceof HTMLInputElement)"checkbox"===N.type?(b.setValue(N.id,B,{value:!1,emitMessage:!1}),N.checked=!1):(b.setValue(N.id,B,{value:void 0,emitMessage:!1}),N.value="");else if(!N){const te=document.querySelector("textarea[name='"+B+"']");te&&(b.setValue(te.id,B,{value:void 0,emitMessage:!1}),te.value="")}}}loadComplete(t){this.hasSignature=!1,this.buttonValues={};for(let c=1;c<=t.numPages;c++)t.getPage(c).then(g=>g.getAnnotations()).then(g=>{g.filter(b=>"Widget"===b.subtype).forEach(b=>{b.checkBox?this.buttonValues[b.id]=b.exportValue:b.radioButton&&(this.buttonValues[b.id]=b.buttonValue),"Sig"===b.fieldType&&this.ngZone.run(()=>{this.hasSignature=!0,setTimeout(()=>{document.querySelector("#viewerContainer").scrollBy(0,-32)})})})});this.pdfLoaded.emit({pagesCount:t.numPages})}zoomToPageWidth(t){return(0,pn.mG)(this,void 0,void 0,function*(){const c=window.PDFViewerApplication,g=t.clientY,b=c.pdfViewer.currentScale;this.zoom!==Wt.doubleTapZoomFactor&&this.zoom+"%"!==Wt.doubleTapZoomFactor?(this.previousZoom=this.zoom,this.zoom=Wt.doubleTapZoomFactor,yield this.setZoom()):(this.zoom=this.previousZoom?this.previousZoom:"page-width",yield this.setZoom());const N=c.pdfViewer.currentScale/b-1,te=c.pdfViewer.container.getBoundingClientRect();c.pdfViewer.container.scrollTop+=(g-te.top)*N})}}return a.ngxExtendedPdfViewerInitialized=!1,a.\u0275fac=function(t){return new(t||a)(r.Y36(r.R0b),r.Y36(r.Lbi),r.Y36(bl),r.Y36($e.Ye),r.Y36(r.SBq),r.Y36($e.lw),r.Y36(r.sBO),r.Y36(B_))},a.\u0275cmp=r.Xpm({type:a,selectors:[["ngx-extended-pdf-viewer"]],viewQuery:function(t,c){if(1&t&&(r.Gf(E_,5),r.Gf(fy,5),r.Gf(my,5),r.Gf(gy,5)),2&t){let g;r.iGM(g=r.CRH())&&(c.dummyComponents=g.first),r.iGM(g=r.CRH())&&(c.root=g.first),r.iGM(g=r.CRH())&&(c.secondaryToolbarComponent=g.first),r.iGM(g=r.CRH())&&(c.sidebarComponent=g.first)}},hostBindings:function(t,c){1&t&&r.NdJ("contextmenu",function(){return c.onContextMenu()})},inputs:{customFindbarInputArea:"customFindbarInputArea",customToolbar:"customToolbar",customFindbar:"customFindbar",customFindbarButtons:"customFindbarButtons",customPdfViewer:"customPdfViewer",customSecondaryToolbar:"customSecondaryToolbar",customSidebar:"customSidebar",customThumbnail:"customThumbnail",customFreeFloatingBar:"customFreeFloatingBar",showFreeFloatingBar:"showFreeFloatingBar",enableDragAndDrop:"enableDragAndDrop",formData:"formData",pageViewMode:"pageViewMode",scrollMode:"scrollMode",authorization:"authorization",httpHeaders:"httpHeaders",contextMenuAllowed:"contextMenuAllowed",enablePrint:"enablePrint",delayFirstView:"delayFirstView",logLevel:"logLevel",enablePinchOnMobile:"enablePinchOnMobile",minifiedJSLibraries:"minifiedJSLibraries",printResolution:"printResolution",rotation:"rotation",src:"src",base64Src:"base64Src",minHeight:"minHeight",height:"height",useBrowserLocale:"useBrowserLocale",forceUsingLegacyES5:"forceUsingLegacyES5",backgroundColor:"backgroundColor",pdfBackground:"pdfBackground",pdfBackgroundColorToReplace:"pdfBackgroundColorToReplace",filenameForDownload:"filenameForDownload",ignoreKeyboard:"ignoreKeyboard",ignoreKeys:"ignoreKeys",acceptKeys:"acceptKeys",imageResourcesPath:"imageResourcesPath",localeFolderPath:"localeFolderPath",language:"language",listenToURL:"listenToURL",nameddest:"nameddest",password:"password",showUnverifiedSignatures:"showUnverifiedSignatures",startTabindex:"startTabindex",showSidebarButton:"showSidebarButton",sidebarVisible:"sidebarVisible",showFindButton:"showFindButton",showFindHighlightAll:"showFindHighlightAll",showFindMatchCase:"showFindMatchCase",showFindCurrentPageOnly:"showFindCurrentPageOnly",showFindPageRange:"showFindPageRange",showFindEntireWord:"showFindEntireWord",showFindEntirePhrase:"showFindEntirePhrase",showFindIgnoreAccents:"showFindIgnoreAccents",showFindFuzzySearch:"showFindFuzzySearch",showFindResultsCount:"showFindResultsCount",showFindMessages:"showFindMessages",showPagingButtons:"showPagingButtons",showZoomButtons:"showZoomButtons",showPresentationModeButton:"showPresentationModeButton",showOpenFileButton:"showOpenFileButton",showPrintButton:"showPrintButton",showDownloadButton:"showDownloadButton",showBookmarkButton:"showBookmarkButton",theme:"theme",formTheme:"formTheme",showToolbar:"showToolbar",showSecondaryToolbarButton:"showSecondaryToolbarButton",showRotateButton:"showRotateButton",handTool:"handTool",showHandToolButton:"showHandToolButton",showScrollingButton:"showScrollingButton",showSpreadButton:"showSpreadButton",showPropertiesButton:"showPropertiesButton",showBorders:"showBorders",spread:"spread",page:"page",pageLabel:"pageLabel",textLayer:"textLayer",zoom:"zoom",zoomLevels:"zoomLevels",maxZoom:"maxZoom",minZoom:"minZoom",_mobileFriendlyZoom:"_mobileFriendlyZoom",wheelAction:"wheelAction",mobileFriendlyZoom:"mobileFriendlyZoom"},outputs:{formDataChange:"formDataChange",progress:"progress",srcChange:"srcChange",scrollModeChange:"scrollModeChange",afterPrint:"afterPrint",beforePrint:"beforePrint",currentZoomFactor:"currentZoomFactor",rotationChange:"rotationChange",sidebarVisibleChange:"sidebarVisibleChange",handToolChange:"handToolChange",spreadChange:"spreadChange",thumbnailDrawn:"thumbnailDrawn",pageChange:"pageChange",pageLabelChange:"pageLabelChange",pagesLoaded:"pagesLoaded",pageRender:"pageRender",pageRendered:"pageRendered",pdfDownloaded:"pdfDownloaded",pdfLoaded:"pdfLoaded",pdfLoadingStarts:"pdfLoadingStarts",pdfLoadingFailed:"pdfLoadingFailed",textLayerRendered:"textLayerRendered",updateFindMatchesCount:"updateFindMatchesCount",updateFindState:"updateFindState",zoomChange:"zoomChange"},features:[r.TTD],ngContentSelectors:T_,decls:11,vars:8,consts:[["rel","resource","type","application/l10n","origin","ngx-extended-pdf-viewer",4,"ngIf"],[4,"ngIf"],[3,"zoom","width"],[4,"ngTemplateOutlet"],["defaultPdfViewer",""],["defaultFreeFloatingBar",""],["rel","resource","type","application/l10n","origin","ngx-extended-pdf-viewer"],[1,"zoom"],["root",""],[1,"html"],[1,"loadingInProgress","body"],["id","outerContainer",3,"resize"],["class","free-floating-bar",4,"ngIf"],[3,"sidebarPositionTop","sidebarVisible","showSidebarButton","customSidebar","customThumbnail","mobileFriendlyZoomScale","thumbnailDrawn"],["pdfsidebar",""],["id","mainContainer"],[3,"customToolbar","mobileFriendlyZoomScale","primaryMenuVisible","showBookmarkButton","showDownloadButton","showFindButton","showHandToolButton","showOpenFileButton","showPrintButton","showPagingButtons","showPresentationModeButton","showRotateButton","showSecondaryToolbarButton","showSidebarButton","showZoomButtons","textLayer","toolbarMarginTop","toolbarWidth","zoomLevels","onToolbarLoaded"],[3,"customSecondaryToolbar","secondaryToolbarTop","mobileFriendlyZoomScale","showPresentationModeButton","showOpenFileButton","showPrintButton","showDownloadButton","showBookmarkButton","showPagingButtons","showRotateButton","showHandToolButton","showScrollingButton","showSpreadButton","showPropertiesButton","spreadChange","secondaryMenuIsEmpty"],["pdfSecondaryToolbarComponent",""],[3,"findbarLeft","findbarTop","mobileFriendlyZoomScale","showFindButton","customFindbarInputArea","customFindbarButtons","showFindCurrentPageOnly","showFindEntirePhrase","showFindEntireWord","showFindFuzzySearch","showFindHighlightAll","showFindIgnoreAccents","showFindMatchCase","showFindMessages","showFindPageRange","showFindResultsCount"],["id","viewerContainer","tabindex","0"],["class","unverified-signature-warning",4,"ngIf"],["class","modified-background-warning",4,"ngIf"],["id","viewer",1,"pdfViewer",3,"dblclick"],["id","dialogContainer"],["type","file","id","fileInput",1,"hidden"],["id","printContainer"],[1,"free-floating-bar"],[1,"unverified-signature-warning"],[1,"modified-background-warning"]],template:function(t,c){if(1&t&&(r.F$t(T_),r.YNc(0,Ny,1,1,"link",0),r.YNc(1,Uy,1,0,"pdf-dark-theme",1),r.YNc(2,Gy,1,0,"pdf-light-theme",1),r.YNc(3,Zy,1,0,"pdf-acroform-dark-theme",1),r.YNc(4,jy,1,0,"pdf-acroform-default-theme",1),r._UZ(5,"pdf-dynamic-css",2),r.YNc(6,Hy,1,0,"ng-content",3),r.YNc(7,Xy,26,66,"ng-template",null,4,r.W1O),r.YNc(9,Jy,0,0,"ng-template",null,5,r.W1O)),2&t){const g=r.MAs(8);r.Q6J("ngIf",c.useBrowserLocale),r.xp6(1),r.Q6J("ngIf","dark"===c.theme),r.xp6(1),r.Q6J("ngIf","light"===c.theme),r.xp6(1),r.Q6J("ngIf","dark"===c.formTheme),r.xp6(1),r.Q6J("ngIf","light"===c.formTheme),r.xp6(1),r.Q6J("zoom",c.mobileFriendlyZoomScale)("width",c.toolbarWidthInPixels),r.xp6(1),r.Q6J("ngTemplateOutlet",c.customPdfViewer?c.customPdfViewer:g)}},directives:[ox,rx,gx,_x,ax,mx,E_,tv,ux,Rx,xx,lx,cx,sx,dx,$e.O5,$e.tP],pipes:[$e.Ov,iv],encapsulation:2,changeDetection:0}),a})();Window.ngxConsoleFilter=(a,s)=>!0;class k_{log(s){Window.ngxConsoleFilter("log",s)&&console.log(s)}error(s){Window.ngxConsoleFilter("error",s)&&console.error(s)}warn(s){Window.ngxConsoleFilter("warn",s)&&console.warn(s)}}function em(a,s,t){return!a||a.some(c=>function rv(a,s,t){let c=0,g=0;return(a=a.toLowerCase()).includes("ctrl+")&&(c|=1,a=a.replace("ctrl+","")),a.includes("cmd+")&&(c|=8,a=a.replace("cmd+","")),a.includes("alt+")&&(c|=2,a=a.replace("alt+","")),a.includes("shift+")&&(c|=4,a=a.replace("shift+","")),a.includes("meta+")&&(c|=8,a=a.replace("meta+","")),g="up"===a?38:"down"===a?40:"+"===a||'"+"'===a?171:"-"===a||'"-"'===a?173:"esc"===a?27:"enter"===a?13:"space"===a?32:"f4"===a?115:"backspace"===a?8:"home"===a?36:"end"===a?35:"left"===a?37:"right"===a?39:"pagedown"===a?34:"pageup"===a?33:a.toUpperCase().charCodeAt(0),"WHEEL"===t?"wheel"===a&&s===c:g===t&&s===c}(c,s,t))}Window.ngxConsole=new k_,0===(new Date).getTime()&&(new k_).log(""),Promise.allSettled||window.Zone&&!window["__zone_symbol__Promise.allSettled"]&&console.error("Please update zone.js to version 0.10.3 or higher. Otherwise, you'll run the slow ECMAScript 5 version even on modern browser that can run the fast ESMAScript 2015 version."),"undefined"!=typeof window&&(window.isKeyIgnored=function ov(a,s){const t=window.PDFViewerApplicationOptions,c=t.get("ignoreKeys"),g=t.get("acceptKeys");return"WHEEL"===s?!!em(c,a,"WHEEL")||!!(g&&g.length>0)&&!em(g,a,"WHEEL"):!!(16===s||17===s||18===s||224===s||t.get("ignoreKeyboard")||c&&c.length>0&&em(c,a,s))||!!(g&&g.length>0)&&!em(g,a,s)});let av=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({providers:[B_],imports:[[nv,$e.ez,gh]]}),a})(),sv=(()=>{class a{constructor(){this.title="CV Felipe Acosta",this.page=1}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["app-cv-clasico"]],decls:1,vars:10,consts:[["pageViewMode","multiple",3,"src","useBrowserLocale","showHandToolButton","showDownloadButton","showOpenFileButton","textLayer","showPresentationModeButton","showRotateButton","page","pageLabel","pageChange","pageLabelChange"]],template:function(t,c){1&t&&(r.TgZ(0,"ngx-extended-pdf-viewer",0),r.NdJ("pageChange",function(b){return c.page=b})("pageLabelChange",function(b){return c.pageLabel=b}),r.qZA()),2&t&&r.Q6J("src","assets/CVFelipeAcostaBarriga.pdf")("useBrowserLocale",!0)("showHandToolButton",!0)("showDownloadButton",!0)("showOpenFileButton",!1)("textLayer",!1)("showPresentationModeButton",!1)("showRotateButton",!1)("page",c.page)("pageLabel",c.pageLabel)},directives:[$f],encapsulation:2}),a})(),lv=(()=>{class a extends vt{buildStyles(t,{display:c}){const g=He(t);return Object.assign(Object.assign({},g),{display:"none"===c?c:g.display})}}return a.\u0275fac=function(){let s;return function(c){return(s||(s=r.n5z(a)))(c||a)}}(),a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const cv=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let dv=(()=>{class a extends li{constructor(t,c,g,b,B){super(t,g,c,b),this._config=B,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(t){var c;const b=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=null!==(c=P_.get(b))&&void 0!==c?c:new Map,P_.set(b,this.styleCache),this.currentValue!==t&&(this.addStyles(t,{display:b}),this.currentValue=t)}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(Mt),r.Y36(lv),r.Y36(Vt),r.Y36(Dt))},a.\u0275dir=r.lG2({type:a,features:[r.qOj]}),a})(),tm=(()=>{class a extends dv{constructor(){super(...arguments),this.inputs=cv}}return a.\u0275fac=function(){let s;return function(c){return(s||(s=r.n5z(a)))(c||a)}}(),a.\u0275dir=r.lG2({type:a,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[r.qOj]}),a})();const P_=new Map;let bv=(()=>{class a extends vt{constructor(t){super(),this.layoutConfig=t}buildStyles(t,c){let[g,b,...B]=t.split(" "),N=B.join(" ");const te=c.direction.indexOf("column")>-1?"column":"row",he=ft(te)?"max-width":"max-height",we=ft(te)?"min-width":"min-height",Re=String(N).indexOf("calc")>-1,ti=Re||"auto"===N,Ft=String(N).indexOf("%")>-1&&!Re,Ri=String(N).indexOf("px")>-1||String(N).indexOf("rem")>-1||String(N).indexOf("em")>-1||String(N).indexOf("vw")>-1||String(N).indexOf("vh")>-1;let Po=Re||Ri;g="0"==g?0:g,b="0"==b?0:b;const Ml=!g&&!b;let Oi={};const Zc={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(N||""){case"":const H_=!1!==this.layoutConfig.useColumnBasisZero;N="row"===te?"0%":H_?"0.000000001px":"auto";break;case"initial":case"nogrow":g=0,N="auto";break;case"grow":N="100%";break;case"noshrink":b=0,N="auto";break;case"auto":break;case"none":g=0,b=0,N="auto";break;default:!Po&&!Ft&&!isNaN(N)&&(N+="%"),"0%"===N&&(Po=!0),"0px"===N&&(N="0%"),Oi=ht(Zc,Re?{"flex-grow":g,"flex-shrink":b,"flex-basis":Po?N:"100%"}:{flex:`${g} ${b} ${Po?N:"100%"}`})}return Oi.flex||Oi["flex-grow"]||(Oi=ht(Zc,Re?{"flex-grow":g,"flex-shrink":b,"flex-basis":N}:{flex:`${g} ${b} ${N}`})),"0%"!==N&&"0px"!==N&&"0.000000001px"!==N&&"auto"!==N&&(Oi[we]=Ml||Po&&g?N:null,Oi[he]=Ml||!ti&&b?N:null),Oi[we]||Oi[he]?c.hasWrap&&(Oi[Re?"flex-basis":"flex"]=Oi[he]?Re?Oi[he]:`${g} ${b} ${Oi[he]}`:Re?Oi[we]:`${g} ${b} ${Oi[we]}`):Oi=ht(Zc,Re?{"flex-grow":g,"flex-shrink":b,"flex-basis":N}:{flex:`${g} ${b} ${N}`}),ht(Oi,{"box-sizing":"border-box"})}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(Dt))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const wv=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let Cv=(()=>{class a extends li{constructor(t,c,g,b,B){super(t,b,c,B),this.layoutConfig=g,this.marshal=B,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(t){this.flexShrink=t||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(t){this.flexGrow=t||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(Ut(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(Ut(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(t){const g=t.value.split(" ");this.direction=g[0],this.wrap=void 0!==g[1]&&"wrap"===g[1],this.triggerUpdate()}updateWithValue(t){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const g=this.direction,b=g.startsWith("row"),B=this.wrap;b&&B?this.styleCache=Ev:b&&!B?this.styleCache=Mv:!b&&B?this.styleCache=Sv:!b&&!B&&(this.styleCache=Tv);const te=m_(String(t).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(te.join(" "),{direction:g,hasWrap:B})}triggerReflow(){const t=this.activatedValue;if(void 0!==t){const c=m_(t+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,c.join(" "))}}}return a.\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq),r.Y36(Mt),r.Y36(Dt),r.Y36(bv),r.Y36(Vt))},a.\u0275dir=r.lG2({type:a,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[r.qOj]}),a})(),nm=(()=>{class a extends Cv{constructor(){super(...arguments),this.inputs=wv}}return a.\u0275fac=function(){let s;return function(c){return(s||(s=r.n5z(a)))(c||a)}}(),a.\u0275dir=r.lG2({type:a,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[r.qOj]}),a})();const Mv=new Map,Tv=new Map,Ev=new Map,Sv=new Map;let L_=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[pi,gt]]}),a})(),cA=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["app-estudios"]],decls:153,vars:0,consts:[["mat-subheader",""],["mat-list-icon",""],["mat-line",""],["href","https://www.udemy.com/certificate/UC-0079abd3-56ed-49cd-8494-bda80f5c036b/"],["href","https://www.udemy.com/certificate/UC-aeb39714-5457-4d45-a475-2467d2d65292/"],[1,"container-fxLayout"],["fxFlex","","fxLayout","row","fxLayout.sm","column","fxLayout.xs","column"],["fxFlex.gt-sm","25%",1,"conocimientos-detalles"]],template:function(t,c){1&t&&(r.TgZ(0,"h2"),r._uU(1,"Formaci\xf3n Acad\xe9mica"),r.qZA(),r._UZ(2,"hr"),r.TgZ(3,"mat-list")(4,"div",0),r._uU(5,"Educaci\xf3n Superior"),r.qZA(),r.TgZ(6,"mat-list-item")(7,"mat-icon",1),r._uU(8,"school"),r.qZA(),r.TgZ(9,"div",2),r._uU(10,"Analista Programador"),r.qZA(),r.TgZ(11,"div",2),r._uU(12," 2015 - 2018 | INACAP Rancagua "),r.qZA()(),r.TgZ(13,"mat-list-item")(14,"mat-icon",1),r._uU(15,"school"),r.qZA(),r.TgZ(16,"div",2),r._uU(17,"Pedagog\xeda en Filosof\xeda"),r.qZA(),r.TgZ(18,"div",2),r._uU(19," 2013 - 2014 | Universidad de Santiago de Chile "),r.qZA()(),r._UZ(20,"mat-divider"),r.TgZ(21,"div",0),r._uU(22,"Cursos"),r.qZA(),r.TgZ(23,"mat-list-item")(24,"mat-icon",1),r._uU(25,"data_object"),r.qZA(),r.TgZ(26,"div",2),r._uU(27,"Angular"),r.qZA(),r.TgZ(28,"div",2),r._uU(29," 2022 | Udemy - "),r.TgZ(30,"a",3),r._uU(31,"UC-0079abd3-56ed-49cd-8494-bda80f5c036b"),r.qZA()()(),r.TgZ(32,"mat-list-item")(33,"mat-icon",1),r._uU(34,"javascript"),r.qZA(),r.TgZ(35,"div",2),r._uU(36,"JavaScript"),r.qZA(),r.TgZ(37,"div",2),r._uU(38," 2022 | Udemy - "),r.TgZ(39,"a",4),r._uU(40,"UC-aeb39714-5457-4d45-a475-2467d2d65292"),r.qZA()()()(),r.TgZ(41,"h2"),r._uU(42,"Conocimientos"),r.qZA(),r._UZ(43,"hr"),r.TgZ(44,"div",5)(45,"div",6)(46,"div",7)(47,"mat-list")(48,"div",0),r._uU(49,"Lenguajes"),r.qZA(),r.TgZ(50,"mat-list-item")(51,"mat-icon",1),r._uU(52,"html"),r.qZA(),r.TgZ(53,"div",2),r._uU(54,"Html"),r.qZA(),r.TgZ(55,"div",2),r._uU(56,"Medio"),r.qZA()(),r.TgZ(57,"mat-list-item")(58,"mat-icon",1),r._uU(59,"php"),r.qZA(),r.TgZ(60,"div",2),r._uU(61,"Php"),r.qZA(),r.TgZ(62,"div",2),r._uU(63,"Medio"),r.qZA()(),r.TgZ(64,"mat-list-item")(65,"mat-icon",1),r._uU(66,"javascript"),r.qZA(),r.TgZ(67,"div",2),r._uU(68,"JavaScript"),r.qZA(),r.TgZ(69,"div",2),r._uU(70,"Medio"),r.qZA()(),r.TgZ(71,"mat-list-item")(72,"mat-icon",1),r._uU(73,"data_array"),r.qZA(),r.TgZ(74,"div",2),r._uU(75,"TypeScript"),r.qZA(),r.TgZ(76,"div",2),r._uU(77,"B\xe1sico"),r.qZA()(),r.TgZ(78,"mat-list-item")(79,"mat-icon",1),r._uU(80,"css"),r.qZA(),r.TgZ(81,"div",2),r._uU(82,"CSS"),r.qZA(),r.TgZ(83,"div",2),r._uU(84,"Medio"),r.qZA()()()(),r.TgZ(85,"div",7)(86,"mat-list")(87,"div",0),r._uU(88,"Bases de Datos"),r.qZA(),r.TgZ(89,"mat-list-item")(90,"mat-icon",1),r._uU(91,"join_full"),r.qZA(),r.TgZ(92,"div",2),r._uU(93,"MySQL"),r.qZA(),r.TgZ(94,"div",2),r._uU(95,"Medio"),r.qZA()(),r.TgZ(96,"mat-list-item")(97,"mat-icon",1),r._uU(98,"join_inner"),r.qZA(),r.TgZ(99,"div",2),r._uU(100,"SQL Server"),r.qZA(),r.TgZ(101,"div",2),r._uU(102,"B\xe1sico"),r.qZA()()()(),r.TgZ(103,"div",7)(104,"mat-list")(105,"div",0),r._uU(106,"Frameworks"),r.qZA(),r.TgZ(107,"mat-list-item")(108,"mat-icon",1),r._uU(109,"data_object"),r.qZA(),r.TgZ(110,"div",2),r._uU(111,"Angular"),r.qZA(),r.TgZ(112,"div",2),r._uU(113,"B\xe1sico"),r.qZA()(),r.TgZ(114,"mat-list-item")(115,"mat-icon",1),r._uU(116,"code"),r.qZA(),r.TgZ(117,"div",2),r._uU(118,"Bootstrap"),r.qZA(),r.TgZ(119,"div",2),r._uU(120,"Medio"),r.qZA()()()(),r.TgZ(121,"div",7)(122,"mat-list")(123,"div",0),r._uU(124,"Otros"),r.qZA(),r.TgZ(125,"mat-list-item")(126,"mat-icon",1),r._uU(127,"language"),r.qZA(),r.TgZ(128,"div",2),r._uU(129,"Ingl\xe9s"),r.qZA(),r.TgZ(130,"div",2),r._uU(131,"Medio"),r.qZA()(),r.TgZ(132,"mat-list-item")(133,"mat-icon",1),r._uU(134,"receipt_long"),r.qZA(),r.TgZ(135,"div",2),r._uU(136,"Word"),r.qZA(),r.TgZ(137,"div",2),r._uU(138,"Medio"),r.qZA()(),r.TgZ(139,"mat-list-item")(140,"mat-icon",1),r._uU(141,"table_rows"),r.qZA(),r.TgZ(142,"div",2),r._uU(143,"Excel"),r.qZA(),r.TgZ(144,"div",2),r._uU(145,"Medio"),r.qZA()(),r.TgZ(146,"mat-list-item")(147,"mat-icon",1),r._uU(148,"space_dashboard"),r.qZA(),r.TgZ(149,"div",2),r._uU(150,"Power Point"),r.qZA(),r.TgZ(151,"div",2),r._uU(152,"B\xe1sico"),r.qZA()()()()()())},directives:[yh,jd,Hd,Js,Dc,pr,m,nm,tm],styles:[".conocimientos-detalles[_ngcontent-%COMP%]{margin:0 auto}"]}),a})(),dA=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["app-experiencia-laboral"]],decls:56,vars:0,consts:[[1,"container-fxLayout"],["fxFlex","","fxLayout","row","fxLayout.sm","column","fxLayout.xs","column"],["fxFlex.gt-sm","40%",1,"exp-lista"],["mat-subheader",""],["mat-line",""],["fxFlex.gt-sm","60%",1,"exp-info"]],template:function(t,c){1&t&&(r.TgZ(0,"h2"),r._uU(1,"Experiencia Laboral"),r.qZA(),r._UZ(2,"hr"),r.TgZ(3,"div",0)(4,"div",1)(5,"div",2)(6,"mat-list")(7,"div",3),r._uU(8,"Universidad Nacional Andr\xe9s Bello - Santiago | Remoto"),r.qZA(),r.TgZ(9,"mat-list-item")(10,"div",4),r._uU(11,"Tutor Contact Center"),r.qZA(),r.TgZ(12,"div",4),r._uU(13,"Septiembre 2020 - Abril 2022"),r.qZA()(),r.TgZ(14,"mat-list-item")(15,"div",4),r._uU(16,"Desarrollador Web"),r.qZA(),r.TgZ(17,"div",4),r._uU(18," Marzo 2021 - Septiembre 2021 "),r.qZA()()()(),r.TgZ(19,"div",5)(20,"p"),r._uU(21," Como Tutor del Contact Center UNAB mi principal labor fue estar a cargo del env\xedo de mensajer\xeda masiva para el \xe1rea de admisi\xf3n y redes sociales, esto a trav\xe9s de plataformas como MasterBase, Teleco Chile, Digevo Ads, Sinch y Chattigo, tanto para correos electr\xf3nicos, SMS y WhatsApp. Adem\xe1s, durante este periodo tuve la oportunidad ser apoyo en la atenci\xf3n de prospectos y resolver sus dudas. "),r.qZA(),r.TgZ(22,"p"),r._uU(23," En cuanto a mi aporte como Desarrollador Web, el \xe1rea de Contact Center manejaba un gran volumen de informaci\xf3n que muchas veces era actualizada diariamente. Debido a esto particip\xe9 de la creaci\xf3n de un sitio de uso interno cuyo fin b\xe1sicamente fue centralizar la informaci\xf3n para que los supervisores la mantuvieran actualizada y los tutores pudieran consultarla siempre que lo necesitaran. Este sitio fue desarrollado principalmente en Php, apoyado de Bootstrap, CSS y JavaScript, con base de datos MySQL "),r.qZA()()()(),r._UZ(24,"mat-divider"),r.TgZ(25,"div",0)(26,"div",1)(27,"div",2)(28,"mat-list")(29,"div",3),r._uU(30,"Ripley - Rancagua"),r.qZA(),r.TgZ(31,"mat-list-item")(32,"div",4),r._uU(33,"T\xe9cnico en SAT"),r.qZA(),r.TgZ(34,"div",4),r._uU(35," Diciembre 2018 - Febrero 2019 "),r.qZA()()()(),r.TgZ(36,"div",5)(37,"p"),r._uU(38," Encargado de recibir y revisar los distintos tipos de productos tecnol\xf3gicos que clientes de la empresa Ripley llevaran para cambio o devoluci\xf3n, ya fuera por insatisfacci\xf3n o garant\xeda. Mi deber consist\xeda en verificar el estado de los productos y derivar a Servicio T\xe9cnico, cambio directo o bien indicar, en caso de que el producto no cumpliera con las polizas establecidas, que la garant\xeda no aplicaba. "),r.qZA()()()(),r._UZ(39,"mat-divider"),r.TgZ(40,"div",0)(41,"div",1)(42,"div",2)(43,"mat-list")(44,"div",3),r._uU(45,"Direcci\xf3n Regional de Gendarmer\xeda de Chile - Rancagua"),r.qZA(),r.TgZ(46,"mat-list-item")(47,"div",4),r._uU(48,"Pr\xe1ctica Profesional"),r.qZA(),r.TgZ(49,"div",4),r._uU(50," 2018 "),r.qZA()()()(),r.TgZ(51,"div",5)(52,"p"),r._uU(53," Durante mi pr\xe1ctica profesional el foco principal fue el \xe1rea t\xe9cnica de mi carrera, brindando apoyo al personal de planta en sus distintas necesidades de caracter inform\xe1tica, adem\xe1s de configuraci\xf3n y entrega de PC's e impresoras, cableado y redes "),r.qZA(),r.TgZ(54,"p"),r._uU(55," Adem\xe1s de lo anterior, tambi\xe9n tuve la oportunidad de desarrollar una peque\xf1a aplicaci\xf3n web local de inventario para el \xe1rea inform\xe1tica de gendarmer\xeda, la cual fue desarrollada en Php y con base de datos MySQL "),r.qZA()()()())},directives:[nm,tm,yh,jd,Hd,pr,m],styles:[".exp-info[_ngcontent-%COMP%]{margin:1%;font-size:13px}"]}),a})();const uA=function(a){return{"image-active":a}};function hA(a,s){if(1&a&&r._UZ(0,"img",12),2&a){const t=s.$implicit,c=s.index,g=r.oxw(3);r.Q6J("src",t.imageSrc,r.LSH)("alt",t.imageAlt)("ngClass",r.VKq(3,uA,g.selectedIndex===c))}}const pA=function(a){return{active:a}};function fA(a,s){if(1&a){const t=r.EpF();r.TgZ(0,"span",15),r.NdJ("click",function(){const b=r.CHM(t).index;return r.oxw(4).selectImage(b)}),r.qZA()}if(2&a){const t=s.index,c=r.oxw(4);r.Q6J("ngClass",r.VKq(1,pA,c.selectedIndex===t))}}function mA(a,s){if(1&a&&(r.TgZ(0,"div",13),r.YNc(1,fA,1,3,"span",14),r.qZA()),2&a){const t=r.oxw(3);r.xp6(1),r.Q6J("ngForOf",t.images)}}function gA(a,s){if(1&a){const t=r.EpF();r.TgZ(0,"button",16),r.NdJ("click",function(){return r.CHM(t),r.oxw(3).onPrevClick()}),r._UZ(1,"i",17),r.qZA()}}function _A(a,s){if(1&a){const t=r.EpF();r.TgZ(0,"button",18),r.NdJ("click",function(){return r.CHM(t),r.oxw(3).onNextClick()}),r._UZ(1,"i",19),r.qZA()}}function yA(a,s){if(1&a&&(r.TgZ(0,"div",7),r.YNc(1,hA,1,5,"img",8),r.YNc(2,mA,2,1,"div",9),r.YNc(3,gA,2,0,"button",10),r.YNc(4,_A,2,0,"button",11),r.qZA()),2&a){const t=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",t.images),r.xp6(1),r.Q6J("ngIf",t.indicators),r.xp6(1),r.Q6J("ngIf",t.controls),r.xp6(1),r.Q6J("ngIf",t.controls)}}function xA(a,s){if(1&a&&(r.TgZ(0,"h5")(1,"a",20),r._uU(2,"Ver en GitHub"),r.qZA()()),2&a){const t=r.oxw().$implicit;r.xp6(1),r.s9C("href",t.github,r.LSH)}}function vA(a,s){if(1&a&&(r.TgZ(0,"div",1)(1,"div",2),r._uU(2),r.qZA(),r.TgZ(3,"div",3),r._uU(4),r.qZA(),r.YNc(5,yA,5,4,"div",4),r.TgZ(6,"div",5),r._uU(7),r.YNc(8,xA,3,1,"h5",6),r.qZA()()),2&a){const t=s.$implicit,c=r.oxw();r.xp6(2),r.hij(" ",t.titulo," "),r.xp6(2),r.hij(" ",t.subtitulo," "),r.xp6(1),r.Q6J("ngIf",c.images&&c.images.length>0),r.xp6(2),r.hij(" ",t.descripcion," "),r.xp6(1),r.Q6J("ngIf",t.github)}}let AA=(()=>{class a{constructor(){this.images=[],this.tarjetas=[],this.indicators=!0,this.controls=!0,this.autoSlide=!1,this.slideInterval=5e3,this.selectedIndex=0}ngOnInit(){this.autoSlide&&this.autoSlideImages()}autoSlideImages(){setInterval(()=>{this.onNextClick()},this.slideInterval)}selectImage(t){this.selectedIndex=t}onPrevClick(){0===this.selectedIndex?this.selectedIndex=this.images.length-1:this.selectedIndex--}onNextClick(){this.selectedIndex===this.images.length-1?this.selectedIndex=0:this.selectedIndex++}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["app-carousel"]],inputs:{images:"images",tarjetas:"tarjetas",indicators:"indicators",controls:"controls",autoSlide:"autoSlide",slideInterval:"slideInterval"},decls:1,vars:1,consts:[["class","tarjeta-container",4,"ngFor","ngForOf"],[1,"tarjeta-container"],[1,"tarjeta-titulo"],[1,"tarjeta-subtitulo"],["class","carousel-container",4,"ngIf"],[1,"descripcion-container"],[4,"ngIf"],[1,"carousel-container"],["class","fade",3,"src","alt","ngClass",4,"ngFor","ngForOf"],["class","carousel-dot-container",4,"ngIf"],["class","btn-carousel btn-prev",3,"click",4,"ngIf"],["class","btn-carousel btn-next",3,"click",4,"ngIf"],[1,"fade",3,"src","alt","ngClass"],[1,"carousel-dot-container"],["class","dot",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"dot",3,"ngClass","click"],[1,"btn-carousel","btn-prev",3,"click"],[1,"fas","fa-arrow-left","icon-carousel","icon-prev"],[1,"btn-carousel","btn-next",3,"click"],[1,"fas","fa-arrow-right","icon-carousel","icon-next"],["target","_blank",3,"href"]],template:function(t,c){1&t&&r.YNc(0,vA,9,5,"div",0),2&t&&r.Q6J("ngForOf",c.tarjetas)},directives:[$e.sg,$e.O5,$e.mk],styles:[".tarjeta-container[_ngcontent-%COMP%]{position:relative;margin:auto;text-align:center;max-width:700px;margin-bottom:1rem;box-shadow:0 0 3px 1px #dce1e1}.tarjeta-titulo[_ngcontent-%COMP%]{font-size:20px;font-weight:700;text-align:left;margin-left:15px;padding-top:15px}.tarjeta-subtitulo[_ngcontent-%COMP%]{font-size:15px;color:gray;text-align:left;margin-left:15px;padding-bottom:10px}.descripcion-container[_ngcontent-%COMP%]{text-align:justify;margin:0 auto;width:95%;margin-top:1rem;padding-bottom:10px}.carousel-container[_ngcontent-%COMP%]{position:relative;margin:auto;text-align:center;max-width:700px}.carousel-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none}.carousel-container[_ngcontent-%COMP%]   img.image-active[_ngcontent-%COMP%]{display:block;width:100%}.carousel-dot-container[_ngcontent-%COMP%]{position:absolute;right:0;left:0;bottom:0;display:flex;justify-content:center;padding:0;margin-bottom:1rem}.dot[_ngcontent-%COMP%]{cursor:pointer;height:13px;width:13px;margin:0 5px;background-color:#fff;border-radius:50%;display:inline-block;transition:opacity .6s ease;opacity:.5}.active[_ngcontent-%COMP%], .dot[_ngcontent-%COMP%]:hover{opacity:1}.fade[_ngcontent-%COMP%]{animation-name:fade;animation-duration:1.5s}@keyframes fade{0%{opacity:.4}to{opacity:1}}.btn-carousel[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;display:flex;align-items:center;justify-content:center;width:15%;padding:0;color:#fff;background:0 0;border:0;cursor:pointer}.icon-carousel[_ngcontent-%COMP%]{color:#000;opacity:.3;transition:all .15s ease}.icon-carousel[_ngcontent-%COMP%]:hover{opacity:1}.icon-carousel[_ngcontent-%COMP%]:active{opacity:.3}.icon-prev[_ngcontent-%COMP%]{font-size:40px}.btn-prev[_ngcontent-%COMP%]{left:0}.icon-next[_ngcontent-%COMP%]{font-size:40px}.btn-next[_ngcontent-%COMP%]{right:0}"]}),a})(),bA=(()=>{class a{constructor(){this.trabajosUnoImgs=[{imageSrc:"assets/portafolio/UNAB1.png",imageAlt:"UNAB1"},{imageSrc:"assets/portafolio/UNAB2.png",imageAlt:"UNAB2"},{imageSrc:"assets/portafolio/UNAB3.png",imageAlt:"UNAB3"},{imageSrc:"assets/portafolio/UNAB4.png",imageAlt:"UNAB4"}],this.trabajosUnoDesc=[{titulo:"Sitio de informaci\xf3n Contact Center UNAB",subtitulo:"Proyecto para Universidad Nacional Andr\xe9s Bello",descripcion:"\n                    Sitio desarrollado en Php y JavaScript, con Bootstrap y BBDD MySQL. Permite la mantenci\xf3n actualizada y centrada de informaci\xf3n a trav\xe9s de un CRUD, y a la vez\n                    su visualizaci\xf3n para sus usuarios a trav\xe9s de datatables y b\xfasquedas."}],this.trabajosDosImgs=[{imageSrc:"assets/portafolio/Landing1.png",imageAlt:"Landing1"},{imageSrc:"assets/portafolio/Landing2.png",imageAlt:"Landing2"},{imageSrc:"assets/portafolio/Landing3.png",imageAlt:"Landing3"}],this.trabajosDosDesc=[{titulo:"Landing Page",subtitulo:"Landing Page de muestra",descripcion:"\n                    Landing page con Html, Bootstrap y CSS b\xe1sico    \n                    ",github:"https://github.com/Piplash/Landing-Page"}],this.trabajosTresImgs=[{imageSrc:"assets/portafolio/Carousel1.png",imageAlt:"Carousel1"},{imageSrc:"assets/portafolio/Carousel2.png",imageAlt:"Carousel2"}],this.trabajosTresDesc=[{titulo:"Tarjeta con Carousel",subtitulo:"Proyecto Personal",descripcion:"\n                    Tarjeta con t\xedtulo, subt\xedtulo, descripci\xf3n y carousel con opciones de autoslide, botones e indicadores. Modificado de un proyecto ya existente    \n                    ",github:"https://github.com/Piplash/Tarjeta-Con-Carousel"}],this.trabajosCuatroImgs=[{imageSrc:"assets/portafolio/AsukaDaily1.png",imageAlt:"Twitter-Bot1"},{imageSrc:"assets/portafolio/AsukaDaily2.png",imageAlt:"Twitter-Bot2"},{imageSrc:"assets/portafolio/AsukaDaily3.png",imageAlt:"Twitter-Bot3"}],this.trabajosCuatroDesc=[{titulo:"Twitter Bot",subtitulo:"Proyecto Personal",descripcion:"\n                    Bot de Twitter desarrollado en JavaScript y alojado en Heroku. Postea im\xe1genes cada 5 horas y entrega un saludo especial los d\xedas Jueves    \n                    ",github:"https://github.com/Piplash/Asuka-Twitter-Bot"}]}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["app-portafolio"]],decls:19,vars:12,consts:[[3,"images","tarjetas","indicators"]],template:function(t,c){1&t&&(r.TgZ(0,"h2"),r._uU(1,"Algunos de mis trabajos"),r.qZA(),r._UZ(2,"hr")(3,"br")(4,"br")(5,"app-carousel",0)(6,"br")(7,"mat-divider")(8,"br")(9,"app-carousel",0)(10,"br")(11,"mat-divider")(12,"br")(13,"app-carousel",0)(14,"br")(15,"mat-divider")(16,"br")(17,"app-carousel",0)(18,"br")),2&t&&(r.xp6(5),r.Q6J("images",c.trabajosUnoImgs)("tarjetas",c.trabajosUnoDesc)("indicators",!1),r.xp6(4),r.Q6J("images",c.trabajosDosImgs)("tarjetas",c.trabajosDosDesc)("indicators",!1),r.xp6(4),r.Q6J("images",c.trabajosTresImgs)("tarjetas",c.trabajosTresDesc)("indicators",!1),r.xp6(4),r.Q6J("images",c.trabajosCuatroImgs)("tarjetas",c.trabajosCuatroDesc)("indicators",!1))},directives:[AA,m],encapsulation:2}),a})();var R_=mt(9898),wA=mt(2340);const CA=[{path:"",component:hy,children:[{path:"sobre-mi",component:(()=>{class a{constructor(){}ngOnInit(){R_.accessToken=wA.N.mapboxToken,new R_.Map({container:"mapbox",style:"mapbox://styles/mapbox/streets-v11",center:[-70.743687388299,-34.17532875660385],zoom:15,minZoom:14,maxZoom:16})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["app-sobre-mi"]],decls:57,vars:0,consts:[[1,"container-fxLayout"],["fxFlex","","fxLayout","row","fxLayout.sm","column","fxLayout.xs","column"],["fxFlex.gt-sm","25%",1,"sobre-mi-img"],["src","./assets/piplash.png",1,"imagenPerfil"],[1,"encuentrame"],["href","https://www.linkedin.com/in/felipe-acosta-991689195/","target","_blank"],["src","./assets/linkedin.png","alt","",1,"imagenEncuentrame"],["href","https://github.com/Piplash?tab=repositories","target","_blank"],["src","./assets/github.png","alt","",1,"imagenEncuentrame"],["href","cv-clasico"],["src","./assets/cv.png","alt","",1,"imagenEncuentrame"],["fxFlex.gt-sm","75%",1,"sobre-mi-desc"],["fxFlex.gt-sm","50%",1,"lista-informacion"],[1,"informacion-adicional"],["mat-subheader",""],["mat-list-icon",""],["role","listitem"]],template:function(t,c){1&t&&(r.TgZ(0,"h2"),r._uU(1,"Sobre mi"),r.qZA(),r._UZ(2,"hr"),r.TgZ(3,"div",0)(4,"div",1)(5,"div",2),r._UZ(6,"img",3),r.TgZ(7,"div",4)(8,"a",5),r._UZ(9,"img",6),r.qZA(),r.TgZ(10,"a",7),r._UZ(11,"img",8),r.qZA(),r.TgZ(12,"a",9),r._UZ(13,"img",10),r.qZA()()(),r.TgZ(14,"div",11)(15,"p"),r._uU(16," Mi nombre es Felipe Acosta y soy Desarrollador Web titulado del Instituto Profesional INACAP. Soy una persona proactiva, comprometida y siempre dispuesta a aprender y perfeccionarse. Dentro del Desarrollo Web, lo que me mueve es el Front-End y es por lo mismo que poseo conocimientos en Html, JavaScript, TypeScript, CSS, Angular y Bootstrap. "),r.qZA(),r.TgZ(17,"p"),r._uU(18," Me agradan los sitios sencillos, limpios y el c\xf3digo ordenado. La idea de plasmar visualmente lo requerido, ya sea desde cero o a trav\xe9s de modificaciones, y ver c\xf3mo el c\xf3digo poco a poco cobra vida, es lo que me motiva. "),r.qZA(),r.TgZ(19,"p"),r._uU(20," \xbfEn cuanto a m\xed? Me gustan los gatos, el t\xe9 cuando hace fr\xedo y jugar "),r.TgZ(21,"i"),r._uU(22,"souls like games"),r.qZA(),r._uU(23,". "),r.qZA()()()(),r.TgZ(24,"h2"),r._uU(25," Informaci\xf3n Adicional "),r.qZA(),r._UZ(26,"hr"),r.TgZ(27,"div",0)(28,"div",1)(29,"div",12)(30,"mat-list",13)(31,"div",14),r._uU(32,"Contacto"),r.qZA(),r.TgZ(33,"mat-list-item")(34,"mat-icon",15),r._uU(35,"phone_android"),r.qZA(),r.TgZ(36,"mat-list-item",16),r._uU(37,"Celular: +56 9 6352 1554"),r.qZA()(),r.TgZ(38,"mat-list-item")(39,"mat-icon",15),r._uU(40,"alternate_email"),r.qZA(),r.TgZ(41,"mat-list-item",16),r._uU(42,"Correo Electr\xf3nico: fibacosta@gmail.com"),r.qZA()()()(),r.TgZ(43,"div",12)(44,"mat-list")(45,"div",14),r._uU(46," Personales "),r.qZA(),r.TgZ(47,"mat-list-item")(48,"mat-icon",15),r._uU(49,"cake"),r.qZA(),r.TgZ(50,"mat-list-item",16),r._uU(51,"Fecha de Nacimiento: Abril de 1993."),r.qZA()(),r.TgZ(52,"mat-list-item")(53,"mat-icon",15),r._uU(54,"home"),r.qZA(),r.TgZ(55,"mat-list-item",16),r._uU(56,"Ubicaci\xf3n: Regi\xf3n del Libertador Bernardo O'Higgins, Chile"),r.qZA()()()()()())},directives:[nm,tm,yh,jd,Hd,Js,Dc],styles:[".container-fxLayout[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:30px;font-size:15px}.imagenPerfil[_ngcontent-%COMP%]{max-width:100%;max-height:100%;border-radius:50%}.imagenEncuentrame[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;max-width:100%;max-height:100%}.sobre-mi-img[_ngcontent-%COMP%]{text-align:center}.encuentrame[_ngcontent-%COMP%]{height:50px}.sobre-mi-desc[_ngcontent-%COMP%]{margin:5%}.lista-informacion[_ngcontent-%COMP%]{max-width:100%}"]}),a})()},{path:"estudios",component:cA},{path:"experiencia-laboral",component:dA},{path:"portafolio",component:bA},{path:"cv-clasico",component:sv},{path:"**",redirectTo:"sobre-mi"}]}];let MA=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[ke.Bz.forChild(CA)],ke.Bz]}),a})(),j_=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[pi]]}),a})(),Yb=(()=>{class a{constructor(t,c){(0,$e.PM)(c)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,c=[]){return{ngModule:a,providers:t.serverLoaded?[{provide:Dt,useValue:Object.assign(Object.assign({},St),t)},{provide:Zt,useValue:c,multi:!0},{provide:zt,useValue:!0}]:[{provide:Dt,useValue:Object.assign(Object.assign({},St),t)},{provide:Zt,useValue:c,multi:!0}]}}}return a.\u0275fac=function(t){return new(t||a)(r.LFG(zt),r.LFG(r.Lbi))},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[L_,C_,j_],L_,C_,j_]}),a})(),Qb=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[Te,$e.ez,MA,Yb,ye,av,ke.Bz]]}),a})()},9898:function(zg){zg.exports=function(){"use strict";var hs,mt,$e;function r(h,Oe){if(hs)if(mt){var tr="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+hs+")(sharedChunk); ("+mt+")(sharedChunk); self.onerror = null;",Ci={};hs(Ci),$e=Oe(Ci),"undefined"!=typeof window&&window&&window.URL&&window.URL.createObjectURL&&($e.workerUrl=window.URL.createObjectURL(new Blob([tr],{type:"text/javascript"})))}else mt=Oe;else hs=Oe}return r(0,function(h){var Oe="undefined"!=typeof self?self:{},tr=Ci;function Ci(n,e,o,l){this.cx=3*n,this.bx=3*(o-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(l-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=l,this.p2x=o,this.p2y=l}Ci.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n},Ci.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n},Ci.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},Ci.prototype.solveCurveX=function(n,e){var o,l,u,f,_;for(void 0===e&&(e=1e-6),u=n,_=0;_<8;_++){if(f=this.sampleCurveX(u)-n,Math.abs(f)<e)return u;var x=this.sampleCurveDerivativeX(u);if(Math.abs(x)<1e-6)break;u-=f/x}if((u=n)<(o=0))return o;if(u>(l=1))return l;for(;o<l;){if(f=this.sampleCurveX(u),Math.abs(f-n)<e)return u;n>f?o=u:l=u,u=.5*(l-o)+o}return u},Ci.prototype.solve=function(n,e){return this.sampleCurveY(this.solveCurveX(n,e))};var Ue=gt;function gt(n,e){this.x=n,this.y=e}gt.prototype={clone:function(){return new gt(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,e){return this.clone()._rotateAround(n,e)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var e=n.x-this.x,o=n.y-this.y;return e*e+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,e){return Math.atan2(this.x*e-this.y*n,this.x*n+this.y*e)},_matMult:function(n){var e=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=e,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var e=Math.cos(n),o=Math.sin(n),l=o*this.x+e*this.y;return this.x=e*this.x-o*this.y,this.y=l,this},_rotateAround:function(n,e){var o=Math.cos(n),l=Math.sin(n),u=e.y+l*(this.x-e.x)+o*(this.y-e.y);return this.x=e.x+o*(this.x-e.x)-l*(this.y-e.y),this.y=u,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},gt.convert=function(n){return n instanceof gt?n:Array.isArray(n)?new gt(n[0],n[1]):n};const fn=Math.PI/180,bn=180/Math.PI;function st(n){return n*fn}function Xi(n){return n*bn}const so=[[0,0],[1,0],[1,1],[0,1]];function Tr(n){if(n<=0)return 0;if(n>=1)return 1;const e=n*n,o=e*n;return 4*(n<.5?o:3*(n-e)+o-.75)}function Er(n,e,o,l){const u=new tr(n,e,o,l);return function(f){return u.solve(f)}}const Xn=Er(.25,.1,.25,1);function _t(n,e,o){return Math.min(o,Math.max(e,n))}function rn(n,e,o){return(o=_t((o-n)/(e-n),0,1))*o*(3-2*o)}function Rn(n,e,o){const l=o-e,u=((n-e)%l+l)%l+e;return u===e?o:u}function an(n,e,o){if(!n.length)return o(null,[]);let l=n.length;const u=new Array(n.length);let f=null;n.forEach((_,x)=>{e(_,(A,w)=>{A&&(f=A),u[x]=w,0==--l&&o(f,u)})})}function ir(n){const e=[];for(const o in n)e.push(n[o]);return e}function fi(n,...e){for(const o of e)for(const l in o)n[l]=o[l];return n}let ya=1;function Sr(){return ya++}function Dr(){return function n(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,n)}()}function Tl(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Jn(n){return!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n)}function Kn(n,e){n.forEach(o=>{e[o]&&(e[o]=e[o].bind(e))})}function wt(n,e){return-1!==n.indexOf(e,n.length-e.length)}function Bi(n,e,o){const l={};for(const u in n)l[u]=e.call(o||this,n[u],u,n);return l}function Io(n,e,o){const l={};for(const u in n)e.call(o||this,n[u],u,n)&&(l[u]=n[u]);return l}function vi(n){return Array.isArray(n)?n.map(vi):"object"==typeof n&&n?Bi(n,vi):n}const ps={};function Ai(n){ps[n]||("undefined"!=typeof console&&console.warn(n),ps[n]=!0)}function Gi(n,e,o){return(o.y-n.y)*(e.x-n.x)>(e.y-n.y)*(o.x-n.x)}function Fo(n){let e=0;for(let o,l,u=0,f=n.length,_=f-1;u<f;_=u++)o=n[u],l=n[_],e+=(l.x-o.x)*(o.y+l.y);return e}function Ji(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function lo(n){const e={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,l,u,f)=>{const _=u||f;return e[l]=!_||_.toLowerCase(),""}),e["max-age"]){const o=parseInt(e["max-age"],10);isNaN(o)?delete e["max-age"]:e["max-age"]=o}return e}let co=null;function Br(n){if(null==co){const e=n.navigator?n.navigator.userAgent:null;co=!!n.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return co}function fs(n){try{const e=Oe[n];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(e){return!1}}function Lo(n,e){return[n[4*e],n[4*e+1],n[4*e+2],n[4*e+3]]}const xa=Oe.performance;function $n(n){const e=n?n.url.toString():void 0;return xa.getEntriesByName(e)}let Lt,uo,nr,wn;const sn={now:()=>void 0!==nr?nr:Oe.performance.now(),setNow(n){nr=n},restoreNow(){nr=void 0},frame(n){const e=Oe.requestAnimationFrame(n);return{cancel:()=>Oe.cancelAnimationFrame(e)}},getImageData(n,e=0){const{width:o,height:l}=n;wn||(wn=Oe.document.createElement("canvas"));const u=wn.getContext("2d");if(!u)throw new Error("failed to create canvas 2d context");return(o>wn.width||l>wn.height)&&(wn.width=o,wn.height=l),u.clearRect(-e,-e,o+2*e,l+2*e),u.drawImage(n,0,0,o,l),u.getImageData(-e,-e,o+2*e,l+2*e)},resolveURL:n=>(Lt||(Lt=Oe.document.createElement("a")),Lt.href=n,Lt.href),get devicePixelRatio(){return Oe.devicePixelRatio},get prefersReducedMotion(){return!!Oe.matchMedia&&(null==uo&&(uo=Oe.matchMedia("(prefers-reduced-motion: reduce)")),uo.matches)}};let Ro;const Tt={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==Ro){const n=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Ro=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):n}catch(e){Ro=n}}return Ro},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},or={supported:!1,testSupport:function(n){!Pr&&zo&&(Ir?ms(n):Oo=n)}};let Oo,zo,Pr=!1,Ir=!1;function ms(n){const e=n.createTexture();n.bindTexture(n.TEXTURE_2D,e);try{if(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,zo),n.isContextLost())return;or.supported=!0}catch(o){}n.deleteTexture(e),Pr=!0}Oe.document&&(zo=Oe.document.createElement("img"),zo.onload=function(){Oo&&ms(Oo),Oo=null,Ir=!0},zo.onerror=function(){Pr=!0,Oo=null},zo.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const gs="01",Cn="NO_ACCESS_TOKEN";function ho(n){return 0===n.indexOf("mapbox:")}function Fr(n){return Tt.API_URL_REGEX.test(n)}const El=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Mn(n){const e=n.match(El);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Vo(n){const e=n.params.length?`?${n.params.join("&")}`:"";return`${n.protocol}://${n.authority}${n.path}${e}`}function _s(n){if(!n)return null;const e=n.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(Oe.atob(e[1]).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch(o){return null}}class ys{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const o=_s(Tt.ACCESS_TOKEN);let l="";return l=o&&o.u?Oe.btoa(encodeURIComponent(o.u).replace(/%([0-9A-F]{2})/g,(u,f)=>String.fromCharCode(Number("0x"+f)))):Tt.ACCESS_TOKEN||"",e?`mapbox.eventData.${e}:${l}`:`mapbox.eventData:${l}`}fetchEventData(){const e=fs("localStorage"),o=this.getStorageKey(),l=this.getStorageKey("uuid");if(e)try{const u=Oe.localStorage.getItem(o);u&&(this.eventData=JSON.parse(u));const f=Oe.localStorage.getItem(l);f&&(this.anonId=f)}catch(u){Ai("Unable to read from LocalStorage")}}saveEventData(){const e=fs("localStorage"),o=this.getStorageKey(),l=this.getStorageKey("uuid");if(e)try{Oe.localStorage.setItem(l,this.anonId),Object.keys(this.eventData).length>=1&&Oe.localStorage.setItem(o,JSON.stringify(this.eventData))}catch(u){Ai("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,o,l,u){if(!Tt.EVENTS_URL)return;const f=Mn(Tt.EVENTS_URL);f.params.push(`access_token=${u||Tt.ACCESS_TOKEN||""}`);const _={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"2.9.1",skuId:gs,userId:this.anonId},x=o?fi(_,o):_,A={url:Vo(f),headers:{"Content-Type":"text/plain"},body:JSON.stringify([x])};this.pendingRequest=xe(A,w=>{this.pendingRequest=null,l(w),this.saveEventData(),this.processRequests(u)})}queueRequest(e,o){this.queue.push(e),this.processRequests(o)}}const xs=new class extends ys{constructor(n){super("appUserTurnstile"),this._customAccessToken=n}postTurnstileEvent(n,e){Tt.EVENTS_URL&&Tt.ACCESS_TOKEN&&Array.isArray(n)&&n.some(o=>ho(o)||Fr(o))&&this.queueRequest(Date.now(),e)}processRequests(n){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=_s(Tt.ACCESS_TOKEN),o=e?e.u:Tt.ACCESS_TOKEN;let l=o!==this.eventData.tokenU;Jn(this.anonId)||(this.anonId=Dr(),l=!0);const u=this.queue.shift();if(this.eventData.lastSuccess){const f=new Date(this.eventData.lastSuccess),_=new Date(u),x=(u-this.eventData.lastSuccess)/864e5;l=l||x>=1||x<-1||f.getDate()!==_.getDate()}else l=!0;l?this.postEvent(u,{"enabled.telemetry":!1},f=>{f||(this.eventData.lastSuccess=u,this.eventData.tokenU=o)},n):this.processRequests()}},vs=xs.postTurnstileEvent.bind(xs),As=new class extends ys{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(n,e,o,l){this.skuToken=e,this.errorCb=l,Tt.EVENTS_URL&&(o||Tt.ACCESS_TOKEN?this.queueRequest({id:n,timestamp:Date.now()},o):this.errorCb(new Error(Cn)))}processRequests(n){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:o}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),Jn(this.anonId)||(this.anonId=Dr()),this.postEvent(o,{skuToken:this.skuToken},l=>{l?this.errorCb(l):e&&(this.success[e]=!0)},n))}},va=As.postMapLoadEvent.bind(As),Sl=new class extends ys{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(n,e,o,l){if(!Tt.API_URL||!Tt.SESSION_PATH)return;const u=Mn(Tt.API_URL+Tt.SESSION_PATH);u.params.push(`sku=${e||""}`),u.params.push(`access_token=${l||Tt.ACCESS_TOKEN||""}`);const f={url:Vo(u),headers:{"Content-Type":"text/plain"}};this.pendingRequest=De(f,_=>{this.pendingRequest=null,o(_),this.saveEventData(),this.processRequests(l)})}getSessionAPI(n,e,o,l){this.skuToken=e,this.errorCb=l,Tt.SESSION_PATH&&Tt.API_URL&&(o||Tt.ACCESS_TOKEN?this.queueRequest({id:n,timestamp:Date.now()},o):this.errorCb(new Error(Cn)))}processRequests(n){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:o}=this.queue.shift();e&&this.success[e]||this.getSession(o,this.skuToken,l=>{l?this.errorCb(l):e&&(this.success[e]=!0)},n)}},jc=Sl.getSessionAPI.bind(Sl),rr=new Set;let No,Aa=500,Dl=50,mn={};function bs(n){const e=R(n);let o,l;e&&e.forEach(f=>{const _=f.split("=");"language"===_[0]?o=_[1]:"worldview"===_[0]&&(l=_[1])});let u="mapbox-tiles";return o&&(u+=`-${o}`),l&&(u+=`-${l}`),u}function X(n){Oe.caches&&!mn[n]&&(mn[n]=Oe.caches.open(n))}function R(n){const e=n.indexOf("?");return e>0?n.slice(e+1).split("&"):[]}function O(n){const e=n.indexOf("?");if(e<0)return n;const o=R(n).filter(l=>{const u=l.split("=");return"language"===u[0]||"worldview"===u[0]});return o.length?`${n.slice(0,e)}?${o.join("&")}`:n.slice(0,e)}let Y=1/0;const ee={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ee);class le extends Error{constructor(e,o,l){401===o&&Fr(l)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(e),this.status=o,this.url=l}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const me=Ji()?()=>self.worker&&self.worker.referrer:()=>("blob:"===Oe.location.protocol?Oe.parent:Oe).location.href,pe=function(n,e){if(!(/^file:/.test(o=n.url)||/^file:/.test(me())&&!/^\w+:/.test(o))){if(Oe.fetch&&Oe.Request&&Oe.AbortController&&Oe.Request.prototype.hasOwnProperty("signal"))return function(l,u){const f=new Oe.AbortController,_=new Oe.Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:me(),signal:f.signal});let x=!1,A=!1;const w=(T=_.url).indexOf("sku=")>0&&Fr(T);var T;"json"===l.type&&_.headers.set("Accept","application/json");const S=(P,F,z)=>{if(A)return;if(P&&"SecurityError"!==P.message&&Ai(P),F&&z)return D(F);const q=Date.now();Oe.fetch(_).then(W=>{if(W.ok){const re=w?W.clone():null;return D(W,re,q)}return u(new le(W.statusText,W.status,l.url))}).catch(W=>{20!==W.code&&u(new Error(W.message))})},D=(P,F,z)=>{("arrayBuffer"===l.type?P.arrayBuffer():"json"===l.type?P.json():P.text()).then(q=>{A||(F&&z&&function(W,re,oe){const ae=bs(W.url);if(X(ae),!mn[ae])return;const ce={status:re.status,statusText:re.statusText,headers:new Oe.Headers};re.headers.forEach((be,Se)=>ce.headers.set(Se,be));const ue=lo(re.headers.get("Cache-Control")||"");if(ue["no-store"])return;ue["max-age"]&&ce.headers.set("Expires",new Date(oe+1e3*ue["max-age"]).toUTCString());const Ae=ce.headers.get("Expires");Ae&&(new Date(Ae).getTime()-oe<42e4||function(be,Se){if(void 0===No)try{new Response(new ReadableStream),No=!0}catch(Ie){No=!1}No?Se(be.body):be.blob().then(Se)}(re,be=>{const Se=new Oe.Response(be,ce);X(ae),mn[ae]&&mn[ae].then(Ie=>Ie.put(O(W.url),Se)).catch(Ie=>Ai(Ie.message))}))}(_,F,z),x=!0,u(null,q,P.headers.get("Cache-Control"),P.headers.get("Expires")))}).catch(q=>{A||u(new Error(q.message))})};return w?function(P,F){const z=bs(P.url);if(X(z),!mn[z])return F(null);const q=O(P.url);mn[z].then(W=>{W.match(q).then(re=>{const oe=function(ae){if(!ae)return!1;const ce=new Date(ae.headers.get("Expires")||0),ue=lo(ae.headers.get("Cache-Control")||"");return ce>Date.now()&&!ue["no-cache"]}(re);W.delete(q),oe&&W.put(q,re.clone()),F(null,re,oe)}).catch(F)}).catch(F)}(_,S):S(null,null),{cancel:()=>{A=!0,x||f.abort()}}}(n,e);if(Ji()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",n,e,void 0,!0)}var o;return function(l,u){const f=new Oe.XMLHttpRequest;f.open(l.method||"GET",l.url,!0),"arrayBuffer"===l.type&&(f.responseType="arraybuffer");for(const _ in l.headers)f.setRequestHeader(_,l.headers[_]);return"json"===l.type&&(f.responseType="text",f.setRequestHeader("Accept","application/json")),f.withCredentials="include"===l.credentials,f.onerror=()=>{u(new Error(f.statusText))},f.onload=()=>{if((f.status>=200&&f.status<300||0===f.status)&&null!==f.response){let _=f.response;if("json"===l.type)try{_=JSON.parse(f.response)}catch(x){return u(x)}u(null,_,f.getResponseHeader("Cache-Control"),f.getResponseHeader("Expires"))}else u(new le(f.statusText,f.status,l.url))},f.send(l.body),{cancel:()=>f.abort()}}(n,e)},de=function(n,e){return pe(fi(n,{type:"arrayBuffer"}),e)},xe=function(n,e){return pe(fi(n,{method:"POST"}),e)},De=function(n,e){return pe(fi(n,{method:"GET"}),e)};function We(n){const e=Oe.document.createElement("a");return e.href=n,e.protocol===Oe.document.location.protocol&&e.host===Oe.document.location.host}const Pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let nt,at;nt=[],at=0;const ot=function(n,e){if(or.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),at>=Tt.MAX_PARALLEL_IMAGE_REQUESTS){const f={requestParameters:n,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return nt.push(f),f}at++;let o=!1;const l=()=>{if(!o)for(o=!0,at--;nt.length&&at<Tt.MAX_PARALLEL_IMAGE_REQUESTS;){const f=nt.shift(),{requestParameters:_,callback:x,cancelled:A}=f;A||(f.cancel=ot(_,x).cancel)}},u=de(n,(f,_,x,A)=>{l(),f?e(f):_&&(Oe.createImageBitmap?function(w,T){const S=new Oe.Blob([new Uint8Array(w)],{type:"image/png"});Oe.createImageBitmap(S).then(D=>{T(null,D)}).catch(D=>{T(new Error(`Could not load image because of ${D.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(_,(w,T)=>e(w,T,x,A)):function(w,T){const S=new Oe.Image,D=Oe.URL;S.onload=()=>{T(null,S),D.revokeObjectURL(S.src),S.onload=null,Oe.requestAnimationFrame(()=>{S.src=Pe})},S.onerror=()=>T(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const P=new Oe.Blob([new Uint8Array(w)],{type:"image/png"});S.src=w.byteLength?D.createObjectURL(P):Pe}(_,(w,T)=>e(w,T,x,A)))});return{cancel:()=>{u.cancel(),l()}}};function ct(n,e,o){o[n]&&-1!==o[n].indexOf(e)||(o[n]=o[n]||[],o[n].push(e))}function At(n,e,o){if(o&&o[n]){const l=o[n].indexOf(e);-1!==l&&o[n].splice(l,1)}}class Nt{constructor(e,o={}){fi(this,o),this.type=e}}class ii extends Nt{constructor(e,o={}){super("error",fi({error:e},o))}}class jt{on(e,o){return this._listeners=this._listeners||{},ct(e,o,this._listeners),this}off(e,o){return At(e,o,this._listeners),At(e,o,this._oneTimeListeners),this}once(e,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},ct(e,o,this._oneTimeListeners),this):new Promise(l=>this.once(e,l))}fire(e,o){"string"==typeof e&&(e=new Nt(e,o||{}));const l=e.type;if(this.listens(l)){e.target=this;const u=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(const x of u)x.call(this,e);const f=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(const x of f)At(l,x,this._oneTimeListeners),x.call(this,e);const _=this._eventedParent;_&&(fi(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),_.fire(e))}else e instanceof ii&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,o){return this._eventedParent=e,this._eventedParentData=o,this}}var fe=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Tn(n,...e){for(const o of e)for(const l in o)n[l]=o[l];return n}function ci(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function On(n){if(Array.isArray(n))return n.map(On);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const o in n)e[o]=On(n[o]);return e}return ci(n)}class ip extends Error{constructor(e,o){super(o),this.message=o,this.key=e}}var En=ip;class Bl{constructor(e,o=[]){this.parent=e,this.bindings={};for(const[l,u]of o)this.bindings[l]=u}concat(e){return new Bl(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var fu=Bl;const ws={kind:"null"},Qe={kind:"number"},kt={kind:"string"},bt={kind:"boolean"},eo={kind:"color"},Lr={kind:"object"},yt={kind:"value"},Uo={kind:"collator"},ba={kind:"formatted"},Cs={kind:"resolvedImage"};function zn(n,e){return{kind:"array",itemType:n,N:e}}function di(n){if("array"===n.kind){const e=di(n.itemType);return"number"==typeof n.N?`array<${e}, ${n.N}>`:"value"===n.itemType.kind?"array":`array<${e}>`}return n.kind}const mu=[ws,Qe,kt,bt,eo,ba,Lr,zn(yt),Cs];function wa(n,e){if("error"===e.kind)return null;if("array"===n.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!wa(n.itemType,e.itemType))&&("number"!=typeof n.N||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if("value"===n.kind)for(const o of mu)if(!wa(o,e))return null}return`Expected ${di(n)} but found ${di(e)} instead.`}function kl(n,e){return e.some(o=>o.kind===n.kind)}function Ca(n,e){return e.some(o=>"null"===o?null===n:"array"===o?Array.isArray(n):"object"===o?n&&!Array.isArray(n)&&"object"==typeof n:o===typeof n)}function Ma(n){var e={exports:{}};return n(e,e.exports),e.exports}var gu=Ma(function(n,e){var o={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function l(x){return(x=Math.round(x))<0?0:x>255?255:x}function u(x){return l("%"===x[x.length-1]?parseFloat(x)/100*255:parseInt(x))}function f(x){return(A="%"===x[x.length-1]?parseFloat(x)/100:parseFloat(x))<0?0:A>1?1:A;var A}function _(x,A,w){return w<0?w+=1:w>1&&(w-=1),6*w<1?x+(A-x)*w*6:2*w<1?A:3*w<2?x+(A-x)*(2/3-w)*6:x}try{e.parseCSSColor=function(x){var A,w=x.replace(/ /g,"").toLowerCase();if(w in o)return o[w].slice();if("#"===w[0])return 4===w.length?(A=parseInt(w.substr(1),16))>=0&&A<=4095?[(3840&A)>>4|(3840&A)>>8,240&A|(240&A)>>4,15&A|(15&A)<<4,1]:null:7===w.length&&(A=parseInt(w.substr(1),16))>=0&&A<=16777215?[(16711680&A)>>16,(65280&A)>>8,255&A,1]:null;var T=w.indexOf("("),S=w.indexOf(")");if(-1!==T&&S+1===w.length){var D=w.substr(0,T),P=w.substr(T+1,S-(T+1)).split(","),F=1;switch(D){case"rgba":if(4!==P.length)return null;F=f(P.pop());case"rgb":return 3!==P.length?null:[u(P[0]),u(P[1]),u(P[2]),F];case"hsla":if(4!==P.length)return null;F=f(P.pop());case"hsl":if(3!==P.length)return null;var z=(parseFloat(P[0])%360+360)%360/360,q=f(P[1]),W=f(P[2]),re=W<=.5?W*(q+1):W+q-W*q,oe=2*W-re;return[l(255*_(oe,re,z+1/3)),l(255*_(oe,re,z)),l(255*_(oe,re,z-1/3)),F];default:return null}}return null}}catch(x){}});class ki{constructor(e,o,l,u=1){this.r=e,this.g=o,this.b=l,this.a=u}static parse(e){if(!e)return;if(e instanceof ki)return e;if("string"!=typeof e)return;const o=gu.parseCSSColor(e);return o?new ki(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[e,o,l,u]=this.toArray();return`rgba(${Math.round(e)},${Math.round(o)},${Math.round(l)},${u})`}toArray(){const{r:e,g:o,b:l,a:u}=this;return 0===u?[0,0,0,0]:[255*e/u,255*o/u,255*l/u,u]}toArray01(){const{r:e,g:o,b:l,a:u}=this;return 0===u?[0,0,0,0]:[e/u,o/u,l/u,u]}toArray01PremultipliedAlpha(){const{r:e,g:o,b:l,a:u}=this;return[e,o,l,u]}}ki.black=new ki(0,0,0,1),ki.white=new ki(1,1,1,1),ki.transparent=new ki(0,0,0,0),ki.red=new ki(1,0,0,1),ki.blue=new ki(0,0,1,1);var bi=ki;class Vn{constructor(e,o,l){this.sensitivity=e?o?"variant":"case":o?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,o){return this.collator.compare(e,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Hc{constructor(e,o,l,u,f){this.text=e.normalize?e.normalize():e,this.image=o,this.scale=l,this.fontStack=u,this.textColor=f}}class Ki{constructor(e){this.sections=e}static fromString(e){return new Ki([new Hc(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof Ki?e:Ki.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const o of this.sections){if(o.image){e.push(["image",o.image.name]);continue}e.push(o.text);const l={};o.fontStack&&(l["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(l["font-scale"]=o.scale),o.textColor&&(l["text-color"]=["rgba"].concat(o.textColor.toArray())),e.push(l)}return e}}class Nn{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Nn({name:e,available:!1}):null}serialize(){return["image",this.name]}}function Pl(n,e,o,l){return"number"==typeof n&&n>=0&&n<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof o&&o>=0&&o<=255?void 0===l||"number"==typeof l&&l>=0&&l<=1?null:`Invalid rgba value [${[n,e,o,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof l?[n,e,o,l]:[n,e,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ms(n){if(null===n||"string"==typeof n||"boolean"==typeof n||"number"==typeof n||n instanceof bi||n instanceof Vn||n instanceof Ki||n instanceof Nn)return!0;if(Array.isArray(n)){for(const e of n)if(!Ms(e))return!1;return!0}if("object"==typeof n){for(const e in n)if(!Ms(n[e]))return!1;return!0}return!1}function mi(n){if(null===n)return ws;if("string"==typeof n)return kt;if("boolean"==typeof n)return bt;if("number"==typeof n)return Qe;if(n instanceof bi)return eo;if(n instanceof Vn)return Uo;if(n instanceof Ki)return ba;if(n instanceof Nn)return Cs;if(Array.isArray(n)){const e=n.length;let o;for(const l of n){const u=mi(l);if(o){if(o===u)continue;o=yt;break}o=u}return zn(o||yt,e)}return Lr}function Rr(n){const e=typeof n;return null===n?"":"string"===e||"number"===e||"boolean"===e?String(n):n instanceof bi||n instanceof Ki||n instanceof Nn?n.toString():JSON.stringify(n)}class qc{constructor(e,o){this.type=e,this.value=o}static parse(e,o){if(2!==e.length)return o.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Ms(e[1]))return o.error("invalid value");const l=e[1];let u=mi(l);const f=o.expectedType;return"array"!==u.kind||0!==u.N||!f||"array"!==f.kind||"number"==typeof f.N&&0!==f.N||(u=f),new qc(u,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof bi?["rgba"].concat(this.value.toArray()):this.value instanceof Ki?this.value.serialize():this.value}}var Ts=qc,Zi=class{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}};const Il={string:kt,number:Qe,boolean:bt,object:Lr};class Es{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");let l,u=1;const f=e[0];if("array"===f){let x,A;if(e.length>2){const w=e[1];if("string"!=typeof w||!(w in Il)||"object"===w)return o.error('The item type argument of "array" must be one of string, number, boolean',1);x=Il[w],u++}else x=yt;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return o.error('The length argument to "array" must be a positive integer literal',2);A=e[2],u++}l=zn(x,A)}else l=Il[f];const _=[];for(;u<e.length;u++){const x=o.parse(e[u],u,yt);if(!x)return null;_.push(x)}return new Es(l,_)}evaluate(e){for(let o=0;o<this.args.length;o++){const l=this.args[o].evaluate(e);if(!wa(this.type,mi(l)))return l;if(o===this.args.length-1)throw new Zi(`Expected value to be of type ${di(this.type)}, but found ${di(mi(l))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,o=[e.kind];if("array"===e.kind){const l=e.itemType;if("string"===l.kind||"number"===l.kind||"boolean"===l.kind){o.push(l.kind);const u=e.N;("number"==typeof u||this.args.length>1)&&o.push(u)}}return o.concat(this.args.map(l=>l.serialize()))}}var Go=Es;class ar{constructor(e){this.type=ba,this.sections=e}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");const l=e[1];if(!Array.isArray(l)&&"object"==typeof l)return o.error("First argument must be an image or text section.");const u=[];let f=!1;for(let _=1;_<=e.length-1;++_){const x=e[_];if(f&&"object"==typeof x&&!Array.isArray(x)){f=!1;let A=null;if(x["font-scale"]&&(A=o.parse(x["font-scale"],1,Qe),!A))return null;let w=null;if(x["text-font"]&&(w=o.parse(x["text-font"],1,zn(kt)),!w))return null;let T=null;if(x["text-color"]&&(T=o.parse(x["text-color"],1,eo),!T))return null;const S=u[u.length-1];S.scale=A,S.font=w,S.textColor=T}else{const A=o.parse(e[_],1,yt);if(!A)return null;const w=A.type.kind;if("string"!==w&&"value"!==w&&"null"!==w&&"resolvedImage"!==w)return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,u.push({content:A,scale:null,font:null,textColor:null})}}return new ar(u)}evaluate(e){return new Ki(this.sections.map(o=>{const l=o.content.evaluate(e);return mi(l)===Cs?new Hc("",l,null,null,null):new Hc(Rr(l),null,o.scale?o.scale.evaluate(e):null,o.font?o.font.evaluate(e).join(","):null,o.textColor?o.textColor.evaluate(e):null)}))}eachChild(e){for(const o of this.sections)e(o.content),o.scale&&e(o.scale),o.font&&e(o.font),o.textColor&&e(o.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const o of this.sections){e.push(o.content.serialize());const l={};o.scale&&(l["font-scale"]=o.scale.serialize()),o.font&&(l["text-font"]=o.font.serialize()),o.textColor&&(l["text-color"]=o.textColor.serialize()),e.push(l)}return e}}class Fl{constructor(e){this.type=Cs,this.input=e}static parse(e,o){if(2!==e.length)return o.error("Expected two arguments.");const l=o.parse(e[1],1,kt);return l?new Fl(l):o.error("No image name provided.")}evaluate(e){const o=this.input.evaluate(e),l=Nn.fromString(o);return l&&e.availableImages&&(l.available=e.availableImages.indexOf(o)>-1),l}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const np={"to-boolean":bt,"to-color":eo,"to-number":Qe,"to-string":kt};class Yc{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");const l=e[0];if(("to-boolean"===l||"to-string"===l)&&2!==e.length)return o.error("Expected one argument.");const u=np[l],f=[];for(let _=1;_<e.length;_++){const x=o.parse(e[_],_,yt);if(!x)return null;f.push(x)}return new Yc(u,f)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let o,l;for(const u of this.args){if(o=u.evaluate(e),l=null,o instanceof bi)return o;if("string"==typeof o){const f=e.parseColor(o);if(f)return f}else if(Array.isArray(o)&&(l=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Pl(o[0],o[1],o[2],o[3]),!l))return new bi(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Zi(l||`Could not parse color from value '${"string"==typeof o?o:String(JSON.stringify(o))}'`)}if("number"===this.type.kind){let o=null;for(const l of this.args){if(o=l.evaluate(e),null===o)return 0;const u=Number(o);if(!isNaN(u))return u}throw new Zi(`Could not convert ${JSON.stringify(o)} to number.`)}return"formatted"===this.type.kind?Ki.fromString(Rr(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Nn.fromString(Rr(this.args[0].evaluate(e))):Rr(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new ar([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Fl(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(o=>{e.push(o.serialize())}),e}}var Ta=Yc;const op=["Unknown","Point","LineString","Polygon"];var _u=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?op[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const n=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:o,y:l}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(o*e-n[0])+this.featureDistanceData.bearing[1]*(l*e-n[1])}return 0}parseColor(n){let e=this._parseColorCache[n];return e||(e=this._parseColorCache[n]=bi.parse(n)),e}};class Ea{constructor(e,o,l,u){this.name=e,this.type=o,this._evaluate=l,this.args=u}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,o){const l=e[0],u=Ea.definitions[l];if(!u)return o.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);const f=Array.isArray(u)?u[0]:u.type,_=Array.isArray(u)?[[u[1],u[2]]]:u.overloads,x=_.filter(([w])=>!Array.isArray(w)||w.length===e.length-1);let A=null;for(const[w,T]of x){A=new Vr(o.registry,o.path,null,o.scope);const S=[];let D=!1;for(let P=1;P<e.length;P++){const F=e[P],z=Array.isArray(w)?w[P-1]:w.type,q=A.parse(F,1+S.length,z);if(!q){D=!0;break}S.push(q)}if(!D)if(Array.isArray(w)&&w.length!==S.length)A.error(`Expected ${w.length} arguments, but found ${S.length} instead.`);else{for(let P=0;P<S.length;P++){const F=Array.isArray(w)?w[P]:w.type,z=S[P];A.concat(P+1).checkSubtype(F,z.type)}if(0===A.errors.length)return new Ea(l,f,T,S)}}if(1===x.length)o.errors.push(...A.errors);else{const w=(x.length?x:_).map(([S])=>{return D=S,Array.isArray(D)?`(${D.map(di).join(", ")})`:`(${di(D.type)}...)`;var D}).join(" | "),T=[];for(let S=1;S<e.length;S++){const D=o.parse(e[S],1+T.length);if(!D)return null;T.push(di(D.type))}o.error(`Expected arguments of type ${w}, but found (${T.join(", ")}) instead.`)}return null}static register(e,o){Ea.definitions=o;for(const l in o)e[l]=Ea}}var po=Ea;class Sn{constructor(e,o,l){this.type=Uo,this.locale=l,this.caseSensitive=e,this.diacriticSensitive=o}static parse(e,o){if(2!==e.length)return o.error("Expected one argument.");const l=e[1];if("object"!=typeof l||Array.isArray(l))return o.error("Collator options argument must be an object.");const u=o.parse(void 0!==l["case-sensitive"]&&l["case-sensitive"],1,bt);if(!u)return null;const f=o.parse(void 0!==l["diacritic-sensitive"]&&l["diacritic-sensitive"],1,bt);if(!f)return null;let _=null;return l.locale&&(_=o.parse(l.locale,1,kt),!_)?null:new Sn(u,f,_)}evaluate(e){return new Vn(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Dn=8192;function Ll(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function sr(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function yu(n,e){const o=(180+n[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,u=Math.pow(2,e.z);return[Math.round(o*u*Dn),Math.round(l*u*Dn)]}function Rl(n,e,o){const l=n[0]-e[0],u=n[1]-e[1],f=n[0]-o[0],_=n[1]-o[1];return l*_-f*u==0&&l*f<=0&&u*_<=0}function Ss(n,e){let o=!1;for(let _=0,x=e.length;_<x;_++){const A=e[_];for(let w=0,T=A.length;w<T-1;w++){if(Rl(n,A[w],A[w+1]))return!1;(u=A[w])[1]>(l=n)[1]!=(f=A[w+1])[1]>l[1]&&l[0]<(f[0]-u[0])*(l[1]-u[1])/(f[1]-u[1])+u[0]&&(o=!o)}}var l,u,f;return o}function Or(n,e){for(let o=0;o<e.length;o++)if(Ss(n,e[o]))return!0;return!1}function lr(n,e,o,l){const u=l[0]-o[0],f=l[1]-o[1],_=(n[0]-o[0])*f-u*(n[1]-o[1]),x=(e[0]-o[0])*f-u*(e[1]-o[1]);return _>0&&x<0||_<0&&x>0}function Ds(n,e,o){for(const w of o)for(let T=0;T<w.length-1;++T)if((x=[(_=w[T+1])[0]-(f=w[T])[0],_[1]-f[1]])[0]*(A=[(u=e)[0]-(l=n)[0],u[1]-l[1]])[1]-x[1]*A[0]!=0&&lr(l,u,f,_)&&lr(f,_,l,u))return!0;var l,u,f,_,x,A;return!1}function Qc(n,e){for(let o=0;o<n.length;++o)if(!Ss(n[o],e))return!1;for(let o=0;o<n.length-1;++o)if(Ds(n[o],n[o+1],e))return!1;return!0}function Sa(n,e){for(let o=0;o<e.length;o++)if(Qc(n,e[o]))return!0;return!1}function fo(n,e,o){const l=[];for(let u=0;u<n.length;u++){const f=[];for(let _=0;_<n[u].length;_++){const x=yu(n[u][_],o);Ll(e,x),f.push(x)}l.push(f)}return l}function gn(n,e,o){const l=[];for(let u=0;u<n.length;u++){const f=fo(n[u],e,o);l.push(f)}return l}function Pi(n,e,o,l){if(n[0]<o[0]||n[0]>o[2]){const u=.5*l;let f=n[0]-o[0]>u?-l:o[0]-n[0]>u?l:0;0===f&&(f=n[0]-o[2]>u?-l:o[2]-n[0]>u?l:0),n[0]+=f}Ll(e,n)}function ji(n,e,o,l){const u=Math.pow(2,l.z)*Dn,f=[l.x*Dn,l.y*Dn],_=[];if(!n)return _;for(const x of n)for(const A of x){const w=[A.x+f[0],A.y+f[1]];Pi(w,e,o,u),_.push(w)}return _}function zi(n,e,o,l){const u=Math.pow(2,l.z)*Dn,f=[l.x*Dn,l.y*Dn],_=[];if(!n)return _;for(const A of n){const w=[];for(const T of A){const S=[T.x+f[0],T.y+f[1]];Ll(e,S),w.push(S)}_.push(w)}if(e[2]-e[0]<=u/2){(x=e)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(const A of _)for(const w of A)Pi(w,e,o,u)}var x;return _}class to{constructor(e,o){this.type=bt,this.geojson=e,this.geometries=o}static parse(e,o){if(2!==e.length)return o.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Ms(e[1])){const l=e[1];if("FeatureCollection"===l.type)for(let u=0;u<l.features.length;++u){const f=l.features[u].geometry.type;if("Polygon"===f||"MultiPolygon"===f)return new to(l,l.features[u].geometry)}else if("Feature"===l.type){const u=l.geometry.type;if("Polygon"===u||"MultiPolygon"===u)return new to(l,l.geometry)}else if("Polygon"===l.type||"MultiPolygon"===l.type)return new to(l,l)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(o,l){const u=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],_=o.canonicalID();if(!_)return!1;if("Polygon"===l.type){const x=fo(l.coordinates,f,_),A=ji(o.geometry(),u,f,_);if(!sr(u,f))return!1;for(const w of A)if(!Ss(w,x))return!1}if("MultiPolygon"===l.type){const x=gn(l.coordinates,f,_),A=ji(o.geometry(),u,f,_);if(!sr(u,f))return!1;for(const w of A)if(!Or(w,x))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(o,l){const u=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],_=o.canonicalID();if(!_)return!1;if("Polygon"===l.type){const x=fo(l.coordinates,f,_),A=zi(o.geometry(),u,f,_);if(!sr(u,f))return!1;for(const w of A)if(!Qc(w,x))return!1}if("MultiPolygon"===l.type){const x=gn(l.coordinates,f,_),A=zi(o.geometry(),u,f,_);if(!sr(u,f))return!1;for(const w of A)if(!Sa(w,x))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Bs=to;function cr(n){if(n instanceof po&&("get"===n.name&&1===n.args.length||"feature-state"===n.name||"has"===n.name&&1===n.args.length||"properties"===n.name||"geometry-type"===n.name||"id"===n.name||/^filter-/.test(n.name))||n instanceof Bs)return!1;let e=!0;return n.eachChild(o=>{e&&!cr(o)&&(e=!1)}),e}function zr(n){if(n instanceof po&&"feature-state"===n.name)return!1;let e=!0;return n.eachChild(o=>{e&&!zr(o)&&(e=!1)}),e}function dr(n,e){if(n instanceof po&&e.indexOf(n.name)>=0)return!1;let o=!0;return n.eachChild(l=>{o&&!dr(l,e)&&(o=!1)}),o}class Rt{constructor(e,o){this.type=o.type,this.name=e,this.boundExpression=o}static parse(e,o){if(2!==e.length||"string"!=typeof e[1])return o.error("'var' expression requires exactly one string literal argument.");const l=e[1];return o.scope.has(l)?new Rt(l,o.scope.get(l)):o.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Ut=Rt;class Yt{constructor(e,o=[],l,u=new fu,f=[]){this.registry=e,this.path=o,this.key=o.map(_=>`[${_}]`).join(""),this.scope=u,this.errors=f,this.expectedType=l}parse(e,o,l,u,f={}){return o?this.concat(o,l,u)._parse(e,f):this._parse(e,f)}_parse(e,o){function l(u,f,_){return"assert"===_?new Go(f,[u]):"coerce"===_?new Ta(f,[u]):u}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const u=e[0];if("string"!=typeof u)return this.error(`Expression name must be a string, but found ${typeof u} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const f=this.registry[u];if(f){let _=f.parse(e,this);if(!_)return null;if(this.expectedType){const x=this.expectedType,A=_.type;if("string"!==x.kind&&"number"!==x.kind&&"boolean"!==x.kind&&"object"!==x.kind&&"array"!==x.kind||"value"!==A.kind)if("color"!==x.kind&&"formatted"!==x.kind&&"resolvedImage"!==x.kind||"value"!==A.kind&&"string"!==A.kind){if(this.checkSubtype(x,A))return null}else _=l(_,x,o.typeAnnotation||"coerce");else _=l(_,x,o.typeAnnotation||"assert")}if(!(_ instanceof Ts)&&"resolvedImage"!==_.type.kind&&ks(_)){const x=new _u;try{_=new Ts(_.type,_.evaluate(x))}catch(A){return this.error(A.message),null}}return _}return this.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,o,l){const u="number"==typeof e?this.path.concat(e):this.path,f=l?this.scope.concat(l):this.scope;return new Yt(this.registry,u,o||null,f,this.errors)}error(e,...o){const l=`${this.key}${o.map(u=>`[${u}]`).join("")}`;this.errors.push(new En(l,e))}checkSubtype(e,o){const l=wa(e,o);return l&&this.error(l),l}}var Vr=Yt;function ks(n){if(n instanceof Ut)return ks(n.boundExpression);if(n instanceof po&&"error"===n.name||n instanceof Sn||n instanceof Bs)return!1;const e=n instanceof Ta||n instanceof Go;let o=!0;return n.eachChild(l=>{o=e?o&&ks(l):o&&l instanceof Ts}),!!o&&cr(n)&&dr(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Da(n,e){const o=n.length-1;let l,u,f=0,_=o,x=0;for(;f<=_;)if(x=Math.floor((f+_)/2),l=n[x],u=n[x+1],l<=e){if(x===o||e<u)return x;f=x+1}else{if(!(l>e))throw new Zi("Input is not a number.");_=x-1}return 0}class gi{constructor(e,o,l){this.type=e,this.input=o,this.labels=[],this.outputs=[];for(const[u,f]of l)this.labels.push(u),this.outputs.push(f)}static parse(e,o){if(e.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return o.error("Expected an even number of arguments.");const l=o.parse(e[1],1,Qe);if(!l)return null;const u=[];let f=null;o.expectedType&&"value"!==o.expectedType.kind&&(f=o.expectedType);for(let _=1;_<e.length;_+=2){const x=1===_?-1/0:e[_],A=e[_+1],w=_,T=_+1;if("number"!=typeof x)return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',w);if(u.length&&u[u.length-1][0]>=x)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',w);const S=o.parse(A,T,f);if(!S)return null;f=f||S.type,u.push([x,S])}return new gi(f,l,u)}evaluate(e){const o=this.labels,l=this.outputs;if(1===o.length)return l[0].evaluate(e);const u=this.input.evaluate(e);if(u<=o[0])return l[0].evaluate(e);const f=o.length;return u>=o[f-1]?l[f-1].evaluate(e):l[Da(o,u)].evaluate(e)}eachChild(e){e(this.input);for(const o of this.outputs)e(o)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&e.push(this.labels[o]),e.push(this.outputs[o].serialize());return e}}var io=gi;function Ot(n,e,o){return n*(1-o)+e*o}var Bn=Object.freeze({__proto__:null,number:Ot,color:function(n,e,o){return new bi(Ot(n.r,e.r,o),Ot(n.g,e.g,o),Ot(n.b,e.b,o),Ot(n.a,e.a,o))},array:function(n,e,o){return n.map((l,u)=>Ot(l,e[u],o))}});const Wc=4/29,Nr=6/29,Ps=3*Nr*Nr,rp=Math.PI/180,ap=180/Math.PI;function ka(n){return n>.008856451679035631?Math.pow(n,1/3):n/Ps+Wc}function Xc(n){return n>Nr?n*n*n:Ps*(n-Wc)}function Is(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Ol(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function zl(n){const e=Ol(n.r),o=Ol(n.g),l=Ol(n.b),u=ka((.4124564*e+.3575761*o+.1804375*l)/.95047),f=ka((.2126729*e+.7151522*o+.072175*l)/1);return{l:116*f-16,a:500*(u-f),b:200*(f-ka((.0193339*e+.119192*o+.9503041*l)/1.08883)),alpha:n.a}}function xu(n){let e=(n.l+16)/116,o=isNaN(n.a)?e:e+n.a/500,l=isNaN(n.b)?e:e-n.b/200;return e=1*Xc(e),o=.95047*Xc(o),l=1.08883*Xc(l),new bi(Is(3.2404542*o-1.5371385*e-.4985314*l),Is(-.969266*o+1.8760108*e+.041556*l),Is(.0556434*o-.2040259*e+1.0572252*l),n.alpha)}function vu(n,e,o){const l=e-n;return n+o*(l>180||l<-180?l-360*Math.round(l/360):l)}const Fs={forward:zl,reverse:xu,interpolate:function(n,e,o){return{l:Ot(n.l,e.l,o),a:Ot(n.a,e.a,o),b:Ot(n.b,e.b,o),alpha:Ot(n.alpha,e.alpha,o)}}},Ur={forward:function(n){const{l:e,a:o,b:l}=zl(n),u=Math.atan2(l,o)*ap;return{h:u<0?u+360:u,c:Math.sqrt(o*o+l*l),l:e,alpha:n.a}},reverse:function(n){const e=n.h*rp,o=n.c;return xu({l:n.l,a:Math.cos(e)*o,b:Math.sin(e)*o,alpha:n.alpha})},interpolate:function(n,e,o){return{h:vu(n.h,e.h,o),c:Ot(n.c,e.c,o),l:Ot(n.l,e.l,o),alpha:Ot(n.alpha,e.alpha,o)}}};var Jc=Object.freeze({__proto__:null,lab:Fs,hcl:Ur});class Gr{constructor(e,o,l,u,f){this.type=e,this.operator=o,this.interpolation=l,this.input=u,this.labels=[],this.outputs=[];for(const[_,x]of f)this.labels.push(_),this.outputs.push(x)}static interpolationFactor(e,o,l,u){let f=0;if("exponential"===e.name)f=Kc(o,e.base,l,u);else if("linear"===e.name)f=Kc(o,1,l,u);else if("cubic-bezier"===e.name){const _=e.controlPoints;f=new tr(_[0],_[1],_[2],_[3]).solve(Kc(o,1,l,u))}return f}static parse(e,o){let[l,u,f,..._]=e;if(!Array.isArray(u)||0===u.length)return o.error("Expected an interpolation type expression.",1);if("linear"===u[0])u={name:"linear"};else if("exponential"===u[0]){const w=u[1];if("number"!=typeof w)return o.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:w}}else{if("cubic-bezier"!==u[0])return o.error(`Unknown interpolation type ${String(u[0])}`,1,0);{const w=u.slice(1);if(4!==w.length||w.some(T=>"number"!=typeof T||T<0||T>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:w}}}if(e.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(f=o.parse(f,2,Qe),!f)return null;const x=[];let A=null;"interpolate-hcl"===l||"interpolate-lab"===l?A=eo:o.expectedType&&"value"!==o.expectedType.kind&&(A=o.expectedType);for(let w=0;w<_.length;w+=2){const T=_[w],S=_[w+1],D=w+3,P=w+4;if("number"!=typeof T)return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(x.length&&x[x.length-1][0]>=T)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',D);const F=o.parse(S,P,A);if(!F)return null;A=A||F.type,x.push([T,F])}return"number"===A.kind||"color"===A.kind||"array"===A.kind&&"number"===A.itemType.kind&&"number"==typeof A.N?new Gr(A,l,u,f,x):o.error(`Type ${di(A)} is not interpolatable.`)}evaluate(e){const o=this.labels,l=this.outputs;if(1===o.length)return l[0].evaluate(e);const u=this.input.evaluate(e);if(u<=o[0])return l[0].evaluate(e);const f=o.length;if(u>=o[f-1])return l[f-1].evaluate(e);const _=Da(o,u),x=Gr.interpolationFactor(this.interpolation,u,o[_],o[_+1]),A=l[_].evaluate(e),w=l[_+1].evaluate(e);return"interpolate"===this.operator?Bn[this.type.kind.toLowerCase()](A,w,x):"interpolate-hcl"===this.operator?Ur.reverse(Ur.interpolate(Ur.forward(A),Ur.forward(w),x)):Fs.reverse(Fs.interpolate(Fs.forward(A),Fs.forward(w),x))}eachChild(e){e(this.input);for(const o of this.outputs)e(o)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,e,this.input.serialize()];for(let l=0;l<this.labels.length;l++)o.push(this.labels[l],this.outputs[l].serialize());return o}}function Kc(n,e,o,l){const u=l-o,f=n-o;return 0===u?0:1===e?f/u:(Math.pow(e,f)-1)/(Math.pow(e,u)-1)}var Un=Gr;class Vl{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expectected at least one argument.");let l=null;const u=o.expectedType;u&&"value"!==u.kind&&(l=u);const f=[];for(const x of e.slice(1)){const A=o.parse(x,1+f.length,l,void 0,{typeAnnotation:"omit"});if(!A)return null;l=l||A.type,f.push(A)}const _=u&&f.some(x=>wa(u,x.type));return new Vl(_?yt:l,f)}evaluate(e){let o,l=null,u=0;for(const f of this.args){if(u++,l=f.evaluate(e),l&&l instanceof Nn&&!l.available&&(o||(o=l),l=null,u===this.args.length))return o;if(null!==l)break}return l}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(o=>{e.push(o.serialize())}),e}}var $c=Vl;class Nl{constructor(e,o){this.type=o.type,this.bindings=[].concat(e),this.result=o}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const o of this.bindings)e(o[1]);e(this.result)}static parse(e,o){if(e.length<4)return o.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const l=[];for(let f=1;f<e.length-1;f+=2){const _=e[f];if("string"!=typeof _)return o.error(`Expected string, but found ${typeof _} instead.`,f);if(/[^a-zA-Z0-9_]/.test(_))return o.error("Variable names must contain only alphanumeric characters or '_'.",f);const x=o.parse(e[f+1],f+1);if(!x)return null;l.push([_,x])}const u=o.parse(e[e.length-1],e.length-1,o.expectedType,l);return u?new Nl(l,u):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[o,l]of this.bindings)e.push(o,l.serialize());return e.push(this.result.serialize()),e}}var Ul=Nl;class Gl{constructor(e,o,l){this.type=e,this.index=o,this.input=l}static parse(e,o){if(3!==e.length)return o.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,Qe),u=o.parse(e[2],2,zn(o.expectedType||yt));return l&&u?new Gl(u.type.itemType,l,u):null}evaluate(e){const o=this.index.evaluate(e),l=this.input.evaluate(e);if(o<0)throw new Zi(`Array index out of bounds: ${o} < 0.`);if(o>=l.length)throw new Zi(`Array index out of bounds: ${o} > ${l.length-1}.`);if(o!==Math.floor(o))throw new Zi(`Array index must be an integer, but found ${o} instead.`);return l[o]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Au=Gl;class Zl{constructor(e,o){this.type=bt,this.needle=e,this.haystack=o}static parse(e,o){if(3!==e.length)return o.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,yt),u=o.parse(e[2],2,yt);return l&&u?kl(l.type,[bt,kt,Qe,ws,yt])?new Zl(l,u):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${di(l.type)} instead`):null}evaluate(e){const o=this.needle.evaluate(e),l=this.haystack.evaluate(e);if(null==l)return!1;if(!Ca(o,["boolean","string","number","null"]))throw new Zi(`Expected first argument to be of type boolean, string, number or null, but found ${di(mi(o))} instead.`);if(!Ca(l,["string","array"]))throw new Zi(`Expected second argument to be of type array or string, but found ${di(mi(l))} instead.`);return l.indexOf(o)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var ed=Zl;class Zr{constructor(e,o,l){this.type=Qe,this.needle=e,this.haystack=o,this.fromIndex=l}static parse(e,o){if(e.length<=2||e.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,yt),u=o.parse(e[2],2,yt);if(!l||!u)return null;if(!kl(l.type,[bt,kt,Qe,ws,yt]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${di(l.type)} instead`);if(4===e.length){const f=o.parse(e[3],3,Qe);return f?new Zr(l,u,f):null}return new Zr(l,u)}evaluate(e){const o=this.needle.evaluate(e),l=this.haystack.evaluate(e);if(!Ca(o,["boolean","string","number","null"]))throw new Zi(`Expected first argument to be of type boolean, string, number or null, but found ${di(mi(o))} instead.`);if(!Ca(l,["string","array"]))throw new Zi(`Expected second argument to be of type array or string, but found ${di(mi(l))} instead.`);if(this.fromIndex){const u=this.fromIndex.evaluate(e);return l.indexOf(o,u)}return l.indexOf(o)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var td=Zr;class Ls{constructor(e,o,l,u,f,_){this.inputType=e,this.type=o,this.input=l,this.cases=u,this.outputs=f,this.otherwise=_}static parse(e,o){if(e.length<5)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return o.error("Expected an even number of arguments.");let l,u;o.expectedType&&"value"!==o.expectedType.kind&&(u=o.expectedType);const f={},_=[];for(let w=2;w<e.length-1;w+=2){let T=e[w];const S=e[w+1];Array.isArray(T)||(T=[T]);const D=o.concat(w);if(0===T.length)return D.error("Expected at least one branch label.");for(const F of T){if("number"!=typeof F&&"string"!=typeof F)return D.error("Branch labels must be numbers or strings.");if("number"==typeof F&&Math.abs(F)>Number.MAX_SAFE_INTEGER)return D.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof F&&Math.floor(F)!==F)return D.error("Numeric branch labels must be integer values.");if(l){if(D.checkSubtype(l,mi(F)))return null}else l=mi(F);if(void 0!==f[String(F)])return D.error("Branch labels must be unique.");f[String(F)]=_.length}const P=o.parse(S,w,u);if(!P)return null;u=u||P.type,_.push(P)}const x=o.parse(e[1],1,yt);if(!x)return null;const A=o.parse(e[e.length-1],e.length-1,u);return A?"value"!==x.type.kind&&o.concat(1).checkSubtype(l,x.type)?null:new Ls(l,u,x,f,_,A):null}evaluate(e){const o=this.input.evaluate(e);return(mi(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),l=[],u={};for(const _ of o){const x=u[this.cases[_]];void 0===x?(u[this.cases[_]]=l.length,l.push([this.cases[_],[_]])):l[x][1].push(_)}const f=_=>"number"===this.inputType.kind?Number(_):_;for(const[_,x]of l)e.push(1===x.length?f(x[0]):x.map(f)),e.push(this.outputs[_].serialize());return e.push(this.otherwise.serialize()),e}}var bu=Ls;class jl{constructor(e,o,l){this.type=e,this.branches=o,this.otherwise=l}static parse(e,o){if(e.length<4)return o.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return o.error("Expected an odd number of arguments.");let l;o.expectedType&&"value"!==o.expectedType.kind&&(l=o.expectedType);const u=[];for(let _=1;_<e.length-1;_+=2){const x=o.parse(e[_],_,bt);if(!x)return null;const A=o.parse(e[_+1],_+1,l);if(!A)return null;u.push([x,A]),l=l||A.type}const f=o.parse(e[e.length-1],e.length-1,l);return f?new jl(l,u,f):null}evaluate(e){for(const[o,l]of this.branches)if(o.evaluate(e))return l.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[o,l]of this.branches)e(o),e(l);e(this.otherwise)}outputDefined(){return this.branches.every(([e,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(o=>{e.push(o.serialize())}),e}}var id=jl;class Rs{constructor(e,o,l,u){this.type=e,this.input=o,this.beginIndex=l,this.endIndex=u}static parse(e,o){if(e.length<=2||e.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,yt),u=o.parse(e[2],2,Qe);if(!l||!u)return null;if(!kl(l.type,[zn(yt),kt,yt]))return o.error(`Expected first argument to be of type array or string, but found ${di(l.type)} instead`);if(4===e.length){const f=o.parse(e[3],3,Qe);return f?new Rs(l.type,l,u,f):null}return new Rs(l.type,l,u)}evaluate(e){const o=this.input.evaluate(e),l=this.beginIndex.evaluate(e);if(!Ca(o,["string","array"]))throw new Zi(`Expected first argument to be of type array or string, but found ${di(mi(o))} instead.`);if(this.endIndex){const u=this.endIndex.evaluate(e);return o.slice(l,u)}return o.slice(l)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var wu=Rs;function Cu(n,e){return"=="===n||"!="===n?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Mu(n,e,o,l){return 0===l.compare(e,o)}function Pa(n,e,o){const l="=="!==n&&"!="!==n;return class q_{constructor(f,_,x){this.type=bt,this.lhs=f,this.rhs=_,this.collator=x,this.hasUntypedArgument="value"===f.type.kind||"value"===_.type.kind}static parse(f,_){if(3!==f.length&&4!==f.length)return _.error("Expected two or three arguments.");const x=f[0];let A=_.parse(f[1],1,yt);if(!A)return null;if(!Cu(x,A.type))return _.concat(1).error(`"${x}" comparisons are not supported for type '${di(A.type)}'.`);let w=_.parse(f[2],2,yt);if(!w)return null;if(!Cu(x,w.type))return _.concat(2).error(`"${x}" comparisons are not supported for type '${di(w.type)}'.`);if(A.type.kind!==w.type.kind&&"value"!==A.type.kind&&"value"!==w.type.kind)return _.error(`Cannot compare types '${di(A.type)}' and '${di(w.type)}'.`);l&&("value"===A.type.kind&&"value"!==w.type.kind?A=new Go(w.type,[A]):"value"!==A.type.kind&&"value"===w.type.kind&&(w=new Go(A.type,[w])));let T=null;if(4===f.length){if("string"!==A.type.kind&&"string"!==w.type.kind&&"value"!==A.type.kind&&"value"!==w.type.kind)return _.error("Cannot use collator to compare non-string types.");if(T=_.parse(f[3],3,Uo),!T)return null}return new q_(A,w,T)}evaluate(f){const _=this.lhs.evaluate(f),x=this.rhs.evaluate(f);if(l&&this.hasUntypedArgument){const A=mi(_),w=mi(x);if(A.kind!==w.kind||"string"!==A.kind&&"number"!==A.kind)throw new Zi(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${A.kind}, ${w.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){const A=mi(_),w=mi(x);if("string"!==A.kind||"string"!==w.kind)return e(f,_,x)}return this.collator?o(f,_,x,this.collator.evaluate(f)):e(f,_,x)}eachChild(f){f(this.lhs),f(this.rhs),this.collator&&f(this.collator)}outputDefined(){return!0}serialize(){const f=[n];return this.eachChild(_=>{f.push(_.serialize())}),f}}}const sp=Pa("==",function(n,e,o){return e===o},Mu),jr=Pa("!=",function(n,e,o){return e!==o},function(n,e,o,l){return!Mu(0,e,o,l)}),Os=Pa("<",function(n,e,o){return e<o},function(n,e,o,l){return l.compare(e,o)<0}),nd=Pa(">",function(n,e,o){return e>o},function(n,e,o,l){return l.compare(e,o)>0}),Tu=Pa("<=",function(n,e,o){return e<=o},function(n,e,o,l){return l.compare(e,o)<=0}),od=Pa(">=",function(n,e,o){return e>=o},function(n,e,o,l){return l.compare(e,o)>=0});class jo{constructor(e,o,l,u,f){this.type=kt,this.number=e,this.locale=o,this.currency=l,this.minFractionDigits=u,this.maxFractionDigits=f}static parse(e,o){if(3!==e.length)return o.error("Expected two arguments.");const l=o.parse(e[1],1,Qe);if(!l)return null;const u=e[2];if("object"!=typeof u||Array.isArray(u))return o.error("NumberFormat options argument must be an object.");let f=null;if(u.locale&&(f=o.parse(u.locale,1,kt),!f))return null;let _=null;if(u.currency&&(_=o.parse(u.currency,1,kt),!_))return null;let x=null;if(u["min-fraction-digits"]&&(x=o.parse(u["min-fraction-digits"],1,Qe),!x))return null;let A=null;return u["max-fraction-digits"]&&(A=o.parse(u["max-fraction-digits"],1,Qe),!A)?null:new jo(l,f,_,x,A)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class zs{constructor(e){this.type=Qe,this.input=e}static parse(e,o){if(2!==e.length)return o.error(`Expected 1 argument, but found ${e.length-1} instead.`);const l=o.parse(e[1],1);return l?"array"!==l.type.kind&&"string"!==l.type.kind&&"value"!==l.type.kind?o.error(`Expected argument of type string or array, but found ${di(l.type)} instead.`):new zs(l):null}evaluate(e){const o=this.input.evaluate(e);if("string"==typeof o||Array.isArray(o))return o.length;throw new Zi(`Expected value to be of type string or array, but found ${di(mi(o))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(o=>{e.push(o.serialize())}),e}}const rd={"==":sp,"!=":jr,">":nd,"<":Os,">=":od,"<=":Tu,array:Go,at:Au,boolean:Go,case:id,coalesce:$c,collator:Sn,format:ar,image:Fl,in:ed,"index-of":td,interpolate:Un,"interpolate-hcl":Un,"interpolate-lab":Un,length:zs,let:Ul,literal:Ts,match:bu,number:Go,"number-format":jo,object:Go,slice:wu,step:io,string:Go,"to-boolean":Ta,"to-color":Ta,"to-number":Ta,"to-string":Ta,var:Ut,within:Bs};function Hl(n,[e,o,l,u]){e=e.evaluate(n),o=o.evaluate(n),l=l.evaluate(n);const f=u?u.evaluate(n):1,_=Pl(e,o,l,f);if(_)throw new Zi(_);return new bi(e/255*f,o/255*f,l/255*f,f)}function ql(n,e){return n in e}function ad(n,e){const o=e[n];return void 0===o?null:o}function Hr(n){return{type:n}}po.register(rd,{error:[{kind:"error"},[kt],(n,[e])=>{throw new Zi(e.evaluate(n))}],typeof:[kt,[yt],(n,[e])=>di(mi(e.evaluate(n)))],"to-rgba":[zn(Qe,4),[eo],(n,[e])=>e.evaluate(n).toArray()],rgb:[eo,[Qe,Qe,Qe],Hl],rgba:[eo,[Qe,Qe,Qe,Qe],Hl],has:{type:bt,overloads:[[[kt],(n,[e])=>ql(e.evaluate(n),n.properties())],[[kt,Lr],(n,[e,o])=>ql(e.evaluate(n),o.evaluate(n))]]},get:{type:yt,overloads:[[[kt],(n,[e])=>ad(e.evaluate(n),n.properties())],[[kt,Lr],(n,[e,o])=>ad(e.evaluate(n),o.evaluate(n))]]},"feature-state":[yt,[kt],(n,[e])=>ad(e.evaluate(n),n.featureState||{})],properties:[Lr,[],n=>n.properties()],"geometry-type":[kt,[],n=>n.geometryType()],id:[yt,[],n=>n.id()],zoom:[Qe,[],n=>n.globals.zoom],pitch:[Qe,[],n=>n.globals.pitch||0],"distance-from-center":[Qe,[],n=>n.distanceFromCenter()],"heatmap-density":[Qe,[],n=>n.globals.heatmapDensity||0],"line-progress":[Qe,[],n=>n.globals.lineProgress||0],"sky-radial-progress":[Qe,[],n=>n.globals.skyRadialProgress||0],accumulated:[yt,[],n=>void 0===n.globals.accumulated?null:n.globals.accumulated],"+":[Qe,Hr(Qe),(n,e)=>{let o=0;for(const l of e)o+=l.evaluate(n);return o}],"*":[Qe,Hr(Qe),(n,e)=>{let o=1;for(const l of e)o*=l.evaluate(n);return o}],"-":{type:Qe,overloads:[[[Qe,Qe],(n,[e,o])=>e.evaluate(n)-o.evaluate(n)],[[Qe],(n,[e])=>-e.evaluate(n)]]},"/":[Qe,[Qe,Qe],(n,[e,o])=>e.evaluate(n)/o.evaluate(n)],"%":[Qe,[Qe,Qe],(n,[e,o])=>e.evaluate(n)%o.evaluate(n)],ln2:[Qe,[],()=>Math.LN2],pi:[Qe,[],()=>Math.PI],e:[Qe,[],()=>Math.E],"^":[Qe,[Qe,Qe],(n,[e,o])=>Math.pow(e.evaluate(n),o.evaluate(n))],sqrt:[Qe,[Qe],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Qe,[Qe],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Qe,[Qe],(n,[e])=>Math.log(e.evaluate(n))],log2:[Qe,[Qe],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Qe,[Qe],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Qe,[Qe],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Qe,[Qe],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Qe,[Qe],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Qe,[Qe],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Qe,[Qe],(n,[e])=>Math.atan(e.evaluate(n))],min:[Qe,Hr(Qe),(n,e)=>Math.min(...e.map(o=>o.evaluate(n)))],max:[Qe,Hr(Qe),(n,e)=>Math.max(...e.map(o=>o.evaluate(n)))],abs:[Qe,[Qe],(n,[e])=>Math.abs(e.evaluate(n))],round:[Qe,[Qe],(n,[e])=>{const o=e.evaluate(n);return o<0?-Math.round(-o):Math.round(o)}],floor:[Qe,[Qe],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Qe,[Qe],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[bt,[kt,yt],(n,[e,o])=>n.properties()[e.value]===o.value],"filter-id-==":[bt,[yt],(n,[e])=>n.id()===e.value],"filter-type-==":[bt,[kt],(n,[e])=>n.geometryType()===e.value],"filter-<":[bt,[kt,yt],(n,[e,o])=>{const l=n.properties()[e.value],u=o.value;return typeof l==typeof u&&l<u}],"filter-id-<":[bt,[yt],(n,[e])=>{const o=n.id(),l=e.value;return typeof o==typeof l&&o<l}],"filter->":[bt,[kt,yt],(n,[e,o])=>{const l=n.properties()[e.value],u=o.value;return typeof l==typeof u&&l>u}],"filter-id->":[bt,[yt],(n,[e])=>{const o=n.id(),l=e.value;return typeof o==typeof l&&o>l}],"filter-<=":[bt,[kt,yt],(n,[e,o])=>{const l=n.properties()[e.value],u=o.value;return typeof l==typeof u&&l<=u}],"filter-id-<=":[bt,[yt],(n,[e])=>{const o=n.id(),l=e.value;return typeof o==typeof l&&o<=l}],"filter->=":[bt,[kt,yt],(n,[e,o])=>{const l=n.properties()[e.value],u=o.value;return typeof l==typeof u&&l>=u}],"filter-id->=":[bt,[yt],(n,[e])=>{const o=n.id(),l=e.value;return typeof o==typeof l&&o>=l}],"filter-has":[bt,[yt],(n,[e])=>e.value in n.properties()],"filter-has-id":[bt,[],n=>null!==n.id()&&void 0!==n.id()],"filter-type-in":[bt,[zn(kt)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[bt,[zn(yt)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[bt,[kt,zn(yt)],(n,[e,o])=>o.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[bt,[kt,zn(yt)],(n,[e,o])=>function(l,u,f,_){for(;f<=_;){const x=f+_>>1;if(u[x]===l)return!0;u[x]>l?_=x-1:f=x+1}return!1}(n.properties()[e.value],o.value,0,o.value.length-1)],all:{type:bt,overloads:[[[bt,bt],(n,[e,o])=>e.evaluate(n)&&o.evaluate(n)],[Hr(bt),(n,e)=>{for(const o of e)if(!o.evaluate(n))return!1;return!0}]]},any:{type:bt,overloads:[[[bt,bt],(n,[e,o])=>e.evaluate(n)||o.evaluate(n)],[Hr(bt),(n,e)=>{for(const o of e)if(o.evaluate(n))return!0;return!1}]]},"!":[bt,[bt],(n,[e])=>!e.evaluate(n)],"is-supported-script":[bt,[kt],(n,[e])=>{const o=n.globals&&n.globals.isSupportedScript;return!o||o(e.evaluate(n))}],upcase:[kt,[kt],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[kt,[kt],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[kt,Hr(yt),(n,e)=>e.map(o=>Rr(o.evaluate(n))).join("")],"resolved-locale":[kt,[Uo],(n,[e])=>e.evaluate(n).resolvedLocale()]});var Ia=rd;function Fa(n){return{result:"success",value:n}}function kn(n){return{result:"error",value:n}}function La(n){return"data-driven"===n["property-type"]||"cross-faded-data-driven"===n["property-type"]}function Vs(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function Ra(n){return!!n.expression&&n.expression.interpolated}function Et(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":null===n?"null":typeof n}function Oa(n){return"object"==typeof n&&null!==n&&!Array.isArray(n)}function Eu(n){return n}function no(n,e){const o="color"===e.type,l=n.stops&&"object"==typeof n.stops[0][0],u=l||!(l||void 0!==n.property),f=n.type||(Ra(e)?"exponential":"interval");if(o&&((n=Tn({},n)).stops&&(n.stops=n.stops.map(w=>[w[0],bi.parse(w[1])])),n.default=bi.parse(n.default?n.default:e.default)),n.colorSpace&&"rgb"!==n.colorSpace&&!Jc[n.colorSpace])throw new Error(`Unknown color space: ${n.colorSpace}`);let _,x,A;if("exponential"===f)_=Du;else if("interval"===f)_=za;else if("categorical"===f){_=Su,x=Object.create(null);for(const w of n.stops)x[w[0]]=w[1];A=typeof n.stops[0][0]}else{if("identity"!==f)throw new Error(`Unknown function type "${f}"`);_=lp}if(l){const w={},T=[];for(let P=0;P<n.stops.length;P++){const F=n.stops[P],z=F[0].zoom;void 0===w[z]&&(w[z]={zoom:z,type:n.type,property:n.property,default:n.default,stops:[]},T.push(z)),w[z].stops.push([F[0].value,F[1]])}const S=[];for(const P of T)S.push([w[P].zoom,no(w[P],e)]);const D={name:"linear"};return{kind:"composite",interpolationType:D,interpolationFactor:Un.interpolationFactor.bind(void 0,D),zoomStops:S.map(P=>P[0]),evaluate:({zoom:P},F)=>Du({stops:S,base:n.base},e,P).evaluate(P,F)}}if(u){const w="exponential"===f?{name:"exponential",base:void 0!==n.base?n.base:1}:null;return{kind:"camera",interpolationType:w,interpolationFactor:Un.interpolationFactor.bind(void 0,w),zoomStops:n.stops.map(T=>T[0]),evaluate:({zoom:T})=>_(n,e,T,x,A)}}return{kind:"source",evaluate(w,T){const S=T&&T.properties?T.properties[n.property]:void 0;return void 0===S?Mi(n.default,e.default):_(n,e,S,x,A)}}}function Mi(n,e,o){return void 0!==n?n:void 0!==e?e:void 0!==o?o:void 0}function Su(n,e,o,l,u){return Mi(typeof o===u?l[o]:void 0,n.default,e.default)}function za(n,e,o){if("number"!==Et(o))return Mi(n.default,e.default);const l=n.stops.length;if(1===l||o<=n.stops[0][0])return n.stops[0][1];if(o>=n.stops[l-1][0])return n.stops[l-1][1];const u=Da(n.stops.map(f=>f[0]),o);return n.stops[u][1]}function Du(n,e,o){const l=void 0!==n.base?n.base:1;if("number"!==Et(o))return Mi(n.default,e.default);const u=n.stops.length;if(1===u||o<=n.stops[0][0])return n.stops[0][1];if(o>=n.stops[u-1][0])return n.stops[u-1][1];const f=Da(n.stops.map(T=>T[0]),o),_=function(T,S,D,P){const F=P-D,z=T-D;return 0===F?0:1===S?z/F:(Math.pow(S,z)-1)/(Math.pow(S,F)-1)}(o,l,n.stops[f][0],n.stops[f+1][0]),x=n.stops[f][1],A=n.stops[f+1][1];let w=Bn[e.type]||Eu;if(n.colorSpace&&"rgb"!==n.colorSpace){const T=Jc[n.colorSpace];w=(S,D)=>T.reverse(T.interpolate(T.forward(S),T.forward(D),_))}return"function"==typeof x.evaluate?{evaluate(...T){const S=x.evaluate.apply(void 0,T),D=A.evaluate.apply(void 0,T);if(void 0!==S&&void 0!==D)return w(S,D,_)}}:w(x,A,_)}function lp(n,e,o){return"color"===e.type?o=bi.parse(o):"formatted"===e.type?o=Ki.fromString(o.toString()):"resolvedImage"===e.type?o=Nn.fromString(o.toString()):Et(o)===e.type||"enum"===e.type&&e.values[o]||(o=void 0),Mi(o,n.default,e.default)}class Yl{constructor(e,o){var l;this.expression=e,this._warningHistory={},this._evaluator=new _u,this._defaultValue=o?"color"===(l=o).type&&(Oa(l.default)||Array.isArray(l.default))?new bi(0,0,0,0):"color"===l.type?bi.parse(l.default)||null:void 0===l.default?null:l.default:null,this._enumValues=o&&"enum"===o.type?o.values:null}evaluateWithoutErrorHandling(e,o,l,u,f,_,x,A){return this._evaluator.globals=e,this._evaluator.feature=o,this._evaluator.featureState=l,this._evaluator.canonical=u||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=_,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=A||null,this.expression.evaluate(this._evaluator)}evaluate(e,o,l,u,f,_,x,A){this._evaluator.globals=e,this._evaluator.feature=o||null,this._evaluator.featureState=l||null,this._evaluator.canonical=u||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=_||null,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=A||null;try{const w=this.expression.evaluate(this._evaluator);if(null==w||"number"==typeof w&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new Zi(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,"undefined"!=typeof console&&console.warn(w.message)),this._defaultValue}}}function Va(n){return Array.isArray(n)&&n.length>0&&"string"==typeof n[0]&&n[0]in Ia}function qr(n,e){const o=new Vr(Ia,[],e?function(u){const f={color:eo,string:kt,number:Qe,enum:kt,boolean:bt,formatted:ba,resolvedImage:Cs};return"array"===u.type?zn(f[u.value]||yt,u.length):f[u.type]}(e):void 0),l=o.parse(n,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return l?Fa(new Yl(l,e)):kn(o.errors)}class Ql{constructor(e,o){this.kind=e,this._styleExpression=o,this.isStateDependent="constant"!==e&&!zr(o.expression)}evaluateWithoutErrorHandling(e,o,l,u,f,_){return this._styleExpression.evaluateWithoutErrorHandling(e,o,l,u,f,_)}evaluate(e,o,l,u,f,_){return this._styleExpression.evaluate(e,o,l,u,f,_)}}class Na{constructor(e,o,l,u){this.kind=e,this.zoomStops=l,this._styleExpression=o,this.isStateDependent="camera"!==e&&!zr(o.expression),this.interpolationType=u}evaluateWithoutErrorHandling(e,o,l,u,f,_){return this._styleExpression.evaluateWithoutErrorHandling(e,o,l,u,f,_)}evaluate(e,o,l,u,f,_){return this._styleExpression.evaluate(e,o,l,u,f,_)}interpolationFactor(e,o,l){return this.interpolationType?Un.interpolationFactor(this.interpolationType,e,o,l):0}}function Ns(n,e){if("error"===(n=qr(n,e)).result)return n;const o=n.value.expression,l=cr(o);if(!l&&!La(e))return kn([new En("","data expressions not supported")]);const u=dr(o,["zoom","pitch","distance-from-center"]);if(!u&&!Vs(e))return kn([new En("","zoom expressions not supported")]);const f=Ua(o);return f||u?f instanceof En?kn([f]):f instanceof Un&&!Ra(e)?kn([new En("",'"interpolate" expressions cannot be used with this property')]):Fa(f?new Na(l?"camera":"composite",n.value,f.labels,f instanceof Un?f.interpolation:void 0):new Ql(l?"constant":"source",n.value)):kn([new En("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ni{constructor(e,o){this._parameters=e,this._specification=o,Tn(this,no(this._parameters,this._specification))}static deserialize(e){return new ni(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Ua(n){let e=null;if(n instanceof Ul)e=Ua(n.result);else if(n instanceof $c){for(const o of n.args)if(e=Ua(o),e)break}else(n instanceof io||n instanceof Un)&&n.input instanceof po&&"zoom"===n.input.name&&(e=n);return e instanceof En||n.eachChild(o=>{const l=Ua(o);l instanceof En?e=l:!e&&l?e=new En("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&l&&e!==l&&(e=new En("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}class Xe{constructor(e,o,l,u){this.message=(e?`${e}: `:"")+l,u&&(this.identifier=u),null!=o&&o.__line__&&(this.line=o.__line__)}}function Gn(n){const e=n.key,o=n.value,l=n.valueSpec||{},u=n.objectElementValidators||{},f=n.style,_=n.styleSpec;let x=[];const A=Et(o);if("object"!==A)return[new Xe(e,o,`object expected, ${A} found`)];for(const w in o){const T=w.split(".")[0],S=l[T]||l["*"];let D;u[T]?D=u[T]:l[T]?D=ui:u["*"]?D=u["*"]:l["*"]&&(D=ui),D?x=x.concat(D({key:(e&&`${e}.`)+w,value:o[w],valueSpec:S,style:f,styleSpec:_,object:o,objectKey:w},o)):x.push(new Xe(e,o[w],`unknown property "${w}"`))}for(const w in l)u[w]||l[w].required&&void 0===l[w].default&&void 0===o[w]&&x.push(new Xe(e,o,`missing required property "${w}"`));return x}function Ho(n){const e=n.value,o=n.valueSpec,l=n.style,u=n.styleSpec,f=n.key,_=n.arrayElementValidator||ui;if("array"!==Et(e))return[new Xe(f,e,`array expected, ${Et(e)} found`)];if(o.length&&e.length!==o.length)return[new Xe(f,e,`array length ${o.length} expected, length ${e.length} found`)];if(o["min-length"]&&e.length<o["min-length"])return[new Xe(f,e,`array length at least ${o["min-length"]} expected, length ${e.length} found`)];let x={type:o.value,values:o.values,minimum:o.minimum,maximum:o.maximum,function:void 0};u.$version<7&&(x.function=o.function),"object"===Et(o.value)&&(x=o.value);let A=[];for(let w=0;w<e.length;w++)A=A.concat(_({array:e,arrayIndex:w,value:e[w],valueSpec:x,style:l,styleSpec:u,key:`${f}[${w}]`}));return A}function mo(n){const e=n.key,o=n.value,l=n.valueSpec;let u=Et(o);if("number"===u&&o!=o&&(u="NaN"),"number"!==u)return[new Xe(e,o,`number expected, ${u} found`)];if("minimum"in l){let f=l.minimum;if("array"===Et(l.minimum)&&(f=l.minimum[n.arrayIndex]),o<f)return[new Xe(e,o,`${o} is less than the minimum value ${f}`)]}if("maximum"in l){let f=l.maximum;if("array"===Et(l.maximum)&&(f=l.maximum[n.arrayIndex]),o>f)return[new Xe(e,o,`${o} is greater than the maximum value ${f}`)]}return[]}function go(n){const e=n.valueSpec,o=ci(n.value.type);let l,u,f,_={};const x="categorical"!==o&&void 0===n.value.property,A=!x,w="array"===Et(n.value.stops)&&"array"===Et(n.value.stops[0])&&"object"===Et(n.value.stops[0][0]),T=Gn({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(P){if("identity"===o)return[new Xe(P.key,P.value,'identity function may not have a "stops" property')];let F=[];const z=P.value;return F=F.concat(Ho({key:P.key,value:z,valueSpec:P.valueSpec,style:P.style,styleSpec:P.styleSpec,arrayElementValidator:S})),"array"===Et(z)&&0===z.length&&F.push(new Xe(P.key,z,"array must have at least one stop")),F},default:function(P){return ui({key:P.key,value:P.value,valueSpec:e,style:P.style,styleSpec:P.styleSpec})}}});return"identity"===o&&x&&T.push(new Xe(n.key,n.value,'missing required property "property"')),"identity"===o||n.value.stops||T.push(new Xe(n.key,n.value,'missing required property "stops"')),"exponential"===o&&n.valueSpec.expression&&!Ra(n.valueSpec)&&T.push(new Xe(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(A&&!La(n.valueSpec)?T.push(new Xe(n.key,n.value,"property functions not supported")):x&&!Vs(n.valueSpec)&&T.push(new Xe(n.key,n.value,"zoom functions not supported"))),"categorical"!==o&&!w||void 0!==n.value.property||T.push(new Xe(n.key,n.value,'"property" property is required')),T;function S(P){let F=[];const z=P.value,q=P.key;if("array"!==Et(z))return[new Xe(q,z,`array expected, ${Et(z)} found`)];if(2!==z.length)return[new Xe(q,z,`array length 2 expected, length ${z.length} found`)];if(w){if("object"!==Et(z[0]))return[new Xe(q,z,`object expected, ${Et(z[0])} found`)];if(void 0===z[0].zoom)return[new Xe(q,z,"object stop key must have zoom")];if(void 0===z[0].value)return[new Xe(q,z,"object stop key must have value")];const W=ci(z[0].zoom);if("number"!=typeof W)return[new Xe(q,z[0].zoom,"stop zoom values must be numbers")];if(f&&f>W)return[new Xe(q,z[0].zoom,"stop zoom values must appear in ascending order")];W!==f&&(f=W,u=void 0,_={}),F=F.concat(Gn({key:`${q}[0]`,value:z[0],valueSpec:{zoom:{}},style:P.style,styleSpec:P.styleSpec,objectElementValidators:{zoom:mo,value:D}}))}else F=F.concat(D({key:`${q}[0]`,value:z[0],valueSpec:{},style:P.style,styleSpec:P.styleSpec},z));return Va(On(z[1]))?F.concat([new Xe(`${q}[1]`,z[1],"expressions are not allowed in function stops.")]):F.concat(ui({key:`${q}[1]`,value:z[1],valueSpec:e,style:P.style,styleSpec:P.styleSpec}))}function D(P,F){const z=Et(P.value),q=ci(P.value),W=null!==P.value?P.value:F;if(l){if(z!==l)return[new Xe(P.key,W,`${z} stop domain type must match previous stop domain type ${l}`)]}else l=z;if("number"!==z&&"string"!==z&&"boolean"!==z&&"number"!=typeof q&&"string"!=typeof q&&"boolean"!=typeof q)return[new Xe(P.key,W,"stop domain value must be a number, string, or boolean")];if("number"!==z&&"categorical"!==o){let re=`number expected, ${z} found`;return La(e)&&void 0===o&&(re+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Xe(P.key,W,re)]}return"categorical"!==o||"number"!==z||"number"==typeof q&&isFinite(q)&&Math.floor(q)===q?"categorical"!==o&&"number"===z&&"number"==typeof q&&"number"==typeof u&&void 0!==u&&q<u?[new Xe(P.key,W,"stop domain values must appear in ascending order")]:(u=q,"categorical"===o&&q in _?[new Xe(P.key,W,"stop domain values must be unique")]:(_[q]=!0,[])):[new Xe(P.key,W,`integer expected, found ${String(q)}`)]}}function ur(n){const e=("property"===n.expressionContext?Ns:qr)(On(n.value),n.valueSpec);if("error"===e.result)return e.value.map(l=>new Xe(`${n.key}${l.key}`,n.value,l.message));const o=e.value.expression||e.value._styleExpression.expression;if("property"===n.expressionContext&&"text-font"===n.propertyKey&&!o.outputDefined())return[new Xe(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===n.expressionContext&&"layout"===n.propertyType&&!zr(o))return[new Xe(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===n.expressionContext)return Wl(o,n);if(n.expressionContext&&0===n.expressionContext.indexOf("cluster")){if(!dr(o,["zoom","feature-state"]))return[new Xe(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===n.expressionContext&&!cr(o))return[new Xe(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Wl(n,e){const o=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const u of e.valueSpec.expression.parameters)o.delete(u);if(0===o.size)return[];const l=[];return n instanceof po&&o.has(n.name)?[new Xe(e.key,e.value,`["${n.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(n.eachChild(u=>{l.push(...Wl(u,e))}),l)}function Us(n){const e=n.key,o=n.value,l=n.valueSpec,u=[];return Array.isArray(l.values)?-1===l.values.indexOf(ci(o))&&u.push(new Xe(e,o,`expected one of [${l.values.join(", ")}], ${JSON.stringify(o)} found`)):-1===Object.keys(l.values).indexOf(ci(o))&&u.push(new Xe(e,o,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(o)} found`)),u}function sd(n){if(!0===n||!1===n)return!0;if(!Array.isArray(n)||0===n.length)return!1;switch(n[0]){case"has":return n.length>=2&&"$id"!==n[1]&&"$type"!==n[1];case"in":return n.length>=3&&("string"!=typeof n[1]||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==n.length||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!sd(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function hr(n,e="fill"){if(null==n)return{filter:()=>!0,needGeometry:!1,needFeature:!1};sd(n)||(n=Yr(n));const o=n;let l=!0;try{l=function(w){if(!Ga(w))return w;let T=On(w);return ku(T),T=Bu(T),T}(o)}catch(w){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(o,null,2)}\n        `)}const u=fe[`filter_${e}`],f=qr(l,u);let _=null;if("error"===f.result)throw new Error(f.value.map(w=>`${w.key}: ${w.message}`).join(", "));_=(w,T,S)=>f.value.evaluate(w,T,{},S);let x=null,A=null;if(l!==o){const w=qr(o,u);if("error"===w.result)throw new Error(w.value.map(T=>`${T.key}: ${T.message}`).join(", "));x=(T,S,D,P,F)=>w.value.evaluate(T,S,{},D,void 0,void 0,P,F),A=!cr(w.value.expression)}return _=_,{filter:_,dynamicFilter:x||void 0,needGeometry:Gs(l),needFeature:!!A}}function Bu(n){if(!Array.isArray(n))return n;const e=function(o){if(cp.has(o[0]))for(let l=1;l<o.length;l++)if(Ga(o[l]))return!0;return o}(n);return!0===e?e:e.map(o=>Bu(o))}function ku(n){let e=!1;const o=[];if("case"===n[0]){for(let l=1;l<n.length-1;l+=2)e=e||Ga(n[l]),o.push(n[l+1]);o.push(n[n.length-1])}else if("match"===n[0]){e=e||Ga(n[1]);for(let l=2;l<n.length-1;l+=2)o.push(n[l+1]);o.push(n[n.length-1])}else if("step"===n[0]){e=e||Ga(n[1]);for(let l=1;l<n.length-1;l+=2)o.push(n[l+1])}e&&(n.length=0,n.push("any",...o));for(let l=1;l<n.length;l++)ku(n[l])}function Ga(n){if(!Array.isArray(n))return!1;if("pitch"===(e=n[0])||"distance-from-center"===e)return!0;var e;for(let o=1;o<n.length;o++)if(Ga(n[o]))return!0;return!1}const cp=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function dp(n,e){return n<e?-1:n>e?1:0}function Gs(n){if(!Array.isArray(n))return!1;if("within"===n[0])return!0;for(let e=1;e<n.length;e++)if(Gs(n[e]))return!0;return!1}function Yr(n){if(!n)return!0;const e=n[0];return n.length<=1?"any"!==e:"=="===e?ln(n[1],n[2],"=="):"!="===e?pr(ln(n[1],n[2],"==")):"<"===e||">"===e||"<="===e||">="===e?ln(n[1],n[2],e):"any"===e?(o=n.slice(1),["any"].concat(o.map(Yr))):"all"===e?["all"].concat(n.slice(1).map(Yr)):"none"===e?["all"].concat(n.slice(1).map(Yr).map(pr)):"in"===e?Zs(n[1],n.slice(2)):"!in"===e?pr(Zs(n[1],n.slice(2))):"has"===e?Pu(n[1]):"!has"===e?pr(Pu(n[1])):"within"!==e||n;var o}function ln(n,e,o){switch(n){case"$type":return[`filter-type-${o}`,e];case"$id":return[`filter-id-${o}`,e];default:return[`filter-${o}`,n,e]}}function Zs(n,e){if(0===e.length)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(o=>typeof o!=typeof e[0])?["filter-in-large",n,["literal",e.sort(dp)]]:["filter-in-small",n,["literal",e]]}}function Pu(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function pr(n){return["!",n]}function js(n){return sd(On(n.value))?ur(Tn({},n,{expressionContext:"filter",valueSpec:n.styleSpec[`filter_${n.layerType||"fill"}`]})):Qr(n)}function Qr(n){const e=n.value,o=n.key;if("array"!==Et(e))return[new Xe(o,e,`array expected, ${Et(e)} found`)];const l=n.styleSpec;let u,f=[];if(e.length<1)return[new Xe(o,e,"filter array must have at least 1 element")];switch(f=f.concat(Us({key:`${o}[0]`,value:e[0],valueSpec:l.filter_operator,style:n.style,styleSpec:n.styleSpec})),ci(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===ci(e[1])&&f.push(new Xe(o,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&f.push(new Xe(o,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(u=Et(e[1]),"string"!==u&&f.push(new Xe(`${o}[1]`,e[1],`string expected, ${u} found`)));for(let _=2;_<e.length;_++)u=Et(e[_]),"$type"===ci(e[1])?f=f.concat(Us({key:`${o}[${_}]`,value:e[_],valueSpec:l.geometry_type,style:n.style,styleSpec:n.styleSpec})):"string"!==u&&"number"!==u&&"boolean"!==u&&f.push(new Xe(`${o}[${_}]`,e[_],`string, number, or boolean expected, ${u} found`));break;case"any":case"all":case"none":for(let _=1;_<e.length;_++)f=f.concat(Qr({key:`${o}[${_}]`,value:e[_],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":u=Et(e[1]),2!==e.length?f.push(new Xe(o,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==u&&f.push(new Xe(`${o}[1]`,e[1],`string expected, ${u} found`));break;case"within":u=Et(e[1]),2!==e.length?f.push(new Xe(o,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==u&&f.push(new Xe(`${o}[1]`,e[1],`object expected, ${u} found`))}return f}function Za(n,e){const o=n.key,l=n.style,u=n.styleSpec,f=n.value,_=n.objectKey,x=u[`${e}_${n.layerType}`];if(!x)return[];const A=_.match(/^(.*)-transition$/);if("paint"===e&&A&&x[A[1]]&&x[A[1]].transition)return ui({key:o,value:f,valueSpec:u.transition,style:l,styleSpec:u});const w=n.valueSpec||x[_];if(!w)return[new Xe(o,f,`unknown property "${_}"`)];let T;if("string"===Et(f)&&La(w)&&!w.tokens&&(T=/^{([^}]+)}$/.exec(f)))return[new Xe(o,f,`"${_}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(T[1])} }\`.`)];const S=[];return"symbol"===n.layerType&&("text-field"===_&&l&&!l.glyphs&&S.push(new Xe(o,f,'use of "text-field" requires a style "glyphs" property')),"text-font"===_&&Oa(On(f))&&"identity"===ci(f.type)&&S.push(new Xe(o,f,'"text-font" does not support identity functions'))),S.concat(ui({key:n.key,value:f,valueSpec:w,style:l,styleSpec:u,expressionContext:"property",propertyType:e,propertyKey:_}))}function ld(n){return Za(n,"paint")}function ja(n){return Za(n,"layout")}function cd(n){let e=[];const o=n.value,l=n.key,u=n.style,f=n.styleSpec;o.type||o.ref||e.push(new Xe(l,o,'either "type" or "ref" is required'));let _=ci(o.type);const x=ci(o.ref);if(o.id){const A=ci(o.id);for(let w=0;w<n.arrayIndex;w++){const T=u.layers[w];ci(T.id)===A&&e.push(new Xe(l,o.id,`duplicate layer id "${o.id}", previously used at line ${T.id.__line__}`))}}if("ref"in o){let A;["type","source","source-layer","filter","layout"].forEach(w=>{w in o&&e.push(new Xe(l,o[w],`"${w}" is prohibited for ref layers`))}),u.layers.forEach(w=>{ci(w.id)===x&&(A=w)}),A?A.ref?e.push(new Xe(l,o.ref,"ref cannot reference another ref layer")):_=ci(A.type):"string"==typeof x&&e.push(new Xe(l,o.ref,`ref layer "${x}" not found`))}else if("background"!==_&&"sky"!==_)if(o.source){const A=u.sources&&u.sources[o.source],w=A&&ci(A.type);A?"vector"===w&&"raster"===_?e.push(new Xe(l,o.source,`layer "${o.id}" requires a raster source`)):"raster"===w&&"raster"!==_?e.push(new Xe(l,o.source,`layer "${o.id}" requires a vector source`)):"vector"!==w||o["source-layer"]?"raster-dem"===w&&"hillshade"!==_?e.push(new Xe(l,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==_||!o.paint||!o.paint["line-gradient"]&&!o.paint["line-trim-offset"]||"geojson"===w&&A.lineMetrics||e.push(new Xe(l,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Xe(l,o,`layer "${o.id}" must specify a "source-layer"`)):e.push(new Xe(l,o.source,`source "${o.source}" not found`))}else e.push(new Xe(l,o,'missing required property "source"'));return e=e.concat(Gn({key:l,value:o,valueSpec:f.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ui({key:`${l}.type`,value:o.type,valueSpec:f.layer.type,style:n.style,styleSpec:n.styleSpec,object:o,objectKey:"type"}),filter:A=>js(Tn({layerType:_},A)),layout:A=>Gn({layer:o,key:A.key,value:A.value,valueSpec:{},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":w=>ja(Tn({layerType:_},w))}}),paint:A=>Gn({layer:o,key:A.key,value:A.value,valueSpec:{},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":w=>ld(Tn({layerType:_},w))}})}})),e}function qo(n){const e=n.value,o=n.key,l=Et(e);return"string"!==l?[new Xe(o,e,`string expected, ${l} found`)]:[]}const Ha={promoteId:function({key:n,value:e}){if("string"===Et(e))return qo({key:n,value:e});{const o=[];for(const l in e)o.push(...qo({key:`${n}.${l}`,value:e[l]}));return o}}};function Xl(n){const e=n.value,o=n.key,l=n.styleSpec,u=n.style;if(!e.type)return[new Xe(o,e,'"type" is required')];const f=ci(e.type);let _;switch(f){case"vector":case"raster":case"raster-dem":return _=Gn({key:o,value:e,valueSpec:l[`source_${f.replace("-","_")}`],style:n.style,styleSpec:l,objectElementValidators:Ha}),_;case"geojson":if(_=Gn({key:o,value:e,valueSpec:l.source_geojson,style:u,styleSpec:l,objectElementValidators:Ha}),e.cluster)for(const x in e.clusterProperties){const[A,w]=e.clusterProperties[x],T="string"==typeof A?[A,["accumulated"],["get",x]]:A;_.push(...ur({key:`${o}.${x}.map`,value:w,expressionContext:"cluster-map"})),_.push(...ur({key:`${o}.${x}.reduce`,value:T,expressionContext:"cluster-reduce"}))}return _;case"video":return Gn({key:o,value:e,valueSpec:l.source_video,style:u,styleSpec:l});case"image":return Gn({key:o,value:e,valueSpec:l.source_image,style:u,styleSpec:l});case"canvas":return[new Xe(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Us({key:`${o}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:u,styleSpec:l})}}function Hs(n){const e=n.value,o=n.styleSpec,l=o.light,u=n.style;let f=[];const _=Et(e);if(void 0===e)return f;if("object"!==_)return f=f.concat([new Xe("light",e,`object expected, ${_} found`)]),f;for(const x in e){const A=x.match(/^(.*)-transition$/);f=f.concat(A&&l[A[1]]&&l[A[1]].transition?ui({key:x,value:e[x],valueSpec:o.transition,style:u,styleSpec:o}):l[x]?ui({key:x,value:e[x],valueSpec:l[x],style:u,styleSpec:o}):[new Xe(x,e[x],`unknown property "${x}"`)])}return f}function Jl(n){const e=n.value,o=n.key,l=n.style,u=n.styleSpec,f=u.terrain;let _=[];const x=Et(e);if(void 0===e)return _;if("object"!==x)return _=_.concat([new Xe("terrain",e,`object expected, ${x} found`)]),_;for(const A in e){const w=A.match(/^(.*)-transition$/);_=_.concat(w&&f[w[1]]&&f[w[1]].transition?ui({key:A,value:e[A],valueSpec:u.transition,style:l,styleSpec:u}):f[A]?ui({key:A,value:e[A],valueSpec:f[A],style:l,styleSpec:u}):[new Xe(A,e[A],`unknown property "${A}"`)])}if(e.source){const A=l.sources&&l.sources[e.source],w=A&&ci(A.type);A?"raster-dem"!==w&&_.push(new Xe(o,e.source,`terrain cannot be used with a source of type ${String(w)}, it only be used with a "raster-dem" source type`)):_.push(new Xe(o,e.source,`source "${e.source}" not found`))}else _.push(new Xe(o,e,'terrain is missing required property "source"'));return _}function dd(n){const e=n.value,o=n.style,l=n.styleSpec,u=l.fog;let f=[];const _=Et(e);if(void 0===e)return f;if("object"!==_)return f=f.concat([new Xe("fog",e,`object expected, ${_} found`)]),f;for(const x in e){const A=x.match(/^(.*)-transition$/);f=f.concat(A&&u[A[1]]&&u[A[1]].transition?ui({key:x,value:e[x],valueSpec:l.transition,style:o,styleSpec:l}):u[x]?ui({key:x,value:e[x],valueSpec:u[x],style:o,styleSpec:l}):[new Xe(x,e[x],`unknown property "${x}"`)])}return f}const Wr={"*":()=>[],array:Ho,boolean:function(n){const e=n.value,o=n.key,l=Et(e);return"boolean"!==l?[new Xe(o,e,`boolean expected, ${l} found`)]:[]},number:mo,color:function(n){const e=n.key,o=n.value,l=Et(o);return"string"!==l?[new Xe(e,o,`color expected, ${l} found`)]:null===gu.parseCSSColor(o)?[new Xe(e,o,`color expected, "${o}" found`)]:[]},enum:Us,filter:js,function:go,layer:cd,object:Gn,source:Xl,light:Hs,terrain:Jl,fog:dd,string:qo,formatted:function(n){return 0===qo(n).length?[]:ur(n)},resolvedImage:function(n){return 0===qo(n).length?[]:ur(n)},projection:function(n){const e=n.value,o=n.styleSpec,l=o.projection,u=n.style;let f=[];const _=Et(e);if("object"===_)for(const x in e)f=f.concat(ui({key:x,value:e[x],valueSpec:l[x],style:u,styleSpec:o}));else"string"!==_&&(f=f.concat([new Xe("projection",e,`object or string expected, ${_} found`)]));return f}};function ui(n){const e=n.value,o=n.valueSpec,l=n.styleSpec;return o.expression&&Oa(ci(e))?go(n):o.expression&&Va(On(e))?ur(n):o.type&&Wr[o.type]?Wr[o.type](n):Gn(Tn({},n,{valueSpec:o.type?l[o.type]:o}))}function qa(n){const e=n.value,o=n.key,l=qo(n);return l.length||(-1===e.indexOf("{fontstack}")&&l.push(new Xe(o,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&l.push(new Xe(o,e,'"glyphs" url must include a "{range}" token'))),l}function ud(n,e=fe){return oo(ui({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,objectElementValidators:{glyphs:qa,"*":()=>[]}}))}const Kl=n=>oo(ld(n)),up=n=>oo(ja(n));function oo(n){return n.slice().sort((e,o)=>e.line&&o.line?e.line-o.line:0)}function Iu(n,e){let o=!1;if(e&&e.length)for(const l of e)n.fire(new ii(new Error(l.message))),o=!0;return o}var Ya=_o;function _o(n,e,o){var l=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;var u=new Int32Array(this.arrayBuffer);n=u[0],this.d=(e=u[1])+2*(o=u[2]);for(var f=0;f<this.d*this.d;f++){var _=u[3+f],x=u[3+f+1];l.push(_===x?null:u.subarray(_,x))}var A=u[3+l.length+1];this.keys=u.subarray(u[3+l.length],A),this.bboxes=u.subarray(A),this.insert=this._insertReadonly}else{this.d=e+2*o;for(var w=0;w<this.d*this.d;w++)l.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=n,this.padding=o,this.scale=e/n,this.uid=0;var T=o/e*n;this.min=-T,this.max=n+T}_o.prototype.insert=function(n,e,o,l,u){this._forEachCell(e,o,l,u,this._insertCell,this.uid++),this.keys.push(n),this.bboxes.push(e),this.bboxes.push(o),this.bboxes.push(l),this.bboxes.push(u)},_o.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},_o.prototype._insertCell=function(n,e,o,l,u,f){this.cells[u].push(f)},_o.prototype.query=function(n,e,o,l,u){var f=this.min,_=this.max;if(n<=f&&e<=f&&_<=o&&_<=l&&!u)return Array.prototype.slice.call(this.keys);var x=[];return this._forEachCell(n,e,o,l,this._queryCell,x,{},u),x},_o.prototype._queryCell=function(n,e,o,l,u,f,_,x){var A=this.cells[u];if(null!==A)for(var w=this.keys,T=this.bboxes,S=0;S<A.length;S++){var D=A[S];if(void 0===_[D]){var P=4*D;(x?x(T[P+0],T[P+1],T[P+2],T[P+3]):n<=T[P+2]&&e<=T[P+3]&&o>=T[P+0]&&l>=T[P+1])?(_[D]=!0,f.push(w[D])):_[D]=!1}}},_o.prototype._forEachCell=function(n,e,o,l,u,f,_,x){for(var A=this._convertToCellCoord(n),w=this._convertToCellCoord(e),T=this._convertToCellCoord(o),S=this._convertToCellCoord(l),D=A;D<=T;D++)for(var P=w;P<=S;P++){var F=this.d*P+D;if((!x||x(this._convertFromCellCoord(D),this._convertFromCellCoord(P),this._convertFromCellCoord(D+1),this._convertFromCellCoord(P+1)))&&u.call(this,n,e,o,l,F,f,_,x))return}},_o.prototype._convertFromCellCoord=function(n){return(n-this.padding)/this.scale},_o.prototype._convertToCellCoord=function(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))},_o.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var n=this.cells,e=3+this.cells.length+1+1,o=0,l=0;l<this.cells.length;l++)o+=this.cells[l].length;var u=new Int32Array(e+o+this.keys.length+this.bboxes.length);u[0]=this.extent,u[1]=this.n,u[2]=this.padding;for(var f=e,_=0;_<n.length;_++){var x=n[_];u[3+_]=f,u.set(x,f),f+=x.length}return u[3+n.length]=f,u.set(this.keys,f),u[3+n.length+1]=f+=this.keys.length,u.set(this.bboxes,f),f+=this.bboxes.length,u.buffer};const $l={};function Je(n,e,o={}){Object.defineProperty(n,"_classRegistryKey",{value:e,writeable:!1}),$l[e]={klass:n,omit:o.omit||[]}}Je(Object,"Object"),Ya.serialize=function(n,e){const o=n.toArrayBuffer();return e&&e.push(o),{buffer:o}},Ya.deserialize=function(n){return new Ya(n.buffer)},Object.defineProperty(Ya,"name",{value:"Grid"}),Je(Ya,"Grid"),Je(bi,"Color"),Je(Error,"Error"),Je(le,"AJAXError"),Je(Nn,"ResolvedImage"),Je(ni,"StylePropertyFunction"),Je(Yl,"StyleExpression",{omit:["_evaluator"]}),Je(Na,"ZoomDependentExpression"),Je(Ql,"ZoomConstantExpression"),Je(po,"CompoundExpression",{omit:["_evaluate"]});for(const n in Ia)$l[Ia[n]._classRegistryKey]||Je(Ia[n],`Expression${n}`);function Fu(n){return n&&"undefined"!=typeof ArrayBuffer&&(n instanceof ArrayBuffer||n.constructor&&"ArrayBuffer"===n.constructor.name)}function Lu(n){return Oe.ImageBitmap&&n instanceof Oe.ImageBitmap}function qs(n,e){if(null==n||"boolean"==typeof n||"number"==typeof n||"string"==typeof n||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp)return n;if(Fu(n)||Lu(n))return e&&e.push(n),n;if(ArrayBuffer.isView(n)){const o=n;return e&&e.push(o.buffer),o}if(n instanceof Oe.ImageData)return e&&e.push(n.data.buffer),n;if(Array.isArray(n)){const o=[];for(const l of n)o.push(qs(l,e));return o}if("object"==typeof n){const o=n.constructor,l=o._classRegistryKey;if(!l)throw new Error(`can't serialize object of unregistered class ${l}`);const u=o.serialize?o.serialize(n,e):{};if(!o.serialize){for(const f in n)n.hasOwnProperty(f)&&($l[l].omit.indexOf(f)>=0||(u[f]=qs(n[f],e)));n instanceof Error&&(u.message=n.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(u.$name=l),u}throw new Error("can't serialize object of type "+typeof n)}function Ys(n){if(null==n||"boolean"==typeof n||"number"==typeof n||"string"==typeof n||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||Fu(n)||Lu(n)||ArrayBuffer.isView(n)||n instanceof Oe.ImageData)return n;if(Array.isArray(n))return n.map(Ys);if("object"==typeof n){const e=n.$name||"Object",{klass:o}=$l[e];if(!o)throw new Error(`can't deserialize unregistered class ${e}`);if(o.deserialize)return o.deserialize(n);const l=Object.create(o.prototype);for(const u of Object.keys(n))"$name"!==u&&(l[u]=Ys(n[u]));return l}throw new Error("can't deserialize object of type "+typeof n)}class Ru{constructor(){this.first=!0}update(e,o){const l=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=o),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=l,!0))}}const Ou=n=>n>=1536&&n<=1791,hd=n=>n>=1872&&n<=1919,Qa=n=>n>=2208&&n<=2303,zu=n=>n>=11904&&n<=12031,pd=n=>n>=12032&&n<=12255,Wa=n=>n>=12272&&n<=12287,Qs=n=>n>=12288&&n<=12351,Ws=n=>n>=12352&&n<=12447,ec=n=>n>=12448&&n<=12543,tc=n=>n>=12544&&n<=12591,fd=n=>n>=12704&&n<=12735,md=n=>n>=12736&&n<=12783,gd=n=>n>=12784&&n<=12799,ic=n=>n>=12800&&n<=13055,nc=n=>n>=13056&&n<=13311,Vu=n=>n>=13312&&n<=19903,_d=n=>n>=19968&&n<=40959,Nu=n=>n>=40960&&n<=42127,oc=n=>n>=42128&&n<=42191,Uu=n=>n>=44032&&n<=55215,Gu=n=>n>=63744&&n<=64255,yd=n=>n>=64336&&n<=65023,Zu=n=>n>=65040&&n<=65055,Xr=n=>n>=65072&&n<=65103,ju=n=>n>=65104&&n<=65135,xd=n=>n>=65136&&n<=65279,rc=n=>n>=65280&&n<=65519;function Xa(n){for(const e of n)if(d(e.charCodeAt(0)))return!0;return!1}function p(n){for(const e of n)if(!i(e.charCodeAt(0)))return!1;return!0}function i(n){return!(Ou(n)||hd(n)||Qa(n)||yd(n)||xd(n))}function d(n){return!(746!==n&&747!==n&&(n<4352||!(fd(n)||tc(n)||Xr(n)&&!(n>=65097&&n<=65103)||Gu(n)||nc(n)||zu(n)||md(n)||!(!Qs(n)||n>=12296&&n<=12305||n>=12308&&n<=12319||12336===n)||Vu(n)||_d(n)||ic(n)||(e=n,e>=12592&&e<=12687)||(e=>e>=43360&&e<=43391)(n)||(e=>e>=55216&&e<=55295)(n)||(e=>e>=4352&&e<=4607)(n)||Uu(n)||Ws(n)||Wa(n)||(e=>e>=12688&&e<=12703)(n)||pd(n)||gd(n)||ec(n)&&12540!==n||!(!rc(n)||65288===n||65289===n||65293===n||n>=65306&&n<=65310||65339===n||65341===n||65343===n||n>=65371&&n<=65503||65507===n||n>=65512&&n<=65519)||!(!ju(n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||(e=>e>=5120&&e<=5759)(n)||(e=>e>=6320&&e<=6399)(n)||Zu(n)||(e=>e>=19904&&e<=19967)(n)||Nu(n)||oc(n))));var e}function m(n){return!(d(n)||(e=n,(o=e)>=128&&o<=255&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||(o=>o>=8192&&o<=8303)(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||(o=>o>=8448&&o<=8527)(e)||(o=>o>=8528&&o<=8591)(e)||(o=>o>=8960&&o<=9215)(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||(o=>o>=9216&&o<=9279)(e)&&9251!==e||(o=>o>=9280&&o<=9311)(e)||(o=>o>=9312&&o<=9471)(e)||(o=>o>=9632&&o<=9727)(e)||(o=>o>=9728&&o<=9983)(e)&&!(e>=9754&&e<=9759)||(o=>o>=11008&&o<=11263)(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Qs(e)||ec(e)||(o=>o>=57344&&o<=63743)(e)||Xr(e)||ju(e)||rc(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e,o}function y(n){return n>=1424&&n<=2303||yd(n)||xd(n)}function v(n,e){return!(!e&&y(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||(o=n,o>=6016&&o<=6143));var o}function C(n){for(const e of n)if(y(e.charCodeAt(0)))return!0;return!1}const M="deferred",E="loading",k="loaded";let I=null,L="unavailable",V=null;const Z=function(n){n&&"string"==typeof n&&n.indexOf("NetworkError")>-1&&(L="error"),I&&I(n)};function H(){U.fire(new Nt("pluginStateChange",{pluginStatus:L,pluginURL:V}))}const U=new jt,K=function(){return L},G=function(){if(L!==M||!V)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");L=E,H(),V&&de({url:V},n=>{n?Z(n):(L=k,H())})},Q={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>L===k||null!=Q.applyArabicShaping,isLoading:()=>L===E,setState(n){L=n.pluginStatus,V=n.pluginURL},isParsed:()=>null!=Q.applyArabicShaping&&null!=Q.processBidirectionalText&&null!=Q.processStyledBidirectionalText,getPluginURL:()=>V};class j{constructor(e,o){this.zoom=e,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition,this.pitch=o.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ru,this.transition={},this.pitch=0)}isSupportedScript(e){return function(o,l){for(const u of o)if(!v(u.charCodeAt(0),l))return!1;return!0}(e,Q.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,o=e-Math.floor(e),l=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*o}}}class ne{constructor(e,o){this.property=e,this.value=o,this.expression=function(l,u){if(Oa(l))return new ni(l,u);if(Va(l)){const f=Ns(l,u);if("error"===f.result)throw new Error(f.value.map(_=>`${_.key}: ${_.message}`).join(", "));return f.value}{let f=l;return"string"==typeof l&&"color"===u.type&&(f=bi.parse(l)),{kind:"constant",evaluate:()=>f}}}(void 0===o?e.specification.default:o,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,o,l){return this.property.possiblyEvaluate(this,e,o,l)}}class J{constructor(e){this.property=e,this.value=new ne(e,void 0)}transitioned(e,o){return new se(this.property,this.value,o,fi({},e.transition,this.transition),e.now)}untransitioned(){return new se(this.property,this.value,null,{},0)}}class ${constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return vi(this._values[e].value.value)}setValue(e,o){this._values.hasOwnProperty(e)||(this._values[e]=new J(this._values[e].property)),this._values[e].value=new ne(this._values[e].property,null===o?void 0:vi(o))}getTransition(e){return vi(this._values[e].transition)}setTransition(e,o){this._values.hasOwnProperty(e)||(this._values[e]=new J(this._values[e].property)),this._values[e].transition=vi(o)||void 0}serialize(){const e={};for(const o of Object.keys(this._values)){const l=this.getValue(o);void 0!==l&&(e[o]=l);const u=this.getTransition(o);void 0!==u&&(e[`${o}-transition`]=u)}return e}transitioned(e,o){const l=new _e(this._properties);for(const u of Object.keys(this._values))l._values[u]=this._values[u].transitioned(e,o._values[u]);return l}untransitioned(){const e=new _e(this._properties);for(const o of Object.keys(this._values))e._values[o]=this._values[o].untransitioned();return e}}class se{constructor(e,o,l,u,f){const _=u.delay||0,x=u.duration||0;f=f||0,this.property=e,this.value=o,this.begin=f+_,this.end=this.begin+x,e.specification.transition&&(u.delay||u.duration)&&(this.prior=l)}possiblyEvaluate(e,o,l){const u=e.now||0,f=this.value.possiblyEvaluate(e,o,l),_=this.prior;if(_){if(u>this.end)return this.prior=null,f;if(this.value.isDataDriven())return this.prior=null,f;if(u<this.begin)return _.possiblyEvaluate(e,o,l);{const x=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(e,o,l),f,Tr(x))}}return f}}class _e{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,o,l){const u=new Le(this._properties);for(const f of Object.keys(this._values))u._values[f]=this._values[f].possiblyEvaluate(e,o,l);return u}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Ce{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return vi(this._values[e].value)}setValue(e,o){this._values[e]=new ne(this._values[e].property,null===o?void 0:vi(o))}serialize(){const e={};for(const o of Object.keys(this._values)){const l=this.getValue(o);void 0!==l&&(e[o]=l)}return e}possiblyEvaluate(e,o,l){const u=new Le(this._properties);for(const f of Object.keys(this._values))u._values[f]=this._values[f].possiblyEvaluate(e,o,l);return u}}class ve{constructor(e,o,l){this.property=e,this.value=o,this.parameters=l}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,o,l,u){return this.property.evaluate(this.value,this.parameters,e,o,l,u)}}class Le{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class ie{constructor(e){this.specification=e}possiblyEvaluate(e,o){return e.expression.evaluate(o)}interpolate(e,o,l){const u=Bn[this.specification.type];return u?u(e,o,l):e}}class ge{constructor(e,o){this.specification=e,this.overrides=o}possiblyEvaluate(e,o,l,u){return new ve(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(o,null,{},l,u)}:e.expression,o)}interpolate(e,o,l){if("constant"!==e.value.kind||"constant"!==o.value.kind)return e;if(void 0===e.value.value||void 0===o.value.value)return new ve(this,{kind:"constant",value:void 0},e.parameters);const u=Bn[this.specification.type];return u?new ve(this,{kind:"constant",value:u(e.value.value,o.value.value,l)},e.parameters):e}evaluate(e,o,l,u,f,_){return"constant"===e.kind?e.value:e.evaluate(o,l,u,f,_)}}class Ee extends ge{possiblyEvaluate(e,o,l,u){if(void 0===e.value)return new ve(this,{kind:"constant",value:void 0},o);if("constant"===e.expression.kind){const f=e.expression.evaluate(o,null,{},l,u),_="resolvedImage"===e.property.specification.type&&"string"!=typeof f?f.name:f,x=this._calculate(_,_,_,o);return new ve(this,{kind:"constant",value:x},o)}if("camera"===e.expression.kind){const f=this._calculate(e.expression.evaluate({zoom:o.zoom-1}),e.expression.evaluate({zoom:o.zoom}),e.expression.evaluate({zoom:o.zoom+1}),o);return new ve(this,{kind:"constant",value:f},o)}return new ve(this,e.expression,o)}evaluate(e,o,l,u,f,_){if("source"===e.kind){const x=e.evaluate(o,l,u,f,_);return this._calculate(x,x,x,o)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(o.zoom)-1},l,u),e.evaluate({zoom:Math.floor(o.zoom)},l,u),e.evaluate({zoom:Math.floor(o.zoom)+1},l,u),o):e.value}_calculate(e,o,l,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:e,to:o,other:l}:{from:l,to:o,other:e}}interpolate(e){return e}}class Ze{constructor(e){this.specification=e}possiblyEvaluate(e,o,l,u){if(void 0!==e.value){if("constant"===e.expression.kind){const f=e.expression.evaluate(o,null,{},l,u);return this._calculate(f,f,f,o)}return this._calculate(e.expression.evaluate(new j(Math.floor(o.zoom-1),o)),e.expression.evaluate(new j(Math.floor(o.zoom),o)),e.expression.evaluate(new j(Math.floor(o.zoom+1),o)),o)}}_calculate(e,o,l,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:e,to:o}:{from:l,to:o}}interpolate(e){return e}}class Me{constructor(e){this.specification=e}possiblyEvaluate(e,o,l,u){return!!e.expression.evaluate(o,null,{},l,u)}interpolate(){return!1}}class ze{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const o=new j(0,{});for(const l in e){const u=e[l];u.specification.overridable&&this.overridableProperties.push(l);const f=this.defaultPropertyValues[l]=new ne(u,void 0),_=this.defaultTransitionablePropertyValues[l]=new J(u);this.defaultTransitioningPropertyValues[l]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=f.possiblyEvaluate(o)}}}function Ve(n,e){return 256*(n=_t(Math.floor(n),0,255))+_t(Math.floor(e),0,255)}Je(ge,"DataDrivenProperty"),Je(ie,"DataConstantProperty"),Je(Ee,"CrossFadedDataDrivenProperty"),Je(Ze,"CrossFadedProperty"),Je(Me,"ColorRampProperty");const je={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ge{constructor(e,o){this._structArray=e,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ne{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,o){return e._trim(),o&&(e.isTransferred=!0,o.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const o=Object.create(this.prototype);return o.arrayBuffer=e.arrayBuffer,o.length=e.length,o.capacity=e.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ye(n,e=1){let o=0,l=0;return{members:n.map(u=>{const f=je[u.type].BYTES_PER_ELEMENT,_=o=lt(o,Math.max(e,f)),x=u.components||1;return l=Math.max(l,f),o+=f*x,{name:u.name,type:u.type,components:x,offset:_}}),size:lt(o,Math.max(l,e)),alignment:e}}function lt(n,e){return Math.ceil(n/e)*e}class ut extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o){const l=this.length;return this.resize(l+1),this.emplace(l,e,o)}emplace(e,o,l){const u=2*e;return this.int16[u+0]=o,this.int16[u+1]=l,e}}ut.prototype.bytesPerElement=4,Je(ut,"StructArrayLayout2i4");class tt extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l){const u=this.length;return this.resize(u+1),this.emplace(u,e,o,l)}emplace(e,o,l,u){const f=3*e;return this.int16[f+0]=o,this.int16[f+1]=l,this.int16[f+2]=u,e}}tt.prototype.bytesPerElement=6,Je(tt,"StructArrayLayout3i6");class dt extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,u){const f=this.length;return this.resize(f+1),this.emplace(f,e,o,l,u)}emplace(e,o,l,u,f){const _=4*e;return this.int16[_+0]=o,this.int16[_+1]=l,this.int16[_+2]=u,this.int16[_+3]=f,e}}dt.prototype.bytesPerElement=8,Je(dt,"StructArrayLayout4i8");class Ht extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,u,f,_,x){const A=this.length;return this.resize(A+1),this.emplace(A,e,o,l,u,f,_,x)}emplace(e,o,l,u,f,_,x,A){const w=6*e,T=12*e,S=3*e;return this.int16[w+0]=o,this.int16[w+1]=l,this.uint8[T+4]=u,this.uint8[T+5]=f,this.uint8[T+6]=_,this.uint8[T+7]=x,this.float32[S+2]=A,e}}Ht.prototype.bytesPerElement=12,Je(Ht,"StructArrayLayout2i4ub1f12");class Kt extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,u){const f=this.length;return this.resize(f+1),this.emplace(f,e,o,l,u)}emplace(e,o,l,u,f){const _=4*e;return this.float32[_+0]=o,this.float32[_+1]=l,this.float32[_+2]=u,this.float32[_+3]=f,e}}Kt.prototype.bytesPerElement=16,Je(Kt,"StructArrayLayout4f16");class ai extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,u,f,_,x,A,w,T){const S=this.length;return this.resize(S+1),this.emplace(S,e,o,l,u,f,_,x,A,w,T)}emplace(e,o,l,u,f,_,x,A,w,T,S){const D=10*e;return this.uint16[D+0]=o,this.uint16[D+1]=l,this.uint16[D+2]=u,this.uint16[D+3]=f,this.uint16[D+4]=_,this.uint16[D+5]=x,this.uint16[D+6]=A,this.uint16[D+7]=w,this.uint16[D+8]=T,this.uint16[D+9]=S,e}}ai.prototype.bytesPerElement=20,Je(ai,"StructArrayLayout10ui20");class Xt extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,u,f,_,x,A){const w=this.length;return this.resize(w+1),this.emplace(w,e,o,l,u,f,_,x,A)}emplace(e,o,l,u,f,_,x,A,w){const T=8*e;return this.uint16[T+0]=o,this.uint16[T+1]=l,this.uint16[T+2]=u,this.uint16[T+3]=f,this.uint16[T+4]=_,this.uint16[T+5]=x,this.uint16[T+6]=A,this.uint16[T+7]=w,e}}Xt.prototype.bytesPerElement=16,Je(Xt,"StructArrayLayout8ui16");class _n extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,u,f,_){const x=this.length;return this.resize(x+1),this.emplace(x,e,o,l,u,f,_)}emplace(e,o,l,u,f,_,x){const A=6*e;return this.int16[A+0]=o,this.int16[A+1]=l,this.int16[A+2]=u,this.int16[A+3]=f,this.int16[A+4]=_,this.int16[A+5]=x,e}}_n.prototype.bytesPerElement=12,Je(_n,"StructArrayLayout6i12");class yo extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,u,f,_,x,A,w,T,S,D){const P=this.length;return this.resize(P+1),this.emplace(P,e,o,l,u,f,_,x,A,w,T,S,D)}emplace(e,o,l,u,f,_,x,A,w,T,S,D,P){const F=12*e;return this.int16[F+0]=o,this.int16[F+1]=l,this.int16[F+2]=u,this.int16[F+3]=f,this.uint16[F+4]=_,this.uint16[F+5]=x,this.uint16[F+6]=A,this.uint16[F+7]=w,this.int16[F+8]=T,this.int16[F+9]=S,this.int16[F+10]=D,this.int16[F+11]=P,e}}yo.prototype.bytesPerElement=24,Je(yo,"StructArrayLayout4i4ui4i24");class Yo extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,u,f,_){const x=this.length;return this.resize(x+1),this.emplace(x,e,o,l,u,f,_)}emplace(e,o,l,u,f,_,x){const A=10*e,w=5*e;return this.int16[A+0]=o,this.int16[A+1]=l,this.int16[A+2]=u,this.float32[w+2]=f,this.float32[w+3]=_,this.float32[w+4]=x,e}}Yo.prototype.bytesPerElement=20,Je(Yo,"StructArrayLayout3i3f20");class ri extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.uint32[1*e+0]=o,e}}ri.prototype.bytesPerElement=4,Je(ri,"StructArrayLayout1ul4");class hi extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,u,f,_,x,A,w,T,S,D,P){const F=this.length;return this.resize(F+1),this.emplace(F,e,o,l,u,f,_,x,A,w,T,S,D,P)}emplace(e,o,l,u,f,_,x,A,w,T,S,D,P,F){const z=20*e,q=10*e;return this.int16[z+0]=o,this.int16[z+1]=l,this.int16[z+2]=u,this.int16[z+3]=f,this.int16[z+4]=_,this.float32[q+3]=x,this.float32[q+4]=A,this.float32[q+5]=w,this.float32[q+6]=T,this.int16[z+14]=S,this.uint32[q+8]=D,this.uint16[z+18]=P,this.uint16[z+19]=F,e}}hi.prototype.bytesPerElement=40,Je(hi,"StructArrayLayout5i4f1i1ul2ui40");class Gt extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,u,f,_,x){const A=this.length;return this.resize(A+1),this.emplace(A,e,o,l,u,f,_,x)}emplace(e,o,l,u,f,_,x,A){const w=8*e;return this.int16[w+0]=o,this.int16[w+1]=l,this.int16[w+2]=u,this.int16[w+4]=f,this.int16[w+5]=_,this.int16[w+6]=x,this.int16[w+7]=A,e}}Gt.prototype.bytesPerElement=16,Je(Gt,"StructArrayLayout3i2i2i16");class Di extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,u,f){const _=this.length;return this.resize(_+1),this.emplace(_,e,o,l,u,f)}emplace(e,o,l,u,f,_){const x=4*e,A=8*e;return this.float32[x+0]=o,this.float32[x+1]=l,this.float32[x+2]=u,this.int16[A+6]=f,this.int16[A+7]=_,e}}Di.prototype.bytesPerElement=16,Je(Di,"StructArrayLayout2f1f2i16");class $i extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,u){const f=this.length;return this.resize(f+1),this.emplace(f,e,o,l,u)}emplace(e,o,l,u,f){const _=12*e,x=3*e;return this.uint8[_+0]=o,this.uint8[_+1]=l,this.float32[x+1]=u,this.float32[x+2]=f,e}}$i.prototype.bytesPerElement=12,Je($i,"StructArrayLayout2ub2f12");class $t extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l){const u=this.length;return this.resize(u+1),this.emplace(u,e,o,l)}emplace(e,o,l,u){const f=3*e;return this.float32[f+0]=o,this.float32[f+1]=l,this.float32[f+2]=u,e}}$t.prototype.bytesPerElement=12,Je($t,"StructArrayLayout3f12");class _i extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l){const u=this.length;return this.resize(u+1),this.emplace(u,e,o,l)}emplace(e,o,l,u){const f=3*e;return this.uint16[f+0]=o,this.uint16[f+1]=l,this.uint16[f+2]=u,e}}_i.prototype.bytesPerElement=6,Je(_i,"StructArrayLayout3ui6");class Jr extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,o,l,u,f,_,x,A,w,T,S,D,P,F,z,q,W,re,oe,ae,ce){const ue=this.length;return this.resize(ue+1),this.emplace(ue,e,o,l,u,f,_,x,A,w,T,S,D,P,F,z,q,W,re,oe,ae,ce)}emplace(e,o,l,u,f,_,x,A,w,T,S,D,P,F,z,q,W,re,oe,ae,ce,ue){const Ae=30*e,be=15*e,Se=60*e;return this.int16[Ae+0]=o,this.int16[Ae+1]=l,this.int16[Ae+2]=u,this.float32[be+2]=f,this.float32[be+3]=_,this.uint16[Ae+8]=x,this.uint16[Ae+9]=A,this.uint32[be+5]=w,this.uint32[be+6]=T,this.uint32[be+7]=S,this.uint16[Ae+16]=D,this.uint16[Ae+17]=P,this.uint16[Ae+18]=F,this.float32[be+10]=z,this.float32[be+11]=q,this.uint8[Se+48]=W,this.uint8[Se+49]=re,this.uint8[Se+50]=oe,this.uint32[be+13]=ae,this.int16[Ae+28]=ce,this.uint8[Se+58]=ue,e}}Jr.prototype.bytesPerElement=60,Je(Jr,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class xo extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,o,l,u,f,_,x,A,w,T,S,D,P,F,z,q,W,re,oe,ae,ce,ue,Ae,be,Se,Ie,ye,Te,ke,Fe){const qe=this.length;return this.resize(qe+1),this.emplace(qe,e,o,l,u,f,_,x,A,w,T,S,D,P,F,z,q,W,re,oe,ae,ce,ue,Ae,be,Se,Ie,ye,Te,ke,Fe)}emplace(e,o,l,u,f,_,x,A,w,T,S,D,P,F,z,q,W,re,oe,ae,ce,ue,Ae,be,Se,Ie,ye,Te,ke,Fe,qe){const Be=38*e,He=19*e;return this.int16[Be+0]=o,this.int16[Be+1]=l,this.int16[Be+2]=u,this.float32[He+2]=f,this.float32[He+3]=_,this.int16[Be+8]=x,this.int16[Be+9]=A,this.int16[Be+10]=w,this.int16[Be+11]=T,this.int16[Be+12]=S,this.int16[Be+13]=D,this.uint16[Be+14]=P,this.uint16[Be+15]=F,this.uint16[Be+16]=z,this.uint16[Be+17]=q,this.uint16[Be+18]=W,this.uint16[Be+19]=re,this.uint16[Be+20]=oe,this.uint16[Be+21]=ae,this.uint16[Be+22]=ce,this.uint16[Be+23]=ue,this.uint16[Be+24]=Ae,this.uint16[Be+25]=be,this.uint16[Be+26]=Se,this.uint16[Be+27]=Ie,this.uint16[Be+28]=ye,this.uint32[He+15]=Te,this.float32[He+16]=ke,this.float32[He+17]=Fe,this.float32[He+18]=qe,e}}xo.prototype.bytesPerElement=76,Je(xo,"StructArrayLayout3i2f6i15ui1ul3f76");class Ja extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.float32[1*e+0]=o,e}}Ja.prototype.bytesPerElement=4,Je(Ja,"StructArrayLayout1f4");class Kr extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,u,f,_,x){const A=this.length;return this.resize(A+1),this.emplace(A,e,o,l,u,f,_,x)}emplace(e,o,l,u,f,_,x,A){const w=7*e;return this.float32[w+0]=o,this.float32[w+1]=l,this.float32[w+2]=u,this.float32[w+3]=f,this.float32[w+4]=_,this.float32[w+5]=x,this.float32[w+6]=A,e}}Kr.prototype.bytesPerElement=28,Je(Kr,"StructArrayLayout7f28");class fr extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,u,f){const _=this.length;return this.resize(_+1),this.emplace(_,e,o,l,u,f)}emplace(e,o,l,u,f,_){const x=5*e;return this.float32[x+0]=o,this.float32[x+1]=l,this.float32[x+2]=u,this.float32[x+3]=f,this.float32[x+4]=_,e}}fr.prototype.bytesPerElement=20,Je(fr,"StructArrayLayout5f20");class en extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,u){const f=this.length;return this.resize(f+1),this.emplace(f,e,o,l,u)}emplace(e,o,l,u,f){const _=6*e;return this.uint32[3*e+0]=o,this.uint16[_+2]=l,this.uint16[_+3]=u,this.uint16[_+4]=f,e}}en.prototype.bytesPerElement=12,Je(en,"StructArrayLayout1ul3ui12");class Pn extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o){const l=this.length;return this.resize(l+1),this.emplace(l,e,o)}emplace(e,o,l){const u=2*e;return this.uint16[u+0]=o,this.uint16[u+1]=l,e}}Pn.prototype.bytesPerElement=4,Je(Pn,"StructArrayLayout2ui4");class vo extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.uint16[1*e+0]=o,e}}vo.prototype.bytesPerElement=2,Je(vo,"StructArrayLayout1ui2");class $r extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o){const l=this.length;return this.resize(l+1),this.emplace(l,e,o)}emplace(e,o,l){const u=2*e;return this.float32[u+0]=o,this.float32[u+1]=l,e}}$r.prototype.bytesPerElement=8,Je($r,"StructArrayLayout2f8");class vd extends Ge{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}vd.prototype.size=12;class hp extends _n{get(e){return new vd(this,e)}}Je(hp,"FillExtrusionExtArray");class ac extends Ge{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ac.prototype.size=40;class Hu extends hi{get(e){return new ac(this,e)}}Je(Hu,"CollisionBoxArray");class Xs extends Ge{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Xs.prototype.size=60;class qu extends Jr{get(e){return new Xs(this,e)}}Je(qu,"PlacedSymbolArray");class pp extends Ge{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}pp.prototype.size=76;class Yu extends xo{get(e){return new pp(this,e)}}Je(Yu,"SymbolInstanceArray");class Qu extends Ja{getoffsetX(e){return this.float32[1*e+0]}}Je(Qu,"GlyphOffsetArray");class ea extends tt{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Je(ea,"SymbolLineVertexArray");class sc extends Ge{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}sc.prototype.size=12;class fp extends en{get(e){return new sc(this,e)}}Je(fp,"FeatureIndexArray");class rm extends Ge{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}rm.prototype.size=4;class lc extends Pn{get(e){return new rm(this,e)}}Je(lc,"FillExtrusionCentroidArray");class Wu extends Ge{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Wu.prototype.size=12;class mp extends _n{get(e){return new Wu(this,e)}}Je(mp,"CircleGlobeExtArray");const am=Ye([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),sm=Ye([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var gp=Ma(function(n){n.exports=function(e,o){var l,u,f,_,x,A,w,T;for(u=e.length-(l=3&e.length),f=o,x=3432918353,A=461845907,T=0;T<u;)w=255&e.charCodeAt(T)|(255&e.charCodeAt(++T))<<8|(255&e.charCodeAt(++T))<<16|(255&e.charCodeAt(++T))<<24,++T,f=27492+(65535&(_=5*(65535&(f=(f^=w=(65535&(w=(w=(65535&w)*x+(((w>>>16)*x&65535)<<16)&4294967295)<<15|w>>>17))*A+(((w>>>16)*A&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(w=0,l){case 3:w^=(255&e.charCodeAt(T+2))<<16;case 2:w^=(255&e.charCodeAt(T+1))<<8;case 1:f^=w=(65535&(w=(w=(65535&(w^=255&e.charCodeAt(T)))*x+(((w>>>16)*x&65535)<<16)&4294967295)<<15|w>>>17))*A+(((w>>>16)*A&65535)<<16)&4294967295}return f^=e.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0}}),_p=Ma(function(n){n.exports=function(e,o){for(var l,u=e.length,f=o^u,_=0;u>=4;)l=1540483477*(65535&(l=255&e.charCodeAt(_)|(255&e.charCodeAt(++_))<<8|(255&e.charCodeAt(++_))<<16|(255&e.charCodeAt(++_))<<24))+((1540483477*(l>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),u-=4,++_;switch(u){case 3:f^=(255&e.charCodeAt(_+2))<<16;case 2:f^=(255&e.charCodeAt(_+1))<<8;case 1:f=1540483477*(65535&(f^=255&e.charCodeAt(_)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0}}),cc=gp,lm=_p;cc.murmur3=gp,cc.murmur2=lm;class Js{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,o,l,u){this.ids.push(yp(e)),this.positions.push(o,l,u)}getPositions(e){const o=yp(e);let l=0,u=this.ids.length-1;for(;l<u;){const _=l+u>>1;this.ids[_]>=o?u=_:l=_+1}const f=[];for(;this.ids[l]===o;)f.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return f}static serialize(e,o){const l=new Float64Array(e.ids),u=new Uint32Array(e.positions);return xp(l,u,0,l.length-1),o&&o.push(l.buffer,u.buffer),{ids:l,positions:u}}static deserialize(e){const o=new Js;return o.ids=e.ids,o.positions=e.positions,o.indexed=!0,o}}function yp(n){const e=+n;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:cc(String(n))}function xp(n,e,o,l){for(;o<l;){const u=n[o+l>>1];let f=o-1,_=l+1;for(;;){do{f++}while(n[f]<u);do{_--}while(n[_]>u);if(f>=_)break;Xu(n,f,_),Xu(e,3*f,3*_),Xu(e,3*f+1,3*_+1),Xu(e,3*f+2,3*_+2)}_-o<l-_?(xp(n,e,o,_),o=_+1):(xp(n,e,_+1,l),l=_)}}function Xu(n,e,o){const l=n[e];n[e]=n[o],n[o]=l}Je(Js,"FeaturePositionMap");class ta{constructor(e,o){this.gl=e.gl,this.location=o}}class Ju extends ta{constructor(e,o){super(e,o),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class cm extends ta{constructor(e,o){super(e,o),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Ku extends ta{constructor(e,o){super(e,o),this.current=bi.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Vg=new Float32Array(16),Ng=new Float32Array(9),Ug=new Float32Array(4);function $u(n){return[Ve(255*n.r,255*n.g),Ve(255*n.b,255*n.a)]}class Ks{constructor(e,o,l){this.value=e,this.uniformNames=o.map(u=>`u_${u}`),this.type=l}setUniform(e,o,l){e.set(l.constantOr(this.value))}getBinding(e,o,l){return"color"===this.type?new Ku(e,o):new Ju(e,o)}}class ro{constructor(e,o){this.uniformNames=o.map(l=>`u_${l}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,o){this.pixelRatioFrom=o.pixelRatio||1,this.pixelRatioTo=e.pixelRatio||1,this.patternFrom=o.tl.concat(o.br),this.patternTo=e.tl.concat(e.br)}setUniform(e,o,l,u){const f="u_pattern_to"===u||"u_dash_to"===u?this.patternTo:"u_pattern_from"===u||"u_dash_from"===u?this.patternFrom:"u_pixel_ratio_to"===u?this.pixelRatioTo:"u_pixel_ratio_from"===u?this.pixelRatioFrom:null;f&&e.set(f)}getBinding(e,o,l){return"u_pattern_from"===l||"u_pattern_to"===l||"u_dash_from"===l||"u_dash_to"===l?new cm(e,o):new Ju(e,o)}}class Vi{constructor(e,o,l,u){this.expression=e,this.type=l,this.maxValue=0,this.paintVertexAttributes=o.map(f=>({name:`a_${f}`,type:"Float32",components:"color"===l?2:1,offset:0})),this.paintVertexArray=new u}populatePaintArray(e,o,l,u,f,_){const x=this.paintVertexArray.length,A=this.expression.evaluate(new j(0),o,{},f,u,_);this.paintVertexArray.resize(e),this._setPaintValue(x,e,A)}updatePaintArray(e,o,l,u,f){const _=this.expression.evaluate({zoom:0},l,u,void 0,f);this._setPaintValue(e,o,_)}_setPaintValue(e,o,l){if("color"===this.type){const u=$u(l);for(let f=e;f<o;f++)this.paintVertexArray.emplace(f,u[0],u[1])}else{for(let u=e;u<o;u++)this.paintVertexArray.emplace(u,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ao{constructor(e,o,l,u,f,_){this.expression=e,this.uniformNames=o.map(x=>`u_${x}_t`),this.type=l,this.useIntegerZoom=u,this.zoom=f,this.maxValue=0,this.paintVertexAttributes=o.map(x=>({name:`a_${x}`,type:"Float32",components:"color"===l?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(e,o,l,u,f,_){const x=this.expression.evaluate(new j(this.zoom),o,{},f,u,_),A=this.expression.evaluate(new j(this.zoom+1),o,{},f,u,_),w=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(w,e,x,A)}updatePaintArray(e,o,l,u,f){const _=this.expression.evaluate({zoom:this.zoom},l,u,void 0,f),x=this.expression.evaluate({zoom:this.zoom+1},l,u,void 0,f);this._setPaintValue(e,o,_,x)}_setPaintValue(e,o,l,u){if("color"===this.type){const f=$u(l),_=$u(u);for(let x=e;x<o;x++)this.paintVertexArray.emplace(x,f[0],f[1],_[0],_[1])}else{for(let f=e;f<o;f++)this.paintVertexArray.emplace(f,l,u);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(u))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,o){const l=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,u=_t(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);e.set(u)}getBinding(e,o,l){return new Ju(e,o)}}class Qo{constructor(e,o,l,u,f,_,x){this.expression=e,this.type=l,this.useIntegerZoom=u,this.zoom=f,this.layerId=x,this.paintVertexAttributes=("array"===l?sm:am).members;for(let A=0;A<o.length;++A);this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(e,o,l){const u=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(u,e,o.patterns&&o.patterns[this.layerId],l)}updatePaintArray(e,o,l,u,f,_){this._setPaintValues(e,o,l.patterns&&l.patterns[this.layerId],_)}_setPaintValues(e,o,l,u){if(!u||!l)return;const{min:f,mid:_,max:x}=l,A=u[f],w=u[_],T=u[x];if(A&&w&&T)for(let S=e;S<o;S++)this._setPaintValue(this.zoomInPaintVertexArray,S,w,A),this._setPaintValue(this.zoomOutPaintVertexArray,S,w,T)}_setPaintValue(e,o,l,u){e.emplace(o,l.tl[0],l.tl[1],l.br[0],l.br[1],u.tl[0],u.tl[1],u.br[0],u.br[1],l.pixelRatio,u.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ia{constructor(e,o,l=(()=>!0)){this.binders={},this._buffers=[];const u=[];for(const f in e.paint._values){if(!l(f))continue;const _=e.paint.get(f);if(!(_ instanceof ve&&La(_.property.specification)))continue;const x=eh(f,e.type),A=_.value,w=_.property.specification.type,T=_.property.useIntegerZoom,S=_.property.specification["property-type"],D="cross-faded"===S||"cross-faded-data-driven"===S,P="line-dasharray"===String(f)&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==A.kind||P)if("source"===A.kind||P||D){const F=tn(f,w,"source");this.binders[f]=D?new Qo(A,x,w,T,o,F,e.id):new Vi(A,x,w,F),u.push(`/a_${f}`)}else{const F=tn(f,w,"composite");this.binders[f]=new Ao(A,x,w,T,o,F),u.push(`/z_${f}`)}else this.binders[f]=D?new ro(A.value,x):new Ks(A.value,x,w),u.push(`/u_${f}`)}this.cacheKey=u.sort().join("")}getMaxValue(e){const o=this.binders[e];return o instanceof Vi||o instanceof Ao?o.maxValue:0}populatePaintArrays(e,o,l,u,f,_){for(const x in this.binders){const A=this.binders[x];(A instanceof Vi||A instanceof Ao||A instanceof Qo)&&A.populatePaintArray(e,o,l,u,f,_)}}setConstantPatternPositions(e,o){for(const l in this.binders){const u=this.binders[l];u instanceof ro&&u.setConstantPatternPositions(e,o)}}updatePaintArrays(e,o,l,u,f,_){let x=!1;for(const A in e){const w=o.getPositions(A);for(const T of w){const S=l.feature(T.index);for(const D in this.binders){const P=this.binders[D];if((P instanceof Vi||P instanceof Ao||P instanceof Qo)&&!0===P.expression.isStateDependent){const F=u.paint.get(D);P.expression=F.value,P.updatePaintArray(T.start,T.end,S,e[A],f,_),x=!0}}}}return x}defines(){const e=[];for(const o in this.binders){const l=this.binders[o];(l instanceof Ks||l instanceof ro)&&e.push(...l.uniformNames.map(u=>`#define HAS_UNIFORM_${u}`))}return e}getBinderAttributes(){const e=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof Vi||l instanceof Ao||l instanceof Qo)for(let u=0;u<l.paintVertexAttributes.length;u++)e.push(l.paintVertexAttributes[u].name)}return e}getBinderUniforms(){const e=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof Ks||l instanceof ro||l instanceof Ao)for(const u of l.uniformNames)e.push(u)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,o){const l=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof Ks||f instanceof ro||f instanceof Ao)for(const _ of f.uniformNames)if(o[_]){const x=f.getBinding(e,o[_],_);l.push({name:_,property:u,binding:x})}}return l}setUniforms(e,o,l,u){for(const{name:f,property:_,binding:x}of o)this.binders[_].setUniform(x,u,l.get(_),f)}updatePaintBuffers(e){this._buffers=[];for(const o in this.binders){const l=this.binders[o];if(e&&l instanceof Qo){const u=2===e.fromScale?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;u&&this._buffers.push(u)}else(l instanceof Vi||l instanceof Ao)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(e){for(const o in this.binders){const l=this.binders[o];(l instanceof Vi||l instanceof Ao||l instanceof Qo)&&l.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const o=this.binders[e];(o instanceof Vi||o instanceof Ao||o instanceof Qo)&&o.destroy()}}}class Ka{constructor(e,o,l=(()=>!0)){this.programConfigurations={};for(const u of e)this.programConfigurations[u.id]=new ia(u,o,l);this.needsUpload=!1,this._featureMap=new Js,this._bufferOffset=0}populatePaintArrays(e,o,l,u,f,_,x){for(const A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(e,o,u,f,_,x);void 0!==o.id&&this._featureMap.add(o.id,l,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,o,l,u,f){for(const _ of l)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(e,this._featureMap,o,_,u,f)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const dm={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function eh(n,e){return dm[n]||[n.replace(`${e}-`,"").replace(/-/g,"_")]}const na={"line-pattern":{source:ai,composite:ai},"fill-pattern":{source:ai,composite:ai},"fill-extrusion-pattern":{source:ai,composite:ai},"line-dasharray":{source:Xt,composite:Xt}},vp={color:{source:$r,composite:Kt},number:{source:Ja,composite:$r}};function tn(n,e,o){const l=na[n];return l&&l[o]||vp[e][o]}Je(Ks,"ConstantBinder"),Je(ro,"CrossFadedConstantBinder"),Je(Vi,"SourceExpressionBinder"),Je(Qo,"CrossFadedCompositeBinder"),Je(Ao,"CompositeExpressionBinder"),Je(ia,"ProgramConfiguration",{omit:["_buffers"]}),Je(Ka,"ProgramConfigurationSet");const bo="-transition";class wo extends jt{constructor(e,o){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),o.layout&&(this._unevaluatedLayout=new Ce(o.layout)),o.paint)){this._transitionablePaint=new $(o.paint);for(const l in e.paint)this.setPaintProperty(l,e.paint[l],{validate:!1});for(const l in e.layout)this.setLayoutProperty(l,e.layout[l],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Le(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,o,l={}){null!=o&&this._validate(up,`layers.${this.id}.layout.${e}`,e,o,l)||("visibility"!==e?this._unevaluatedLayout.setValue(e,o):this.visibility=o)}getPaintProperty(e){return wt(e,bo)?this._transitionablePaint.getTransition(e.slice(0,-bo.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,o,l={}){if(null!=o&&this._validate(Kl,`layers.${this.id}.paint.${e}`,e,o,l))return!1;if(wt(e,bo))return this._transitionablePaint.setTransition(e.slice(0,-bo.length),o||void 0),!1;{const u=this._transitionablePaint._values[e],f="cross-faded-data-driven"===u.property.specification["property-type"],_=u.value.isDataDriven(),x=u.value;this._transitionablePaint.setValue(e,o),this._handleSpecialPaintPropertyUpdate(e);const A=this._transitionablePaint._values[e].value;return A.isDataDriven()||_||f||this._handleOverridablePaintPropertyUpdate(e,x,A)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,o,l){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,o){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,o)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Io(e,(o,l)=>!(void 0===o||"layout"===l&&!Object.keys(o).length||"paint"===l&&!Object.keys(o).length))}_validate(e,o,l,u,f={}){return(!f||!1!==f.validate)&&Iu(this,e.call(ud,{key:o,layerType:this.type,objectKey:l,value:u,styleSpec:fe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const o=this.paint.get(e);if(o instanceof ve&&La(o.property.specification)&&("source"===o.value.kind||"composite"===o.value.kind)&&o.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=hr(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Gg=Ye([{name:"a_pos",components:2,type:"Int16"}],4),Ap=Ye([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class yi{constructor(e=[]){this.segments=e}prepareSegment(e,o,l,u){let f=this.segments[this.segments.length-1];return e>yi.MAX_VERTEX_ARRAY_LENGTH&&Ai(`Max vertices per segment is ${yi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!f||f.vertexLength+e>yi.MAX_VERTEX_ARRAY_LENGTH||f.sortKey!==u)&&(f={vertexOffset:o.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0},void 0!==u&&(f.sortKey=u),this.segments.push(f)),f}get(){return this.segments}destroy(){for(const e of this.segments)for(const o in e.vaos)e.vaos[o].destroy()}static simpleSegment(e,o,l,u){return new yi([{vertexOffset:e,primitiveOffset:o,vertexLength:l,primitiveLength:u,vaos:{},sortKey:0}])}}yi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Je(yi,"SegmentVector");var rt=8192;class mr{constructor(e,o){e&&(o?this.setSouthWest(e).setNorthEast(o):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof qt?new qt(e.lng,e.lat):qt.convert(e),this}setSouthWest(e){return this._sw=e instanceof qt?new qt(e.lng,e.lat):qt.convert(e),this}extend(e){const o=this._sw,l=this._ne;let u,f;if(e instanceof qt)u=e,f=e;else{if(!(e instanceof mr))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(mr.convert(e)):this.extend(qt.convert(e)):this;if(u=e._sw,f=e._ne,!u||!f)return this}return o||l?(o.lng=Math.min(u.lng,o.lng),o.lat=Math.min(u.lat,o.lat),l.lng=Math.max(f.lng,l.lng),l.lat=Math.max(f.lat,l.lat)):(this._sw=new qt(u.lng,u.lat),this._ne=new qt(f.lng,f.lat)),this}getCenter(){return new qt((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new qt(this.getWest(),this.getNorth())}getSouthEast(){return new qt(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:o,lat:l}=qt.convert(e);let u=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(u=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&u}static convert(e){return!e||e instanceof mr?e:new mr(e)}}const Ad=6371008.8;class qt{constructor(e,o){if(isNaN(e)||isNaN(o))throw new Error(`Invalid LngLat object: (${e}, ${o})`);if(this.lng=+e,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new qt(Rn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const o=Math.PI/180,l=this.lat*o,u=e.lat*o,f=Math.sin(l)*Math.sin(u)+Math.cos(l)*Math.cos(u)*Math.cos((e.lng-this.lng)*o);return Ad*Math.acos(Math.min(f,1))}toBounds(e=0){const o=360*e/40075017,l=o/Math.cos(Math.PI/180*this.lat);return new mr(new qt(this.lng-l,this.lat-o),new qt(this.lng+l,this.lat+o))}static convert(e){if(e instanceof qt)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new qt(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new qt(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const th=2*Math.PI*Ad;function bd(n){return th*Math.cos(n*Math.PI/180)}function Wo(n){return(180+n)/360}function oa(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Zn(n,e){return n/bd(e)}function nn(n){return 360*n-180}function Ti(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90}function bp(n,e){return n*bd(Ti(e))}const Co=85.051129;class $a{constructor(e,o,l=0){this.x=+e,this.y=+o,this.z=+l}static fromLngLat(e,o=0){const l=qt.convert(e);return new $a(Wo(l.lng),oa(l.lat),Zn(o,l.lat))}toLngLat(){return new qt(nn(this.x),Ti(this.y))}toAltitude(){return bp(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/th*(e=Ti(this.y),1/Math.cos(e*Math.PI/180));var e}}function dc(n,e,o,l,u,f,_,x,A){const w=(e+l)/2,T=(o+u)/2,S=new Ue(w,T);x(S),function(D,P,F,z,q,W){const re=F-q,oe=z-W;return Math.abs((z-P)*re-(F-D)*oe)/Math.hypot(re,oe)}(S.x,S.y,f.x,f.y,_.x,_.y)>=A?(dc(n,e,o,w,T,f,S,x,A),dc(n,w,T,l,u,S,_,x,A)):n.push(_)}function ih(n,e,o){let l=n[0],u=l.x,f=l.y;e(l);const _=[l];for(let x=1;x<n.length;x++){const A=n[x],{x:w,y:T}=A;e(A),dc(_,u,f,w,T,l,A,e,o),u=w,f=T,l=A}return _}function uc(n,e,o,l,u){if(u(e,o)){const f=e.add(o).mult(.5);l(f),uc(n,e,f,l,u),uc(n,f,o,l,u)}else n.push(o)}function wp(n,e,o){let l=n[0];e(l);const u=[l];for(let f=1;f<n.length;f++){const _=n[f];e(_),uc(u,l,_,e,o),l=_}return u}const wd=Math.pow(2,14)-1,nh=-wd-1;function oh(n,e){const o=Math.round(n.x*e),l=Math.round(n.y*e);return n.x=_t(o,nh,wd),n.y=_t(l,nh,wd),(o<n.x||o>n.x+1||l<n.y||l>n.y+1)&&Ai("Geometry exceeds allowed extent, reduce your vector tile buffer size"),n}function ao(n,e,o){const l=n.loadGeometry(),u=n.extent,f=rt/u;if(e&&o&&o.projection.isReprojectedInTileSpace){const _=1<<e.z,{scale:x,x:A,y:w,projection:T}=o,S=D=>{const P=nn((e.x+D.x/u)/_),F=Ti((e.y+D.y/u)/_),z=T.project(P,F);D.x=(z.x*x-A)*u,D.y=(z.y*x-w)*u};for(let D=0;D<l.length;D++)if(1!==n.type)l[D]=ih(l[D],S,1);else{const P=[];for(const F of l[D])F.x<0||F.x>=u||F.y<0||F.y>=u||(S(F),P.push(F));l[D]=P}}for(const _ of l)for(const x of _)oh(x,f);return l}function ra(n,e){return{type:n.type,id:n.id,properties:n.properties,geometry:e?ao(n):[]}}function hc(n,e,o,l,u){n.emplaceBack(2*e+(l+1)/2,2*o+(u+1)/2)}function pc(n,e,o){n.emplaceBack(e.x,e.y,e.z,16384*o[0],16384*o[1],16384*o[2])}class Xo{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new ut,this.indexArray=new _i,this.segments=new yi,this.programConfigurations=new Ka(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,l,u){const f=this.layers[0],_=[];let x=null;"circle"===f.type&&(x=f.layout.get("circle-sort-key"));for(const{feature:w,id:T,index:S,sourceLayerIndex:D}of e){const P=this.layers[0]._featureFilter.needGeometry,F=ra(w,P);if(!this.layers[0]._featureFilter.filter(new j(this.zoom),F,l))continue;const z=x?x.evaluate(F,{},l):void 0,q={id:T,properties:w.properties,type:w.type,sourceLayerIndex:D,index:S,geometry:P?F.geometry:ao(w,l,u),patterns:{},sortKey:z};_.push(q)}x&&_.sort((w,T)=>w.sortKey-T.sortKey);let A=null;"globe"===u.projection.name&&(this.globeExtVertexArray=new mp,A=u.projection);for(const w of _){const{geometry:T,index:S,sourceLayerIndex:D}=w,P=e[S].feature;this.addFeature(w,T,S,o.availableImages,l,A),o.featureIndex.insert(P,T,S,D,this.index)}}update(e,o,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l,u)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Gg.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Ap.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,o,l,u,f,_){for(const x of o)for(const A of x){const w=A.x,T=A.y;if(w<0||w>=rt||T<0||T>=rt)continue;if(_){const P=_.projectTilePoint(w,T,f),F=_.upVector(f,w,T),z=this.globeExtVertexArray;pc(z,P,F),pc(z,P,F),pc(z,P,F),pc(z,P,F)}const S=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),D=S.vertexLength;hc(this.layoutVertexArray,w,T,-1,-1),hc(this.layoutVertexArray,w,T,1,-1),hc(this.layoutVertexArray,w,T,1,1),hc(this.layoutVertexArray,w,T,-1,1),this.indexArray.emplaceBack(D,D+1,D+2),this.indexArray.emplaceBack(D,D+2,D+3),S.vertexLength+=4,S.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,{},u,f)}}function cn(n,e){for(let o=0;o<n.length;o++)if(gr(e,n[o]))return!0;for(let o=0;o<e.length;o++)if(gr(n,e[o]))return!0;return!!Cd(n,e)}function Cp(n,e,o){return!!gr(n,e)||!!fc(e,n,o)}function um(n,e){if(1===n.length)return Mp(e,n[0]);for(let o=0;o<e.length;o++){const l=e[o];for(let u=0;u<l.length;u++)if(gr(n,l[u]))return!0}for(let o=0;o<n.length;o++)if(Mp(e,n[o]))return!0;for(let o=0;o<e.length;o++)if(Cd(n,e[o]))return!0;return!1}function Zg(n,e,o){if(n.length>1){if(Cd(n,e))return!0;for(let l=0;l<e.length;l++)if(fc(e[l],n,o))return!0}for(let l=0;l<n.length;l++)if(fc(n[l],e,o))return!0;return!1}function Cd(n,e){if(0===n.length||0===e.length)return!1;for(let o=0;o<n.length-1;o++){const l=n[o],u=n[o+1];for(let f=0;f<e.length-1;f++)if(hm(l,u,e[f],e[f+1]))return!0}return!1}function hm(n,e,o,l){return Gi(n,o,l)!==Gi(e,o,l)&&Gi(n,e,o)!==Gi(n,e,l)}function fc(n,e,o){const l=o*o;if(1===e.length)return n.distSqr(e[0])<l;for(let u=1;u<e.length;u++)if(mc(n,e[u-1],e[u])<l)return!0;return!1}function mc(n,e,o){const l=e.distSqr(o);if(0===l)return n.distSqr(e);const u=((n.x-e.x)*(o.x-e.x)+(n.y-e.y)*(o.y-e.y))/l;return n.distSqr(u<0?e:u>1?o:o.sub(e)._mult(u)._add(e))}function Mp(n,e){let o,l,u,f=!1;for(let _=0;_<n.length;_++){o=n[_];for(let x=0,A=o.length-1;x<o.length;A=x++)l=o[x],u=o[A],l.y>e.y!=u.y>e.y&&e.x<(u.x-l.x)*(e.y-l.y)/(u.y-l.y)+l.x&&(f=!f)}return f}function gr(n,e){let o=!1;for(let l=0,u=n.length-1;l<n.length;u=l++){const f=n[l],_=n[u];f.y>e.y!=_.y>e.y&&e.x<(_.x-f.x)*(e.y-f.y)/(_.y-f.y)+f.x&&(o=!o)}return o}function Tp(n,e,o,l,u){for(const _ of n)if(e<=_.x&&o<=_.y&&l>=_.x&&u>=_.y)return!0;const f=[new Ue(e,o),new Ue(e,u),new Ue(l,u),new Ue(l,o)];if(n.length>2)for(const _ of f)if(gr(n,_))return!0;for(let _=0;_<n.length-1;_++)if(jg(n[_],n[_+1],f))return!0;return!1}function jg(n,e,o){const l=o[0],u=o[2];if(n.x<l.x&&e.x<l.x||n.x>u.x&&e.x>u.x||n.y<l.y&&e.y<l.y||n.y>u.y&&e.y>u.y)return!1;const f=Gi(n,e,o[0]);return f!==Gi(n,e,o[1])||f!==Gi(n,e,o[2])||f!==Gi(n,e,o[3])}function gc(n,e,o){const l=e.paint.get(n).value;return"constant"===l.kind?l.value:o.programConfigurations.get(e.id).getMaxValue(n)}function rh(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function pm(n,e,o,l,u){if(!e[0]&&!e[1])return n;const f=Ue.convert(e)._mult(u);"viewport"===o&&f._rotate(-l);const _=[];for(let x=0;x<n.length;x++)_.push(n[x].sub(f));return _}function fm(n,e,o,l){const u=Ue.convert(n)._mult(l);return"viewport"===e&&u._rotate(-o),u}Je(Xo,"CircleBucket",{omit:["layers"]});const Hg=new ze({"circle-sort-key":new ge(fe.layout_circle["circle-sort-key"])});var mm={paint:new ze({"circle-radius":new ge(fe.paint_circle["circle-radius"]),"circle-color":new ge(fe.paint_circle["circle-color"]),"circle-blur":new ge(fe.paint_circle["circle-blur"]),"circle-opacity":new ge(fe.paint_circle["circle-opacity"]),"circle-translate":new ie(fe.paint_circle["circle-translate"]),"circle-translate-anchor":new ie(fe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ie(fe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ie(fe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ge(fe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ge(fe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ge(fe.paint_circle["circle-stroke-opacity"])}),layout:Hg},_c=1e-6,In="undefined"!=typeof Float32Array?Float32Array:Array;function Ep(){var n=new In(9);return In!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function Fn(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Mo(n,e,o){var l=e[0],u=e[1],f=e[2],_=e[3],x=e[4],A=e[5],w=e[6],T=e[7],S=e[8],D=e[9],P=e[10],F=e[11],z=e[12],q=e[13],W=e[14],re=e[15],oe=o[0],ae=o[1],ce=o[2],ue=o[3];return n[0]=oe*l+ae*x+ce*S+ue*z,n[1]=oe*u+ae*A+ce*D+ue*q,n[2]=oe*f+ae*w+ce*P+ue*W,n[3]=oe*_+ae*T+ce*F+ue*re,n[4]=(oe=o[4])*l+(ae=o[5])*x+(ce=o[6])*S+(ue=o[7])*z,n[5]=oe*u+ae*A+ce*D+ue*q,n[6]=oe*f+ae*w+ce*P+ue*W,n[7]=oe*_+ae*T+ce*F+ue*re,n[8]=(oe=o[8])*l+(ae=o[9])*x+(ce=o[10])*S+(ue=o[11])*z,n[9]=oe*u+ae*A+ce*D+ue*q,n[10]=oe*f+ae*w+ce*P+ue*W,n[11]=oe*_+ae*T+ce*F+ue*re,n[12]=(oe=o[12])*l+(ae=o[13])*x+(ce=o[14])*S+(ue=o[15])*z,n[13]=oe*u+ae*A+ce*D+ue*q,n[14]=oe*f+ae*w+ce*P+ue*W,n[15]=oe*_+ae*T+ce*F+ue*re,n}function To(n,e,o){var l,u,f,_,x,A,w,T,S,D,P,F,z=o[0],q=o[1],W=o[2];return e===n?(n[12]=e[0]*z+e[4]*q+e[8]*W+e[12],n[13]=e[1]*z+e[5]*q+e[9]*W+e[13],n[14]=e[2]*z+e[6]*q+e[10]*W+e[14],n[15]=e[3]*z+e[7]*q+e[11]*W+e[15]):(u=e[1],f=e[2],_=e[3],x=e[4],A=e[5],w=e[6],T=e[7],S=e[8],D=e[9],P=e[10],F=e[11],n[0]=l=e[0],n[1]=u,n[2]=f,n[3]=_,n[4]=x,n[5]=A,n[6]=w,n[7]=T,n[8]=S,n[9]=D,n[10]=P,n[11]=F,n[12]=l*z+x*q+S*W+e[12],n[13]=u*z+A*q+D*W+e[13],n[14]=f*z+w*q+P*W+e[14],n[15]=_*z+T*q+F*W+e[15]),n}function jn(n,e,o){var l=o[0],u=o[1],f=o[2];return n[0]=e[0]*l,n[1]=e[1]*l,n[2]=e[2]*l,n[3]=e[3]*l,n[4]=e[4]*u,n[5]=e[5]*u,n[6]=e[6]*u,n[7]=e[7]*u,n[8]=e[8]*f,n[9]=e[9]*f,n[10]=e[10]*f,n[11]=e[11]*f,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function es(n,e,o){var l=Math.sin(o),u=Math.cos(o),f=e[4],_=e[5],x=e[6],A=e[7],w=e[8],T=e[9],S=e[10],D=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=f*u+w*l,n[5]=_*u+T*l,n[6]=x*u+S*l,n[7]=A*u+D*l,n[8]=w*u-f*l,n[9]=T*u-_*l,n[10]=S*u-x*l,n[11]=D*u-A*l,n}function Md(n,e,o){var l=Math.sin(o),u=Math.cos(o),f=e[0],_=e[1],x=e[2],A=e[3],w=e[8],T=e[9],S=e[10],D=e[11];return e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=f*u-w*l,n[1]=_*u-T*l,n[2]=x*u-S*l,n[3]=A*u-D*l,n[8]=f*l+w*u,n[9]=_*l+T*u,n[10]=x*l+S*u,n[11]=A*l+D*u,n}function Td(n,e,o){var l,u,f,_=o[0],x=o[1],A=o[2],w=Math.hypot(_,x,A);return w<_c?null:(_*=w=1/w,x*=w,A*=w,l=Math.sin(e),u=Math.cos(e),n[0]=_*_*(f=1-u)+u,n[1]=x*_*f+A*l,n[2]=A*_*f-x*l,n[3]=0,n[4]=_*x*f-A*l,n[5]=x*x*f+u,n[6]=A*x*f+_*l,n[7]=0,n[8]=_*A*f+x*l,n[9]=x*A*f-_*l,n[10]=A*A*f+u,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});var Ed=Mo;function ah(){var n=new In(3);return In!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function Sp(n){var e=new In(3);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}function $s(n){return Math.hypot(n[0],n[1],n[2])}function el(n,e,o){var l=new In(3);return l[0]=n,l[1]=e,l[2]=o,l}function _r(n,e,o){return n[0]=e[0]+o[0],n[1]=e[1]+o[1],n[2]=e[2]+o[2],n}function sh(n,e,o){return n[0]=e[0]-o[0],n[1]=e[1]-o[1],n[2]=e[2]-o[2],n}function gm(n,e,o){return n[0]=e[0]*o[0],n[1]=e[1]*o[1],n[2]=e[2]*o[2],n}function Sd(n,e,o){return n[0]=Math.min(e[0],o[0]),n[1]=Math.min(e[1],o[1]),n[2]=Math.min(e[2],o[2]),n}function yc(n,e,o){return n[0]=Math.max(e[0],o[0]),n[1]=Math.max(e[1],o[1]),n[2]=Math.max(e[2],o[2]),n}function yr(n,e,o){return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n}function tl(n,e,o,l){return n[0]=e[0]+o[0]*l,n[1]=e[1]+o[1]*l,n[2]=e[2]+o[2]*l,n}function dn(n,e){var o=e[0],l=e[1],u=e[2],f=o*o+l*l+u*u;return f>0&&(f=1/Math.sqrt(f)),n[0]=e[0]*f,n[1]=e[1]*f,n[2]=e[2]*f,n}function Hn(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function xc(n,e,o){var l=e[0],u=e[1],f=e[2],_=o[0],x=o[1],A=o[2];return n[0]=u*A-f*x,n[1]=f*_-l*A,n[2]=l*x-u*_,n}function Ii(n,e,o){var l=e[0],u=e[1],f=e[2],_=o[3]*l+o[7]*u+o[11]*f+o[15];return n[0]=(o[0]*l+o[4]*u+o[8]*f+o[12])/(_=_||1),n[1]=(o[1]*l+o[5]*u+o[9]*f+o[13])/_,n[2]=(o[2]*l+o[6]*u+o[10]*f+o[14])/_,n}function _m(n,e,o){var l=o[0],u=o[1],f=o[2],_=e[0],x=e[1],A=e[2],w=u*A-f*x,T=f*_-l*A,S=l*x-u*_,D=u*S-f*T,P=f*w-l*S,F=l*T-u*w,z=2*o[3];return T*=z,S*=z,P*=2,F*=2,n[0]=_+(w*=z)+(D*=2),n[1]=x+T+P,n[2]=A+S+F,n}var ts,un=sh,Dd=gm,il=$s;function nl(n,e,o){return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3]*o,n}function is(n,e,o){var l=e[0],u=e[1],f=e[2],_=e[3];return n[0]=o[0]*l+o[4]*u+o[8]*f+o[12]*_,n[1]=o[1]*l+o[5]*u+o[9]*f+o[13]*_,n[2]=o[2]*l+o[6]*u+o[10]*f+o[14]*_,n[3]=o[3]*l+o[7]*u+o[11]*f+o[15]*_,n}function Bd(){var n=new In(4);return In!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function lh(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function kd(n,e,o){o*=.5;var l=e[0],u=e[1],f=e[2],_=e[3],x=Math.sin(o),A=Math.cos(o);return n[0]=l*A+_*x,n[1]=u*A+f*x,n[2]=f*A-u*x,n[3]=_*A-l*x,n}function ch(n,e,o){o*=.5;var l=e[0],u=e[1],f=e[2],_=e[3],x=Math.sin(o),A=Math.cos(o);return n[0]=l*A-f*x,n[1]=u*A+_*x,n[2]=f*A+l*x,n[3]=_*A-u*x,n}ah(),ts=new In(4),In!=Float32Array&&(ts[0]=0,ts[1]=0,ts[2]=0,ts[3]=0),ah(),el(1,0,0),el(0,1,0),Bd(),Bd(),Ep();class ol{constructor(e,o){this.pos=e,this.dir=o}intersectsPlane(e,o,l){const u=Hn(o,this.dir);if(Math.abs(u)<1e-6)return!1;const f=((e[0]-this.pos[0])*o[0]+(e[1]-this.pos[1])*o[1]+(e[2]-this.pos[2])*o[2])/u;return l[0]=this.pos[0]+this.dir[0]*f,l[1]=this.pos[1]+this.dir[1]*f,l[2]=this.pos[2]+this.dir[2]*f,!0}closestPointOnSphere(e,o,l){if(z=(P=this.pos)[0],q=P[1],W=P[2],re=(F=e)[0],oe=F[1],ae=F[2],Math.abs(z-re)<=_c*Math.max(1,Math.abs(z),Math.abs(re))&&Math.abs(q-oe)<=_c*Math.max(1,Math.abs(q),Math.abs(oe))&&Math.abs(W-ae)<=_c*Math.max(1,Math.abs(W),Math.abs(ae))||0===o)return l[0]=l[1]=l[2]=0,!1;var P,F,z,q,W,re,oe,ae;const[u,f,_]=this.dir,x=this.pos[0]-e[0],A=this.pos[1]-e[1],w=this.pos[2]-e[2],T=u*u+f*f+_*_,S=2*(x*u+A*f+w*_),D=S*S-4*T*(x*x+A*A+w*w-o*o);if(D<0){const P=Math.max(-S/2,0),F=x+u*P,z=A+f*P,q=w+_*P,W=Math.hypot(F,z,q);return l[0]=F*o/W,l[1]=z*o/W,l[2]=q*o/W,!1}{const P=(-S-Math.sqrt(D))/(2*T);if(P<0){const F=Math.hypot(x,A,w);return l[0]=x*o/F,l[1]=A*o/F,l[2]=w*o/F,!1}return l[0]=x+u*P,l[1]=A+f*P,l[2]=w+_*P,!0}}}class Pd{constructor(e,o,l,u,f){this.TL=e,this.TR=o,this.BR=l,this.BL=u,this.horizon=f}static fromInvProjectionMatrix(e,o,l){const u=[-1,1,1],f=[1,1,1],_=[1,-1,1],x=[-1,-1,1],A=Ii(u,u,e),w=Ii(f,f,e),T=Ii(_,_,e),S=Ii(x,x,e);return new Pd(A,w,T,S,o/l)}}class vc{constructor(e,o){this.points=e,this.planes=o}static fromInvProjectionMatrix(e,o,l,u){const f=Math.pow(2,l),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const w=is([],A,e),T=1/w[3]/o*f;return(S=w)[0]=(D=w)[0]*(P=[T,T,u?1/w[3]:T,T])[0],S[1]=D[1]*P[1],S[2]=D[2]*P[2],S[3]=D[3]*P[3],S;var S,D,P}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const w=dn([],xc([],un([],_[A[0]],_[A[1]]),un([],_[A[2]],_[A[1]]))),T=-Hn(w,_[A[1]]);return w.concat(T)});return new vc(_,x)}}class qn{constructor(e,o){this.min=e,this.max=o,this.center=yr([],_r([],this.min,this.max),.5)}quadrant(e){const o=[e%2==0,e<2],l=Sp(this.min),u=Sp(this.max);for(let f=0;f<o.length;f++)l[f]=o[f]?this.min[f]:this.center[f],u[f]=o[f]?this.center[f]:this.max[f];return u[2]=this.max[2],new qn(l,u)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,o=this.max;return[[e[0],e[1],e[2]],[o[0],e[1],e[2]],[o[0],o[1],e[2]],[e[0],o[1],e[2]],[e[0],e[1],o[2]],[o[0],e[1],o[2]],[o[0],o[1],o[2]],[e[0],o[1],o[2]]]}intersects(e){const o=this.getCorners();let l=!0;for(let u=0;u<e.planes.length;u++){const f=e.planes[u];let _=0;for(let x=0;x<o.length;x++)_+=Hn(f,o[x])+f[3]>=0;if(0===_)return 0;_!==o.length&&(l=!1)}if(l)return 2;for(let u=0;u<3;u++){let f=Number.MAX_VALUE,_=-Number.MAX_VALUE;for(let x=0;x<e.points.length;x++){const A=e.points[x][u]-this.min[u];f=Math.min(f,A),_=Math.max(_,A)}if(_<0||f>this.max[u]-this.min[u])return 0}return 1}}function dh(n,e,o,l,u,f,_,x,A){if(f&&n.queryGeometry.isAboveHorizon)return!1;f&&(A*=n.pixelToTileUnitsFactor);const w=n.tileID.canonical,T=o.projection.upVectorScale(w,o.center.lat,o.worldSize).metersToTile;for(const S of e)for(const D of S){const P=D.add(x),F=u&&o.elevation?o.elevation.exaggeration()*u.getElevationAt(P.x,P.y,!0):0,z=o.projection.projectTilePoint(P.x,P.y,w);if(F>0){const oe=o.projection.upVector(w,P.x,P.y);z.x+=oe[0]*T*F,z.y+=oe[1]*T*F,z.z+=oe[2]*T*F}const q=f?P:Dp(z.x,z.y,z.z,l),W=f?n.tilespaceRays.map(oe=>Bp(oe,F)):n.queryGeometry.screenGeometry,re=is([],[z.x,z.y,z.z,1],l);if(!_&&f?A*=re[3]/o.cameraToCenterDistance:_&&!f&&(A*=o.cameraToCenterDistance/re[3]),f){const oe=Ti((D.y/rt+w.y)/(1<<w.z));A/=o.projection.pixelsPerMeter(oe,1)/Zn(1,oe)}if(Cp(W,q,A))return!0}return!1}function Dp(n,e,o,l){const u=is([],[n,e,o,1],l);return new Ue(u[0]/u[3],u[1]/u[3])}const uh=el(0,0,0),hh=el(0,0,1);function Bp(n,e){const o=ah();return uh[2]=e,n.intersectsPlane(uh,hh,o),new Ue(o[0],o[1])}class Id extends Xo{}function kp(n,{width:e,height:o},l,u){if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==e*o*l)throw new RangeError("mismatched image size")}else u=new Uint8Array(e*o*l);return n.width=e,n.height=o,n.data=u,n}function Pp(n,e,o){const{width:l,height:u}=e;l===n.width&&u===n.height||(ns(n,e,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,l),height:Math.min(n.height,u)},o),n.width=l,n.height=u,n.data=e.data)}function ns(n,e,o,l,u,f){if(0===u.width||0===u.height)return e;if(u.width>n.width||u.height>n.height||o.x>n.width-u.width||o.y>n.height-u.height)throw new RangeError("out of range source coordinates for image copy");if(u.width>e.width||u.height>e.height||l.x>e.width-u.width||l.y>e.height-u.height)throw new RangeError("out of range destination coordinates for image copy");const _=n.data,x=e.data;for(let A=0;A<u.height;A++){const w=((o.y+A)*n.width+o.x)*f,T=((l.y+A)*e.width+l.x)*f;for(let S=0;S<u.width*f;S++)x[T+S]=_[w+S]}return e}Je(Id,"HeatmapBucket",{omit:["layers"]});class Eo{constructor(e,o){kp(this,e,1,o)}resize(e){Pp(this,new Eo(e),1)}clone(){return new Eo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,o,l,u,f){ns(e,o,l,u,f,1)}}class yn{constructor(e,o){kp(this,e,4,o)}resize(e){Pp(this,new yn(e),4)}replace(e,o){o?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new yn({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,o,l,u,f){ns(e,o,l,u,f,4)}}Je(Eo,"AlphaImage"),Je(yn,"RGBAImage");var qg={paint:new ze({"heatmap-radius":new ge(fe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ge(fe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ie(fe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Me(fe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ie(fe.paint_heatmap["heatmap-opacity"])})};function Ip(n){const e={},o=n.resolution||256,l=n.clips?n.clips.length:1,u=n.image||new yn({width:o,height:l}),f=(_,x,A)=>{e[n.evaluationKey]=A;const w=n.expression.evaluate(e);u.data[_+x+0]=Math.floor(255*w.r/w.a),u.data[_+x+1]=Math.floor(255*w.g/w.a),u.data[_+x+2]=Math.floor(255*w.b/w.a),u.data[_+x+3]=Math.floor(255*w.a)};if(n.clips)for(let _=0,x=0;_<l;++_,x+=4*o)for(let A=0,w=0;A<o;A++,w+=4){const T=A/(o-1),{start:S,end:D}=n.clips[_];f(x,w,S*(1-T)+D*T)}else for(let _=0,x=0;_<o;_++,x+=4)f(0,x,_/(o-1));return u}var Yg={paint:new ze({"hillshade-illumination-direction":new ie(fe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ie(fe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ie(fe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ie(fe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ie(fe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ie(fe.paint_hillshade["hillshade-accent-color"])})};const Qg=Ye([{name:"a_pos",components:2,type:"Int16"}],4),{members:ym}=Qg;var Ac=bc,xm=bc;function bc(n,e,o){o=o||2;var l,u,f,_,x,A,w,T=e&&e.length,S=T?e[0]*o:n.length,D=Fd(n,0,S,o,!0),P=[];if(!D||D.next===D.prev)return P;if(T&&(D=function(z,q,W,re){var oe,ae,ce,ue=[];for(oe=0,ae=q.length;oe<ae;oe++)(ce=Fd(z,q[oe]*re,oe<ae-1?q[oe+1]*re:z.length,re,!1))===ce.next&&(ce.steiner=!0),ue.push(Op(ce));for(ue.sort(Am),oe=0;oe<ue.length;oe++)W=aa(W=Rp(ue[oe],W),W.next);return W}(n,e,D,o)),n.length>80*o){l=f=n[0],u=_=n[1];for(var F=o;F<S;F+=o)(x=n[F])<l&&(l=x),(A=n[F+1])<u&&(u=A),x>f&&(f=x),A>_&&(_=A);w=0!==(w=Math.max(f-l,_-u))?1/w:0}return wc(D,P,o,l,u,w),P}function Fd(n,e,o,l,u){var f,_;if(u===Od(n,e,o,l)>0)for(f=e;f<o;f+=l)_=Np(f,n[f],n[f+1],_);else for(f=o-l;f>=e;f-=l)_=Np(f,n[f],n[f+1],_);return _&&al(_,_.next)&&(ll(_),_=_.next),_}function aa(n,e){if(!n)return n;e||(e=n);var o,l=n;do{if(o=!1,l.steiner||!al(l,l.next)&&0!==Ei(l.prev,l,l.next))l=l.next;else{if(ll(l),(l=e=l.prev)===l.next)break;o=!0}}while(o||l!==e);return e}function wc(n,e,o,l,u,f,_){if(n){!_&&f&&function(T,S,D,P){var F=T;do{null===F.z&&(F.z=Ld(F.x,F.y,S,D,P)),F.prevZ=F.prev,F.nextZ=F.next,F=F.next}while(F!==T);F.prevZ.nextZ=null,F.prevZ=null,function(z){var q,W,re,oe,ae,ce,ue,Ae,be=1;do{for(W=z,z=null,ae=null,ce=0;W;){for(ce++,re=W,ue=0,q=0;q<be&&(ue++,re=re.nextZ);q++);for(Ae=be;ue>0||Ae>0&&re;)0!==ue&&(0===Ae||!re||W.z<=re.z)?(oe=W,W=W.nextZ,ue--):(oe=re,re=re.nextZ,Ae--),ae?ae.nextZ=oe:z=oe,oe.prevZ=ae,ae=oe;W=re}ae.nextZ=null,be*=2}while(ce>1)}(F)}(n,l,u,f);for(var x,A,w=n;n.prev!==n.next;)if(x=n.prev,A=n.next,f?vm(n,l,u,f):Fp(n))e.push(x.i/o),e.push(n.i/o),e.push(A.i/o),ll(n),n=A.next,w=A.next;else if((n=A)===w){_?1===_?wc(n=Wg(aa(n),e,o),e,o,l,u,f,2):2===_&&Lp(n,e,o,l,u,f):wc(aa(n),e,o,l,u,f,1);break}}}function Fp(n){var e=n.prev,o=n,l=n.next;if(Ei(e,o,l)>=0)return!1;for(var u=n.next.next;u!==n.prev;){if(rl(e.x,e.y,o.x,o.y,l.x,l.y,u.x,u.y)&&Ei(u.prev,u,u.next)>=0)return!1;u=u.next}return!0}function vm(n,e,o,l){var u=n.prev,f=n,_=n.next;if(Ei(u,f,_)>=0)return!1;for(var x=u.x>f.x?u.x>_.x?u.x:_.x:f.x>_.x?f.x:_.x,A=u.y>f.y?u.y>_.y?u.y:_.y:f.y>_.y?f.y:_.y,w=Ld(u.x<f.x?u.x<_.x?u.x:_.x:f.x<_.x?f.x:_.x,u.y<f.y?u.y<_.y?u.y:_.y:f.y<_.y?f.y:_.y,e,o,l),T=Ld(x,A,e,o,l),S=n.prevZ,D=n.nextZ;S&&S.z>=w&&D&&D.z<=T;){if(S!==n.prev&&S!==n.next&&rl(u.x,u.y,f.x,f.y,_.x,_.y,S.x,S.y)&&Ei(S.prev,S,S.next)>=0||(S=S.prevZ,D!==n.prev&&D!==n.next&&rl(u.x,u.y,f.x,f.y,_.x,_.y,D.x,D.y)&&Ei(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;S&&S.z>=w;){if(S!==n.prev&&S!==n.next&&rl(u.x,u.y,f.x,f.y,_.x,_.y,S.x,S.y)&&Ei(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;D&&D.z<=T;){if(D!==n.prev&&D!==n.next&&rl(u.x,u.y,f.x,f.y,_.x,_.y,D.x,D.y)&&Ei(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function Wg(n,e,o){var l=n;do{var u=l.prev,f=l.next.next;!al(u,f)&&Vp(u,l,l.next,f)&&os(u,f)&&os(f,u)&&(e.push(u.i/o),e.push(l.i/o),e.push(f.i/o),ll(l),ll(l.next),l=n=f),l=l.next}while(l!==n);return aa(l)}function Lp(n,e,o,l,u,f){var _=n;do{for(var x=_.next.next;x!==_.prev;){if(_.i!==x.i&&zp(_,x)){var A=ph(_,x);return _=aa(_,_.next),A=aa(A,A.next),wc(_,e,o,l,u,f),void wc(A,e,o,l,u,f)}x=x.next}_=_.next}while(_!==n)}function Am(n,e){return n.x-e.x}function Rp(n,e){var o=function(f,_){var x,A=_,w=f.x,T=f.y,S=-1/0;do{if(T<=A.y&&T>=A.next.y&&A.next.y!==A.y){var D=A.x+(T-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(D<=w&&D>S){if(S=D,D===w){if(T===A.y)return A;if(T===A.next.y)return A.next}x=A.x<A.next.x?A:A.next}}A=A.next}while(A!==_);if(!x)return null;if(w===S)return x;var P,F=x,z=x.x,q=x.y,W=1/0;A=x;do{w>=A.x&&A.x>=z&&w!==A.x&&rl(T<q?w:S,T,z,q,T<q?S:w,T,A.x,A.y)&&(P=Math.abs(T-A.y)/(w-A.x),os(A,f)&&(P<W||P===W&&(A.x>x.x||A.x===x.x&&bm(x,A)))&&(x=A,W=P)),A=A.next}while(A!==F);return x}(n,e);if(!o)return e;var l=ph(o,n),u=aa(o,o.next);return aa(l,l.next),e===o?u:e}function bm(n,e){return Ei(n.prev,n,e.prev)<0&&Ei(e.next,n,n.next)<0}function Ld(n,e,o,l,u){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-o)*u)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-l)*u)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Op(n){var e=n,o=n;do{(e.x<o.x||e.x===o.x&&e.y<o.y)&&(o=e),e=e.next}while(e!==n);return o}function rl(n,e,o,l,u,f,_,x){return(u-_)*(e-x)-(n-_)*(f-x)>=0&&(n-_)*(l-x)-(o-_)*(e-x)>=0&&(o-_)*(f-x)-(u-_)*(l-x)>=0}function zp(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function(o,l){var u=o;do{if(u.i!==o.i&&u.next.i!==o.i&&u.i!==l.i&&u.next.i!==l.i&&Vp(u,u.next,o,l))return!0;u=u.next}while(u!==o);return!1}(n,e)&&(os(n,e)&&os(e,n)&&function(o,l){var u=o,f=!1,_=(o.x+l.x)/2,x=(o.y+l.y)/2;do{u.y>x!=u.next.y>x&&u.next.y!==u.y&&_<(u.next.x-u.x)*(x-u.y)/(u.next.y-u.y)+u.x&&(f=!f),u=u.next}while(u!==o);return f}(n,e)&&(Ei(n.prev,n,e.prev)||Ei(n,e.prev,e))||al(n,e)&&Ei(n.prev,n,n.next)>0&&Ei(e.prev,e,e.next)>0)}function Ei(n,e,o){return(e.y-n.y)*(o.x-e.x)-(e.x-n.x)*(o.y-e.y)}function al(n,e){return n.x===e.x&&n.y===e.y}function Vp(n,e,o,l){var u=Rd(Ei(n,e,o)),f=Rd(Ei(n,e,l)),_=Rd(Ei(o,l,n)),x=Rd(Ei(o,l,e));return u!==f&&_!==x||!(0!==u||!sl(n,o,e))||!(0!==f||!sl(n,l,e))||!(0!==_||!sl(o,n,l))||!(0!==x||!sl(o,e,l))}function sl(n,e,o){return e.x<=Math.max(n.x,o.x)&&e.x>=Math.min(n.x,o.x)&&e.y<=Math.max(n.y,o.y)&&e.y>=Math.min(n.y,o.y)}function Rd(n){return n>0?1:n<0?-1:0}function os(n,e){return Ei(n.prev,n,n.next)<0?Ei(n,e,n.next)>=0&&Ei(n,n.prev,e)>=0:Ei(n,e,n.prev)<0||Ei(n,n.next,e)<0}function ph(n,e){var o=new fh(n.i,n.x,n.y),l=new fh(e.i,e.x,e.y),u=n.next,f=e.prev;return n.next=e,e.prev=n,o.next=u,u.prev=o,l.next=o,o.prev=l,f.next=l,l.prev=f,l}function Np(n,e,o,l){var u=new fh(n,e,o);return l?(u.next=l.next,u.prev=l,l.next.prev=u,l.next=u):(u.prev=u,u.next=u),u}function ll(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function fh(n,e,o){this.i=n,this.x=e,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Od(n,e,o,l){for(var u=0,f=e,_=o-l;f<o;f+=l)u+=(n[_]-n[f])*(n[f+1]+n[_+1]),_=f;return u}function wm(n,e,o,l,u){zd(n,e,o||0,l||n.length-1,u||Cm)}function zd(n,e,o,l,u){for(;l>o;){if(l-o>600){var f=l-o+1,_=e-o+1,x=Math.log(f),A=.5*Math.exp(2*x/3),w=.5*Math.sqrt(x*A*(f-A)/f)*(_-f/2<0?-1:1);zd(n,e,Math.max(o,Math.floor(e-_*A/f+w)),Math.min(l,Math.floor(e+(f-_)*A/f+w)),u)}var T=n[e],S=o,D=l;for(cl(n,o,e),u(n[l],T)>0&&cl(n,o,l);S<D;){for(cl(n,S,D),S++,D--;u(n[S],T)<0;)S++;for(;u(n[D],T)>0;)D--}0===u(n[o],T)?cl(n,o,D):cl(n,++D,l),D<=e&&(o=D+1),e<=D&&(l=D-1)}}function cl(n,e,o){var l=n[e];n[e]=n[o],n[o]=l}function Cm(n,e){return n<e?-1:n>e?1:0}function Vd(n,e){const o=n.length;if(o<=1)return[n];const l=[];let u,f;for(let _=0;_<o;_++){const x=Fo(n[_]);0!==x&&(n[_].area=Math.abs(x),void 0===f&&(f=x<0),f===x<0?(u&&l.push(u),u=[n[_]]):u.push(n[_]))}if(u&&l.push(u),e>1)for(let _=0;_<l.length;_++)l[_].length<=e||(wm(l[_],e,1,l[_].length-1,Mm),l[_]=l[_].slice(0,e));return l}function Mm(n,e){return e.area-n.area}function Up(n,e,o){const l=o.patternDependencies;let u=!1;for(const f of e){const _=f.paint.get(`${n}-pattern`);_.isConstant()||(u=!0);const x=_.constantOr(null);x&&(u=!0,l[x.to]=!0,l[x.from]=!0)}return u}function Cc(n,e,o,l,u){const f=u.patternDependencies;for(const _ of e){const x=_.paint.get(`${n}-pattern`).value;if("constant"!==x.kind){let A=x.evaluate({zoom:l-1},o,{},u.availableImages),w=x.evaluate({zoom:l},o,{},u.availableImages),T=x.evaluate({zoom:l+1},o,{},u.availableImages);A=A&&A.name?A.name:A,w=w&&w.name?w.name:w,T=T&&T.name?T.name:T,f[A]=!0,f[w]=!0,f[T]=!0,o.patterns[_.id]={min:A,mid:w,max:T}}}return o}bc.deviation=function(n,e,o,l){var u=e&&e.length,f=Math.abs(Od(n,0,u?e[0]*o:n.length,o));if(u)for(var _=0,x=e.length;_<x;_++)f-=Math.abs(Od(n,e[_]*o,_<x-1?e[_+1]*o:n.length,o));var A=0;for(_=0;_<l.length;_+=3){var w=l[_]*o,T=l[_+1]*o,S=l[_+2]*o;A+=Math.abs((n[w]-n[S])*(n[T+1]-n[w+1])-(n[w]-n[T])*(n[S+1]-n[w+1]))}return 0===f&&0===A?0:Math.abs((A-f)/f)},bc.flatten=function(n){for(var e=n[0][0].length,o={vertices:[],holes:[],dimensions:e},l=0,u=0;u<n.length;u++){for(var f=0;f<n[u].length;f++)for(var _=0;_<e;_++)o.vertices.push(n[u][f][_]);u>0&&o.holes.push(l+=n[u-1].length)}return o},Ac.default=xm;class Mc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ut,this.indexArray=new _i,this.indexArray2=new Pn,this.programConfigurations=new Ka(e.layers,e.zoom),this.segments=new yi,this.segments2=new yi,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.projection=e.projection}populate(e,o,l,u){this.hasPattern=Up("fill",this.layers,o);const f=this.layers[0].layout.get("fill-sort-key"),_=[];for(const{feature:x,id:A,index:w,sourceLayerIndex:T}of e){const S=this.layers[0]._featureFilter.needGeometry,D=ra(x,S);if(!this.layers[0]._featureFilter.filter(new j(this.zoom),D,l))continue;const P=f?f.evaluate(D,{},l,o.availableImages):void 0,F={id:A,properties:x.properties,type:x.type,sourceLayerIndex:T,index:w,geometry:S?D.geometry:ao(x,l,u),patterns:{},sortKey:P};_.push(F)}f&&_.sort((x,A)=>x.sortKey-A.sortKey);for(const x of _){const{geometry:A,index:w,sourceLayerIndex:T}=x;if(this.hasPattern){const S=Cc("fill",this.layers,x,this.zoom,o);this.patternFeatures.push(S)}else this.addFeature(x,A,w,l,{},o.availableImages);o.featureIndex.insert(e[w].feature,A,w,T,this.index)}}update(e,o,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l,u)}addFeatures(e,o,l,u,f){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,o,l,u)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ym),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,o,l,u,f,_=[]){for(const x of Vd(o,500)){let A=0;for(const F of x)A+=F.length;const w=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),T=w.vertexLength,S=[],D=[];for(const F of x){if(0===F.length)continue;F!==x[0]&&D.push(S.length/2);const z=this.segments2.prepareSegment(F.length,this.layoutVertexArray,this.indexArray2),q=z.vertexLength;this.layoutVertexArray.emplaceBack(F[0].x,F[0].y),this.indexArray2.emplaceBack(q+F.length-1,q),S.push(F[0].x),S.push(F[0].y);for(let W=1;W<F.length;W++)this.layoutVertexArray.emplaceBack(F[W].x,F[W].y),this.indexArray2.emplaceBack(q+W-1,q+W),S.push(F[W].x),S.push(F[W].y);z.vertexLength+=F.length,z.primitiveLength+=F.length}const P=Ac(S,D);for(let F=0;F<P.length;F+=3)this.indexArray.emplaceBack(T+P[F],T+P[F+1],T+P[F+2]);w.vertexLength+=A,w.primitiveLength+=P.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,f,_,u)}}Je(Mc,"FillBucket",{omit:["layers","patternFeatures"]});const Gp=new ze({"fill-sort-key":new ge(fe.layout_fill["fill-sort-key"])});var Tm={paint:new ze({"fill-antialias":new ie(fe.paint_fill["fill-antialias"]),"fill-opacity":new ge(fe.paint_fill["fill-opacity"]),"fill-color":new ge(fe.paint_fill["fill-color"]),"fill-outline-color":new ge(fe.paint_fill["fill-outline-color"]),"fill-translate":new ie(fe.paint_fill["fill-translate"]),"fill-translate-anchor":new ie(fe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ee(fe.paint_fill["fill-pattern"])}),layout:Gp};const Zp=Ye([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),rs=Ye([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Em=Ye([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:jp}=Zp;var Hp=as;function as(n,e,o,l,u){this.properties={},this.extent=o,this.type=0,this._pbf=n,this._geometry=-1,this._keys=l,this._values=u,n.readFields(Sm,this,e)}function Sm(n,e,o){1==n?e.id=o.readVarint():2==n?function(l,u){for(var f=l.readVarint()+l.pos;l.pos<f;){var _=u._keys[l.readVarint()],x=u._values[l.readVarint()];u.properties[_]=x}}(o,e):3==n?e.type=o.readVarint():4==n&&(e._geometry=o.pos)}function Dm(n){for(var e,o,l=0,u=0,f=n.length,_=f-1;u<f;_=u++)l+=((o=n[_]).x-(e=n[u]).x)*(e.y+o.y);return l}as.types=["Unknown","Point","LineString","Polygon"],as.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var e,o=n.readVarint()+n.pos,l=1,u=0,f=0,_=0,x=[];n.pos<o;){if(u<=0){var A=n.readVarint();l=7&A,u=A>>3}if(u--,1===l||2===l)f+=n.readSVarint(),_+=n.readSVarint(),1===l&&(e&&x.push(e),e=[]),e.push(new Ue(f,_));else{if(7!==l)throw new Error("unknown command "+l);e&&e.push(e[0].clone())}}return e&&x.push(e),x},as.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var e=n.readVarint()+n.pos,o=1,l=0,u=0,f=0,_=1/0,x=-1/0,A=1/0,w=-1/0;n.pos<e;){if(l<=0){var T=n.readVarint();o=7&T,l=T>>3}if(l--,1===o||2===o)(u+=n.readSVarint())<_&&(_=u),u>x&&(x=u),(f+=n.readSVarint())<A&&(A=f),f>w&&(w=f);else if(7!==o)throw new Error("unknown command "+o)}return[_,A,x,w]},as.prototype.toGeoJSON=function(n,e,o){var l,u,f=this.extent*Math.pow(2,o),_=this.extent*n,x=this.extent*e,A=this.loadGeometry(),w=as.types[this.type];function T(P){for(var F=0;F<P.length;F++){var z=P[F];P[F]=[360*(z.x+_)/f-180,360/Math.PI*Math.atan(Math.exp((180-360*(z.y+x)/f)*Math.PI/180))-90]}}switch(this.type){case 1:var S=[];for(l=0;l<A.length;l++)S[l]=A[l][0];T(A=S);break;case 2:for(l=0;l<A.length;l++)T(A[l]);break;case 3:for(A=function(P){var F=P.length;if(F<=1)return[P];for(var z,q,W=[],re=0;re<F;re++){var oe=Dm(P[re]);0!==oe&&(void 0===q&&(q=oe<0),q===oe<0?(z&&W.push(z),z=[P[re]]):z.push(P[re]))}return z&&W.push(z),W}(A),l=0;l<A.length;l++)for(u=0;u<A[l].length;u++)T(A[l][u])}1===A.length?A=A[0]:w="Multi"+w;var D={type:"Feature",geometry:{type:w,coordinates:A},properties:this.properties};return"id"in this&&(D.id=this.id),D};var Nd=mh;function mh(n,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(Bm,this,e),this.length=this._features.length}function Bm(n,e,o){15===n?e.version=o.readVarint():1===n?e.name=o.readString():5===n?e.extent=o.readVarint():2===n?e._features.push(o.pos):3===n?e._keys.push(o.readString()):4===n&&e._values.push(function(l){for(var u=null,f=l.readVarint()+l.pos;l.pos<f;){var _=l.readVarint()>>3;u=1===_?l.readString():2===_?l.readFloat():3===_?l.readDouble():4===_?l.readVarint64():5===_?l.readVarint():6===_?l.readSVarint():7===_?l.readBoolean():null}return u}(o))}function qp(n,e,o){if(3===n){var l=new Nd(o,o.readVarint()+o.pos);l.length&&(e[l.name]=l)}}mh.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var e=this._pbf.readVarint()+this._pbf.pos;return new Hp(this._pbf,e,this.extent,this._keys,this._values)};var ss={VectorTile:function(n,e){this.layers=n.readFields(qp,{},e)},VectorTileFeature:Hp,VectorTileLayer:Nd};function Tc(n,e,o,l){const u=[],f=0===l?(_,x,A,w,T,S)=>{_.push(new Ue(S,A+(S-x)/(w-x)*(T-A)))}:(_,x,A,w,T,S)=>{_.push(new Ue(x+(S-A)/(T-A)*(w-x),S))};for(const _ of n){const x=[];for(const A of _){if(A.length<=2)continue;const w=[];for(let D=0;D<A.length-1;D++){const P=A[D].x,F=A[D].y,z=A[D+1].x,q=A[D+1].y,W=0===l?P:F,re=0===l?z:q;W<e?re>e&&f(w,P,F,z,q,e):W>o?re<o&&f(w,P,F,z,q,o):w.push(A[D]),re<e&&W>=e&&f(w,P,F,z,q,e),re>o&&W<=o&&f(w,P,F,z,q,o)}let T=A[A.length-1];const S=0===l?T.x:T.y;S>=e&&S<=o&&w.push(T),w.length&&(T=w[w.length-1],w[0].x===T.x&&w[0].y===T.y||w.push(w[0]),x.push(w))}x.length&&u.push(x)}return u}const km=ss.VectorTileFeature.types,Yp=Math.pow(2,13);function Ec(n,e,o,l,u,f,_,x){n.emplaceBack((e<<1)+_,(o<<1)+f,(Math.floor(l*Yp)<<1)+u,Math.round(x))}function dl(n,e,o){n.emplaceBack(e.x,e.y,e.z,16384*o[0],16384*o[1],16384*o[2])}class Pm{constructor(){this.acc=new Ue(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Ue(e.x,e.y),this.max=new Ue(e.x,e.y))}append(e,o){this.currentPolyCount.edges++,this.acc._add(e);const l=this.min,u=this.max;e.x<l.x?l.x=e.x:e.x>u.x&&(u.x=e.x),e.y<l.y?l.y=e.y:e.y>u.y&&(u.y=e.y),((0===e.x||e.x===rt)&&e.x===o.x)!=((0===e.y||e.y===rt)&&e.y===o.y)&&this.processBorderOverlap(e,o),o.x<0!=e.x<0&&this.addBorderIntersection(0,Ot(o.y,e.y,(0-o.x)/(e.x-o.x))),o.x>rt!=e.x>rt&&this.addBorderIntersection(1,Ot(o.y,e.y,(rt-o.x)/(e.x-o.x))),o.y<0!=e.y<0&&this.addBorderIntersection(2,Ot(o.x,e.x,(0-o.y)/(e.y-o.y))),o.y>rt!=e.y>rt&&this.addBorderIntersection(3,Ot(o.x,e.x,(rt-o.y)/(e.y-o.y)))}addBorderIntersection(e,o){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const l=this.borders[e];o<l[0]&&(l[0]=o),o>l[1]&&(l[1]=o)}processBorderOverlap(e,o){if(e.x===o.x){if(e.y===o.y)return;const l=0===e.x?0:1;this.addBorderIntersection(l,o.y),this.addBorderIntersection(l,e.y)}else{const l=0===e.y?2:3;this.addBorderIntersection(l,o.x),this.addBorderIntersection(l,e.x)}}centroid(){const e=this.polyCount.reduce((o,l)=>o+l.edges,0);return 0!==e?this.acc.div(e)._round():new Ue(0,0)}span(){return new Ue(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,o)=>e+ +(o[0]!==Number.MAX_VALUE),0)}}class Ud{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new dt,this.centroidVertexArray=new lc,this.indexArray=new _i,this.programConfigurations=new Ka(e.layers,e.zoom),this.segments=new yi,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.enableTerrain=e.enableTerrain}populate(e,o,l,u){this.features=[],this.hasPattern=Up("fill-extrusion",this.layers,o),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(f){const _=Math.exp(Math.PI*(1-f.y/(1<<f.z)*2));return 80150034*_/(_*_+1)/rt/(1<<f.z)}(l);for(const{feature:f,id:_,index:x,sourceLayerIndex:A}of e){const w=this.layers[0]._featureFilter.needGeometry,T=ra(f,w);if(!this.layers[0]._featureFilter.filter(new j(this.zoom),T,l))continue;const S={id:_,sourceLayerIndex:A,index:x,geometry:w?T.geometry:ao(f,l,u),properties:f.properties,type:f.type,patterns:{}},D=this.layoutVertexArray.length;this.hasPattern?this.features.push(Cc("fill-extrusion",this.layers,S,this.zoom,o)):this.addFeature(S,S.geometry,x,l,{},o.availableImages,u),o.featureIndex.insert(f,S.geometry,x,A,this.index,D)}this.sortBorders()}addFeatures(e,o,l,u,f){for(const _ of this.features){const{geometry:x}=_;this.addFeature(_,x,_.index,o,l,u,f)}this.sortBorders()}update(e,o,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l,u)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,jp),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,Em.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,rs.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,o,l,u,f,_,x){const A=[new Ue(0,0),new Ue(rt,rt)],w=x.projection,T="globe"===w.name,S=this.enableTerrain&&!T?new Pm:null;T&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new hp);const D=Vd(o,500);for(let z=D.length-1;z>=0;z--){const q=D[z];(0===q.length||(P=q[0]).every(W=>W.x<=0)||P.every(W=>W.x>=rt)||P.every(W=>W.y<=0)||P.every(W=>W.y>=rt))&&D.splice(z,1)}var P;let F;if(T)F=gh(D,A,u);else{F=[];for(const z of D)F.push({polygon:z,bounds:A})}for(const z of F){const q=z.polygon;let W=0,re=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let Ae=0;Ae<q.length;Ae++){const be=q[Ae];if(0===be.length)continue;W+=be.length;let Se=0;S&&S.startRing(be[0]);for(let Ie=0;Ie<be.length;Ie++){const ye=be[Ie];if(Ie>=1){const Te=be[Ie-1];if(!Xg(ye,Te,z.bounds)){S&&S.append(ye,Te),re.vertexLength+4>yi.MAX_VERTEX_ARRAY_LENGTH&&(re=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ke=ye.sub(Te)._perp(),Fe=ke.x/(Math.abs(ke.x)+Math.abs(ke.y)),qe=ke.y>0?1:0,Be=Te.dist(ye);Se+Be>32768&&(Se=0),Ec(this.layoutVertexArray,ye.x,ye.y,Fe,qe,0,0,Se),Ec(this.layoutVertexArray,ye.x,ye.y,Fe,qe,0,1,Se),Se+=Be,Ec(this.layoutVertexArray,Te.x,Te.y,Fe,qe,0,0,Se),Ec(this.layoutVertexArray,Te.x,Te.y,Fe,qe,0,1,Se);const He=re.vertexLength;if(this.indexArray.emplaceBack(He,He+2,He+1),this.indexArray.emplaceBack(He+1,He+2,He+3),re.vertexLength+=4,re.primitiveLength+=2,T){const pt=this.layoutVertexExtArray,ft=w.projectTilePoint(ye.x,ye.y,u),it=w.projectTilePoint(Te.x,Te.y,u),Ke=w.upVector(u,ye.x,ye.y),ht=w.upVector(u,Te.x,Te.y);dl(pt,ft,Ke),dl(pt,ft,Ke),dl(pt,it,ht),dl(pt,it,ht)}}}}}if(re.vertexLength+W>yi.MAX_VERTEX_ARRAY_LENGTH&&(re=this.segments.prepareSegment(W,this.layoutVertexArray,this.indexArray)),"Polygon"!==km[e.type])continue;const oe=[],ae=[],ce=re.vertexLength;for(let Ae=0;Ae<q.length;Ae++){const be=q[Ae];if(0!==be.length){be!==q[0]&&ae.push(oe.length/2);for(let Se=0;Se<be.length;Se++){const Ie=be[Se];Ec(this.layoutVertexArray,Ie.x,Ie.y,0,0,1,1,0),oe.push(Ie.x),oe.push(Ie.y),S&&S.currentPolyCount.top++,T&&dl(this.layoutVertexExtArray,w.projectTilePoint(Ie.x,Ie.y,u),w.upVector(u,Ie.x,Ie.y))}}}const ue=Ac(oe,ae);for(let Ae=0;Ae<ue.length;Ae+=3)this.indexArray.emplaceBack(ce+ue[Ae],ce+ue[Ae+2],ce+ue[Ae+1]);re.primitiveLength+=ue.length/3,re.vertexLength+=W}if(S&&S.polyCount.length>0){if(S.borders){S.vertexArrayOffset=this.centroidVertexArray.length;const z=S.borders,q=this.featuresOnBorder.push(S)-1;for(let W=0;W<4;W++)z[W][0]!==Number.MAX_VALUE&&this.borders[W].push(q)}this.encodeCentroid(S.borders?void 0:S.centroid(),S)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,f,_,u)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((o,l)=>this.featuresOnBorder[o].borders[e][0]-this.featuresOnBorder[l].borders[e][0])}encodeCentroid(e,o,l=!0){let u,f;if(e)if(0!==e.y){const x=o.span()._mult(this.tileToMeter);u=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(x.x/10)),f=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(x.y/10))}else u=Math.ceil(7*(e.x+450)),f=0;else u=0,f=+l;let _=l?this.centroidVertexArray.length:o.vertexArrayOffset;for(const x of o.polyCount){l&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*x.edges+x.top);for(let A=0;A<2*x.edges;A++)this.centroidVertexArray.emplace(_++,0,f),this.centroidVertexArray.emplace(_++,u,f);for(let A=0;A<x.top;A++)this.centroidVertexArray.emplace(_++,u,f)}}}function Xg(n,e,o){return n.x===e.x&&(n.x<o[0].x||n.x>o[1].x)||n.y===e.y&&(n.y<o[0].y||n.y>o[1].y)}function Qp(){const n=Math.PI/32,e=Math.tan(n),o=Ad;return o*Math.sqrt(1+2*e*e)-o}function gh(n,e,o){const l=1<<o.z,u=nn(o.x/l),f=nn((o.x+1)/l),_=Ti(o.y/l),x=Ti((o.y+1)/l);return function(A,w,T,S,D=0,P){const F=[];if(!A.length||!T||!S)return F;const z=(ue,Ae)=>{for(const be of ue)F.push({polygon:be,bounds:Ae})},q=Math.ceil(Math.log2(T)),W=Math.ceil(Math.log2(S)),re=q-W,oe=[];for(let ue=0;ue<Math.abs(re);ue++)oe.push(re>0?0:1);for(let ue=0;ue<Math.min(q,W);ue++)oe.push(0),oe.push(1);let ae=A;if(ae=Tc(ae,w[0].y-D,w[1].y+D,1),ae=Tc(ae,w[0].x-D,w[1].x+D,0),!ae.length)return F;const ce=[];for(oe.length?ce.push({polygons:ae,bounds:w,depth:0}):z(ae,w);ce.length;){const ue=ce.pop(),Ae=ue.depth,be=oe[Ae],Se=ue.bounds[0],Ie=ue.bounds[1],ye=0===be?Se.x:Se.y,Te=0===be?Ie.x:Ie.y,ke=P?P(be,ye,Te):.5*(ye+Te),Fe=Tc(ue.polygons,ye-D,ke+D,be),qe=Tc(ue.polygons,ke-D,Te+D,be);if(Fe.length){const Be=[Se,new Ue(0===be?ke:Ie.x,1===be?ke:Ie.y)];oe.length>Ae+1?ce.push({polygons:Fe,bounds:Be,depth:Ae+1}):z(Fe,Be)}if(qe.length){const Be=[new Ue(0===be?ke:Se.x,1===be?ke:Se.y),Ie];oe.length>Ae+1?ce.push({polygons:qe,bounds:Be,depth:Ae+1}):z(qe,Be)}}return F}(n,e,Math.ceil((f-u)/11.25),Math.ceil((_-x)/11.25),1,(A,w,T)=>{if(0===A)return.5*(w+T);{const S=Ti((o.y+w/rt)/l);return(oa(.5*(Ti((o.y+T/rt)/l)+S))*l-o.y)*rt}})}Je(Ud,"FillExtrusionBucket",{omit:["layers","features"]}),Je(Pm,"PartMetadata");var Jg={paint:new ze({"fill-extrusion-opacity":new ie(fe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ge(fe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ie(fe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ie(fe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ee(fe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ge(fe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ge(fe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ie(fe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Im(n,e,o){var l=2*Math.PI*6378137/256/Math.pow(2,o);return[n*l-2*Math.PI*6378137/2,e*l-2*Math.PI*6378137/2]}class _h{constructor(e,o,l){this.z=e,this.x=o,this.y=l,this.key=ul(0,e,e,o,l)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,o){const l=(_=this.y,x=this.z,A=Im(256*(f=this.x),256*(_=Math.pow(2,x)-_-1),x),w=Im(256*(f+1),256*(_+1),x),A[0]+","+A[1]+","+w[0]+","+w[1]),u=function(f,_,x){let A,w="";for(let T=f;T>0;T--)A=1<<T-1,w+=(_&A?1:0)+(x&A?2:0);return w}(this.z,this.x,this.y);var f,_,x,A,w;return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===o?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",l)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Fm{constructor(e,o){this.wrap=e,this.canonical=o,this.key=ul(e,o.z,o.z,o.x,o.y)}}class Hi{constructor(e,o,l,u,f){this.overscaledZ=e,this.wrap=o,this.canonical=new _h(l,+u,+f),this.key=0===o&&e===l?this.canonical.key:ul(o,e,l,u,f)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const o=this.canonical.z-e;return e>this.canonical.z?new Hi(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Hi(e,this.wrap,e,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(e,o=!0){if(this.overscaledZ===e&&o)return this.key;if(e>this.canonical.z)return ul(this.wrap*+o,e,this.canonical.z,this.canonical.x,this.canonical.y);{const l=this.canonical.z-e;return ul(this.wrap*+o,e,e,this.canonical.x>>l,this.canonical.y>>l)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const o=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>o&&e.canonical.y===this.canonical.y>>o}children(e){if(this.overscaledZ>=e)return[new Hi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,l=2*this.canonical.x,u=2*this.canonical.y;return[new Hi(o,this.wrap,o,l,u),new Hi(o,this.wrap,o,l+1,u),new Hi(o,this.wrap,o,l,u+1),new Hi(o,this.wrap,o,l+1,u+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Hi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Hi(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Fm(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function ul(n,e,o,l,u){const f=1<<Math.min(o,22);let _=f*(u%f)+l%f;return n&&o<22&&(_+=f*f*((n<0?-2*n-1:2*n)%(1<<2*(22-o)))),16*(32*_+o)+(e-o)}function Sc(n,e){return n.x*e.x+n.y*e.y}function Wp(n,e){if(1===n.length){let o=0;const l=e[o++];let u;for(;!u||l.equals(u);)if(u=e[o++],!u)return 1/0;for(;o<e.length;o++){const f=e[o],_=n[0],x=u.sub(l),A=f.sub(l),w=_.sub(l),T=Sc(x,x),S=Sc(x,A),D=Sc(A,A),P=Sc(w,x),F=Sc(w,A),z=T*D-S*S,q=(D*P-S*F)/z,W=(T*F-S*P)/z,re=l.z*(1-q-W)+u.z*q+f.z*W;if(isFinite(re))return re}return 1/0}{let o=1/0;for(const l of e)o=Math.min(o,l.z);return o}}function Gd(n){const e=new Ue(n[0],n[1]);return e.z=n[2],e}function Xp(n,e,o,l,u,f,_,x){const A=_*u.getElevationAt(n,e,!0,!0),w=0!==f[0],T=w?0===f[1]?_*(f[0]/7-450):_*function(S,D,P){const F=Math.floor(D[0]/8),z=Math.floor(D[1]/8),q=10*(D[0]-8*F),W=10*(D[1]-8*z),re=S.getElevationAt(F,z,!0,!0),oe=S.getMeterToDEM(P),ae=Math.floor(.5*(q*oe-1)),ce=Math.floor(.5*(W*oe-1)),ue=S.tileCoordToPixel(F,z),Ae=2*ae+1,be=2*ce+1,Se=(pt=Ae,ft=be,[(qe=S).getElevationAtPixel(Be=ue.x-ae,He=ue.y-ce,!0),qe.getElevationAtPixel(Be+ft,He,!0),qe.getElevationAtPixel(Be,He+ft,!0),qe.getElevationAtPixel(Be+pt,He+ft,!0)]),Ie=Math.abs(Se[0]-Se[1]),ye=Math.abs(Se[2]-Se[3]),Te=Math.abs(Se[0]-Se[2])+Math.abs(Se[1]-Se[3]),ke=Math.min(.25,.5*oe*(Ie+ye)/Ae),Fe=Math.min(.25,.5*oe*Te/be);var qe,Be,He,pt,ft;return re+Math.max(ke*q,Fe*W)}(u,f,x):A;return{base:A+(0===o)?-1:o,top:w?Math.max(T+l,A+o+2):A+l}}Je(_h,"CanonicalTileID"),Je(Hi,"OverscaledTileID",{omit:["projMatrix"]});const Lm=Ye([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Rm}=Lm,Jp=Ye([{name:"a_packed",components:4,type:"Float32"}]),{members:Om}=Jp,Kp=ss.VectorTileFeature.types,$p=Math.cos(Math.PI/180*37.5);class Zd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Ht,this.layoutVertexArray2=new Kt,this.indexArray=new _i,this.programConfigurations=new Ka(e.layers,e.zoom),this.segments=new yi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,l,u){this.hasPattern=Up("line",this.layers,o);const f=this.layers[0].layout.get("line-sort-key"),_=[];for(const{feature:T,id:S,index:D,sourceLayerIndex:P}of e){const F=this.layers[0]._featureFilter.needGeometry,z=ra(T,F);if(!this.layers[0]._featureFilter.filter(new j(this.zoom),z,l))continue;const q=f?f.evaluate(z,{},l):void 0,W={id:S,properties:T.properties,type:T.type,sourceLayerIndex:P,index:D,geometry:F?z.geometry:ao(T,l,u),patterns:{},sortKey:q};_.push(W)}f&&_.sort((T,S)=>T.sortKey-S.sortKey);const{lineAtlas:x,featureIndex:A}=o,w=this.addConstantDashes(x);for(const T of _){const{geometry:S,index:D,sourceLayerIndex:P}=T;if(w&&this.addFeatureDashes(T,x),this.hasPattern){const F=Cc("line",this.layers,T,this.zoom,o);this.patternFeatures.push(F)}else this.addFeature(T,S,D,l,x.positions,o.availableImages);A.insert(e[D].feature,S,D,P,this.index)}}addConstantDashes(e){let o=!1;for(const l of this.layers){const u=l.paint.get("line-dasharray").value,f=l.layout.get("line-cap").value;if("constant"!==u.kind||"constant"!==f.kind)o=!0;else{const _=f.value,x=u.value;if(!x)continue;e.addDash(x.from,_),e.addDash(x.to,_),x.other&&e.addDash(x.other,_)}}return o}addFeatureDashes(e,o){const l=this.zoom;for(const u of this.layers){const f=u.paint.get("line-dasharray").value,_=u.layout.get("line-cap").value;if("constant"===f.kind&&"constant"===_.kind)continue;let x,A,w,T,S,D;if("constant"===f.kind){const q=f.value;if(!q)continue;x=q.other||q.to,A=q.to,w=q.from}else x=f.evaluate({zoom:l-1},e),A=f.evaluate({zoom:l},e),w=f.evaluate({zoom:l+1},e);"constant"===_.kind?T=S=D=_.value:(T=_.evaluate({zoom:l-1},e),S=_.evaluate({zoom:l},e),D=_.evaluate({zoom:l+1},e)),o.addDash(x,T),o.addDash(A,S),o.addDash(w,D);const P=o.getKey(x,T),F=o.getKey(A,S),z=o.getKey(w,D);e.patterns[u.id]={min:P,mid:F,max:z}}}update(e,o,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l,u)}addFeatures(e,o,l,u,f){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,o,l,u)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Om)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Rm),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,o,l,u,f,_){const x=this.layers[0].layout,A=x.get("line-join").evaluate(e,{}),w=x.get("line-cap").evaluate(e,{}),T=x.get("line-miter-limit"),S=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const D of o)this.addLine(D,e,A,w,T,S);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,f,_,u)}addLine(e,o,l,u,f,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let W=0;W<e.length-1;W++)this.totalDistance+=e[W].dist(e[W+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const x="Polygon"===Kp[o.type];let A=e.length;for(;A>=2&&e[A-1].equals(e[A-2]);)A--;let w=0;for(;w<A-1&&e[w].equals(e[w+1]);)w++;if(A<(x?3:2))return;"bevel"===l&&(f=1.05);const T=this.overscaling<=16?122880/(512*this.overscaling):0,S=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray);let D,P,F,z,q;this.e1=this.e2=-1,x&&(D=e[A-2],q=e[w].sub(D)._unit()._perp());for(let W=w;W<A;W++){if(F=W===A-1?x?e[w+1]:void 0:e[W+1],F&&e[W].equals(F))continue;q&&(z=q),D&&(P=D),D=e[W],q=F?F.sub(D)._unit()._perp():z,z=z||q;let re=z.add(q);0===re.x&&0===re.y||re._unit();const oe=z.x*q.x+z.y*q.y,ae=re.x*q.x+re.y*q.y,ce=0!==ae?1/ae:1/0,ue=2*Math.sqrt(2-2*ae),Ae=ae<$p&&P&&F,be=z.x*q.y-z.y*q.x>0;if(Ae&&W>w){const ye=D.dist(P);if(ye>2*T){const Te=D.sub(D.sub(P)._mult(T/ye)._round());this.updateDistance(P,Te),this.addCurrentVertex(Te,z,0,0,S),P=Te}}const Se=P&&F;let Ie=Se?l:x?"butt":u;if(Se&&"round"===Ie&&(ce<_?Ie="miter":ce<=2&&(Ie="fakeround")),"miter"===Ie&&ce>f&&(Ie="bevel"),"bevel"===Ie&&(ce>2&&(Ie="flipbevel"),ce<f&&(Ie="miter")),P&&this.updateDistance(P,D),"miter"===Ie)re._mult(ce),this.addCurrentVertex(D,re,0,0,S);else if("flipbevel"===Ie){if(ce>100)re=q.mult(-1);else{const ye=ce*z.add(q).mag()/z.sub(q).mag();re._perp()._mult(ye*(be?-1:1))}this.addCurrentVertex(D,re,0,0,S),this.addCurrentVertex(D,re.mult(-1),0,0,S)}else if("bevel"===Ie||"fakeround"===Ie){const ye=-Math.sqrt(ce*ce-1),Te=be?ye:0,ke=be?0:ye;if(P&&this.addCurrentVertex(D,z,Te,ke,S),"fakeround"===Ie){const Fe=Math.round(180*ue/Math.PI/20);for(let qe=1;qe<Fe;qe++){let Be=qe/Fe;if(.5!==Be){const pt=Be-.5;Be+=Be*pt*(Be-1)*((1.0904+oe*(oe*(3.55645-1.43519*oe)-3.2452))*pt*pt+(.848013+oe*(.215638*oe-1.06021)))}const He=q.sub(z)._mult(Be)._add(z)._unit()._mult(be?-1:1);this.addHalfVertex(D,He.x,He.y,!1,be,0,S)}}F&&this.addCurrentVertex(D,q,-Te,-ke,S)}else if("butt"===Ie)this.addCurrentVertex(D,re,0,0,S);else if("square"===Ie){const ye=P?1:-1;P||this.addCurrentVertex(D,re,ye,ye,S),this.addCurrentVertex(D,re,0,0,S),P&&this.addCurrentVertex(D,re,ye,ye,S)}else"round"===Ie&&(P&&(this.addCurrentVertex(D,z,0,0,S),this.addCurrentVertex(D,z,1,1,S,!0)),F&&(this.addCurrentVertex(D,q,-1,-1,S,!0),this.addCurrentVertex(D,q,0,0,S)));if(Ae&&W<A-1){const ye=D.dist(F);if(ye>2*T){const Te=D.add(F.sub(D)._mult(T/ye)._round());this.updateDistance(D,Te),this.addCurrentVertex(Te,q,0,0,S),D=Te}}}}addCurrentVertex(e,o,l,u,f,_=!1){const x=o.y*u-o.x,A=-o.y-o.x*u;this.addHalfVertex(e,o.x+o.y*l,o.y-o.x*l,_,!1,l,f),this.addHalfVertex(e,x,A,_,!0,-u,f)}addHalfVertex({x:e,y:o},l,u,f,_,x,A){this.layoutVertexArray.emplaceBack((e<<1)+(f?1:0),(o<<1)+(_?1:0),Math.round(63*l)+128,Math.round(63*u)+128,1+(0===x?0:x<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const w=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,w),A.primitiveLength++),_?this.e2=w:this.e1=w}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,o){this.distance+=e.dist(o),this.updateScaledDistance()}}Je(Zd,"LineBucket",{omit:["layers","patternFeatures"]});const yh=new ze({"line-cap":new ge(fe.layout_line["line-cap"]),"line-join":new ge(fe.layout_line["line-join"]),"line-miter-limit":new ie(fe.layout_line["line-miter-limit"]),"line-round-limit":new ie(fe.layout_line["line-round-limit"]),"line-sort-key":new ge(fe.layout_line["line-sort-key"])});var xh={paint:new ze({"line-opacity":new ge(fe.paint_line["line-opacity"]),"line-color":new ge(fe.paint_line["line-color"]),"line-translate":new ie(fe.paint_line["line-translate"]),"line-translate-anchor":new ie(fe.paint_line["line-translate-anchor"]),"line-width":new ge(fe.paint_line["line-width"]),"line-gap-width":new ge(fe.paint_line["line-gap-width"]),"line-offset":new ge(fe.paint_line["line-offset"]),"line-blur":new ge(fe.paint_line["line-blur"]),"line-dasharray":new Ee(fe.paint_line["line-dasharray"]),"line-pattern":new Ee(fe.paint_line["line-pattern"]),"line-gradient":new Me(fe.paint_line["line-gradient"]),"line-trim-offset":new ie(fe.paint_line["line-trim-offset"])}),layout:yh};const Dc=new class extends ge{possiblyEvaluate(n,e){return e=new j(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(n,e)}evaluate(n,e,o,l){return e=fi({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(n,e,o,l)}}(xh.paint.properties["line-width"].specification);function jd(n,e){return e>0?e+2*n:n}Dc.useIntegerZoom=!0;const Hd=Ye([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),zm=Ye([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Vm=Ye([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ye([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Nm=Ye([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Um=Ye([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Ye([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ef=Ye([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),tf=Ye([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ye([{name:"triangle",components:3,type:"Uint16"}]),Ye([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ye([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ye([{type:"Float32",name:"offsetX"}]),Ye([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Yi=128;function vh(n,e){const{expression:o}=e;if("constant"===o.kind)return{kind:"constant",layoutSize:o.evaluate(new j(n+1))};if("source"===o.kind)return{kind:"source"};{const{zoomStops:l,interpolationType:u}=o;let f=0;for(;f<l.length&&l[f]<=n;)f++;f=Math.max(0,f-1);let _=f;for(;_<l.length&&l[_]<n+1;)_++;_=Math.min(l.length-1,_);const x=l[f],A=l[_];return"composite"===o.kind?{kind:"composite",minZoom:x,maxZoom:A,interpolationType:u}:{kind:"camera",minZoom:x,maxZoom:A,minSize:o.evaluate(new j(x)),maxSize:o.evaluate(new j(A)),interpolationType:u}}}function hl(n,{uSize:e,uSizeT:o},{lowerSize:l,upperSize:u}){return"source"===n.kind?l/Yi:"composite"===n.kind?Ot(l/Yi,u/Yi,o):e}function xr(n,e){let o=0,l=0;if("constant"===n.kind)l=n.layoutSize;else if("source"!==n.kind){const{interpolationType:u,minZoom:f,maxZoom:_}=n,x=u?_t(Un.interpolationFactor(u,e,f,_),0,1):0;"camera"===n.kind?l=Ot(n.minSize,n.maxSize,x):o=x}return{uSizeT:o,uSize:l}}var nf=Object.freeze({__proto__:null,getSizeData:vh,evaluateSizeForFeature:hl,evaluateSizeForZoom:xr,SIZE_PACK_FACTOR:Yi});function Gm(n,e,o){return n.sections.forEach(l=>{l.text=function(u,f,_){const x=f.layout.get("text-transform").evaluate(_,{});return"uppercase"===x?u=u.toLocaleUpperCase():"lowercase"===x&&(u=u.toLocaleLowerCase()),Q.applyArabicShaping&&(u=Q.applyArabicShaping(u)),u}(l.text,e,o)}),n}const qd={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function Zm(n){return"\ufe36"===n||"\ufe48"===n||"\ufe38"===n||"\ufe44"===n||"\ufe42"===n||"\ufe3e"===n||"\ufe3c"===n||"\ufe3a"===n||"\ufe18"===n||"\ufe40"===n||"\ufe10"===n||"\ufe13"===n||"\ufe14"===n||"\uff40"===n||"\uffe3"===n||"\ufe11"===n||"\ufe12"===n}function jm(n){return"\ufe35"===n||"\ufe47"===n||"\ufe37"===n||"\ufe43"===n||"\ufe41"===n||"\ufe3d"===n||"\ufe3b"===n||"\ufe39"===n||"\ufe17"===n||"\ufe3f"===n}var Bc=function(n,e,o,l,u){var f,_,x=8*u-l-1,A=(1<<x)-1,w=A>>1,T=-7,S=o?u-1:0,D=o?-1:1,P=n[e+S];for(S+=D,f=P&(1<<-T)-1,P>>=-T,T+=x;T>0;f=256*f+n[e+S],S+=D,T-=8);for(_=f&(1<<-T)-1,f>>=-T,T+=l;T>0;_=256*_+n[e+S],S+=D,T-=8);if(0===f)f=1-w;else{if(f===A)return _?NaN:1/0*(P?-1:1);_+=Math.pow(2,l),f-=w}return(P?-1:1)*_*Math.pow(2,f-l)},rf=function(n,e,o,l,u,f){var _,x,A,w=8*f-u-1,T=(1<<w)-1,S=T>>1,D=23===u?Math.pow(2,-24)-Math.pow(2,-77):0,P=l?0:f-1,F=l?1:-1,z=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(x=isNaN(e)?1:0,_=T):(_=Math.floor(Math.log(e)/Math.LN2),e*(A=Math.pow(2,-_))<1&&(_--,A*=2),(e+=_+S>=1?D/A:D*Math.pow(2,1-S))*A>=2&&(_++,A/=2),_+S>=T?(x=0,_=T):_+S>=1?(x=(e*A-1)*Math.pow(2,u),_+=S):(x=e*Math.pow(2,S-1)*Math.pow(2,u),_=0));u>=8;n[o+P]=255&x,P+=F,x/=256,u-=8);for(_=_<<u|x,w+=u;w>0;n[o+P]=255&_,P+=F,_/=256,w-=8);n[o+P-F]|=128*z},kc=Qt;function Qt(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}Qt.Varint=0,Qt.Fixed64=1,Qt.Bytes=2,Qt.Fixed32=5;var af=4294967296,Yd=1/af,sf="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function vr(n){return n.type===Qt.Bytes?n.readVarint()+n.pos:n.pos+1}function Ah(n,e,o){var l=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));o.realloc(l);for(var u=o.pos-1;u>=n;u--)o.buf[u+l]=o.buf[u]}function lf(n,e){for(var o=0;o<n.length;o++)e.writeVarint(n[o])}function Hm(n,e){for(var o=0;o<n.length;o++)e.writeSVarint(n[o])}function qm(n,e){for(var o=0;o<n.length;o++)e.writeFloat(n[o])}function bh(n,e){for(var o=0;o<n.length;o++)e.writeDouble(n[o])}function cf(n,e){for(var o=0;o<n.length;o++)e.writeBoolean(n[o])}function It(n,e){for(var o=0;o<n.length;o++)e.writeFixed32(n[o])}function Kg(n,e){for(var o=0;o<n.length;o++)e.writeSFixed32(n[o])}function $g(n,e){for(var o=0;o<n.length;o++)e.writeFixed64(n[o])}function e_(n,e){for(var o=0;o<n.length;o++)e.writeSFixed64(n[o])}function wh(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16)+16777216*n[e+3]}function Pc(n,e,o){n[o]=e,n[o+1]=e>>>8,n[o+2]=e>>>16,n[o+3]=e>>>24}function Ym(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16)+(n[e+3]<<24)}function Ch(n,e,o){e.glyphs=[],1===n&&o.readMessage(Qm,e)}function Qm(n,e,o){if(3===n){const{id:l,bitmap:u,width:f,height:_,left:x,top:A,advance:w}=o.readMessage(df,{});e.glyphs.push({id:l,bitmap:new Eo({width:f+6,height:_+6},u),metrics:{width:f,height:_,left:x,top:A,advance:w}})}else 4===n?e.ascender=o.readSVarint():5===n&&(e.descender=o.readSVarint())}function df(n,e,o){1===n?e.id=o.readVarint():2===n?e.bitmap=o.readBytes():3===n?e.width=o.readVarint():4===n?e.height=o.readVarint():5===n?e.left=o.readSVarint():6===n?e.top=o.readSVarint():7===n&&(e.advance=o.readVarint())}function Mh(n){let e=0,o=0;for(const _ of n)e+=_.w*_.h,o=Math.max(o,_.w);n.sort((_,x)=>x.h-_.h);const l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),o),h:1/0}];let u=0,f=0;for(const _ of n)for(let x=l.length-1;x>=0;x--){const A=l[x];if(!(_.w>A.w||_.h>A.h)){if(_.x=A.x,_.y=A.y,f=Math.max(f,_.y+_.h),u=Math.max(u,_.x+_.w),_.w===A.w&&_.h===A.h){const w=l.pop();x<l.length&&(l[x]=w)}else _.h===A.h?(A.x+=_.w,A.w-=_.w):_.w===A.w?(A.y+=_.h,A.h-=_.h):(l.push({x:A.x+_.w,y:A.y,w:A.w-_.w,h:_.h}),A.y+=_.h,A.h-=_.h);break}}return{w:u,h:f,fill:e/(u*f)||0}}Qt.prototype={destroy:function(){this.buf=null},readFields:function(n,e,o){for(o=o||this.length;this.pos<o;){var l=this.readVarint(),u=l>>3,f=this.pos;this.type=7&l,n(u,e,this),this.pos===f&&this.skip(l)}return e},readMessage:function(n,e){return this.readFields(n,e,this.readVarint()+this.pos)},readFixed32:function(){var n=wh(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=Ym(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=wh(this.buf,this.pos)+wh(this.buf,this.pos+4)*af;return this.pos+=8,n},readSFixed64:function(){var n=wh(this.buf,this.pos)+Ym(this.buf,this.pos+4)*af;return this.pos+=8,n},readFloat:function(){var n=Bc(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=Bc(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var e,o,l=this.buf;return e=127&(o=l[this.pos++]),o<128?e:(e|=(127&(o=l[this.pos++]))<<7,o<128?e:(e|=(127&(o=l[this.pos++]))<<14,o<128?e:(e|=(127&(o=l[this.pos++]))<<21,o<128?e:function(u,f,_){var x,A,w=_.buf;if(x=(112&(A=w[_.pos++]))>>4,A<128||(x|=(127&(A=w[_.pos++]))<<3,A<128)||(x|=(127&(A=w[_.pos++]))<<10,A<128)||(x|=(127&(A=w[_.pos++]))<<17,A<128)||(x|=(127&(A=w[_.pos++]))<<24,A<128)||(x|=(1&(A=w[_.pos++]))<<31,A<128))return function sa(n,e,o){return o?4294967296*e+(n>>>0):4294967296*(e>>>0)+(n>>>0)}(u,x,f);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(o=l[this.pos]))<<28,n,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var n=this.readVarint()+this.pos,e=this.pos;return this.pos=n,n-e>=12&&sf?sf.decode(this.buf.subarray(e,n)):function(o,l,u){for(var f="",_=l;_<u;){var x,A,w,T=o[_],S=null,D=T>239?4:T>223?3:T>191?2:1;if(_+D>u)break;1===D?T<128&&(S=T):2===D?128==(192&(x=o[_+1]))&&(S=(31&T)<<6|63&x)<=127&&(S=null):3===D?(A=o[_+2],128==(192&(x=o[_+1]))&&128==(192&A)&&((S=(15&T)<<12|(63&x)<<6|63&A)<=2047||S>=55296&&S<=57343)&&(S=null)):4===D&&(A=o[_+2],w=o[_+3],128==(192&(x=o[_+1]))&&128==(192&A)&&128==(192&w)&&((S=(15&T)<<18|(63&x)<<12|(63&A)<<6|63&w)<=65535||S>=1114112)&&(S=null)),null===S?(S=65533,D=1):S>65535&&(S-=65536,f+=String.fromCharCode(S>>>10&1023|55296),S=56320|1023&S),f+=String.fromCharCode(S),_+=D}return f}(this.buf,e,n)},readBytes:function(){var n=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,n);return this.pos=n,e},readPackedVarint:function(n,e){if(this.type!==Qt.Bytes)return n.push(this.readVarint(e));var o=vr(this);for(n=n||[];this.pos<o;)n.push(this.readVarint(e));return n},readPackedSVarint:function(n){if(this.type!==Qt.Bytes)return n.push(this.readSVarint());var e=vr(this);for(n=n||[];this.pos<e;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==Qt.Bytes)return n.push(this.readBoolean());var e=vr(this);for(n=n||[];this.pos<e;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==Qt.Bytes)return n.push(this.readFloat());var e=vr(this);for(n=n||[];this.pos<e;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==Qt.Bytes)return n.push(this.readDouble());var e=vr(this);for(n=n||[];this.pos<e;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==Qt.Bytes)return n.push(this.readFixed32());var e=vr(this);for(n=n||[];this.pos<e;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==Qt.Bytes)return n.push(this.readSFixed32());var e=vr(this);for(n=n||[];this.pos<e;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==Qt.Bytes)return n.push(this.readFixed64());var e=vr(this);for(n=n||[];this.pos<e;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==Qt.Bytes)return n.push(this.readSFixed64());var e=vr(this);for(n=n||[];this.pos<e;)n.push(this.readSFixed64());return n},skip:function(n){var e=7&n;if(e===Qt.Varint)for(;this.buf[this.pos++]>127;);else if(e===Qt.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Qt.Fixed32)this.pos+=4;else{if(e!==Qt.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(n,e){this.writeVarint(n<<3|e)},realloc:function(n){for(var e=this.length||16;e<this.pos+n;)e*=2;if(e!==this.length){var o=new Uint8Array(e);o.set(this.buf),this.buf=o,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),Pc(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),Pc(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),Pc(this.buf,-1&n,this.pos),Pc(this.buf,Math.floor(n*Yd),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),Pc(this.buf,-1&n,this.pos),Pc(this.buf,Math.floor(n*Yd),this.pos+4),this.pos+=8},writeVarint:function(n){(n=+n||0)>268435455||n<0?function(e,o){var l,u,f,x;if(e>=0?(l=e%4294967296|0,u=e/4294967296|0):(u=~(-e/4294967296),4294967295^(l=~(-e%4294967296))?l=l+1|0:(l=0,u=u+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),f=l,(x=o).buf[x.pos++]=127&f|128,f>>>=7,x.buf[x.pos++]=127&f|128,f>>>=7,x.buf[x.pos++]=127&f|128,f>>>=7,x.buf[x.pos++]=127&f|128,x.buf[x.pos]=127&(f>>>=7),function(f,_){var x=(7&f)<<4;_.buf[_.pos++]|=x|((f>>>=3)?128:0),f&&(_.buf[_.pos++]=127&f|((f>>>=7)?128:0),f&&(_.buf[_.pos++]=127&f|((f>>>=7)?128:0),f&&(_.buf[_.pos++]=127&f|((f>>>=7)?128:0),f&&(_.buf[_.pos++]=127&f|((f>>>=7)?128:0),f&&(_.buf[_.pos++]=127&f)))))}(u,o)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(Boolean(n))},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var e=this.pos;this.pos=function(l,u,f){for(var _,x,A=0;A<u.length;A++){if((_=u.charCodeAt(A))>55295&&_<57344){if(!x){_>56319||A+1===u.length?(l[f++]=239,l[f++]=191,l[f++]=189):x=_;continue}if(_<56320){l[f++]=239,l[f++]=191,l[f++]=189,x=_;continue}_=x-55296<<10|_-56320|65536,x=null}else x&&(l[f++]=239,l[f++]=191,l[f++]=189,x=null);_<128?l[f++]=_:(_<2048?l[f++]=_>>6|192:(_<65536?l[f++]=_>>12|224:(l[f++]=_>>18|240,l[f++]=_>>12&63|128),l[f++]=_>>6&63|128),l[f++]=63&_|128)}return f}(this.buf,n,this.pos);var o=this.pos-e;o>=128&&Ah(e,o,this),this.pos=e-1,this.writeVarint(o),this.pos+=o},writeFloat:function(n){this.realloc(4),rf(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),rf(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var e=n.length;this.writeVarint(e),this.realloc(e);for(var o=0;o<e;o++)this.buf[this.pos++]=n[o]},writeRawMessage:function(n,e){this.pos++;var o=this.pos;n(e,this);var l=this.pos-o;l>=128&&Ah(o,l,this),this.pos=o-1,this.writeVarint(l),this.pos+=l},writeMessage:function(n,e,o){this.writeTag(n,Qt.Bytes),this.writeRawMessage(e,o)},writePackedVarint:function(n,e){e.length&&this.writeMessage(n,lf,e)},writePackedSVarint:function(n,e){e.length&&this.writeMessage(n,Hm,e)},writePackedBoolean:function(n,e){e.length&&this.writeMessage(n,cf,e)},writePackedFloat:function(n,e){e.length&&this.writeMessage(n,qm,e)},writePackedDouble:function(n,e){e.length&&this.writeMessage(n,bh,e)},writePackedFixed32:function(n,e){e.length&&this.writeMessage(n,It,e)},writePackedSFixed32:function(n,e){e.length&&this.writeMessage(n,Kg,e)},writePackedFixed64:function(n,e){e.length&&this.writeMessage(n,$g,e)},writePackedSFixed64:function(n,e){e.length&&this.writeMessage(n,e_,e)},writeBytesField:function(n,e){this.writeTag(n,Qt.Bytes),this.writeBytes(e)},writeFixed32Field:function(n,e){this.writeTag(n,Qt.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(n,e){this.writeTag(n,Qt.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(n,e){this.writeTag(n,Qt.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(n,e){this.writeTag(n,Qt.Fixed64),this.writeSFixed64(e)},writeVarintField:function(n,e){this.writeTag(n,Qt.Varint),this.writeVarint(e)},writeSVarintField:function(n,e){this.writeTag(n,Qt.Varint),this.writeSVarint(e)},writeStringField:function(n,e){this.writeTag(n,Qt.Bytes),this.writeString(e)},writeFloatField:function(n,e){this.writeTag(n,Qt.Fixed32),this.writeFloat(e)},writeDoubleField:function(n,e){this.writeTag(n,Qt.Fixed64),this.writeDouble(e)},writeBooleanField:function(n,e){this.writeVarintField(n,Boolean(e))}};class Th{constructor(e,{pixelRatio:o,version:l,stretchX:u,stretchY:f,content:_}){this.paddedRect=e,this.pixelRatio=o,this.stretchX=u,this.stretchY=f,this.content=_,this.version=l}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Wm{constructor(e,o){const l={},u={};this.haveRenderCallbacks=[];const f=[];this.addImages(e,l,f),this.addImages(o,u,f);const{w:_,h:x}=Mh(f),A=new yn({width:_||1,height:x||1});for(const w in e){const T=e[w],S=l[w].paddedRect;yn.copy(T.data,A,{x:0,y:0},{x:S.x+1,y:S.y+1},T.data)}for(const w in o){const T=o[w],S=u[w].paddedRect,D=S.x+1,P=S.y+1,F=T.data.width,z=T.data.height;yn.copy(T.data,A,{x:0,y:0},{x:D,y:P},T.data),yn.copy(T.data,A,{x:0,y:z-1},{x:D,y:P-1},{width:F,height:1}),yn.copy(T.data,A,{x:0,y:0},{x:D,y:P+z},{width:F,height:1}),yn.copy(T.data,A,{x:F-1,y:0},{x:D-1,y:P},{width:1,height:z}),yn.copy(T.data,A,{x:0,y:0},{x:D+F,y:P},{width:1,height:z})}this.image=A,this.iconPositions=l,this.patternPositions=u}addImages(e,o,l){for(const u in e){const f=e[u],_={x:0,y:0,w:f.data.width+2,h:f.data.height+2};l.push(_),o[u]=new Th(_,f),f.hasRenderCallback&&this.haveRenderCallbacks.push(u)}}patchUpdatedImages(e,o){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(l=>e.hasImage(l)),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const l in e.updatedImages)this.patchUpdatedImage(this.iconPositions[l],e.getImage(l),o),this.patchUpdatedImage(this.patternPositions[l],e.getImage(l),o)}patchUpdatedImage(e,o,l){if(!e||!o||e.version===o.version)return;e.version=o.version;const[u,f]=e.tl;l.update(o.data,void 0,{x:u,y:f})}}Je(Th,"ImagePosition"),Je(Wm,"ImageAtlas");const Yn={horizontal:1,vertical:2,horizontalOnly:3};class Qd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,o){const l=new Qd;return l.scale=e||1,l.fontStack=o,l}static forImage(e){const o=new Qd;return o.imageName=e,o}}class Ic{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,o){const l=new Ic;for(let u=0;u<e.sections.length;u++){const f=e.sections[u];f.image?l.addImageSection(f):l.addTextSection(f,o)}return l}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(o,l){let u="";for(let f=0;f<o.length;f++){const _=o.charCodeAt(f+1)||null,x=o.charCodeAt(f-1)||null;u+=!l&&(_&&m(_)&&!qd[o[f+1]]||x&&m(x)&&!qd[o[f-1]])||!qd[o[f]]?o[f]:qd[o[f]]}return u}(this.text,e)}trim(){let e=0;for(let l=0;l<this.text.length&&Eh[this.text.charCodeAt(l)];l++)e++;let o=this.text.length;for(let l=this.text.length-1;l>=0&&l>=e&&Eh[this.text.charCodeAt(l)];l--)o--;this.text=this.text.substring(e,o),this.sectionIndex=this.sectionIndex.slice(e,o)}substring(e,o){const l=new Ic;return l.text=this.text.substring(e,o),l.sectionIndex=this.sectionIndex.slice(e,o),l.sections=this.sections,l}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,o)=>Math.max(e,this.sections[o].scale),0)}addTextSection(e,o){this.text+=e.text,this.sections.push(Qd.forText(e.scale,e.fontStack||o));const l=this.sections.length-1;for(let u=0;u<e.text.length;++u)this.sectionIndex.push(l)}addImageSection(e){const o=e.image?e.image.name:"";if(0===o.length)return void Ai("Can't add FormattedSection with an empty image.");const l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(Qd.forImage(o)),this.sectionIndex.push(this.sections.length-1)):Ai("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function uf(n,e,o,l,u,f,_,x,A,w,T,S,D,P,F,z){const q=Ic.fromFeature(n,u);let W;S===Yn.vertical&&q.verticalizePunctuation(D);const{processBidirectionalText:re,processStyledBidirectionalText:oe}=Q;if(re&&1===q.sections.length){W=[];const ue=re(q.toString(),Dh(q,w,f,e,l,P,F));for(const Ae of ue){const be=new Ic;be.text=Ae,be.sections=q.sections;for(let Se=0;Se<Ae.length;Se++)be.sectionIndex.push(0);W.push(be)}}else if(oe){W=[];const ue=oe(q.text,q.sectionIndex,Dh(q,w,f,e,l,P,F));for(const Ae of ue){const be=new Ic;be.text=Ae[0],be.sectionIndex=Ae[1],be.sections=q.sections,W.push(be)}}else W=function(ue,Ae){const be=[],Se=ue.text;let Ie=0;for(const ye of Ae)be.push(ue.substring(Ie,ye)),Ie=ye;return Ie<Se.length&&be.push(ue.substring(Ie,Se.length)),be}(q,Dh(q,w,f,e,l,P,F));const ae=[],ce={positionedLines:ae,text:q.toString(),top:T[1],bottom:T[1],left:T[0],right:T[0],writingMode:S,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(ue,Ae,be,Se,Ie,ye,Te,ke,Fe,qe,Be,He){let pt=0,ft=0,it=0;const Ke="right"===ke?1:"left"===ke?0:.5;let ht=!1;for(const Ct of Ie){const St=Ct.getSections();for(const Dt of St){if(Dt.imageName)continue;const zt=Ae[Dt.fontStack];if(zt&&(ht=void 0!==zt.ascender&&void 0!==zt.descender,!ht))break}if(!ht)break}let xt=0;for(const Ct of Ie){Ct.trim();const St=Ct.getMaxScale(),Dt=24*(St-1),zt={positionedGlyphs:[],lineOffset:0};ue.positionedLines[xt]=zt;const Zt=zt.positionedGlyphs;let ei=0;if(!Ct.length()){ft+=ye,++xt;continue}let vt=0,Mt=0;for(let Bt=0;Bt<Ct.length();Bt++){const xi=Ct.getSection(Bt),Qi=Ct.getSectionIndex(Bt),Pt=Ct.getCharCode(Bt);let si=xi.scale,Wi=null,oi=null,wi=null,Ni=24,Fi=0;const Ui=!(Fe===Yn.horizontal||!Be&&!d(Pt)||Be&&(Eh[Pt]||(et=Pt,Ou(et)||hd(et)||Qa(et)||yd(et)||xd(et))));if(xi.imageName){const on=Se[xi.imageName];if(!on)continue;wi=xi.imageName,ue.iconsInText=ue.iconsInText||!0,oi=on.paddedRect;const Li=on.displaySize;si=24*si/He,Wi={width:Li[0],height:Li[1],left:1,top:-3,advance:Ui?Li[1]:Li[0],localGlyph:!1},Fi=ht?-Wi.height*si:24*St-17-Li[1]*si,Ni=Wi.advance;const $o=(Ui?Li[0]:Li[1])*si-24*St;$o>0&&$o>ei&&(ei=$o)}else{const on=be[xi.fontStack];if(!on)continue;on[Pt]&&(oi=on[Pt]);const Li=Ae[xi.fontStack];if(!Li)continue;const $o=Li.glyphs[Pt];if(!$o)continue;if(Wi=$o.metrics,Ni=8203!==Pt?24:0,ht){const us=void 0!==Li.ascender?Math.abs(Li.ascender):0,yl=void 0!==Li.descender?Math.abs(Li.descender):0,Wn=(us+yl)*si;vt<Wn&&(vt=Wn,Mt=(us-yl)/2*si),Fi=-us*si}else Fi=24*(St-si)-17}Ui?(ue.verticalizable=!0,Zt.push({glyph:Pt,imageName:wi,x:pt,y:ft+Fi,vertical:Ui,scale:si,localGlyph:Wi.localGlyph,fontStack:xi.fontStack,sectionIndex:Qi,metrics:Wi,rect:oi}),pt+=Ni*si+qe):(Zt.push({glyph:Pt,imageName:wi,x:pt,y:ft+Fi,vertical:Ui,scale:si,localGlyph:Wi.localGlyph,fontStack:xi.fontStack,sectionIndex:Qi,metrics:Wi,rect:oi}),pt+=Wi.advance*si+qe)}0!==Zt.length&&(it=Math.max(pt-qe,it),ht?Ar(Zt,Ke,ei,Mt,ye*St/2):Ar(Zt,Ke,ei,0,ye/2)),pt=0;const vn=ye*St+ei;zt.lineOffset=Math.max(ei,Dt),ft+=vn,++xt}var et;const Si=ft,{horizontalAlign:pi,verticalAlign:Jt}=Bh(Te);(function(Ct,St,Dt,zt,Zt,ei){const vt=(St-Dt)*Zt,Mt=-ei*zt;for(const vn of Ct)for(const Bt of vn.positionedGlyphs)Bt.x+=vt,Bt.y+=Mt})(ue.positionedLines,Ke,pi,Jt,it,Si),ue.top+=-Jt*Si,ue.bottom=ue.top+Si,ue.left+=-pi*it,ue.right=ue.left+it,ue.hasBaseline=ht}(ce,e,o,l,W,_,x,A,S,w,D,z),!function(ue){for(const Ae of ue)if(0!==Ae.positionedGlyphs.length)return!1;return!0}(ae)&&ce}const Eh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},t_={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Sh(n,e,o,l,u,f){if(e.imageName){const _=l[e.imageName];return _?_.displaySize[0]*e.scale*24/f+u:0}{const _=o[e.fontStack],x=_&&_.glyphs[n];return x?x.metrics.advance*e.scale+u:0}}function Xm(n,e,o,l){const u=Math.pow(n-e,2);return l?n<e?u/2:2*u:u+Math.abs(o)*o}function Jm(n,e,o){let l=0;return 10===n&&(l-=1e4),o&&(l+=150),40!==n&&65288!==n||(l+=50),41!==e&&65289!==e||(l+=50),l}function la(n,e,o,l,u,f){let _=null,x=Xm(e,o,u,f);for(const A of l){const w=Xm(e-A.x,o,u,f)+A.badness;w<=x&&(_=A,x=w)}return{index:n,x:e,priorBreak:_,badness:x}}function hf(n){return n?hf(n.priorBreak).concat(n.index):[]}function Dh(n,e,o,l,u,f,_){if("point"!==f)return[];if(!n)return[];const x=[],A=function(D,P,F,z,q,W){let re=0;for(let oe=0;oe<D.length();oe++){const ae=D.getSection(oe);re+=Sh(D.getCharCode(oe),ae,z,q,P,W)}return re/Math.max(1,Math.ceil(re/F))}(n,e,o,l,u,_),w=n.text.indexOf("\u200b")>=0;let T=0;for(let D=0;D<n.length();D++){const P=n.getSection(D),F=n.getCharCode(D);if(Eh[F]||(T+=Sh(F,P,l,u,e,_)),D<n.length()-1){const z=!((S=F)<11904||!(fd(S)||tc(S)||Xr(S)||Gu(S)||nc(S)||zu(S)||md(S)||Qs(S)||Vu(S)||_d(S)||ic(S)||rc(S)||Ws(S)||Wa(S)||pd(S)||gd(S)||ec(S)||Zu(S)||oc(S)||Nu(S)));(t_[F]||z||P.imageName)&&x.push(la(D+1,T,A,x,Jm(F,n.getCharCode(D+1),z&&w),!1))}}var S;return hf(la(n.length(),T,A,x,0,!0))}function Bh(n){let e=.5,o=.5;switch(n){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(n){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:e,verticalAlign:o}}function Ar(n,e,o,l,u){if(!(e||o||l||u))return;const f=n.length-1,_=n[f],x=(_.x+_.metrics.advance*_.scale)*e;for(let A=0;A<=f;A++)n[A].x-=x,n[A].y+=o+l+u}function pf(n,e,o){const{horizontalAlign:l,verticalAlign:u}=Bh(o),f=e[0]-n.displaySize[0]*l,_=e[1]-n.displaySize[1]*u;return{image:n,top:_,bottom:_+n.displaySize[1],left:f,right:f+n.displaySize[0]}}function ff(n,e,o,l,u,f){const _=n.image;let x;if(_.content){const q=_.content,W=_.pixelRatio||1;x=[q[0]/W,q[1]/W,_.displaySize[0]-q[2]/W,_.displaySize[1]-q[3]/W]}const A=e.left*f,w=e.right*f;let T,S,D,P;"width"===o||"both"===o?(P=u[0]+A-l[3],S=u[0]+w+l[1]):(P=u[0]+(A+w-_.displaySize[0])/2,S=P+_.displaySize[0]);const F=e.top*f,z=e.bottom*f;return"height"===o||"both"===o?(T=u[1]+F-l[0],D=u[1]+z+l[2]):(T=u[1]+(F+z-_.displaySize[1])/2,D=T+_.displaySize[1]),{image:_,top:T,right:S,bottom:D,left:P,collisionPadding:x}}class br extends Ue{constructor(e,o,l,u,f){super(e,o),this.angle=u,this.z=l,void 0!==f&&(this.segment=f)}clone(){return new br(this.x,this.y,this.z,this.angle,this.segment)}}function mf(n,e,o,l,u){if(void 0===e.segment)return!0;let f=e,_=e.segment+1,x=0;for(;x>-o/2;){if(_--,_<0)return!1;x-=n[_].dist(f),f=n[_]}x+=n[_].dist(n[_+1]),_++;const A=[];let w=0;for(;x<o/2;){const T=n[_],S=n[_+1];if(!S)return!1;let D=n[_-1].angleTo(T)-T.angleTo(S);for(D=Math.abs((D+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:x,angleDelta:D}),w+=D;x-A[0].distance>l;)w-=A.shift().angleDelta;if(w>u)return!1;_++,x+=T.dist(S)}return!0}function pl(n){let e=0;for(let o=0;o<n.length-1;o++)e+=n[o].dist(n[o+1]);return e}function gf(n,e,o){return n?.6*e*o:0}function _f(n,e){return Math.max(n?n.right-n.left:0,e?e.right-e.left:0)}function Km(n,e,o,l,u,f){const _=gf(o,u,f),x=_f(o,l)*f;let A=0;const w=pl(n)/2;for(let T=0;T<n.length-1;T++){const S=n[T],D=n[T+1],P=S.dist(D);if(A+P>w){const F=(w-A)/P,z=Ot(S.x,D.x,F),q=Ot(S.y,D.y,F),W=new br(z,q,0,D.angleTo(S),T);return!_||mf(n,W,x,_,e)?W:void 0}A+=P}}function i_(n,e,o,l,u,f,_,x,A){const w=gf(l,f,_),T=_f(l,u),S=T*_,D=0===n[0].x||n[0].x===A||0===n[0].y||n[0].y===A;return e-S<e/4&&(e=S+e/4),yf(n,D?e/2*x%e:(T/2+2*f)*_*x%e,e,w,o,S,D,!1,A)}function yf(n,e,o,l,u,f,_,x,A){const w=f/2,T=pl(n);let S=0,D=e-o,P=[];for(let F=0;F<n.length-1;F++){const z=n[F],q=n[F+1],W=z.dist(q),re=q.angleTo(z);for(;D+o<S+W;){D+=o;const oe=(D-S)/W,ae=Ot(z.x,q.x,oe),ce=Ot(z.y,q.y,oe);if(ae>=0&&ae<A&&ce>=0&&ce<A&&D-w>=0&&D+w<=T){const ue=new br(ae,ce,0,re,F);ue._round(),l&&!mf(n,ue,f,l,u)||P.push(ue)}}S+=W}return x||P.length||_||(P=yf(n,S/2,o,l,u,f,_,!0,A)),P}function kh(n,e,o,l,u){const f=[];for(let _=0;_<n.length;_++){const x=n[_];let A;for(let w=0;w<x.length-1;w++){let T=x[w],S=x[w+1];T.x<e&&S.x<e||(T.x<e?T=new Ue(e,T.y+(e-T.x)/(S.x-T.x)*(S.y-T.y))._round():S.x<e&&(S=new Ue(e,T.y+(e-T.x)/(S.x-T.x)*(S.y-T.y))._round()),T.y<o&&S.y<o||(T.y<o?T=new Ue(T.x+(o-T.y)/(S.y-T.y)*(S.x-T.x),o)._round():S.y<o&&(S=new Ue(T.x+(o-T.y)/(S.y-T.y)*(S.x-T.x),o)._round()),T.x>=l&&S.x>=l||(T.x>=l?T=new Ue(l,T.y+(l-T.x)/(S.x-T.x)*(S.y-T.y))._round():S.x>=l&&(S=new Ue(l,T.y+(l-T.x)/(S.x-T.x)*(S.y-T.y))._round()),T.y>=u&&S.y>=u||(T.y>=u?T=new Ue(T.x+(u-T.y)/(S.y-T.y)*(S.x-T.x),u)._round():S.y>=u&&(S=new Ue(T.x+(u-T.y)/(S.y-T.y)*(S.x-T.x),u)._round()),A&&T.equals(A[A.length-1])||(A=[T],f.push(A)),A.push(S)))))}}return f}Je(br,"Anchor");const Wd=1e20;function $m(n,e,o,l,u,f,_,x,A){for(let w=e;w<e+l;w++)eg(n,o*f+w,f,u,_,x,A);for(let w=o;w<o+u;w++)eg(n,w*f+e,1,l,_,x,A)}function eg(n,e,o,l,u,f,_){f[0]=0,_[0]=-Wd,_[1]=Wd,u[0]=n[e];for(let x=1,A=0,w=0;x<l;x++){u[x]=n[e+x*o];const T=x*x;do{const S=f[A];w=(u[x]-u[S]+T-S*S)/(x-S)/2}while(w<=_[A]&&--A>-1);A++,f[A]=x,_[A]=w,_[A+1]=Wd}for(let x=0,A=0;x<l;x++){for(;_[A+1]<x;)A++;const w=f[A],T=x-w;n[e+x*o]=u[w]+T*T}}const xf={none:0,ideographs:1,all:2};class Fc{constructor(e,o,l){this.requestManager=e,this.localGlyphMode=o,this.localFontFamily=l,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,o){const l=[];for(const u in e)for(const f of e[u])l.push({stack:u,id:f});an(l,({stack:u,id:f},_)=>{let x=this.entries[u];x||(x=this.entries[u]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let A=x.glyphs[f];if(void 0!==A)return void _(null,{stack:u,id:f,glyph:A});if(A=this._tinySDF(x,u,f),A)return x.glyphs[f]=A,void _(null,{stack:u,id:f,glyph:A});const w=Math.floor(f/256);if(256*w>65535)return void _(new Error("glyphs > 65535 not supported"));if(x.ranges[w])return void _(null,{stack:u,id:f,glyph:A});let T=x.requests[w];T||(T=x.requests[w]=[],Fc.loadGlyphRange(u,w,this.url,this.requestManager,(S,D)=>{if(D){x.ascender=D.ascender,x.descender=D.descender;for(const P in D.glyphs)this._doesCharSupportLocalGlyph(+P)||(x.glyphs[+P]=D.glyphs[+P]);x.ranges[w]=!0}for(const P of T)P(S,D);delete x.requests[w]})),T.push((S,D)=>{S?_(S):D&&_(null,{stack:u,id:f,glyph:D.glyphs[f]||null})})},(u,f)=>{if(u)o(u);else if(f){const _={};for(const{stack:x,id:A,glyph:w}of f)void 0===_[x]&&(_[x]={}),void 0===_[x].glyphs&&(_[x].glyphs={}),_[x].glyphs[A]=w&&{id:w.id,bitmap:w.bitmap.clone(),metrics:w.metrics},_[x].ascender=this.entries[x].ascender,_[x].descender=this.entries[x].descender;o(null,_)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==xf.none&&(this.localGlyphMode===xf.all?!!this.localFontFamily:!!this.localFontFamily&&(_d(e)||Uu(e)||Ws(e)||ec(e)||Qs(e)))}_tinySDF(e,o,l){const u=this.localFontFamily;if(!u||!this._doesCharSupportLocalGlyph(l))return;let f=e.tinySDF;if(!f){let z="400";/bold/i.test(o)?z="900":/medium/i.test(o)?z="500":/light/i.test(o)&&(z="200"),f=e.tinySDF=new Fc.TinySDF({fontFamily:u,fontWeight:z,fontSize:48,buffer:6,radius:16}),f.fontWeight=z}if(this.localGlyphs[f.fontWeight][l])return this.localGlyphs[f.fontWeight][l];const _=String.fromCharCode(l),{data:x,width:A,height:w,glyphWidth:T,glyphHeight:S,glyphLeft:D,glyphTop:P,glyphAdvance:F}=f.draw(_);return this.localGlyphs[f.fontWeight][l]={id:l,bitmap:new Eo({width:A,height:w},x),metrics:{width:T/2,height:S/2,left:D/2,top:P/2-27,advance:F/2,localGlyph:!0}}}}function tg(n,e,o,l){const u=[],f=n.image,_=f.pixelRatio,x=f.paddedRect.w-2,A=f.paddedRect.h-2,w=n.right-n.left,T=n.bottom-n.top,S=f.stretchX||[[0,x]],D=f.stretchY||[[0,A]],P=(ye,Te)=>ye+Te[1]-Te[0],F=S.reduce(P,0),z=D.reduce(P,0),q=x-F,W=A-z;let re=0,oe=F,ae=0,ce=z,ue=0,Ae=q,be=0,Se=W;if(f.content&&l){const ye=f.content;re=Xd(S,0,ye[0]),ae=Xd(D,0,ye[1]),oe=Xd(S,ye[0],ye[2]),ce=Xd(D,ye[1],ye[3]),ue=ye[0]-re,be=ye[1]-ae,Ae=ye[2]-ye[0]-oe,Se=ye[3]-ye[1]-ce}const Ie=(ye,Te,ke,Fe)=>{const qe=ca(ye.stretch-re,oe,w,n.left),Be=Jd(ye.fixed-ue,Ae,ye.stretch,F),He=ca(Te.stretch-ae,ce,T,n.top),pt=Jd(Te.fixed-be,Se,Te.stretch,z),ft=ca(ke.stretch-re,oe,w,n.left),it=Jd(ke.fixed-ue,Ae,ke.stretch,F),Ke=ca(Fe.stretch-ae,ce,T,n.top),ht=Jd(Fe.fixed-be,Se,Fe.stretch,z),xt=new Ue(qe,He),et=new Ue(ft,He),Si=new Ue(ft,Ke),pi=new Ue(qe,Ke),Jt=new Ue(Be/_,pt/_),Ct=new Ue(it/_,ht/_),St=e*Math.PI/180;if(St){const Zt=Math.sin(St),ei=Math.cos(St),vt=[ei,-Zt,Zt,ei];xt._matMult(vt),et._matMult(vt),pi._matMult(vt),Si._matMult(vt)}const Dt=ye.stretch+ye.fixed,zt=Te.stretch+Te.fixed;return{tl:xt,tr:et,bl:pi,br:Si,tex:{x:f.paddedRect.x+1+Dt,y:f.paddedRect.y+1+zt,w:ke.stretch+ke.fixed-Dt,h:Fe.stretch+Fe.fixed-zt},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Jt,pixelOffsetBR:Ct,minFontScaleX:Ae/_/w,minFontScaleY:Se/_/T,isSDF:o}};if(l&&(f.stretchX||f.stretchY)){const ye=Lc(S,q,F),Te=Lc(D,W,z);for(let ke=0;ke<ye.length-1;ke++){const Fe=ye[ke],qe=ye[ke+1];for(let Be=0;Be<Te.length-1;Be++)u.push(Ie(Fe,Te[Be],qe,Te[Be+1]))}}else u.push(Ie({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:A+1}));return u}function Xd(n,e,o){let l=0;for(const u of n)l+=Math.max(e,Math.min(o,u[1]))-Math.max(e,Math.min(o,u[0]));return l}function Lc(n,e,o){const l=[{fixed:-1,stretch:0}];for(const[u,f]of n){const _=l[l.length-1];l.push({fixed:u-_.stretch,stretch:_.stretch}),l.push({fixed:u-_.stretch,stretch:_.stretch+(f-u)})}return l.push({fixed:e+1,stretch:o}),l}function ca(n,e,o,l){return n/e*o+l}function Jd(n,e,o,l){return n-e*o/l}function fl(n,e,o,l){const u=e+n.positionedLines[l].lineOffset;return 0===l?o+u/2:o+(u+(e+n.positionedLines[l-1].lineOffset))/2}Fc.loadGlyphRange=function(n,e,o,l,u){const f=256*e,_=f+255,x=l.transformRequest(l.normalizeGlyphsURL(o).replace("{fontstack}",n).replace("{range}",`${f}-${_}`),ee.Glyphs);de(x,(A,w)=>{if(A)u(A);else if(w){const T={},S=new kc(w).readFields(Ch,{});for(const D of S.glyphs)T[D.id]=D;u(null,{glyphs:T,ascender:S.ascender,descender:S.descender})}})},Fc.TinySDF=class{constructor({fontSize:n=24,buffer:e=3,radius:o=8,cutoff:l=.25,fontFamily:u="sans-serif",fontWeight:f="normal",fontStyle:_="normal"}={}){this.buffer=e,this.cutoff=l,this.radius=o;const x=this.size=n+4*e,A=this._createCanvas(x),w=this.ctx=A.getContext("2d",{willReadFrequently:!0});w.font=`${_} ${f} ${n}px ${u}`,w.textBaseline="alphabetic",w.textAlign="left",w.fillStyle="black",this.gridOuter=new Float64Array(x*x),this.gridInner=new Float64Array(x*x),this.f=new Float64Array(x),this.z=new Float64Array(x+1),this.v=new Uint16Array(x)}_createCanvas(n){const e=document.createElement("canvas");return e.width=e.height=n,e}draw(n){const{width:e,actualBoundingBoxAscent:o,actualBoundingBoxDescent:l,actualBoundingBoxLeft:u,actualBoundingBoxRight:f}=this.ctx.measureText(n),_=Math.ceil(o),x=Math.min(this.size-this.buffer,Math.ceil(f-u)),A=Math.min(this.size-this.buffer,_+Math.ceil(l)),w=x+2*this.buffer,T=A+2*this.buffer,S=Math.max(w*T,0),D=new Uint8ClampedArray(S),P={data:D,width:w,height:T,glyphWidth:x,glyphHeight:A,glyphTop:_,glyphLeft:0,glyphAdvance:e};if(0===x||0===A)return P;const{ctx:F,buffer:z,gridInner:q,gridOuter:W}=this;F.clearRect(z,z,x,A),F.fillText(n,z,z+_);const re=F.getImageData(z,z,x,A);W.fill(Wd,0,S),q.fill(0,0,S);for(let oe=0;oe<A;oe++)for(let ae=0;ae<x;ae++){const ce=re.data[4*(oe*x+ae)+3]/255;if(0===ce)continue;const ue=(oe+z)*w+ae+z;if(1===ce)W[ue]=0,q[ue]=Wd;else{const Ae=.5-ce;W[ue]=Ae>0?Ae*Ae:0,q[ue]=Ae<0?Ae*Ae:0}}$m(W,0,0,w,T,w,this.f,this.v,this.z),$m(q,z,z,x,A,w,this.f,this.v,this.z);for(let oe=0;oe<S;oe++){const ae=Math.sqrt(W[oe])-Math.sqrt(q[oe]);D[oe]=Math.round(255-255*(ae/this.radius+this.cutoff))}return P}};class n_{constructor(e=[],o=o_){if(this.data=e,this.length=this.data.length,this.compare=o,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:o,compare:l}=this,u=o[e];for(;e>0;){const f=e-1>>1,_=o[f];if(l(u,_)>=0)break;o[e]=_,e=f}o[e]=u}_down(e){const{data:o,compare:l}=this,u=this.length>>1,f=o[e];for(;e<u;){let _=1+(e<<1),x=o[_];const A=_+1;if(A<this.length&&l(o[A],x)<0&&(_=A,x=o[A]),l(x,f)>=0)break;o[e]=x,e=_}o[e]=f}}function o_(n,e){return n<e?-1:n>e?1:0}function r_(n,e=1,o=!1){let l=1/0,u=1/0,f=-1/0,_=-1/0;const x=n[0];for(let P=0;P<x.length;P++){const F=x[P];(!P||F.x<l)&&(l=F.x),(!P||F.y<u)&&(u=F.y),(!P||F.x>f)&&(f=F.x),(!P||F.y>_)&&(_=F.y)}const A=Math.min(f-l,_-u);let w=A/2;const T=new n_([],a_);if(0===A)return new Ue(l,u);for(let P=l;P<f;P+=A)for(let F=u;F<_;F+=A)T.push(new Rc(P+w,F+w,w,n));let S=function(P){let F=0,z=0,q=0;const W=P[0];for(let re=0,oe=W.length,ae=oe-1;re<oe;ae=re++){const ce=W[re],ue=W[ae],Ae=ce.x*ue.y-ue.x*ce.y;z+=(ce.x+ue.x)*Ae,q+=(ce.y+ue.y)*Ae,F+=3*Ae}return new Rc(z/F,q/F,0,P)}(n),D=T.length;for(;T.length;){const P=T.pop();(P.d>S.d||!S.d)&&(S=P,o&&console.log("found best %d after %d probes",Math.round(1e4*P.d)/1e4,D)),P.max-S.d<=e||(w=P.h/2,T.push(new Rc(P.p.x-w,P.p.y-w,w,n)),T.push(new Rc(P.p.x+w,P.p.y-w,w,n)),T.push(new Rc(P.p.x-w,P.p.y+w,w,n)),T.push(new Rc(P.p.x+w,P.p.y+w,w,n)),D+=4)}return o&&(console.log(`num probes: ${D}`),console.log(`best distance: ${S.d}`)),S.p}function a_(n,e){return e.max-n.max}function Rc(n,e,o,l){this.p=new Ue(n,e),this.h=o,this.d=function(u,f){let _=!1,x=1/0;for(let A=0;A<f.length;A++){const w=f[A];for(let T=0,S=w.length,D=S-1;T<S;D=T++){const P=w[T],F=w[D];P.y>u.y!=F.y>u.y&&u.x<(F.x-P.x)*(u.y-P.y)/(F.y-P.y)+P.x&&(_=!_),x=Math.min(x,mc(u,P,F))}}return(_?1:-1)*Math.sqrt(x)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}const ls=Number.POSITIVE_INFINITY,vf=Math.sqrt(2);function Ph(n,e){return e[1]!==ls?function(o,l,u){let f=0,_=0;switch(l=Math.abs(l),u=Math.abs(u),o){case"top-right":case"top-left":case"top":_=u-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-u}switch(o){case"top-right":case"bottom-right":case"right":f=-l;break;case"top-left":case"bottom-left":case"left":f=l}return[f,_]}(n,e[0],e[1]):function(o,l){let u=0,f=0;l<0&&(l=0);const _=l/vf;switch(o){case"top-right":case"top-left":f=_-7;break;case"bottom-right":case"bottom-left":f=7-_;break;case"bottom":f=7-l;break;case"top":f=l-7}switch(o){case"top-right":case"bottom-right":u=-_;break;case"top-left":case"bottom-left":u=_;break;case"left":u=l;break;case"right":u=-l}return[u,f]}(n,e[0])}function ig(n,e,o,l,u,f,_,x,A,w){n.createArrays(),n.tilePixelRatio=rt/(512*n.overscaling),n.compareText={},n.iconsNeedLinear=!1;const T=n.layers[0].layout,S=n.layers[0]._unevaluatedLayout._values,D={};if("composite"===n.textSizeData.kind){const{minZoom:z,maxZoom:q}=n.textSizeData;D.compositeTextSizes=[S["text-size"].possiblyEvaluate(new j(z),x),S["text-size"].possiblyEvaluate(new j(q),x)]}if("composite"===n.iconSizeData.kind){const{minZoom:z,maxZoom:q}=n.iconSizeData;D.compositeIconSizes=[S["icon-size"].possiblyEvaluate(new j(z),x),S["icon-size"].possiblyEvaluate(new j(q),x)]}D.layoutTextSize=S["text-size"].possiblyEvaluate(new j(A+1),x),D.layoutIconSize=S["icon-size"].possiblyEvaluate(new j(A+1),x),D.textMaxSize=S["text-size"].possiblyEvaluate(new j(18),x);const P="map"===T.get("text-rotation-alignment")&&"point"!==T.get("symbol-placement"),F=T.get("text-size");for(const z of n.features){const q=T.get("text-font").evaluate(z,{},x).join(","),W=F.evaluate(z,{},x),re=D.layoutTextSize.evaluate(z,{},x),oe=(D.layoutIconSize.evaluate(z,{},x),{horizontal:{},vertical:void 0}),ae=z.text;let ce,ue=[0,0];if(ae){const Se=ae.toString(),Ie=24*T.get("text-letter-spacing").evaluate(z,{},x),ye=24*T.get("text-line-height").evaluate(z,{},x),Te=p(Se)?Ie:0,ke=T.get("text-anchor").evaluate(z,{},x),Fe=T.get("text-variable-anchor");if(!Fe){const it=T.get("text-radial-offset").evaluate(z,{},x);ue=it?Ph(ke,[24*it,ls]):T.get("text-offset").evaluate(z,{},x).map(Ke=>24*Ke)}let qe=P?"center":T.get("text-justify").evaluate(z,{},x);const Be=T.get("symbol-placement"),He="point"===Be,pt="point"===Be?24*T.get("text-max-width").evaluate(z,{},x):0,ft=it=>{n.allowVerticalPlacement&&Xa(Se)&&(oe.vertical=uf(ae,e,o,u,q,pt,ye,ke,it,Te,ue,Yn.vertical,!0,Be,re,W))};if(!P&&Fe){const it="auto"===qe?Fe.map(ht=>Af(ht)):[qe];let Ke=!1;for(let ht=0;ht<it.length;ht++){const xt=it[ht];if(!oe.horizontal[xt])if(Ke)oe.horizontal[xt]=oe.horizontal[0];else{const et=uf(ae,e,o,u,q,pt,ye,"center",xt,Te,ue,Yn.horizontal,!1,Be,re,W);et&&(oe.horizontal[xt]=et,Ke=1===et.positionedLines.length)}}ft("left")}else{if("auto"===qe&&(qe=Af(ke)),He||T.get("text-writing-mode").indexOf("horizontal")>=0||!Xa(Se)){const it=uf(ae,e,o,u,q,pt,ye,ke,qe,Te,ue,Yn.horizontal,!1,Be,re,W);it&&(oe.horizontal[qe]=it)}ft("point"===Be?"left":qe)}}let Ae=!1;if(z.icon&&z.icon.name){const Se=l[z.icon.name];Se&&(ce=pf(u[z.icon.name],T.get("icon-offset").evaluate(z,{},x),T.get("icon-anchor").evaluate(z,{},x)),Ae=Se.sdf,void 0===n.sdfIcons?n.sdfIcons=Se.sdf:n.sdfIcons!==Se.sdf&&Ai("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Se.pixelRatio!==n.pixelRatio||0!==T.get("icon-rotate").constantOr(1))&&(n.iconsNeedLinear=!0))}const be=Ih(oe.horizontal)||oe.vertical;n.iconsInText||(n.iconsInText=!!be&&be.iconsInText),(be||ce)&&ng(n,z,oe,ce,l,D,re,0,ue,Ae,_,x,w)}f&&n.generateCollisionDebugBuffers(A,n.collisionBoxArray)}function Af(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ng(n,e,o,l,u,f,_,x,A,w,T,S,D){let P=f.textMaxSize.evaluate(e,{},S);void 0===P&&(P=_);const F=n.layers[0].layout,z=F.get("icon-offset").evaluate(e,{},S),q=Ih(o.horizontal)||o.vertical,W="globe"===D.name,re=_/24,oe=n.tilePixelRatio*P/24,ae=(Te=n.overscaling,n.zoom>18&&Te>2&&(Te>>=1),Math.max(rt/(512*Te),1)*F.get("symbol-spacing")),ce=F.get("text-padding")*n.tilePixelRatio,ue=F.get("icon-padding")*n.tilePixelRatio,Ae=st(F.get("text-max-angle")),be="map"===F.get("text-rotation-alignment")&&"point"!==F.get("symbol-placement"),Se="map"===F.get("icon-rotation-alignment")&&"point"!==F.get("symbol-placement"),Ie=F.get("symbol-placement"),ye=ae/2;var Te;const ke=F.get("icon-text-fit");let Fe;l&&"none"!==ke&&(n.allowVerticalPlacement&&o.vertical&&(Fe=ff(l,o.vertical,ke,F.get("icon-text-fit-padding"),z,re)),q&&(l=ff(l,q,ke,F.get("icon-text-fit-padding"),z,re)));const qe=(Be,He,pt)=>{if(He.x<0||He.x>=rt||He.y<0||He.y>=rt)return;let ft=null;if(W){const{x:it,y:Ke,z:ht}=D.projectTilePoint(He.x,He.y,pt);ft={anchor:new br(it,Ke,ht,0,void 0),up:D.upVector(pt,He.x,He.y)}}!function(it,Ke,ht,xt,et,Si,pi,Jt,Ct,St,Dt,zt,Zt,ei,vt,Mt,vn,Bt,xi,Qi,Pt,si,Wi,oi,wi){const Ni=it.addToLineVertexArray(Ke,xt);let Fi,Ui,on,Li,$o,us,yl,Wn=0,qf=0,Yf=0,Qf=0,Jh=-1,Kh=-1;const er={};let Wf=cc("");const Mr=ht?ht.anchor:Ke;let ga=0,$h=0;if(void 0===Ct._unevaluatedLayout.getValue("text-radial-offset")?[ga,$h]=Ct.layout.get("text-offset").evaluate(Pt,{},wi).map(Vt=>24*Vt):(ga=24*Ct.layout.get("text-radial-offset").evaluate(Pt,{},wi),$h=ls),it.allowVerticalPlacement&&et.vertical){const Vt=et.vertical;if(vt)us=Fh(Vt),Jt&&(yl=Fh(Jt));else{const An=Ct.layout.get("text-rotate").evaluate(Pt,{},wi)+90;on=$d(St,Mr,Ke,Dt,zt,Zt,Vt,ei,An,Mt),Jt&&(Li=$d(St,Mr,Ke,Dt,zt,Zt,Jt,Bt,An))}}if(Si){const Vt=Ct.layout.get("icon-rotate").evaluate(Pt,{},wi),An="none"!==Ct.layout.get("icon-text-fit"),li=tg(Si,Vt,Wi,An),tp=Jt?tg(Jt,Vt,Wi,An):void 0;Ui=$d(St,Mr,Ke,Dt,zt,Zt,Si,Bt,Vt),Wn=4*li.length;const Xf=it.iconSizeData;let xl=null;"source"===Xf.kind?(xl=[Yi*Ct.layout.get("icon-size").evaluate(Pt,{},wi)],xl[0]>wr&&Ai(`${it.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===Xf.kind&&(xl=[Yi*si.compositeIconSizes[0].evaluate(Pt,{},wi),Yi*si.compositeIconSizes[1].evaluate(Pt,{},wi)],(xl[0]>wr||xl[1]>wr)&&Ai(`${it.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),it.addSymbols(it.icon,li,xl,Qi,xi,Pt,!1,ht,Ke,Ni.lineStartIndex,Ni.lineLength,-1,oi,wi),Jh=it.icon.placedSymbolArray.length-1,tp&&(qf=4*tp.length,it.addSymbols(it.icon,tp,xl,Qi,xi,Pt,Yn.vertical,ht,Ke,Ni.lineStartIndex,Ni.lineLength,-1,oi,wi),Kh=it.icon.placedSymbolArray.length-1)}for(const Vt in et.horizontal){const An=et.horizontal[Vt];Fi||(Wf=cc(An.text),vt?$o=Fh(An):Fi=$d(St,Mr,Ke,Dt,zt,Zt,An,ei,Ct.layout.get("text-rotate").evaluate(Pt,{},wi),Mt));const li=1===An.positionedLines.length;if(Yf+=Kd(it,ht,Ke,An,pi,Ct,vt,Pt,Mt,Ni,et.vertical?Yn.horizontal:Yn.horizontalOnly,li?Object.keys(et.horizontal):[Vt],er,Jh,si,oi,wi),li)break}et.vertical&&(Qf+=Kd(it,ht,Ke,et.vertical,pi,Ct,vt,Pt,Mt,Ni,Yn.vertical,["vertical"],er,Kh,si,oi,wi));let _a=-1;const ep=(Vt,An)=>Vt?Math.max(Vt,An):An;_a=ep($o,_a),_a=ep(us,_a),_a=ep(yl,_a);const Lg=_a>-1?1:0;it.glyphOffsetArray.length>=Do.MAX_GLYPHS&&Ai("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Pt.sortKey&&it.addToSortKeyRanges(it.symbolInstances.length,Pt.sortKey),it.symbolInstances.emplaceBack(Mr.x,Mr.y,Mr.z,Ke.x,Ke.y,er.right>=0?er.right:-1,er.center>=0?er.center:-1,er.left>=0?er.left:-1,er.vertical>=0?er.vertical:-1,Jh,Kh,Wf,void 0!==Fi?Fi:it.collisionBoxArray.length,void 0!==Fi?Fi+1:it.collisionBoxArray.length,void 0!==on?on:it.collisionBoxArray.length,void 0!==on?on+1:it.collisionBoxArray.length,void 0!==Ui?Ui:it.collisionBoxArray.length,void 0!==Ui?Ui+1:it.collisionBoxArray.length,Li||it.collisionBoxArray.length,Li?Li+1:it.collisionBoxArray.length,Dt,Yf,Qf,Wn,qf,Lg,0,ga,$h,_a)}(n,He,ft,Be,o,l,u,Fe,n.layers[0],n.collisionBoxArray,e.index,e.sourceLayerIndex,n.index,ce,be,A,0,ue,Se,z,e,f,w,T,S)};if("line"===Ie)for(const Be of kh(e.geometry,0,0,rt,rt)){const He=i_(Be,ae,Ae,o.vertical||q,l,24,oe,n.overscaling,rt);for(const pt of He){const ft=q;ft&&bf(n,ft.text,ye,pt)||qe(Be,pt,S)}}else if("line-center"===Ie){for(const Be of e.geometry)if(Be.length>1){const He=Km(Be,Ae,o.vertical||q,l,24,oe);He&&qe(Be,He,S)}}else if("Polygon"===e.type)for(const Be of Vd(e.geometry,0)){const He=r_(Be,16);qe(Be[0],new br(He.x,He.y,0,0,void 0),S)}else if("LineString"===e.type)for(const Be of e.geometry)qe(Be,new br(Be[0].x,Be[0].y,0,0,void 0),S);else if("Point"===e.type)for(const Be of e.geometry)for(const He of Be)qe([He],new br(He.x,He.y,0,0,void 0),S)}const wr=32640;function Kd(n,e,o,l,u,f,_,x,A,w,T,S,D,P,F,z,q){const W=function(ae,ce,ue,Ae,be,Se,Ie,ye){const Te=[];if(0===ce.positionedLines.length)return Te;const ke=Ae.layout.get("text-rotate").evaluate(Se,{})*Math.PI/180,Fe=function(ft){const it=ft[0],Ke=ft[1],ht=it*Ke;return ht>0?[it,-Ke]:ht<0?[-it,Ke]:0===it?[Ke,it]:[Ke,-it]}(ue);let qe=Math.abs(ce.top-ce.bottom);for(const ft of ce.positionedLines)qe-=ft.lineOffset;const Be=ce.positionedLines.length,He=qe/Be;let pt=ce.top-ue[1];for(let ft=0;ft<Be;++ft){const it=ce.positionedLines[ft];pt=fl(ce,He,pt,ft);for(const Ke of it.positionedGlyphs){if(!Ke.rect)continue;const ht=Ke.rect||{};let xt=4,et=!0,Si=1,pi=0;if(Ke.imageName){const oi=Ie[Ke.imageName];if(!oi)continue;if(oi.sdf){Ai("SDF images are not supported in formatted text and will be ignored.");continue}et=!1,Si=oi.pixelRatio,xt=1/Si}const Jt=(be||ye)&&Ke.vertical,Ct=Ke.metrics.advance*Ke.scale/2,St=Ke.metrics,Dt=Ke.rect;if(null===Dt)continue;ye&&ce.verticalizable&&(pi=Ke.imageName?Ct-Ke.metrics.width*Ke.scale/2:0);const zt=be?[Ke.x+Ct,Ke.y]:[0,0];let Zt=[0,0],ei=[0,0],vt=!1;be||(Jt?(ei=[Ke.x+Ct+Fe[0],Ke.y+Fe[1]-pi],vt=!0):Zt=[Ke.x+Ct+ue[0],Ke.y+ue[1]-pi]);const Mt=Dt.w*Ke.scale/(Si*(Ke.localGlyph?2:1)),vn=Dt.h*Ke.scale/(Si*(Ke.localGlyph?2:1));let Bt,xi,Qi,Pt;if(Jt){const oi=Ke.y-pt,wi=new Ue(-Ct,Ct-oi),Ni=-Math.PI/2,Fi=new Ue(...ei);Bt=new Ue(-Ct+Zt[0],Zt[1]),Bt._rotateAround(Ni,wi)._add(Fi),Bt.x+=-oi+Ct,Bt.y-=(St.left-xt)*Ke.scale;const Ui=Ke.imageName?St.advance*Ke.scale:24*Ke.scale,on=String.fromCharCode(Ke.glyph);Zm(on)?Bt.x+=(1-xt)*Ke.scale:jm(on)?Bt.x+=Ui-St.height*Ke.scale+(-xt-1)*Ke.scale:Bt.x+=Ke.imageName||St.width+2*xt===Dt.w&&St.height+2*xt===Dt.h?(Ui-vn)/2:(Ui-(St.height+2*xt)*Ke.scale)/2,xi=new Ue(Bt.x,Bt.y-Mt),Qi=new Ue(Bt.x+vn,Bt.y),Pt=new Ue(Bt.x+vn,Bt.y-Mt)}else{const oi=(St.left-xt)*Ke.scale-Ct+Zt[0],wi=(-St.top-xt)*Ke.scale+Zt[1],Ni=oi+Mt,Fi=wi+vn;Bt=new Ue(oi,wi),xi=new Ue(Ni,wi),Qi=new Ue(oi,Fi),Pt=new Ue(Ni,Fi)}if(ke){let oi;oi=be?new Ue(0,0):vt?new Ue(Fe[0],Fe[1]):new Ue(ue[0],ue[1]),Bt._rotateAround(ke,oi),xi._rotateAround(ke,oi),Qi._rotateAround(ke,oi),Pt._rotateAround(ke,oi)}const si=new Ue(0,0),Wi=new Ue(0,0);Te.push({tl:Bt,tr:xi,bl:Qi,br:Pt,tex:ht,writingMode:ce.writingMode,glyphOffset:zt,sectionIndex:Ke.sectionIndex,isSDF:et,pixelOffsetTL:si,pixelOffsetBR:Wi,minFontScaleX:0,minFontScaleY:0})}}return Te}(0,l,A,f,_,x,u,n.allowVerticalPlacement),re=n.textSizeData;let oe=null;"source"===re.kind?(oe=[Yi*f.layout.get("text-size").evaluate(x,{},q)],oe[0]>wr&&Ai(`${n.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===re.kind&&(oe=[Yi*F.compositeTextSizes[0].evaluate(x,{},q),Yi*F.compositeTextSizes[1].evaluate(x,{},q)],(oe[0]>wr||oe[1]>wr)&&Ai(`${n.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),n.addSymbols(n.text,W,oe,A,_,x,T,e,o,w.lineStartIndex,w.lineLength,P,z,q);for(const ae of S)D[ae]=n.text.placedSymbolArray.length-1;return 4*W.length}function Ih(n){for(const e in n)return n[e];return null}function $d(n,e,o,l,u,f,_,x,A,w){let T=_.top,S=_.bottom,D=_.left,P=_.right;const F=_.collisionPadding;if(F&&(D-=F[0],T-=F[1],P+=F[2],S+=F[3]),A){const z=new Ue(D,T),q=new Ue(P,T),W=new Ue(D,S),re=new Ue(P,S),oe=st(A);let ae=new Ue(0,0);w&&(ae=new Ue(w[0],w[1])),z._rotateAround(oe,ae),q._rotateAround(oe,ae),W._rotateAround(oe,ae),re._rotateAround(oe,ae),D=Math.min(z.x,q.x,W.x,re.x),P=Math.max(z.x,q.x,W.x,re.x),T=Math.min(z.y,q.y,W.y,re.y),S=Math.max(z.y,q.y,W.y,re.y)}return n.emplaceBack(e.x,e.y,e.z,o.x,o.y,D,T,P,S,x,l,u,f),n.length-1}function Fh(n){n.collisionPadding&&(n.top-=n.collisionPadding[1],n.bottom+=n.collisionPadding[3]);const e=n.bottom-n.top;return e>0?Math.max(10,e):null}function bf(n,e,o,l){const u=n.compareText;if(e in u){const f=u[e];for(let _=f.length-1;_>=0;_--)if(l.dist(f[_])<o)return!0}else u[e]=[];return u[e].push(l),!1}const s_=Ye([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_merc_pos",components:2},{type:"Float32",name:"a_uv",components:2}]),{members:og}=s_,wf=Ye([{name:"a_pos_3",components:3,type:"Int16"}]);var eu=Ye([{name:"a_pos",type:"Int16",components:2}]);const ml=rt/Math.PI/2,Lh=2*Zn(1,0)*ml*Math.PI,cs=[64,32,16],xn=-ml,Ln=ml,rg=[new qn([xn,xn,xn],[Ln,Ln,Ln]),new qn([xn,xn,xn],[0,0,Ln]),new qn([0,xn,xn],[Ln,0,Ln]),new qn([xn,0,xn],[0,Ln,Ln]),new qn([0,0,xn],[Ln,Ln,Ln])];function da(n,e,o,l=!0){const u=yr([],n._camera.position,n.worldSize),f=[e,o,1,1];is(f,f,n.pixelMatrixInverse),nl(f,f,1/f[3]);const _=dn([],un([],f,u)),x=n.globeMatrix,A=[x[12],x[13],x[14]],w=un([],A,u),T=$s(w),S=dn([],w),D=n.worldSize/(2*Math.PI),P=Hn(S,_),F=Math.asin(D/T);if(F<Math.acos(P)){if(!l)return null;const Ie=[],ye=[];yr(Ie,_,T/P),dn(ye,un(ye,Ie,w)),dn(_,_r(_,w,yr(_,ye,Math.tan(F)*T)))}const z=[];new ol(u,_).closestPointOnSphere(A,D,z);const q=dn([],Lo(x,0)),W=dn([],Lo(x,1)),re=dn([],Lo(x,2)),oe=Hn(q,z),ae=Hn(W,z),ce=Hn(re,z),ue=Xi(Math.asin(-ae/D));let Ae=Xi(Math.atan2(oe,ce));Ae=n.center.lng+function(Ie,ye){const Te=(ye-Ie+180)%360-180;return Te<-180?Te+360:Te}(n.center.lng,Ae);const be=Wo(Ae),Se=_t(oa(ue),0,1);return new $a(be,Se)}class Cf{constructor(e,o,l){this.a=un([],e,l),this.b=un([],o,l),this.center=l;const u=dn([],this.a),f=dn([],this.b);this.angle=Math.acos(Hn(u,f))}}function tu(n,e){if(0===n.angle)return null;let o;return o=0===n.a[e]?1/n.angle*.5*Math.PI:1/n.angle*Math.atan(n.b[e]/n.a[e]/Math.sin(n.angle)-1/Math.tan(n.angle)),o<0||o>1?null:function(l,u,f,_){const x=Math.sin(f);return l*(Math.sin((1-_)*f)/x)+u*(Math.sin(_*f)/x)}(n.a[e],n.b[e],n.angle,_t(o,0,1))+n.center[e]}function So(n){if(n.z<=1)return rg[n.z+2*n.y+n.x];const[e,o]=Rh(n),l=[hn(e[0],e[1]),hn(e[0],o[1]),hn(o[0],e[1]),hn(o[0],o[1])],u=[Ln,Ln,Ln],f=[xn,xn,xn];for(const _ of l)u[0]=Math.min(u[0],_[0]),u[1]=Math.min(u[1],_[1]),u[2]=Math.min(u[2],_[2]),f[0]=Math.max(f[0],_[0]),f[1]=Math.max(f[1],_[1]),f[2]=Math.max(f[2],_[2]);return new qn(u,f)}function Rh(n){const e=1<<n.z,o=n.x/e,l=(n.x+1)/e,u=(n.y+1)/e;return[[Ti(n.y/e),nn(o)],[Ti(u),nn(l)]]}function Oh(n,e,o,l=ml){return o=st(o),[n*Math.sin(o)*l,-e*l,n*Math.cos(o)*l]}function hn(n,e,o){return Oh(Math.cos(st(n)),Math.sin(st(n)),e,o)}function Mf(n,e,o){const l=Math.pow(2,o.z),u=(n/rt+o.x)/l;return hn(Ti((e/rt+o.y)/l),nn(u))}function iu(n){return 16383/Math.max(...un([],n.max,n.min))}function ua(n){const e=Fn(new Float64Array(16)),o=iu(n);var l,u;return jn(e,e,[o,o,o]),To(e,e,((l=[])[0]=-(u=n.min)[0],l[1]=-u[1],l[2]=-u[2],l)),e}function sg(n){const e=Fn(new Float64Array(16)),o=1/iu(n);return To(e,e,n.min),jn(e,e,[o,o,o]),e}function Tf(n,e,o,l,u){const f=function(A){const w=rt/(2*Math.PI);return A/(2*Math.PI)/w}(o),_=[n,e,-o/(2*Math.PI)],x=Fn(new Float64Array(16));return To(x,x,_),jn(x,x,[f,f,f]),es(x,x,st(-u)),Md(x,x,st(-l)),x}function Ef(n){return rn(5,6,n)}function lg(n,e){const o=hn(e.lat,e.lng);return f=(l=sh([],function(P){const F=hn(P._center.lat,P._center.lng);let z=xc([],el(0,1,0),F);const q=Td([],-P.angle,F);z=Ii(z,z,q),Td(q,-P._pitch,z);const W=dn([],F);return yr(W,W,P.cameraToCenterDistance/P.pixelsPerMeter*Lh),Ii(W,W,q),_r([],F,W)}(n),o))[0],_=l[1],x=l[2],A=(u=o)[0],w=u[1],T=u[2],D=(S=Math.sqrt(f*f+_*_+x*x)*Math.sqrt(A*A+w*w+T*T))&&Hn(l,u)/S,Math.acos(Math.min(Math.max(D,-1),1));var l,u,f,_,x,A,w,T,S,D}const Sf=st(85),cg=Math.cos(Sf),dg=Math.sin(Sf);function ug(n,e){const o=n.fovAboveCenter,l=n.elevation?n.elevation.getMinElevationBelowMSL()*e:0,u=(n._camera.position[2]*n.worldSize-l)/Math.cos(n._pitch),f=Math.sin(o)*u/Math.sin(Math.max(Math.PI/2-n._pitch-o,.01)),_=Math.sin(n._pitch)*f+u;return Math.min(1.01*_,u*(1/n._horizonShift))}function ds(n,e){if(!e.isReprojectedInTileSpace)return{scale:1<<n.z,x:n.x,y:n.y,x2:n.x+1,y2:n.y+1,projection:e};const o=Math.pow(2,-n.z),l=n.x*o,u=(n.x+1)*o,f=n.y*o,_=(n.y+1)*o,x=nn(l),A=nn(u),w=Ti(f),T=Ti(_),S=e.project(x,w),D=e.project(A,w),P=e.project(A,T),F=e.project(x,T);let z=Math.min(S.x,D.x,P.x,F.x),q=Math.min(S.y,D.y,P.y,F.y),W=Math.max(S.x,D.x,P.x,F.x),re=Math.max(S.y,D.y,P.y,F.y);const oe=o/16;function ae(ue,Ae,be,Se,Ie,ye){const Te=(be+Ie)/2,ke=(Se+ye)/2,Fe=e.project(nn(Te),Ti(ke)),qe=Math.max(0,z-Fe.x,q-Fe.y,Fe.x-W,Fe.y-re);z=Math.min(z,Fe.x),W=Math.max(W,Fe.x),q=Math.min(q,Fe.y),re=Math.max(re,Fe.y),qe>oe&&(ae(ue,Fe,be,Se,Te,ke),ae(Fe,Ae,Te,ke,Ie,ye))}ae(S,D,l,f,u,f),ae(D,P,u,f,u,_),ae(P,F,u,_,l,_),ae(F,S,l,_,l,f),z-=oe,q-=oe,W+=oe,re+=oe;const ce=1/Math.max(W-z,re-q);return{scale:ce,x:z*ce,y:q*ce,x2:W*ce,y2:re*ce,projection:e}}const hg=Fn(new Float32Array(16));class Cr{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,o){return{x:0,y:0,z:0}}unproject(e,o){return new qt(0,0)}projectTilePoint(e,o,l){return{x:e,y:o,z:0}}locationPoint(e,o,l=!0){return e._coordinatePoint(e.locationCoordinate(o),l)}pixelsPerMeter(e,o){return Zn(1,e)*o}pixelSpaceConversion(e,o,l){return 1}farthestPixelDistance(e){return ug(e,e.pixelsPerMeter)}pointCoordinate(e,o,l,u){const f=e.horizonLineFromTop(!1),_=new Ue(o,Math.max(f,l));return e.rayIntersectionCoordinate(e.pointRayIntersection(_,u))}pointCoordinate3D(e,o,l){const u=new Ue(o,l);if(e.elevation)return e.elevation.pointCoordinate(u);{const f=this.pointCoordinate(e,u.x,u.y,0);return[f.x,f.y,f.z]}}isPointAboveHorizon(e,o){if(e.elevation)return!this.pointCoordinate3D(e,o.x,o.y);const l=e.horizonLineFromTop();return o.y<l}createInversionMatrix(e,o){return hg}createTileMatrix(e,o,l){let u,f,_;const x=l.canonical,A=Fn(new Float64Array(16));if(this.isReprojectedInTileSpace){const w=ds(x,this);u=1,f=w.x+l.wrap*w.scale,_=w.y,jn(A,A,[u/w.scale,u/w.scale,e.pixelsPerMeter/o])}else u=o/e.zoomScale(x.z),f=(x.x+Math.pow(2,x.z)*l.wrap)*u,_=x.y*u;return To(A,A,[f,_,0]),jn(A,A,[u/rt,u/rt,1]),A}upVector(e,o,l){return[0,0,1]}upVectorScale(e,o,l){return{metersToTile:1}}}class pg extends Cr{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[o,l]=this.parallels=e.parallels||[29.5,45.5],u=Math.sin(st(o));this.n=(u+Math.sin(st(l)))/2,this.c=1+u*(2*this.n-u),this.r0=Math.sqrt(this.c)/this.n}project(e,o){const{n:l,c:u,r0:f}=this,_=st(e-this.center[0]),x=st(o),A=Math.sqrt(u-2*l*Math.sin(x))/l;return{x:A*Math.sin(_*l),y:A*Math.cos(_*l)-f,z:0}}unproject(e,o){const{n:l,c:u,r0:f}=this,_=f+o;let x=Math.atan2(e,Math.abs(_))*Math.sign(_);_*l<0&&(x-=Math.PI*Math.sign(e)*Math.sign(_));const A=st(this.center[0])*l;x=Rn(x,-Math.PI-A,Math.PI-A);const w=Xi(x/l)+this.center[0],T=Math.asin(_t((u-(e*e+_*_)*l*l)/(2*l),-1,1)),S=_t(Xi(T),-85.051129,Co);return new qt(w,S)}}const ha=1.340264,nu=-.081106,ou=893e-6,Oc=.003796,zh=Math.sqrt(3)/2;class l_ extends Cr{project(e,o){o=o/180*Math.PI,e=e/180*Math.PI;const l=Math.asin(zh*Math.sin(o)),u=l*l,f=u*u*u;return{x:.5*(e*Math.cos(l)/(zh*(ha+3*nu*u+f*(7*ou+9*Oc*u)))/Math.PI+.5),y:1-.5*(l*(ha+nu*u+f*(ou+Oc*u))/Math.PI+1),z:0}}unproject(e,o){e=(2*e-.5)*Math.PI;let l=o=(2*(1-o)-1)*Math.PI,u=l*l,f=u*u*u;for(let T,S,D,P=0;P<12&&(S=l*(ha+nu*u+f*(ou+Oc*u))-o,D=ha+3*nu*u+f*(7*ou+9*Oc*u),T=S/D,l=_t(l-T,-Math.PI/3,Math.PI/3),u=l*l,f=u*u*u,!(Math.abs(T)<1e-12));++P);const _=zh*e*(ha+3*nu*u+f*(7*ou+9*Oc*u))/Math.cos(l),x=Math.asin(Math.sin(l)/zh),A=_t(180*_/Math.PI,-180,180),w=_t(180*x/Math.PI,-85.051129,Co);return new qt(A,w)}}class c_ extends Cr{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,o){return{x:.5+e/360,y:.5-o/360,z:0}}unproject(e,o){const l=360*(e-.5),u=_t(360*(.5-o),-85.051129,Co);return new qt(l,u)}}const zc=Math.PI/2;function Vh(n){return Math.tan((zc+n)/2)}class d_ extends Cr{constructor(e){super(e),this.center=e.center||[0,30];const[o,l]=this.parallels=e.parallels||[30,30],u=st(o),f=st(l),_=Math.cos(u);this.n=u===f?Math.sin(u):Math.log(_/Math.cos(f))/Math.log(Vh(f)/Vh(u)),this.f=_*Math.pow(Vh(u),this.n)/this.n}project(e,o){o=st(o),e=st(e-this.center[0]);const l=1e-6,{n:u,f}=this;f>0?o<-zc+l&&(o=-zc+l):o>zc-l&&(o=zc-l);const _=f/Math.pow(Vh(o),u),x=_*Math.sin(u*e),A=f-_*Math.cos(u*e);return{x:.5*(x/Math.PI+.5),y:1-.5*(A/Math.PI+.5),z:0}}unproject(e,o){e=(2*e-.5)*Math.PI,o=(2*(1-o)-.5)*Math.PI;const{n:l,f:u}=this,f=u-o,_=Math.sign(f),x=Math.sign(l)*Math.sqrt(e*e+f*f);let A=Math.atan2(e,Math.abs(f))*_;f*l<0&&(A-=Math.PI*Math.sign(e)*_);const w=_t(Xi(A/l)+this.center[0],-180,180),T=_t(Xi(2*Math.atan(Math.pow(u/x,1/l))-zc),-85.051129,Co);return new qt(w,T)}}class ru extends Cr{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,o){return{x:Wo(e),y:oa(o),z:0}}unproject(e,o){const l=nn(e),u=Ti(o);return new qt(l,u)}}const Df=st(Co);class Nh extends Cr{project(e,o){const l=(o=st(o))*o,u=l*l;return{x:.5*((e=st(e))*(.8707-.131979*l+u*(u*(.003971*l-.001529*u)-.013791))/Math.PI+.5),y:1-.5*(o*(1.007226+l*(.015085+u*(.028874*l-.044475-.005916*u)))/Math.PI+1),z:0}}unproject(e,o){e=(2*e-.5)*Math.PI;let l=o=(2*(1-o)-1)*Math.PI,u=25,f=0,_=l*l;do{_=l*l;const w=_*_;f=(l*(1.007226+_*(.015085+w*(.028874*_-.044475-.005916*w)))-o)/(1.007226+_*(.045255+w*(.259866*_-.311325-.005916*11*w))),l=_t(l-f,-Df,Df)}while(Math.abs(f)>1e-6&&--u>0);_=l*l;const x=_t(Xi(e/(.8707+_*(_*(_*_*_*(.003971-.001529*_)-.013791)-.131979))),-180,180),A=Xi(l);return new qt(x,A)}}const Uh=st(Co);class fg extends Cr{project(e,o){o=st(o),e=st(e);const l=Math.cos(o),u=2/Math.PI,f=Math.acos(l*Math.cos(e/2)),_=Math.sin(f)/f,x=.5*(e*u+2*l*Math.sin(e/2)/_)||0,A=.5*(o+Math.sin(o)/_)||0;return{x:.5*(x/Math.PI+.5),y:1-.5*(A/Math.PI+1),z:0}}unproject(e,o){let l=e=(2*e-.5)*Math.PI,u=o=(2*(1-o)-1)*Math.PI,f=25;const _=1e-6;let x=0,A=0;do{const w=Math.cos(u),T=Math.sin(u),S=2*T*w,D=T*T,P=w*w,F=Math.cos(l/2),z=Math.sin(l/2),q=2*F*z,W=z*z,re=1-P*F*F,oe=re?1/re:0,ae=re?Math.acos(w*F)*Math.sqrt(1/re):0,ce=.5*(2*ae*w*z+2*l/Math.PI)-e,ue=.5*(ae*T+u)-o,Ae=.5*oe*(P*W+ae*w*F*D)+1/Math.PI,be=oe*(q*S/4-ae*T*z),Se=.125*oe*(S*z-ae*T*P*q),Ie=.5*oe*(D*F+ae*W*w)+.5,ye=be*Se-Ie*Ae;x=(ue*be-ce*Ie)/ye,A=(ce*Se-ue*Ae)/ye,l=_t(l-x,-Math.PI,Math.PI),u=_t(u-A,-Uh,Uh)}while((Math.abs(x)>_||Math.abs(A)>_)&&--f>0);return new qt(Xi(l),Xi(u))}}class Bf extends Cr{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(st(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,o){const{scale:l,cosPhi:u}=this;return{x:st(e)*u*l+.5,y:-Math.sin(st(o))/u*l+.5,z:0}}unproject(e,o){const{scale:l,cosPhi:u}=this,f=-(o-.5)/l,_=_t(Xi((e-.5)/l)/u,-180,180),x=Math.asin(_t(f*u,-1,1)),A=_t(Xi(x),-85.051129,Co);return new qt(_,A)}}class Vc extends ru{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(e,o,l){const u=Math.pow(2,l.z),f=(e/rt+l.x)/u,_=hn(Ti((o/rt+l.y)/u),nn(f));return Ii(_,_,ua(So(l))),{x:_[0],y:_[1],z:_[2]}}locationPoint(e,o){const l=hn(o.lat,o.lng),u=dn([],l),f=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(o),e._centerAltitude):e._centerAltitude;tl(l,l,u,Zn(1,0)*rt*f);const _=Fn(new Float64Array(16));return Mo(_,e.pixelMatrix,e.globeMatrix),Ii(l,l,_),new Ue(l[0],l[1])}pixelsPerMeter(e,o){return Zn(1,0)*o}pixelSpaceConversion(e,o,l){const u=Ot(Zn(1,45)*o,Zn(1,e)*o,l);return this.pixelsPerMeter(e,o)/u}createTileMatrix(e,o,l){const u=sg(So(l.canonical));return Mo(new Float64Array(16),e.globeMatrix,u)}createInversionMatrix(e,o){const{center:l}=e,u=Fn(new Float64Array(16));return Mo(u,u,ua(So(o))),Md(u,u,st(l.lng)),es(u,u,st(l.lat)),jn(u,u,[e._projectionScaler,e._projectionScaler,1]),Float32Array.from(u)}pointCoordinate(e,o,l,u){return da(e,o,l,!0)||new $a(0,0)}pointCoordinate3D(e,o,l){const u=this.pointCoordinate(e,o,l,0);return[u.x,u.y,u.z]}isPointAboveHorizon(e,o){return!da(e,o.x,o.y,!1)}farthestPixelDistance(e){const o=function(u,f){const _=u.cameraToCenterDistance,x=u._centerAltitude*f,A=u._camera,w=u._camera.forward(),T=_r([],yr([],w,-_),[0,0,x]),S=u.worldSize/(2*Math.PI),D=[0,0,-S],P=u.width/u.height,F=Math.tan(u.fovAboveCenter),z=yr([],A.up(),F),q=yr([],A.right(),F*P),W=dn([],_r([],_r([],w,z),q)),re=[];let oe;if(new ol(T,W).closestPointOnSphere(D,S,re)){const ae=_r([],re,D),ce=un([],ae,T);oe=Math.cos(u.fovAboveCenter)*$s(ce)}else{const ae=un([],T,D),ce=un([],D,T);dn(ce,ce);const ue=$s(ae)-S;oe=Math.sqrt(ue*(ue+2*S));const Ae=Math.acos(oe/(S+ue))-Math.acos(Hn(w,ce));oe*=Math.cos(Ae)}return 1.01*oe}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),l=Ef(e.zoom);if(l>0){const u=ug(e,Zn(1,e.center.lat)*e.worldSize),f=e.worldSize/(2*Math.PI),_=Math.max(e.width,e.height)/e.worldSize*Math.PI;return Ot(o,u+f*(1-Math.cos(_)),Math.pow(l,10))}return o}upVector(e,o,l){const u=1<<e.z,f=(o/rt+e.x)/u;return hn(Ti((l/rt+e.y)/u),nn(f),1)}upVectorScale(e){return{metersToTile:Lh*iu(So(e))}}}function kf(n){const e=n.parallels,o=!!e&&Math.abs(e[0]+e[1])<.01;switch(n.name){case"mercator":return new ru(n);case"equirectangular":return new c_(n);case"naturalEarth":return new Nh(n);case"equalEarth":return new l_(n);case"winkelTripel":return new fg(n);case"albers":return o?new Bf(n):new pg(n);case"lambertConformalConic":return o?new Bf(n):new d_(n);case"globe":return new Vc(n)}throw new Error(`Invalid projection name: ${n.name}`)}const Pf=ss.VectorTileFeature.types,mg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function au(n,e,o,l,u,f,_,x,A,w,T,S,D){const P=x?Math.min(wr,Math.round(x[0])):0,F=x?Math.min(wr,Math.round(x[1])):0;n.emplaceBack(e,o,Math.round(32*l),Math.round(32*u),f,_,(P<<1)+(A?1:0),F,16*w,16*T,256*S,256*D)}function Nc(n,e,o,l,u,f,_){n.emplaceBack(e,o,l,u,f,_)}function Uc(n,e,o,l,u){n.emplaceBack(e,o,l,u),n.emplaceBack(e,o,l,u),n.emplaceBack(e,o,l,u),n.emplaceBack(e,o,l,u)}function gg(n){for(const e of n.sections)if(C(e.text))return!0;return!1}class Gh{constructor(e){this.layoutVertexArray=new yo,this.indexArray=new _i,this.programConfigurations=e,this.segments=new yi,this.dynamicLayoutVertexArray=new Kt,this.opacityVertexArray=new ri,this.placedSymbolArray=new qu,this.globeExtVertexArray=new Yo}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,o,l,u){this.isEmpty()||(l&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Hd.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Vm.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,mg,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,zm.members,!0)),this.opacityVertexBuffer.itemSize=1),(l||u)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Je(Gh,"SymbolBuffers");class Zh{constructor(e,o,l){this.layoutVertexArray=new e,this.layoutAttributes=o,this.indexArray=new l,this.segments=new yi,this.collisionVertexArray=new $i,this.collisionVertexArrayExt=new $t}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Nm.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Um.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Je(Zh,"CollisionBuffers");class Do{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(_=>_.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Fn([]),this.placementViewportMatrix=Fn([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=vh(this.zoom,o["text-size"]),this.iconSizeData=vh(this.zoom,o["icon-size"]);const l=this.layers[0].layout,u=l.get("symbol-sort-key"),f=l.get("symbol-z-order");this.canOverlap=l.get("text-allow-overlap")||l.get("icon-allow-overlap")||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==f&&void 0!==u.constantOr(1),this.sortFeaturesByY=("viewport-y"===f||"auto"===f&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=l.get("text-writing-mode").map(_=>Yn[_]),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new Gh(new Ka(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Gh(new Ka(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new Qu,this.lineVertexArray=new ea,this.symbolInstances=new Yu}calculateGlyphDependencies(e,o,l,u,f){for(let _=0;_<e.length;_++)if(o[e.charCodeAt(_)]=!0,u&&f){const x=qd[e.charAt(_)];x&&(o[x.charCodeAt(0)]=!0)}}populate(e,o,l,u){const f=this.layers[0],_=f.layout,x="globe"===this.projection.name,A=_.get("text-font"),w=_.get("text-field"),T=_.get("icon-image"),S=("constant"!==w.value.kind||w.value.value instanceof Ki&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&("constant"!==A.value.kind||A.value.value.length>0),D="constant"!==T.value.kind||!!T.value.value||Object.keys(T.parameters).length>0,P=_.get("symbol-sort-key");if(this.features=[],!S&&!D)return;const F=o.iconDependencies,z=o.glyphDependencies,q=o.availableImages,W=new j(this.zoom);for(const{feature:re,id:oe,index:ae,sourceLayerIndex:ce}of e){const ue=f._featureFilter.needGeometry,Ae=ra(re,ue);if(!f._featureFilter.filter(W,Ae,l))continue;if(ue||(Ae.geometry=ao(re,l,u)),x&&1!==re.type&&l.z<=5){const ye=Ae.geometry,Te=1<<l.z,ke=l.x,Fe=l.y,qe=.98078528056;for(let Be=0;Be<ye.length;Be++)ye[Be]=wp(ye[Be],He=>He,(He,pt)=>Hn(hn(Ti((He.y/rt+Fe)/Te),nn((He.x/rt+ke)/Te),1),hn(Ti((pt.y/rt+Fe)/Te),nn((pt.x/rt+ke)/Te),1))<qe)}let be,Se;if(S){const ye=f.getValueAndResolveTokens("text-field",Ae,l,q),Te=Ki.factory(ye);gg(Te)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===K()||this.hasRTLText&&Q.isParsed())&&(be=Gm(Te,f,Ae))}if(D){const ye=f.getValueAndResolveTokens("icon-image",Ae,l,q);Se=ye instanceof Nn?ye:Nn.fromString(ye)}if(!be&&!Se)continue;const Ie=this.sortFeaturesByKey?P.evaluate(Ae,{},l):void 0;if(this.features.push({id:oe,text:be,icon:Se,index:ae,sourceLayerIndex:ce,geometry:Ae.geometry,properties:re.properties,type:Pf[re.type],sortKey:Ie}),Se&&(F[Se.name]=!0),be){const ye=A.evaluate(Ae,{},l).join(","),Te="map"===_.get("text-rotation-alignment")&&"point"!==_.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Yn.vertical)>=0;for(const ke of be.sections)if(ke.image)F[ke.image.name]=!0;else{const Fe=Xa(be.toString()),qe=ke.fontStack||ye,Be=z[qe]=z[qe]||{};this.calculateGlyphDependencies(ke.text,Be,Te,this.allowVerticalPlacement,Fe)}}}"line"===_.get("symbol-placement")&&(this.features=function(re){const oe={},ae={},ce=[];let ue=0;function Ae(ye){ce.push(re[ye]),ue++}function be(ye,Te,ke){const Fe=ae[ye];return delete ae[ye],ae[Te]=Fe,ce[Fe].geometry[0].pop(),ce[Fe].geometry[0]=ce[Fe].geometry[0].concat(ke[0]),Fe}function Se(ye,Te,ke){const Fe=oe[Te];return delete oe[Te],oe[ye]=Fe,ce[Fe].geometry[0].shift(),ce[Fe].geometry[0]=ke[0].concat(ce[Fe].geometry[0]),Fe}function Ie(ye,Te,ke){const Fe=ke?Te[0][Te[0].length-1]:Te[0][0];return`${ye}:${Fe.x}:${Fe.y}`}for(let ye=0;ye<re.length;ye++){const Te=re[ye],ke=Te.geometry,Fe=Te.text?Te.text.toString():null;if(!Fe){Ae(ye);continue}const qe=Ie(Fe,ke),Be=Ie(Fe,ke,!0);if(qe in ae&&Be in oe&&ae[qe]!==oe[Be]){const He=Se(qe,Be,ke),pt=be(qe,Be,ce[He].geometry);delete oe[qe],delete ae[Be],ae[Ie(Fe,ce[pt].geometry,!0)]=pt,ce[He].geometry=null}else qe in ae?be(qe,Be,ke):Be in oe?Se(qe,Be,ke):(Ae(ye),oe[qe]=ue-1,ae[Be]=ue-1)}return ce.filter(ye=>ye.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((re,oe)=>re.sortKey-oe.sortKey)}update(e,o,l,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,o,this.layers,l,u),this.icon.programConfigurations.updatePaintArrays(e,o,this.layers,l,u))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=kf(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,o){const l=this.lineVertexArray.length,u=e.segment;if(void 0!==u){let f=e.dist(o[u+1]),_=e.dist(o[u]);const x={};for(let A=u+1;A<o.length;A++)x[A]={x:o[A].x,y:o[A].y,tileUnitDistanceFromAnchor:f},A<o.length-1&&(f+=o[A+1].dist(o[A]));for(let A=u||0;A>=0;A--)x[A]={x:o[A].x,y:o[A].y,tileUnitDistanceFromAnchor:_},A>0&&(_+=o[A-1].dist(o[A]));for(let A=0;A<o.length;A++){const w=x[A];this.lineVertexArray.emplaceBack(w.x,w.y,w.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(e,o,l,u,f,_,x,A,w,T,S,D,P,F){const z=e.indexArray,q=e.layoutVertexArray,W=e.globeExtVertexArray,re=e.segments.prepareSegment(4*o.length,q,z,this.canOverlap?_.sortKey:void 0),oe=this.glyphOffsetArray.length,ae=re.vertexLength,ce=this.allowVerticalPlacement&&x===Yn.vertical?Math.PI/2:0,ue=_.text&&_.text.sections;for(let be=0;be<o.length;be++){const{tl:Se,tr:Ie,bl:ye,br:Te,tex:ke,pixelOffsetTL:Fe,pixelOffsetBR:qe,minFontScaleX:Be,minFontScaleY:He,glyphOffset:pt,isSDF:ft,sectionIndex:it}=o[be],Ke=re.vertexLength,ht=pt[1];if(au(q,w.x,w.y,Se.x,ht+Se.y,ke.x,ke.y,l,ft,Fe.x,Fe.y,Be,He),au(q,w.x,w.y,Ie.x,ht+Ie.y,ke.x+ke.w,ke.y,l,ft,qe.x,Fe.y,Be,He),au(q,w.x,w.y,ye.x,ht+ye.y,ke.x,ke.y+ke.h,l,ft,Fe.x,qe.y,Be,He),au(q,w.x,w.y,Te.x,ht+Te.y,ke.x+ke.w,ke.y+ke.h,l,ft,qe.x,qe.y,Be,He),A){const xt=A.anchor,et=A.up;Nc(W,xt.x,xt.y,xt.z,et[0],et[1],et[2]),Nc(W,xt.x,xt.y,xt.z,et[0],et[1],et[2]),Nc(W,xt.x,xt.y,xt.z,et[0],et[1],et[2]),Nc(W,xt.x,xt.y,xt.z,et[0],et[1],et[2]),Uc(e.dynamicLayoutVertexArray,xt.x,xt.y,xt.z,ce)}else Uc(e.dynamicLayoutVertexArray,w.x,w.y,w.z,ce);z.emplaceBack(Ke,Ke+1,Ke+2),z.emplaceBack(Ke+1,Ke+2,Ke+3),re.vertexLength+=4,re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(pt[0]),be!==o.length-1&&it===o[be+1].sectionIndex||e.programConfigurations.populatePaintArrays(q.length,_,_.index,{},P,F,ue&&ue[it])}const Ae=A?A.anchor:w;e.placedSymbolArray.emplaceBack(Ae.x,Ae.y,Ae.z,w.x,w.y,oe,this.glyphOffsetArray.length-oe,ae,T,S,w.segment,l?l[0]:0,l?l[1]:0,u[0],u[1],x,0,!1,0,D,0)}_commitLayoutVertex(e,o,l,u,f,_,x){e.emplaceBack(o,l,u,f,_,Math.round(x.x),Math.round(x.y))}_addCollisionDebugVertices(e,o,l,u,f,_,x){const A=l.segments.prepareSegment(4,l.layoutVertexArray,l.indexArray),w=A.vertexLength,T=x.tileAnchorX,S=x.tileAnchorY;for(let P=0;P<4;P++)l.collisionVertexArray.emplaceBack(0,0,0,0);l.collisionVertexArrayExt.emplaceBack(o,-e.padding,-e.padding),l.collisionVertexArrayExt.emplaceBack(o,e.padding,-e.padding),l.collisionVertexArrayExt.emplaceBack(o,e.padding,e.padding),l.collisionVertexArrayExt.emplaceBack(o,-e.padding,e.padding),this._commitLayoutVertex(l.layoutVertexArray,u,f,_,T,S,new Ue(e.x1,e.y1)),this._commitLayoutVertex(l.layoutVertexArray,u,f,_,T,S,new Ue(e.x2,e.y1)),this._commitLayoutVertex(l.layoutVertexArray,u,f,_,T,S,new Ue(e.x2,e.y2)),this._commitLayoutVertex(l.layoutVertexArray,u,f,_,T,S,new Ue(e.x1,e.y2)),A.vertexLength+=4;const D=l.indexArray;D.emplaceBack(w,w+1),D.emplaceBack(w+1,w+2),D.emplaceBack(w+2,w+3),D.emplaceBack(w+3,w),A.primitiveLength+=4}_addTextDebugCollisionBoxes(e,o,l,u,f,_){for(let x=u;x<f;x++){const A=l.get(x),w=this.getSymbolInstanceTextSize(e,_,o,x);this._addCollisionDebugVertices(A,w,this.textCollisionBox,A.projectedAnchorX,A.projectedAnchorY,A.projectedAnchorZ,_)}}_addIconDebugCollisionBoxes(e,o,l,u,f,_){for(let x=u;x<f;x++){const A=l.get(x),w=this.getSymbolInstanceIconSize(e,o,x);this._addCollisionDebugVertices(A,w,this.iconCollisionBox,A.projectedAnchorX,A.projectedAnchorY,A.projectedAnchorZ,_)}}generateCollisionDebugBuffers(e,o){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Zh(Gt,ef.members,Pn),this.iconCollisionBox=new Zh(Gt,ef.members,Pn);const l=xr(this.iconSizeData,e),u=xr(this.textSizeData,e);for(let f=0;f<this.symbolInstances.length;f++){const _=this.symbolInstances.get(f);this._addTextDebugCollisionBoxes(u,e,o,_.textBoxStartIndex,_.textBoxEndIndex,_),this._addTextDebugCollisionBoxes(u,e,o,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_),this._addIconDebugCollisionBoxes(l,e,o,_.iconBoxStartIndex,_.iconBoxEndIndex,_),this._addIconDebugCollisionBoxes(l,e,o,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_)}}getSymbolInstanceTextSize(e,o,l,u){const f=this.text.placedSymbolArray.get(o.rightJustifiedTextSymbolIndex>=0?o.rightJustifiedTextSymbolIndex:o.centerJustifiedTextSymbolIndex>=0?o.centerJustifiedTextSymbolIndex:o.leftJustifiedTextSymbolIndex>=0?o.leftJustifiedTextSymbolIndex:o.verticalPlacedTextSymbolIndex>=0?o.verticalPlacedTextSymbolIndex:u),_=hl(this.textSizeData,e,f)/24;return this.tilePixelRatio*_}getSymbolInstanceIconSize(e,o,l){const u=this.icon.placedSymbolArray.get(l),f=hl(this.iconSizeData,e,u);return this.tilePixelRatio*f}_commitDebugCollisionVertexUpdate(e,o,l){e.emplaceBack(o,-l,-l),e.emplaceBack(o,l,-l),e.emplaceBack(o,l,l),e.emplaceBack(o,-l,l)}_updateTextDebugCollisionBoxes(e,o,l,u,f,_){for(let x=u;x<f;x++){const A=l.get(x),w=this.getSymbolInstanceTextSize(e,_,o,x);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,w,A.padding)}}_updateIconDebugCollisionBoxes(e,o,l,u,f){for(let _=u;_<f;_++){const x=l.get(_),A=this.getSymbolInstanceIconSize(e,o,_);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,A,x.padding)}}updateCollisionDebugBuffers(e,o){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const l=xr(this.iconSizeData,e),u=xr(this.textSizeData,e);for(let f=0;f<this.symbolInstances.length;f++){const _=this.symbolInstances.get(f);this._updateTextDebugCollisionBoxes(u,e,o,_.textBoxStartIndex,_.textBoxEndIndex,_),this._updateTextDebugCollisionBoxes(u,e,o,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_),this._updateIconDebugCollisionBoxes(l,e,o,_.iconBoxStartIndex,_.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(l,e,o,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,o,l,u,f,_,x,A,w){const T={};for(let S=o;S<l;S++){const D=e.get(S);T.textBox={x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2,padding:D.padding,projectedAnchorX:D.projectedAnchorX,projectedAnchorY:D.projectedAnchorY,projectedAnchorZ:D.projectedAnchorZ,tileAnchorX:D.tileAnchorX,tileAnchorY:D.tileAnchorY},T.textFeatureIndex=D.featureIndex;break}for(let S=u;S<f;S++){const D=e.get(S);T.verticalTextBox={x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2,padding:D.padding,projectedAnchorX:D.projectedAnchorX,projectedAnchorY:D.projectedAnchorY,projectedAnchorZ:D.projectedAnchorZ,tileAnchorX:D.tileAnchorX,tileAnchorY:D.tileAnchorY},T.verticalTextFeatureIndex=D.featureIndex;break}for(let S=_;S<x;S++){const D=e.get(S);T.iconBox={x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2,padding:D.padding,projectedAnchorX:D.projectedAnchorX,projectedAnchorY:D.projectedAnchorY,projectedAnchorZ:D.projectedAnchorZ,tileAnchorX:D.tileAnchorX,tileAnchorY:D.tileAnchorY},T.iconFeatureIndex=D.featureIndex;break}for(let S=A;S<w;S++){const D=e.get(S);T.verticalIconBox={x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2,padding:D.padding,projectedAnchorX:D.projectedAnchorX,projectedAnchorY:D.projectedAnchorY,projectedAnchorZ:D.projectedAnchorZ,tileAnchorX:D.tileAnchorX,tileAnchorY:D.tileAnchorY},T.verticalIconFeatureIndex=D.featureIndex;break}return T}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const l=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,o){const l=e.placedSymbolArray.get(o),u=l.vertexStartIndex+4*l.numGlyphs;for(let f=l.vertexStartIndex;f<u;f+=4)e.indexArray.emplaceBack(f,f+1,f+2),e.indexArray.emplaceBack(f+1,f+2,f+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const o=Math.sin(e),l=Math.cos(e),u=[],f=[],_=[];for(let x=0;x<this.symbolInstances.length;++x){_.push(x);const A=this.symbolInstances.get(x);u.push(0|Math.round(o*A.tileAnchorX+l*A.tileAnchorY)),f.push(A.featureIndex)}return _.sort((x,A)=>u[x]-u[A]||f[A]-f[x]),_}addToSortKeyRanges(e,o){const l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===o?l.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const l=this.symbolInstances.get(o);this.featureSortOrder.push(l.featureIndex),[l.rightJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.leftJustifiedTextSymbolIndex].forEach((u,f,_)=>{u>=0&&_.indexOf(u)===f&&this.addIndicesForPlacedSymbol(this.text,u)}),l.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,l.verticalPlacedTextSymbolIndex),l.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.placedIconSymbolIndex),l.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Je(Do,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Do.MAX_GLYPHS=65535,Do.addDynamicAttributes=Uc;const _g=new ze({"symbol-placement":new ie(fe.layout_symbol["symbol-placement"]),"symbol-spacing":new ie(fe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ie(fe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ge(fe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ie(fe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ie(fe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ie(fe.layout_symbol["icon-ignore-placement"]),"icon-optional":new ie(fe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ie(fe.layout_symbol["icon-rotation-alignment"]),"icon-size":new ge(fe.layout_symbol["icon-size"]),"icon-text-fit":new ie(fe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ie(fe.layout_symbol["icon-text-fit-padding"]),"icon-image":new ge(fe.layout_symbol["icon-image"]),"icon-rotate":new ge(fe.layout_symbol["icon-rotate"]),"icon-padding":new ie(fe.layout_symbol["icon-padding"]),"icon-keep-upright":new ie(fe.layout_symbol["icon-keep-upright"]),"icon-offset":new ge(fe.layout_symbol["icon-offset"]),"icon-anchor":new ge(fe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ie(fe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ie(fe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ie(fe.layout_symbol["text-rotation-alignment"]),"text-field":new ge(fe.layout_symbol["text-field"]),"text-font":new ge(fe.layout_symbol["text-font"]),"text-size":new ge(fe.layout_symbol["text-size"]),"text-max-width":new ge(fe.layout_symbol["text-max-width"]),"text-line-height":new ge(fe.layout_symbol["text-line-height"]),"text-letter-spacing":new ge(fe.layout_symbol["text-letter-spacing"]),"text-justify":new ge(fe.layout_symbol["text-justify"]),"text-radial-offset":new ge(fe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ie(fe.layout_symbol["text-variable-anchor"]),"text-anchor":new ge(fe.layout_symbol["text-anchor"]),"text-max-angle":new ie(fe.layout_symbol["text-max-angle"]),"text-writing-mode":new ie(fe.layout_symbol["text-writing-mode"]),"text-rotate":new ge(fe.layout_symbol["text-rotate"]),"text-padding":new ie(fe.layout_symbol["text-padding"]),"text-keep-upright":new ie(fe.layout_symbol["text-keep-upright"]),"text-transform":new ge(fe.layout_symbol["text-transform"]),"text-offset":new ge(fe.layout_symbol["text-offset"]),"text-allow-overlap":new ie(fe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ie(fe.layout_symbol["text-ignore-placement"]),"text-optional":new ie(fe.layout_symbol["text-optional"])});var jh={paint:new ze({"icon-opacity":new ge(fe.paint_symbol["icon-opacity"]),"icon-color":new ge(fe.paint_symbol["icon-color"]),"icon-halo-color":new ge(fe.paint_symbol["icon-halo-color"]),"icon-halo-width":new ge(fe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ge(fe.paint_symbol["icon-halo-blur"]),"icon-translate":new ie(fe.paint_symbol["icon-translate"]),"icon-translate-anchor":new ie(fe.paint_symbol["icon-translate-anchor"]),"text-opacity":new ge(fe.paint_symbol["text-opacity"]),"text-color":new ge(fe.paint_symbol["text-color"],{runtimeType:eo,getOverride:n=>n.textColor,hasOverride:n=>!!n.textColor}),"text-halo-color":new ge(fe.paint_symbol["text-halo-color"]),"text-halo-width":new ge(fe.paint_symbol["text-halo-width"]),"text-halo-blur":new ge(fe.paint_symbol["text-halo-blur"]),"text-translate":new ie(fe.paint_symbol["text-translate"]),"text-translate-anchor":new ie(fe.paint_symbol["text-translate-anchor"])}),layout:_g};class If{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:ws,this.defaultValue=e}evaluate(e){if(e.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(e.formattedSection))return o.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Je(If,"FormatSectionOverride",{omit:["defaultValue"]});class su extends wo{constructor(e){super(e,jh)}recalculate(e,o){super.recalculate(e,o),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const l=this.layout.get("text-writing-mode");if(l){const u=[];for(const f of l)u.indexOf(f)<0&&u.push(f);this.layout._values["text-writing-mode"]=u}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,o,l,u){const f=this.layout.get(e).evaluate(o,{},l,u),_=this._unevaluatedLayout._values[e];return _.isDataDriven()||Va(_.value)||!f?f:(x=o.properties,f.replace(/{([^{}]+)}/g,(w,T)=>T in x?String(x[T]):""));var x}createBucket(e){return new Do(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of jh.paint.overridableProperties){if(!su.hasPaintOverride(this.layout,e))continue;const o=this.paint.get(e),l=new If(o),u=new Yl(l,o.property.specification);let f=null;f="constant"===o.value.kind||"source"===o.value.kind?new Ql("source",u):new Na("composite",u,o.value.zoomStops,o.value._interpolationType),this.paint._values[e]=new ve(o.property,f,o.parameters)}}_handleOverridablePaintPropertyUpdate(e,o,l){return!(!this.layout||o.isDataDriven()||l.isDataDriven())&&su.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,o){const l=e.get("text-field"),u=jh.paint.properties[o];let f=!1;const _=x=>{for(const A of x)if(u.overrides&&u.overrides.hasOverride(A))return void(f=!0)};if("constant"===l.value.kind&&l.value.value instanceof Ki)_(l.value.value.sections);else if("source"===l.value.kind){const x=w=>{f||(w instanceof Ts&&mi(w.value)===ba?_(w.value.sections):w instanceof ar?_(w.sections):w.eachChild(x))},A=l.value;A._styleExpression&&x(A._styleExpression.expression)}return f}getProgramConfiguration(e){return new ia(this,e)}}var yg={paint:new ze({"background-color":new ie(fe.paint_background["background-color"]),"background-pattern":new Ze(fe.paint_background["background-pattern"]),"background-opacity":new ie(fe.paint_background["background-opacity"])})},xg={paint:new ze({"raster-opacity":new ie(fe.paint_raster["raster-opacity"]),"raster-hue-rotate":new ie(fe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ie(fe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ie(fe.paint_raster["raster-brightness-max"]),"raster-saturation":new ie(fe.paint_raster["raster-saturation"]),"raster-contrast":new ie(fe.paint_raster["raster-contrast"]),"raster-resampling":new ie(fe.paint_raster["raster-resampling"]),"raster-fade-duration":new ie(fe.paint_raster["raster-fade-duration"])})};class vg extends wo{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var Ag={paint:new ze({"sky-type":new ie(fe.paint_sky["sky-type"]),"sky-atmosphere-sun":new ie(fe.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new ie(fe.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new ie(fe.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new ie(fe.paint_sky["sky-gradient-radius"]),"sky-gradient":new Me(fe.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new ie(fe.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new ie(fe.paint_sky["sky-atmosphere-color"]),"sky-opacity":new ie(fe.paint_sky["sky-opacity"])})};function Hh(n,e,o){const l=[0,0,1],u=lh([]);return ch(u,u,o?-st(n)+Math.PI:st(n)),kd(u,u,-st(e)),_m(l,l,u),dn(l,l)}const bg={circle:class extends wo{constructor(n){super(n,mm)}createBucket(n){return new Xo(n)}queryRadius(n){const e=n;return gc("circle-radius",this,e)+gc("circle-stroke-width",this,e)+rh(this.paint.get("circle-translate"))}queryIntersectsFeature(n,e,o,l,u,f,_,x){const A=fm(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),f.angle,n.pixelToTileUnitsFactor),w=this.paint.get("circle-radius").evaluate(e,o)+this.paint.get("circle-stroke-width").evaluate(e,o);return dh(n,l,f,_,x,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),A,w)}getProgramIds(){return["circle"]}getProgramConfiguration(n){return new ia(this,n)}},heatmap:class extends wo{createBucket(n){return new Id(n)}constructor(n){super(n,qg),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){"heatmap-color"===n&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Ip({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(n){return gc("heatmap-radius",this,n)}queryIntersectsFeature(n,e,o,l,u,f,_,x){const A=this.paint.get("heatmap-radius").evaluate(e,o);return dh(n,l,f,_,x,!0,!0,new Ue(0,0),A)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(n){return new ia(this,n)}},hillshade:class extends wo{constructor(n){super(n,Yg)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends wo{constructor(n){super(n,Tm)}getProgramIds(){const n=this.paint.get("fill-pattern"),e=n&&n.constantOr(1),o=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&o.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),o}getProgramConfiguration(n){return new ia(this,n)}recalculate(n,e){super.recalculate(n,e);const o=this.paint._values["fill-outline-color"];"constant"===o.value.kind&&void 0===o.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Mc(n)}queryRadius(){return rh(this.paint.get("fill-translate"))}queryIntersectsFeature(n,e,o,l,u,f){return!n.queryGeometry.isAboveHorizon&&um(pm(n.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),f.angle,n.pixelToTileUnitsFactor),l)}isTileClipped(){return!0}},"fill-extrusion":class extends wo{constructor(n){super(n,Jg)}createBucket(n){return new Ud(n)}queryRadius(){return rh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(n){return new ia(this,n)}queryIntersectsFeature(n,e,o,l,u,f,_,x,A){const w=fm(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),f.angle,n.pixelToTileUnitsFactor),T=this.paint.get("fill-extrusion-height").evaluate(e,o),S=this.paint.get("fill-extrusion-base").evaluate(e,o),D=[0,0],P=x&&f.elevation,F=f.elevation?f.elevation.exaggeration():1,z=n.tile.getBucket(this);if(P&&z instanceof Ud){const re=z.centroidVertexArray,oe=A+1;if(oe<re.length){const ae=re.get(oe);D[0]=ae.a_centroid_pos0,D[1]=ae.a_centroid_pos1}}if(0===D[0]&&1===D[1])return!1;"globe"===f.projection.name&&(l=gh([l],[new Ue(0,0),new Ue(rt,rt)],n.tileID.canonical).map(re=>re.polygon).flat());const q=(oe=l,ae=S,ce=T,ue=w,Ae=_,be=P?x:null,Se=D,Ie=F,ye=f.center.lat,"globe"===(re=f).projection.name?function(ke,Fe,qe,Be,He,pt,ft,it,Ke,ht,xt){const et=[],Si=[],pi=ke.projection.upVectorScale(xt,ke.center.lat,ke.worldSize).metersToTile,Jt=[0,0,0,1],Ct=[0,0,0,1],St=(zt,Zt,ei,vt)=>{zt[0]=Zt,zt[1]=ei,zt[2]=vt,zt[3]=1},Dt=Qp();qe>0&&(qe+=Dt),Be+=Dt;for(const zt of Fe){const Zt=[],ei=[];for(const vt of zt){const Mt=vt.x+He.x,vn=vt.y+He.y,Bt=ke.projection.projectTilePoint(Mt,vn,xt),xi=ke.projection.upVector(xt,vt.x,vt.y);let Qi=qe,Pt=Be;if(ft){const si=Xp(Mt,vn,qe,Be,ft,it,Ke,ht);Qi+=si.base,Pt+=si.top}0!==qe?St(Jt,Bt.x+xi[0]*pi*Qi,Bt.y+xi[1]*pi*Qi,Bt.z+xi[2]*pi*Qi):St(Jt,Bt.x,Bt.y,Bt.z),St(Ct,Bt.x+xi[0]*pi*Pt,Bt.y+xi[1]*pi*Pt,Bt.z+xi[2]*pi*Pt),Ii(Jt,Jt,pt),Ii(Ct,Ct,pt),Zt.push(Gd(Jt)),ei.push(Gd(Ct))}et.push(Zt),Si.push(ei)}return[et,Si]}(re,oe,ae,ce,ue,Ae,be,Se,Ie,ye,n.tileID.canonical):be?function(ke,Fe,qe,Be,He,pt,ft,it,Ke){const ht=[],xt=[],et=[0,0,0,1];for(const Si of ke){const pi=[],Jt=[];for(const Ct of Si){const St=Ct.x+Be.x,Dt=Ct.y+Be.y,zt=Xp(St,Dt,Fe,qe,pt,ft,it,Ke);et[0]=St,et[1]=Dt,et[2]=zt.base,et[3]=1,is(et,et,He),et[3]=Math.max(et[3],1e-5);const Zt=Gd([et[0]/et[3],et[1]/et[3],et[2]/et[3]]);et[0]=St,et[1]=Dt,et[2]=zt.top,et[3]=1,is(et,et,He),et[3]=Math.max(et[3],1e-5);const ei=Gd([et[0]/et[3],et[1]/et[3],et[2]/et[3]]);pi.push(Zt),Jt.push(ei)}ht.push(pi),xt.push(Jt)}return[ht,xt]}(oe,ae,ce,ue,Ae,be,Se,Ie,ye):function(ke,Fe,qe,Be,He){const pt=[],ft=[],it=He[8]*Fe,Ke=He[9]*Fe,ht=He[10]*Fe,xt=He[11]*Fe,et=He[8]*qe,Si=He[9]*qe,pi=He[10]*qe,Jt=He[11]*qe;for(const Ct of ke){const St=[],Dt=[];for(const zt of Ct){const Zt=zt.x+Be.x,ei=zt.y+Be.y,vt=He[0]*Zt+He[4]*ei+He[12],Mt=He[1]*Zt+He[5]*ei+He[13],vn=He[2]*Zt+He[6]*ei+He[14],Bt=He[3]*Zt+He[7]*ei+He[15],xi=vt+it,Qi=Mt+Ke,Pt=vn+ht,si=Math.max(Bt+xt,1e-5),Wi=vt+et,oi=Mt+Si,wi=vn+pi,Ni=Math.max(Bt+Jt,1e-5),Fi=new Ue(xi/si,Qi/si);Fi.z=Pt/si,St.push(Fi);const Ui=new Ue(Wi/Ni,oi/Ni);Ui.z=wi/Ni,Dt.push(Ui)}pt.push(St),ft.push(Dt)}return[pt,ft]}(oe,ae,ce,ue,Ae)),W=n.queryGeometry;var re,oe,ae,ce,ue,Ae,be,Se,Ie,ye;return function(re,oe,ae){let ce=1/0;um(ae,oe)&&(ce=Wp(ae,oe[0]));for(let ue=0;ue<oe.length;ue++){const Ae=oe[ue],be=re[ue];for(let Se=0;Se<Ae.length-1;Se++){const Ie=Ae[Se],ye=[Ie,Ae[Se+1],be[Se+1],be[Se],Ie];cn(ae,ye)&&(ce=Math.min(ce,Wp(ae,ye)))}}return ce!==1/0&&ce}(q[0],q[1],W.isPointQuery()?W.screenBounds:W.screenGeometry)}},line:class extends wo{constructor(n){super(n,xh),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(n){if("line-gradient"===n){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof io,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,e){super.recalculate(n,e),this.paint._values["line-floorwidth"]=Dc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Zd(n)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(n){return new ia(this,n)}queryRadius(n){const e=n,o=jd(gc("line-width",this,e),gc("line-gap-width",this,e)),l=gc("line-offset",this,e);return o/2+Math.abs(l)+rh(this.paint.get("line-translate"))}queryIntersectsFeature(n,e,o,l,u,f){if(n.queryGeometry.isAboveHorizon)return!1;const _=pm(n.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),f.angle,n.pixelToTileUnitsFactor),x=n.pixelToTileUnitsFactor/2*jd(this.paint.get("line-width").evaluate(e,o),this.paint.get("line-gap-width").evaluate(e,o)),A=this.paint.get("line-offset").evaluate(e,o);return A&&(l=function(w,T){const S=[],D=new Ue(0,0);for(let P=0;P<w.length;P++){const F=w[P],z=[];for(let q=0;q<F.length;q++){const W=F[q-1],re=F[q],oe=F[q+1],ae=0===q?D:re.sub(W)._unit()._perp(),ce=q===F.length-1?D:oe.sub(re)._unit()._perp(),ue=ae._add(ce)._unit();ue._mult(1/(ue.x*ce.x+ue.y*ce.y)),z.push(ue._mult(T)._add(re))}S.push(z)}return S}(l,A*n.pixelToTileUnitsFactor)),function(w,T,S){for(let D=0;D<T.length;D++){const P=T[D];if(w.length>=3)for(let F=0;F<P.length;F++)if(gr(w,P[F]))return!0;if(Zg(w,P,S))return!0}return!1}(_,l,x)}isTileClipped(){return!0}},symbol:su,background:class extends wo{constructor(n){super(n,yg)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends wo{constructor(n){super(n,xg)}getProgramIds(){return["raster"]}},sky:class extends wo{constructor(n){super(n,Ag),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){"sky-gradient"===n?this._updateColorRamp():"sky-atmosphere-sun"!==n&&"sky-atmosphere-halo-color"!==n&&"sky-atmosphere-color"!==n&&"sky-atmosphere-sun-intensity"!==n||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Ip({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(n){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=n.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(n,e){if("atmosphere"===this.paint.get("sky-type")){const l=this.paint.get("sky-atmosphere-sun"),u=!l,f=n.style.light,_=f.properties.get("position");return u&&"viewport"===f.properties.get("anchor")&&Ai("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),u?Hh(_.azimuthal,90-_.polar,e):Hh(l[0],90-l[1],e)}const o=this.paint.get("sky-gradient-center");return Hh(o[0],90-o[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(n){this._skyboxInvalidated=!1,this._lightPosition=n.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const n=this.paint.get("sky-type");return"atmosphere"===n?["skyboxCapture","skybox"]:"gradient"===n?["skyboxGradient"]:null}}};class gl{constructor(e,o,l,u){this.context=e,this.format=l,this.texture=e.gl.createTexture(),this.update(o,u)}update(e,o,l){const{width:u,height:f}=e,{context:_}=this,{gl:x}=_,{HTMLImageElement:A,HTMLCanvasElement:w,HTMLVideoElement:T,ImageData:S,ImageBitmap:D}=Oe;if(x.bindTexture(x.TEXTURE_2D,this.texture),_.pixelStoreUnpackFlipY.set(!1),_.pixelStoreUnpack.set(1),_.pixelStoreUnpackPremultiplyAlpha.set(this.format===x.RGBA&&(!o||!1!==o.premultiply)),l||this.size&&this.size[0]===u&&this.size[1]===f){const{x:P,y:F}=l||{x:0,y:0};e instanceof A||e instanceof w||e instanceof T||e instanceof S||D&&e instanceof D?x.texSubImage2D(x.TEXTURE_2D,0,P,F,x.RGBA,x.UNSIGNED_BYTE,e):x.texSubImage2D(x.TEXTURE_2D,0,P,F,u,f,x.RGBA,x.UNSIGNED_BYTE,e.data)}else this.size=[u,f],e instanceof A||e instanceof w||e instanceof T||e instanceof S||D&&e instanceof D?x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,x.UNSIGNED_BYTE,e):x.texImage2D(x.TEXTURE_2D,0,this.format,u,f,0,this.format,x.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(o&&o.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&x.generateMipmap(x.TEXTURE_2D)}bind(e,o){const{context:l}=this,{gl:u}=l;u.bindTexture(u.TEXTURE_2D,this.texture),e!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.useMipmap?e===u.NEAREST?u.NEAREST_MIPMAP_NEAREST:u.LINEAR_MIPMAP_NEAREST:e),this.filter=e),o!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,o),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Ff{constructor(e,o){this.width=e,this.height=o,this.nextRow=0,this.image=new Eo({width:e,height:o}),this.positions={},this.uploaded=!1}getDash(e,o){const l=this.getKey(e,o);return this.positions[l]}trim(){const e=this.width,o=this.height=Tl(this.nextRow);this.image.resize({width:e,height:o})}getKey(e,o){return e.join(",")+o}getDashRanges(e,o,l){const u=[];let f=e.length%2==1?-e[e.length-1]*l:0,_=e[0]*l,x=!0;u.push({left:f,right:_,isDash:x,zeroLength:0===e[0]});let A=e[0];for(let w=1;w<e.length;w++){x=!x;const T=e[w];f=A*l,A+=T,_=A*l,u.push({left:f,right:_,isDash:x,zeroLength:0===T})}return u}addRoundDash(e,o,l){const u=o/2;for(let f=-l;f<=l;f++){const _=this.width*(this.nextRow+l+f);let x=0,A=e[x];for(let w=0;w<this.width;w++){w/A.right>1&&(A=e[++x]);const T=Math.abs(w-A.left),S=Math.abs(w-A.right),D=Math.min(T,S);let P;const F=f/l*(u+1);if(A.isDash){const z=u-Math.abs(F);P=Math.sqrt(D*D+z*z)}else P=u-Math.sqrt(D*D+F*F);this.image.data[_+w]=Math.max(0,Math.min(255,P+128))}}}addRegularDash(e,o){for(let A=e.length-1;A>=0;--A){const w=e[A],T=e[A+1];w.zeroLength?e.splice(A,1):T&&T.isDash===w.isDash&&(T.left=w.left,e.splice(A,1))}const l=e[0],u=e[e.length-1];l.isDash===u.isDash&&(l.left=u.left-this.width,u.right=l.right+this.width);const f=this.width*this.nextRow;let _=0,x=e[_];for(let A=0;A<this.width;A++){A/x.right>1&&(x=e[++_]);const w=Math.abs(A-x.left),T=Math.abs(A-x.right),S=Math.min(w,T);this.image.data[f+A]=Math.max(0,Math.min(255,(x.isDash?S:-S)+o+128))}}addDash(e,o){const l=this.getKey(e,o);if(this.positions[l])return this.positions[l];const u="round"===o,f=u?7:0,_=2*f+1;if(this.nextRow+_>this.height)return Ai("LineAtlas out of space"),null;0===e.length&&e.push(1);let x=0;for(let T=0;T<e.length;T++)e[T]<0&&(Ai("Negative value is found in line dasharray, replacing values with 0"),e[T]=0),x+=e[T];if(0!==x){const T=this.width/x,S=this.getDashRanges(e,this.width,T);u?this.addRoundDash(S,T,f):this.addRegularDash(S,"square"===o?.5*T:0)}const A=this.nextRow+f;this.nextRow+=_;const w={tl:[A,f],br:[x,0]};return this.positions[l]=w,w}}Je(Ff,"LineAtlas");class wg{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class qh{constructor(){this.tasks={},this.taskQueue=[],Kn(["process"],this),this.invoker=new wg(this.process),this.nextId=0}add(e,o){const l=this.nextId++,u=function({type:f,isSymbolTile:_,zoom:x}){return x=x||0,"message"===f?0:"maybePrepare"!==f||_?"parseTile"!==f||_?"parseTile"===f&&_?300-x:"maybePrepare"===f&&_?400-x:500:200-x:100-x}(o);if(0===u){Ji();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[l]={fn:e,metadata:o,priority:u,id:l},this.taskQueue.push(l),this.invoker.trigger(),{cancel:()=>{delete this.tasks[l]}}}process(){Ji();try{if(this.taskQueue=this.taskQueue.filter(l=>!!this.tasks[l]),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const o=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!o)return;o.fn()}finally{}}pick(){let e=null,o=1/0;for(let u=0;u<this.taskQueue.length;u++){const f=this.tasks[this.taskQueue[u]];f.priority<o&&(o=f.priority,e=u)}if(null===e)return null;const l=this.taskQueue[e];return this.taskQueue.splice(e,1),l}remove(){this.invoker.remove()}}class Lf{constructor(e){this._stringToNumber={},this._numberToString=[];for(let o=0;o<e.length;o++){const l=e[o];this._stringToNumber[l]=o,this._numberToString[o]=l}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const lu=["tile","layer","source","sourceLayer","state"];class Yh{constructor(e,o,l,u,f){this.type="Feature",this._vectorTileFeature=e,this._z=o,this._x=l,this._y=u,this.properties=e.properties,this.id=f}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(const o of lu)void 0!==this[o]&&(e[o]=this[o]);return e}}const pa=new Uint16Array(8184);for(let n=0;n<2046;n++){let e=n+2,o=0,l=0,u=0,f=0,_=0,x=0;for(1&e?u=f=_=32:o=l=x=32;(e>>=1)>1;){const w=o+u>>1,T=l+f>>1;1&e?(u=o,f=l,o=_,l=x):(o=u,l=f,u=_,f=x),_=w,x=T}const A=4*n;pa[A+0]=o,pa[A+1]=l,pa[A+2]=u,pa[A+3]=f}const ko=new Uint16Array(2178),fa=new Uint8Array(1089),cu=new Uint16Array(1089);function Cg(n){return 0===n?-.03125:32===n?.03125:0}var Rf=Ye([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Mg={type:2,extent:rt,loadGeometry:()=>[[new Ue(0,0),new Ue(8193,0),new Ue(8193,8193),new Ue(0,8193),new Ue(0,0)]]};class Of{constructor(e,o,l,u,f){this.tileID=e,this.uid=Sr(),this.uses=0,this.tileSize=o,this.tileZoom=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=f,this.expiredRequestCount=0,this.state="loading",u&&u.transform&&(this.projection=u.transform.projection)}registerFadeDuration(e){const o=e+this.timeAdded;o<sn.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=ds(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,o,l){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(u,f){const _={};if(!f)return _;for(const x of u){const A=x.layerIds.map(w=>f.getLayer(w)).filter(Boolean);if(0!==A.length){x.layers=A,x.stateDependentLayerIds&&(x.stateDependentLayers=x.stateDependentLayerIds.map(w=>A.filter(T=>T.id===w)[0]));for(const w of A)_[w.id]=x}}return _}(e.buckets,o.style),this.hasSymbolBuckets=!1;for(const u in this.buckets){const f=this.buckets[u];if(f instanceof Do){if(this.hasSymbolBuckets=!0,!l)break;f.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const u in this.buckets){const f=this.buckets[u];if(f instanceof Do&&f.hasRTLText){this.hasRTLText=!0,Q.isLoading()||Q.isLoaded()||"deferred"!==K()||G();break}}this.queryPadding=0;for(const u in this.buckets){const f=this.buckets[u];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(u).queryRadius(f))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Hu}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugIndexBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const l in this.buckets){const u=this.buckets[l];u.uploadPending()&&u.upload(e)}const o=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new gl(e,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new gl(e,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new gl(e,this.lineAtlas.image,o.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,o,l,u,f,_,x,A){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:u,pixelPosMatrix:x,transform:_,params:f,tileTransform:this.tileTransform},e,o,l):{}}querySourceFeatures(e,o){const l=this.latestFeatureIndex;if(!l||!l.rawTileData)return;const u=l.loadVTLayers(),f=o?o.sourceLayer:"",_=u._geojsonTileLayer||u[f];if(!_)return;const x=hr(o&&o.filter),{z:A,x:w,y:T}=this.tileID.canonical,S={z:A,x:w,y:T};for(let D=0;D<_.length;D++){const P=_.feature(D);if(x.needGeometry){const q=ra(P,!0);if(!x.filter(new j(this.tileID.overscaledZ),q,this.tileID.canonical))continue}else if(!x.filter(new j(this.tileID.overscaledZ),P))continue;const F=l.getId(P,f),z=new Yh(P,A,w,T,F);z.tile=S,e.push(z)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const o=this.expirationTime;if(e.cacheControl){const l=lo(e.cacheControl);l["max-age"]&&(this.expirationTime=Date.now()+1e3*l["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const l=Date.now();let u=!1;if(this.expirationTime>l)u=!1;else if(o)if(this.expirationTime<o)u=!0;else{const f=this.expirationTime-o;f?this.expirationTime=l+Math.max(f,3e4):u=!0}else u=!0;u?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length||!o)return;const l=this.latestFeatureIndex.loadVTLayers(),u=o.style.listImages();for(const f in this.buckets){if(!o.style.hasLayer(f))continue;const _=this.buckets[f],x=_.layers[0].sourceLayer||"_geojsonTileLayer",A=l[x],w=e[x];if(!A||!w||0===Object.keys(w).length)continue;if(_.update(w,A,u,this.imageAtlas&&this.imageAtlas.patternPositions||{}),_ instanceof Zd||_ instanceof Mc){const S=o.style._getSourceCache(_.layers[0].source);o._terrain&&o._terrain.enabled&&S&&_.programConfigurations.needsUpload&&o._terrain._clearRenderCacheForTile(S.id,this.tileID)}const T=o&&o.style&&o.style.getLayer(f);T&&(this.queryPadding=Math.max(this.queryPadding,T.queryRadius(_)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<sn.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=sn.now()+e}setTexture(e,o){const l=o.context,u=l.gl;this.texture=o.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new gl(l,e,u.RGBA,{useMipmap:!0}),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),l.extTextureFilterAnisotropic&&u.texParameterf(u.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax))}setDependencies(e,o){const l={};for(const u of o)l[u]=!0;this.dependencies[e]=l}hasDependency(e,o){for(const l of e){const u=this.dependencies[l];if(u)for(const f of o)if(u[f])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,o){if(!o||"mercator"===o.name||this._tileDebugBuffer)return;const l=ao(Mg,this.tileID.canonical,this.tileTransform)[0],u=new ut,f=new vo;for(let _=0;_<l.length;_++){const{x,y:A}=l[_];u.emplaceBack(x,A),f.emplaceBack(_)}f.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(f),this._tileDebugBuffer=e.createVertexBuffer(u,eu.members),this._tileDebugSegments=yi.simpleSegment(0,0,u.length,f.length)}_makeTileBoundsBuffers(e,o){if(this._tileBoundsBuffer||!o||"mercator"===o.name)return;const l=ao(Mg,this.tileID.canonical,this.tileTransform)[0];let u,f;if(this.isRaster){const _=function(x,A){const w=ds(x,A),T=Math.pow(2,x.z);for(let q=0;q<33;q++)for(let W=0;W<33;W++){const re=nn((x.x+(W+Cg(W))/32)/T),oe=Ti((x.y+(q+Cg(q))/32)/T),ae=A.project(re,oe),ce=33*q+W;ko[2*ce+0]=Math.round((ae.x*w.scale-w.x)*rt),ko[2*ce+1]=Math.round((ae.y*w.scale-w.y)*rt)}fa.fill(0),cu.fill(0);for(let q=2045;q>=0;q--){const W=4*q,re=pa[W+0],oe=pa[W+1],ae=pa[W+2],ce=pa[W+3],ue=re+ae>>1,Ae=oe+ce>>1,be=ue+Ae-oe,Se=Ae+re-ue,Ie=33*oe+re,ye=33*ce+ae,Te=33*Ae+ue,ke=Math.hypot((ko[2*Ie+0]+ko[2*ye+0])/2-ko[2*Te+0],(ko[2*Ie+1]+ko[2*ye+1])/2-ko[2*Te+1])>=16;if(fa[Te]=fa[Te]||(ke?1:0),q<1022){const Fe=33*(oe+Se>>1)+(re+be>>1),qe=33*(ce+Se>>1)+(ae+be>>1);fa[Te]=fa[Te]||fa[Fe]||fa[qe]}}const S=new dt,D=new _i;let P=0;function F(q,W){const re=33*W+q;return 0===cu[re]&&(S.emplaceBack(ko[2*re+0],ko[2*re+1],q*rt/32,W*rt/32),cu[re]=++P),cu[re]-1}function z(q,W,re,oe,ae,ce){const ue=q+re>>1,Ae=W+oe>>1;if(Math.abs(q-ae)+Math.abs(W-ce)>1&&fa[33*Ae+ue])z(ae,ce,q,W,ue,Ae),z(re,oe,ae,ce,ue,Ae);else{const be=F(q,W),Se=F(re,oe),Ie=F(ae,ce);D.emplaceBack(be,Se,Ie)}}return z(0,0,32,32,32,0),z(32,32,0,0,0,32),{vertices:S,indices:D}}(this.tileID.canonical,o);u=_.vertices,f=_.indices}else{u=new dt,f=new _i;for(const{x,y:A}of l)u.emplaceBack(x,A,0,0);const _=Ac(u.int16,void 0,4);for(let x=0;x<_.length;x+=3)f.emplaceBack(_[x],_[x+1],_[x+2])}this._tileBoundsBuffer=e.createVertexBuffer(u,Rf.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(f),this._tileBoundsSegments=yi.simpleSegment(0,0,u.length,f.length)}_makeGlobeTileDebugBuffers(e,o){if(this._globeTileDebugBorderBuffer||this._globeTileDebugTextBuffer||!o||"globe"!==o.name)return;const l=this.tileID.canonical,u=ua(So(l));this._makeGlobeTileDebugBorderBuffer(e,l,u),this._makeGlobeTileDebugTextBuffer(e,l,u)}_makeGlobeTileDebugBorderBuffer(e,o,l){const u=new ut,f=new vo,_=new tt,x=(w,T,S,D,P)=>{const F=(S-w)/(P-1),z=(D-T)/(P-1),q=u.length;for(let W=0;W<P;W++){const re=w+W*F,oe=T+W*z;u.emplaceBack(re,oe);const ae=Mf(re,oe,o),ce=Ii(ae,ae,l);_.emplaceBack(ce[0],ce[1],ce[2]),f.emplaceBack(q+W)}},A=rt;x(0,0,A,0,16),x(A,0,A,A,16),x(A,A,0,A,16),x(0,A,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(f),this._tileDebugBuffer=e.createVertexBuffer(u,eu.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(_,wf.members),this._tileDebugSegments=yi.simpleSegment(0,0,u.length,f.length)}_makeGlobeTileDebugTextBuffer(e,o,l){const u=new ut,f=new _i,_=new tt,x=25;f.reserve(32),u.reserve(x),_.reserve(x);const A=(w,T)=>x*w+T;for(let w=0;w<x;w++){const T=2048*w;for(let S=0;S<x;S++){const D=2048*S;u.emplaceBack(D,T);const P=Mf(D,T,o),F=Ii(P,P,l);_.emplaceBack(F[0],F[1],F[2])}}for(let w=0;w<4;w++)for(let T=0;T<4;T++){const S=A(w,T),D=A(w,T+1),P=A(w+1,T),F=A(w+1,T+1);f.emplaceBack(S,D,P),f.emplaceBack(P,D,F)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(f),this._tileDebugTextBuffer=e.createVertexBuffer(u,eu.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(_,wf.members),this._tileDebugTextSegments=yi.simpleSegment(0,0,x,32)}}class u_{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,o,l){const u=String(o);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},fi(this.stateChanges[e][u],l),null===this.deletedStates[e]){this.deletedStates[e]={};for(const f in this.state[e])f!==u&&(this.deletedStates[e][f]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][u]){this.deletedStates[e][u]={};for(const f in this.state[e][u])l[f]||(this.deletedStates[e][u][f]=null)}else for(const f in l)this.deletedStates[e]&&this.deletedStates[e][u]&&null===this.deletedStates[e][u][f]&&delete this.deletedStates[e][u][f]}removeFeatureState(e,o,l){if(null===this.deletedStates[e])return;const u=String(o);if(this.deletedStates[e]=this.deletedStates[e]||{},l&&void 0!==o)null!==this.deletedStates[e][u]&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][l]=null);else if(void 0!==o)if(this.stateChanges[e]&&this.stateChanges[e][u])for(l in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][l]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}getState(e,o){const l=String(o),u=fi({},(this.state[e]||{})[l],(this.stateChanges[e]||{})[l]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const f=this.deletedStates[e][o];if(null===f)return{};for(const _ in f)delete u[_]}return u}initializeTileState(e,o){e.setFeatureState(this.state,o)}coalesceChanges(e,o){const l={};for(const u in this.stateChanges){this.state[u]=this.state[u]||{};const f={};for(const _ in this.stateChanges[u])this.state[u][_]||(this.state[u][_]={}),fi(this.state[u][_],this.stateChanges[u][_]),f[_]=this.state[u][_];l[u]=f}for(const u in this.deletedStates){this.state[u]=this.state[u]||{};const f={};if(null===this.deletedStates[u])for(const _ in this.state[u])f[_]={},this.state[u][_]={};else for(const _ in this.deletedStates[u]){if(null===this.deletedStates[u][_])this.state[u][_]={};else for(const x of Object.keys(this.deletedStates[u][_]))delete this.state[u][_][x];f[_]=this.state[u][_]}l[u]=l[u]||{},fi(l[u],f)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(l).length)for(const u in e)e[u].setFeatureState(l,o)}}class zf{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,o){const l=this.toIdx(e,o);return{min:this.minimums[l],max:this.maximums[l]}}isLeaf(e,o){return this.leaves[this.toIdx(e,o)]}toIdx(e,o){return o*this.size+e}}function Vf(n,e,o,l){let u=0,f=Number.MAX_VALUE;for(let _=0;_<3;_++)if(Math.abs(l[_])<1e-15){if(o[_]<n[_]||o[_]>e[_])return null}else{const x=1/l[_];let A=(n[_]-o[_])*x,w=(e[_]-o[_])*x;if(A>w){const T=A;A=w,w=T}if(A>u&&(u=A),w<f&&(f=w),u>f)return null}return u}function Nf(n,e,o,l,u,f,_,x,A,w,T){const S=l-n,D=u-e,P=f-o,F=_-n,z=x-e,q=A-o,W=T[1]*q-T[2]*z,re=T[2]*F-T[0]*q,oe=T[0]*z-T[1]*F,ae=S*W+D*re+P*oe;if(Math.abs(ae)<1e-15)return null;const ce=1/ae,ue=w[0]-n,Ae=w[1]-e,be=w[2]-o,Se=(ue*W+Ae*re+be*oe)*ce;if(Se<0||Se>1)return null;const Ie=Ae*P-be*D,ye=be*S-ue*P,Te=ue*D-Ae*S,ke=(T[0]*Ie+T[1]*ye+T[2]*Te)*ce;return ke<0||Se+ke>1?null:(F*Ie+z*ye+q*Te)*ce}function Uf(n,e,o){return(n-e)/(o-e)}function Gf(n,e,o,l,u,f,_,x,A){const w=1<<o,T=f-l,S=_-u,D=(n+1)/w*T+l,P=(e+0)/w*S+u,F=(e+1)/w*S+u;x[0]=(n+0)/w*T+l,x[1]=P,A[0]=D,A[1]=F}class Tg{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const o=function(f){const _=Math.ceil(Math.log2(f.dim/8)),x=[];let A=Math.ceil(Math.pow(2,_));const w=1/A,T=(P,F,z,q,W)=>{const re=q?1:0,oe=(P+1)*z-re,ae=F*z,ce=(F+1)*z-re;W[0]=P*z,W[1]=ae,W[2]=oe,W[3]=ce};let S=new zf(A);const D=[];for(let P=0;P<A*A;P++){T(P%A,Math.floor(P/A),w,!1,D);const F=ma(D[0],D[1],f),z=ma(D[2],D[1],f),q=ma(D[2],D[3],f),W=ma(D[0],D[3],f);S.minimums.push(Math.min(F,z,q,W)),S.maximums.push(Math.max(F,z,q,W)),S.leaves.push(1)}for(x.push(S),A/=2;A>=1;A/=2){const P=x[x.length-1];S=new zf(A);for(let F=0;F<A*A;F++){T(F%A,Math.floor(F/A),2,!0,D);const z=P.getElevation(D[0],D[1]),q=P.getElevation(D[2],D[1]),W=P.getElevation(D[2],D[3]),re=P.getElevation(D[0],D[3]),oe=P.isLeaf(D[0],D[1]),ae=P.isLeaf(D[2],D[1]),ce=P.isLeaf(D[2],D[3]),ue=P.isLeaf(D[0],D[3]),Ae=Math.min(z.min,q.min,W.min,re.min),be=Math.max(z.max,q.max,W.max,re.max),Se=oe&&ae&&ce&&ue;S.maximums.push(be),S.minimums.push(Ae),S.leaves.push(be-Ae<=5&&Se?1:0)}x.push(S)}return x}(this.dem),l=o.length-1,u=o[l];this._addNode(u.minimums[0],u.maximums[0],u.leaves[0]),this._construct(o,0,0,l,0)}raycastRoot(e,o,l,u,f,_,x=1){return Vf([e,o,-100],[l,u,this.maximums[0]*x],f,_)}raycast(e,o,l,u,f,_,x=1){if(!this.nodeCount)return null;const A=this.raycastRoot(e,o,l,u,f,_,x);if(null==A)return null;const w=[],T=[],S=[],D=[],P=[{idx:0,t:A,nodex:0,nodey:0,depth:0}];for(;P.length>0;){const{idx:F,t:z,nodex:q,nodey:W,depth:re}=P.pop();if(this.leaves[F]){Gf(q,W,re,e,o,l,u,S,D);const ae=1<<re,ce=(q+0)/ae,ue=(q+1)/ae,Ae=(W+0)/ae,be=(W+1)/ae,Se=ma(ce,Ae,this.dem)*x,Ie=ma(ue,Ae,this.dem)*x,ye=ma(ue,be,this.dem)*x,Te=ma(ce,be,this.dem)*x,ke=Nf(S[0],S[1],Se,D[0],S[1],Ie,D[0],D[1],ye,f,_),Fe=Nf(D[0],D[1],ye,S[0],D[1],Te,S[0],S[1],Se,f,_),qe=Math.min(null!==ke?ke:Number.MAX_VALUE,null!==Fe?Fe:Number.MAX_VALUE);if(qe!==Number.MAX_VALUE)return qe;{const Be=tl([],f,_,z);if(Eg(Se,Ie,Te,ye,Uf(Be[0],S[0],D[0]),Uf(Be[1],S[1],D[1]))>=Be[2])return z}continue}let oe=0;for(let ae=0;ae<this._siblingOffset.length;ae++){Gf((q<<1)+this._siblingOffset[ae][0],(W<<1)+this._siblingOffset[ae][1],re+1,e,o,l,u,S,D),S[2]=-100,D[2]=this.maximums[this.childOffsets[F]+ae]*x;const ce=Vf(S,D,f,_);if(null!=ce){const ue=ce;w[ae]=ue;let Ae=!1;for(let be=0;be<oe&&!Ae;be++)ue>=w[T[be]]&&(T.splice(be,0,ae),Ae=!0);Ae||(T[oe]=ae),oe++}}for(let ae=0;ae<oe;ae++){const ce=T[ae];P.push({idx:this.childOffsets[F]+ce,t:w[ce],nodex:(q<<1)+this._siblingOffset[ce][0],nodey:(W<<1)+this._siblingOffset[ce][1],depth:re+1})}}return null}_addNode(e,o,l){return this.minimums.push(e),this.maximums.push(o),this.leaves.push(l),this.childOffsets.push(0),this.nodeCount++}_construct(e,o,l,u,f){if(1===e[u].isLeaf(o,l))return;this.childOffsets[f]||(this.childOffsets[f]=this.nodeCount);const _=u-1,x=e[_];let A=0,w=0;for(let T=0;T<this._siblingOffset.length;T++){const S=2*o+this._siblingOffset[T][0],D=2*l+this._siblingOffset[T][1],P=x.getElevation(S,D),F=x.isLeaf(S,D),z=this._addNode(P.min,P.max,F);F&&(A|=1<<T),w||(w=z)}for(let T=0;T<this._siblingOffset.length;T++)A&1<<T||this._construct(e,2*o+this._siblingOffset[T][0],2*l+this._siblingOffset[T][1],_,w+T)}}function Eg(n,e,o,l,u,f){return Ot(Ot(n,o,f),Ot(e,l,f),u)}function ma(n,e,o){const l=o.dim,u=_t(n*l-.5,0,l-1),f=_t(e*l-.5,0,l-1),_=Math.floor(u),x=Math.floor(f),A=Math.min(_+1,l-1),w=Math.min(x+1,l-1);return Eg(o.get(_,x),o.get(A,x),o.get(_,w),o.get(A,w),u-_,f-x)}const Zf={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class du{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,o,l,u=!1,f=!1){if(this.uid=e,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(l&&"mapbox"!==l&&"terrarium"!==l)return Ai(`"${l}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const _=this.dim=o.height-2,x=new Uint32Array(o.data.buffer);if(this.pixels=new Uint8Array(o.data.buffer),this.encoding=l||"mapbox",this.borderReady=u,!u){for(let A=0;A<_;A++)x[this._idx(-1,A)]=x[this._idx(0,A)],x[this._idx(_,A)]=x[this._idx(_-1,A)],x[this._idx(A,-1)]=x[this._idx(A,0)],x[this._idx(A,_)]=x[this._idx(A,_-1)];x[this._idx(-1,-1)]=x[this._idx(0,0)],x[this._idx(_,-1)]=x[this._idx(_-1,0)],x[this._idx(-1,_)]=x[this._idx(0,_-1)],x[this._idx(_,_)]=x[this._idx(_-1,_-1)],f&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Tg(this)}get(e,o,l=!1){l&&(e=_t(e,-1,this.dim),o=_t(o,-1,this.dim));const u=4*this._idx(e,o);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(this.pixels[u],this.pixels[u+1],this.pixels[u+2])}static getUnpackVector(e){return Zf[e]}get unpackVector(){return Zf[this.encoding]}_idx(e,o){if(e<-1||e>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(e+1)}_unpackMapbox(e,o,l){return(256*e*256+256*o+l)/10-1e4}_unpackTerrarium(e,o,l){return 256*e+o+l/256-32768}static pack(e,o){const l=[0,0,0,0],u=du.getUnpackVector(o);let f=Math.floor((e+u[3])/u[2]);return l[2]=f%256,f=Math.floor(f/256),l[1]=f%256,f=Math.floor(f/256),l[0]=f,l}getPixels(){return new yn({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,o,l){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let u=o*this.dim,f=o*this.dim+this.dim,_=l*this.dim,x=l*this.dim+this.dim;switch(o){case-1:u=f-1;break;case 1:f=u+1}switch(l){case-1:_=x-1;break;case 1:x=_+1}const A=-o*this.dim,w=-l*this.dim;for(let T=_;T<x;T++)for(let S=u;S<f;S++){const D=4*this._idx(S,T),P=4*this._idx(S+A,T+w);this.pixels[D+0]=e.pixels[P+0],this.pixels[D+1]=e.pixels[P+1],this.pixels[D+2]=e.pixels[P+2],this.pixels[D+3]=e.pixels[P+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Je(du,"DEMData"),Je(Tg,"DemMinMaxQuadTree",{omit:["dem"]});class h_{constructor(e,o){this.max=e,this.onRemove=o,this.reset()}reset(){for(const e in this.data)for(const o of this.data[e])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(e,o,l){const u=e.wrapped().key;void 0===this.data[u]&&(this.data[u]=[]);const f={value:o,timeout:void 0};if(void 0!==l&&(f.timeout=setTimeout(()=>{this.remove(e,f)},l)),this.data[u].push(f),this.order.push(u),this.order.length>this.max){const _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const o=this.data[e].shift();return o.timeout&&clearTimeout(o.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),o.value}getByKey(e){const o=this.data[e];return o?o[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,o){if(!this.has(e))return this;const l=e.wrapped().key,u=void 0===o?0:this.data[l].indexOf(o),f=this.data[l][u];return this.data[l].splice(u,1),f.timeout&&clearTimeout(f.timeout),0===this.data[l].length&&delete this.data[l],this.onRemove(f.value),this.order.splice(this.order.indexOf(l),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(e){const o=[];for(const l in this.data)for(const u of this.data[l])e(u.value)||o.push(u);for(const l of o)this.remove(l.value.tileID,l)}}class Gc{constructor(e,o,l){this.func=e,this.mask=o,this.range=l}}Gc.ReadOnly=!1,Gc.ReadWrite=!0,Gc.disabled=new Gc(519,Gc.ReadOnly,[0,1]);class Wh{constructor(e,o,l,u,f,_){this.test=e,this.ref=o,this.mask=l,this.fail=u,this.depthFail=f,this.pass=_}}Wh.disabled=new Wh({func:519,mask:0},0,0,7680,7680,7680);class Jo{constructor(e,o,l){this.blendFunction=e,this.blendColor=o,this.mask=l}}Jo.Replace=[1,0],Jo.disabled=new Jo(Jo.Replace,bi.transparent,[!1,!1,!1,!1]),Jo.unblended=new Jo(Jo.Replace,bi.transparent,[!0,!0,!0,!0]),Jo.alphaBlended=new Jo([1,771],bi.transparent,[!0,!0,!0,!0]);class Ko{constructor(e,o,l){this.enable=e,this.mode=o,this.frontFace=l}}Ko.disabled=new Ko(!1,1029,2305),Ko.backCCW=new Ko(!0,1029,2305),Ko.backCW=new Ko(!0,1029,2304),Ko.frontCW=new Ko(!0,1028,2304),Ko.frontCCW=new Ko(!0,1028,2305);class _l extends jt{constructor(e,o,l){super(),this.id=e,this._onlySymbols=l,o.on("data",u=>{"source"===u.dataType&&"metadata"===u.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===u.dataType&&"content"===u.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),o.on("error",()=>{this._sourceErrored=!0}),this._source=o,this._tiles={},this._cache=new h_(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=o.minTileCacheSize,this._maxTileCacheSize=o.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new u_,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const o=this._tiles[e];if("loaded"!==o.state&&"errored"!==o.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,o){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,o)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(const o in this._tiles){const l=this._tiles[o];this._source.prepareTile(l)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,l.tileID),l.upload(e),l.prepare(this.map.style.imageManager)}else for(const o in this._tiles){const l=this._tiles[o];l.upload(e),l.prepare(this.map.style.imageManager)}}getIds(){return ir(this._tiles).map(e=>e.tileID).sort(Sg).map(e=>e.key)}getRenderableIds(e){const o=[];for(const l in this._tiles)this._isIdRenderable(+l,e)&&o.push(this._tiles[l]);return e?o.sort((l,u)=>{const f=l.tileID,_=u.tileID,x=new Ue(f.canonical.x,f.canonical.y)._rotate(this.transform.angle),A=new Ue(_.canonical.x,_.canonical.y)._rotate(this.transform.angle);return f.overscaledZ-_.overscaledZ||A.y-x.y||A.x-x.x}).map(l=>l.tileID.key):o.map(l=>l.tileID).sort(Sg).map(l=>l.key)}hasRenderableParent(e){const o=this.findLoadedParent(e,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(e,o){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(o||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,o){const l=this._tiles[e];l&&("loading"!==l.state&&(l.state=o),this._loadTile(l,this._tileLoaded.bind(this,l,e,o)))}_tileLoaded(e,o,l,u){if(u)if(e.state="errored",404!==u.status)this._source.fire(new ii(u,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const f=this.map.painter.terrain;this.update(this.transform,f.getScaledDemTileSize(),!0),f.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=sn.now(),"expired"===l&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(o,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Nt("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const o=this.getRenderableIds();for(let u=0;u<o.length;u++){const f=o[u];if(e.neighboringTiles&&e.neighboringTiles[f]){const _=this.getTileByID(f);l(e,_),l(_,e)}}function l(u,f){if(!u.dem||u.dem.borderReady)return;u.needsHillshadePrepare=!0,u.needsDEMTextureUpload=!0;let _=f.tileID.canonical.x-u.tileID.canonical.x;const x=f.tileID.canonical.y-u.tileID.canonical.y,A=Math.pow(2,u.tileID.canonical.z),w=f.tileID.key;0===_&&0===x||Math.abs(x)>1||(Math.abs(_)>1&&(1===Math.abs(_+A)?_+=A:1===Math.abs(_-A)&&(_-=A)),f.dem&&u.dem&&(u.dem.backfillBorder(f.dem,_,x),u.neighboringTiles&&u.neighboringTiles[w]&&(u.neighboringTiles[w].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,o,l,u){for(const f in this._tiles){let _=this._tiles[f];if(u[f]||!_.hasData()||_.tileID.overscaledZ<=o||_.tileID.overscaledZ>l)continue;let x=_.tileID;for(;_&&_.tileID.overscaledZ>o+1;){const w=_.tileID.scaledTo(_.tileID.overscaledZ-1);_=this._tiles[w.key],_&&_.hasData()&&(x=w)}let A=x;for(;A.overscaledZ>o;)if(A=A.scaledTo(A.overscaledZ-1),e[A.key]){u[x.key]=x;break}}}findLoadedParent(e,o){if(e.key in this._loadedParentTiles){const l=this._loadedParentTiles[e.key];return l&&l.tileID.overscaledZ>=o?l:null}for(let l=e.overscaledZ-1;l>=o;l--){const u=e.scaledTo(l),f=this._getLoadedTile(u);if(f)return f}}_getLoadedTile(e){const o=this._tiles[e.key];return o&&o.hasData()?o:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,o){o=o||this._source.tileSize;const l=Math.ceil(e.width/o)+1,u=Math.ceil(e.height/o)+1,f=Math.floor(l*u*5),_="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,f):f,x="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(x)}handleWrapJump(e){const o=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,o){const l={};for(const u in this._tiles){const f=this._tiles[u];f.tileID=f.tileID.unwrapTo(f.tileID.wrap+o),l[f.tileID.key]=f}this._tiles=l;for(const u in this._timers)clearTimeout(this._timers[u]),delete this._timers[u];for(const u in this._tiles)this._setTileReloadTimer(+u,this._tiles[u])}}update(e,o,l){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!l)return;let u;this.updateCacheSize(e,o),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?u=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(x=>new Hi(x.canonical.z,x.wrap,x.canonical.z,x.canonical.x,x.canonical.y)):(u=e.coveringTiles({tileSize:o||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!l,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(u=u.filter(x=>this._source.hasTile(x)))):u=[];const f=this._updateRetainedTiles(u);if(Dg(this._source.type)&&0!==u.length){const x={},A={},w=Object.keys(f);for(const S of w){const D=f[S],P=this._tiles[S];if(!P||P.fadeEndTime&&P.fadeEndTime<=sn.now())continue;const F=this.findLoadedParent(D,Math.max(D.overscaledZ-_l.maxOverzooming,this._source.minzoom));F&&(this._addTile(F.tileID),x[F.tileID.key]=F.tileID),A[S]=D}const T=u[u.length-1].overscaledZ;for(const S in this._tiles){const D=this._tiles[S];if(f[S]||!D.hasData())continue;let P=D.tileID;for(;P.overscaledZ>T;){P=P.scaledTo(P.overscaledZ-1);const F=this._tiles[P.key];if(F&&F.hasData()&&A[P.key]){f[S]=D.tileID;break}}}for(const S in x)f[S]||(this._coveredTiles[S]=!0,f[S]=x[S])}for(const x in f)this._tiles[x].clearFadeHold();const _=function(x,A){const w=[];for(const T in x)T in A||w.push(T);return w}(this._tiles,f);for(const x of _){const A=this._tiles[x];A.hasSymbolBuckets&&!A.holdingForFade()?A.setHoldDuration(this.map._fadeDuration):A.hasSymbolBuckets&&!A.symbolFadeFinished()||this._removeTile(+x)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const o={};if(0===e.length)return o;const l={},u=e.reduce((w,T)=>Math.min(w,T.overscaledZ),1/0),f=e[0].overscaledZ,_=Math.max(f-_l.maxOverzooming,this._source.minzoom),x=Math.max(f+_l.maxUnderzooming,this._source.minzoom),A={};for(const w of e){const T=this._addTile(w);o[w.key]=w,T.hasData()||u<this._source.maxzoom&&(A[w.key]=w)}this._retainLoadedChildren(A,u,x,o);for(const w of e){let T=this._tiles[w.key];if(T.hasData())continue;if(w.canonical.z>=this._source.maxzoom){const D=w.children(this._source.maxzoom)[0],P=this.getTile(D);if(P&&P.hasData()){o[D.key]=D;continue}}else{const D=w.children(this._source.maxzoom);if(o[D[0].key]&&o[D[1].key]&&o[D[2].key]&&o[D[3].key])continue}let S=T.wasRequested();for(let D=w.overscaledZ-1;D>=_;--D){const P=w.scaledTo(D);if(l[P.key]||(l[P.key]=!0,T=this.getTile(P),!T&&S&&(T=this._addTile(P)),T&&(o[P.key]=P,S=T.wasRequested(),T.hasData())))break}}return o}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const o=[];let l,u=this._tiles[e].tileID;for(;u.overscaledZ>0;){if(u.key in this._loadedParentTiles){l=this._loadedParentTiles[u.key];break}o.push(u.key);const f=u.scaledTo(u.overscaledZ-1);if(l=this._getLoadedTile(f),l)break;u=f}for(const f of o)this._loadedParentTiles[f]=l}}_addTile(e){let o=this._tiles[e.key];if(o)return this._source.prepareTile&&this._source.prepareTile(o),o;o=this._cache.getAndRemove(e),o&&(this._setTileReloadTimer(e.key,o),o.tileID=e,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,o)));const l=Boolean(o);if(!l){const u=this.map?this.map.painter:null;o=new Of(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,u,this._isRaster),this._source.prepareTile&&this._source.prepareTile(o)||this._loadTile(o,this._tileLoaded.bind(this,o,e.key,o.state))}return o?(o.uses++,this._tiles[e.key]=o,l||this._source.fire(new Nt("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o):null}_setTileReloadTimer(e,o){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const l=o.getExpiryTimeout();l&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},l))}_removeTile(e){const o=this._tiles[e];o&&(o.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),o.uses>0||(o.hasData()&&"reloading"!==o.state?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,o,l){const u=[],f=this.transform;if(!f)return u;const _="globe"===f.projection.name,x=Wo(f.center.lng);for(const A in this._tiles){const w=this._tiles[A];if(l&&w.clearQueryDebugViz(),w.holdingForFade())continue;let T;if(_){const S=w.tileID.canonical;if(0===S.z){const D=[Math.abs(_t(x,...hu(S,-1))-x),Math.abs(_t(x,...hu(S,1))-x)];T=[0,2*D.indexOf(Math.min(...D))-1]}else{const D=[Math.abs(_t(x,...hu(S,-1))-x),Math.abs(_t(x,...hu(S,0))-x),Math.abs(_t(x,...hu(S,1))-x)];T=[D.indexOf(Math.min(...D))-1]}}else T=[0];for(const S of T){const D=e.containsTile(w,f,o,S);D&&u.push(D)}}return u}getVisibleCoordinates(e){const o=this.getRenderableIds(e).map(l=>this._tiles[l].tileID);for(const l of o)l.projMatrix=this.transform.calculateProjMatrix(l.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(Dg(this._source.type))for(const e in this._tiles){const o=this._tiles[e];if(void 0!==o.fadeEndTime&&o.fadeEndTime>=sn.now())return!0}return!1}setFeatureState(e,o,l){this._state.updateState(e=e||"_geojsonTileLayer",o,l)}removeFeatureState(e,o,l){this._state.removeFeatureState(e=e||"_geojsonTileLayer",o,l)}getFeatureState(e,o){return this._state.getState(e=e||"_geojsonTileLayer",o)}setDependencies(e,o,l){const u=this._tiles[e];u&&u.setDependencies(o,l)}reloadTilesForDependencies(e,o){for(const l in this._tiles)this._tiles[l].hasDependency(e,o)&&this._reloadTile(+l,"reloading");this._cache.filter(l=>!l.hasDependency(e,o))}_preloadTiles(e,o){const l=new Map,u=Array.isArray(e)?e:[e],f=this.map.painter.terrain,_=this.usedForTerrain&&f?f.getScaledDemTileSize():this._source.tileSize;for(const x of u){const A=x.coveringTiles({tileSize:_,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const w of A)l.set(w.key,w);this.usedForTerrain&&x.updateElevation(!1)}an(Array.from(l.values()),(x,A)=>{const w=new Of(x,this._source.tileSize*x.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(w,T=>{"raster-dem"===this._source.type&&w.dem&&this._backfillDEM(w),A(T,w)})},o)}}function Sg(n,e){const o=Math.abs(2*n.wrap)-+(n.wrap<0),l=Math.abs(2*e.wrap)-+(e.wrap<0);return n.overscaledZ-e.overscaledZ||l-o||e.canonical.y-n.canonical.y||e.canonical.x-n.canonical.x}function Dg(n){return"raster"===n||"image"===n||"video"===n}function hu(n,e){const o=1<<n.z;return[n.x/o+e,(n.x+1)/o+e]}_l.maxOverzooming=10,_l.maxUnderzooming=3;class Xh{constructor(e,o,l){this._demTile=e,this._dem=this._demTile.dem,this._scale=o,this._offset=l}static create(e,o,l){const u=l||e.findDEMTileFor(o);if(!u||!u.dem)return;const f=u.dem,_=u.tileID,x=1<<o.canonical.z-_.canonical.z;return new Xh(u,u.tileSize/rt/x,[(o.canonical.x/x-_.canonical.x)*f.dim,(o.canonical.y/x-_.canonical.y)*f.dim])}tileCoordToPixel(e,o){const l=o*this._scale+this._offset[1],u=Math.floor(e*this._scale+this._offset[0]),f=Math.floor(l);return new Ue(u,f)}getElevationAt(e,o,l,u){const f=e*this._scale+this._offset[0],_=o*this._scale+this._offset[1],x=Math.floor(f),A=Math.floor(_),w=this._dem;return u=!!u,l?Ot(Ot(w.get(x,A,u),w.get(x,A+1,u),_-A),Ot(w.get(x+1,A,u),w.get(x+1,A+1,u),_-A),f-x):w.get(x,A,u)}getElevationAtPixel(e,o,l){return this._dem.get(e,o,!!l)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Zn(1,e)*this._dem.stride}}class Bg{constructor(e,o){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Ya(rt,16,0),this.featureIndexArray=new fp,this.promoteId=o}insert(e,o,l,u,f,_=0){const x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,u,f,_);const A=this.grid;for(let w=0;w<o.length;w++){const T=o[w],S=[1/0,1/0,-1/0,-1/0];for(let D=0;D<T.length;D++){const P=T[D];S[0]=Math.min(S[0],P.x),S[1]=Math.min(S[1],P.y),S[2]=Math.max(S[2],P.x),S[3]=Math.max(S[3],P.y)}S[0]<rt&&S[1]<rt&&S[2]>=0&&S[3]>=0&&A.insert(x,S[0],S[1],S[2],S[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new ss.VectorTile(new kc(this.rawTileData)).layers,this.sourceLayerCoder=new Lf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,o,l,u){this.loadVTLayers();const f=e.params||{},_=hr(f.filter),x=e.tileResult,A=e.transform,w=x.bufferedTilespaceBounds,T=this.grid.query(w.min.x,w.min.y,w.max.x,w.max.y,(F,z,q,W)=>Tp(x.bufferedTilespaceGeometry,F,z,q,W));T.sort(p_);let S=null;A.elevation&&T.length>0&&(S=Xh.create(A.elevation,this.tileID));const D={};let P;for(let F=0;F<T.length;F++){const z=T[F];if(z===P)continue;P=z;const q=this.featureIndexArray.get(z);let W=null;this.loadMatchingFeature(D,q,_,f.layers,f.availableImages,o,l,u,(re,oe,ae,ce=0)=>(W||(W=ao(re,this.tileID.canonical,e.tileTransform)),oe.queryIntersectsFeature(x,re,ae,W,this.z,e.transform,e.pixelPosMatrix,S,ce)))}return D}loadMatchingFeature(e,o,l,u,f,_,x,A,w){const{featureIndex:T,bucketIndex:S,sourceLayerIndex:D,layoutVertexArrayOffset:P}=o,F=this.bucketLayerIDs[S];if(u&&!function(re,oe){for(let ae=0;ae<re.length;ae++)if(oe.indexOf(re[ae])>=0)return!0;return!1}(u,F))return;const z=this.sourceLayerCoder.decode(D),q=this.vtLayers[z].feature(T);if(l.needGeometry){const re=ra(q,!0);if(!l.filter(new j(this.tileID.overscaledZ),re,this.tileID.canonical))return}else if(!l.filter(new j(this.tileID.overscaledZ),q))return;const W=this.getId(q,z);for(let re=0;re<F.length;re++){const oe=F[re];if(u&&u.indexOf(oe)<0)continue;const ae=_[oe];if(!ae)continue;let ce={};void 0!==W&&A&&(ce=A.getState(ae.sourceLayer||"_geojsonTileLayer",W));const ue=fi({},x[oe]);ue.paint=kg(ue.paint,ae.paint,q,ce,f),ue.layout=kg(ue.layout,ae.layout,q,ce,f);const Ae=!w||w(q,ae,ce,P);if(!Ae)continue;const be=new Yh(q,this.z,this.x,this.y,W);be.layer=ue;let Se=e[oe];void 0===Se&&(Se=e[oe]=[]),Se.push({featureIndex:T,feature:be,intersectionZ:Ae})}}lookupSymbolFeatures(e,o,l,u,f,_,x,A){const w={};this.loadVTLayers();const T=hr(f);for(const S of e)this.loadMatchingFeature(w,{bucketIndex:l,sourceLayerIndex:u,featureIndex:S,layoutVertexArrayOffset:0},T,_,x,A,o);return w}loadFeature(e){const{featureIndex:o,sourceLayerIndex:l}=e;this.loadVTLayers();const u=this.sourceLayerCoder.decode(l),f=this.vtFeatures[u];if(f[o])return f[o];const _=this.vtLayers[u].feature(o);return f[o]=_,_}hasLayer(e){for(const o of this.bucketLayerIDs)for(const l of o)if(e===l)return!0;return!1}getId(e,o){let l=e.id;return this.promoteId&&(l=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[o]],"boolean"==typeof l&&(l=Number(l))),l}}function kg(n,e,o,l,u){return Bi(n,(f,_)=>{const x=e instanceof Le?e.get(_):null;return x&&x.evaluate?x.evaluate(o,l,u):x})}function p_(n,e){return e-n}Je(Bg,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class Pg{constructor(e){const o={},l=[];for(const x in e){const A=e[x],w=o[x]={};for(const T in A.glyphs){const S=A.glyphs[+T];if(!S||0===S.bitmap.width||0===S.bitmap.height)continue;const D=S.metrics.localGlyph?2:1,P={x:0,y:0,w:S.bitmap.width+2*D,h:S.bitmap.height+2*D};l.push(P),w[T]=P}}const{w:u,h:f}=Mh(l),_=new Eo({width:u||1,height:f||1});for(const x in e){const A=e[x];for(const w in A.glyphs){const T=A.glyphs[+w];if(!T||0===T.bitmap.width||0===T.bitmap.height)continue;const S=o[x][w],D=T.metrics.localGlyph?2:1;Eo.copy(T.bitmap,_,{x:0,y:0},{x:S.x+D,y:S.y+D},T.bitmap)}}this.image=_,this.positions=o}}Je(Pg,"GlyphAtlas");class f_{constructor(e){this.tileID=new Hi(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=ds(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,o,l,u,f){this.status="parsing",this.data=e,this.collisionBoxArray=new Hu;const _=new Lf(Object.keys(e.layers).sort()),x=new Bg(this.tileID,this.promoteId);x.bucketLayerIDs=[];const A={},w=new Ff(256,256),T={featureIndex:x,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:w,availableImages:l},S=o.familiesBySource[this.source];for(const ce in S){const ue=e.layers[ce];if(!ue)continue;let Ae=!1,be=!1;for(const ye of S[ce])"symbol"===ye[0].type?Ae=!0:be=!0;if(!0===this.isSymbolTile&&!Ae||!1===this.isSymbolTile&&!be)continue;1===ue.version&&Ai(`Vector tile source "${this.source}" layer "${ce}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Se=_.encode(ce),Ie=[];for(let ye=0;ye<ue.length;ye++){const Te=ue.feature(ye),ke=x.getId(Te,ce);Ie.push({feature:Te,id:ke,index:ye,sourceLayerIndex:Se})}for(const ye of S[ce]){const Te=ye[0];void 0!==this.isSymbolTile&&"symbol"===Te.type!==this.isSymbolTile||Te.minzoom&&this.zoom<Math.floor(Te.minzoom)||Te.maxzoom&&this.zoom>=Te.maxzoom||"none"!==Te.visibility&&(Hf(ye,this.zoom,l),(A[Te.id]=Te.createBucket({index:x.bucketLayerIDs.length,layers:ye,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Se,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:l})).populate(Ie,T,this.tileID.canonical,this.tileTransform),x.bucketLayerIDs.push(ye.map(ke=>ke.id)))}}let D,P,F,z;w.trim();const q={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},W=Bi(T.glyphDependencies,ce=>Object.keys(ce).map(Number));Object.keys(W).length?u.send("getGlyphs",{uid:this.uid,stacks:W},(ce,ue)=>{D||(D=ce,P=ue,ae.call(this))},void 0,!1,q):P={};const re=Object.keys(T.iconDependencies);re.length?u.send("getImages",{icons:re,source:this.source,tileID:this.tileID,type:"icons"},(ce,ue)=>{D||(D=ce,F=ue,ae.call(this))},void 0,!1,q):F={};const oe=Object.keys(T.patternDependencies);function ae(){if(D)return f(D);if(P&&F&&z){const ce=new Pg(P),ue=new Wm(F,z);for(const Ae in A){const be=A[Ae];be instanceof Do?(Hf(be.layers,this.zoom,l),ig(be,P,ce.positions,F,ue.iconPositions,this.showCollisionBoxes,l,this.tileID.canonical,this.tileZoom,this.projection)):be.hasPattern&&(be instanceof Zd||be instanceof Mc||be instanceof Ud)&&(Hf(be.layers,this.zoom,l),be.addFeatures(T,this.tileID.canonical,ue.patternPositions,l,this.tileTransform))}this.status="done",f(null,{buckets:ir(A).filter(Ae=>!Ae.isEmpty()),featureIndex:x,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ce.image,lineAtlas:w,imageAtlas:ue,glyphMap:this.returnDependencies?P:null,iconMap:this.returnDependencies?F:null,glyphPositions:this.returnDependencies?ce.positions:null})}}oe.length?u.send("getImages",{icons:oe,source:this.source,tileID:this.tileID,type:"patterns"},(ce,ue)=>{D||(D=ce,z=ue,ae.call(this))},void 0,!1,q):z={},ae.call(this)}}function Hf(n,e,o){const l=new j(e);for(const u of n)u.recalculate(l,o)}class Ig{constructor(e){this.entries={},this.scheduler=e}request(e,o,l,u){const f=this.entries[e]=this.entries[e]||{callbacks:[]};if(f.result){const[_,x]=f.result;return this.scheduler?this.scheduler.add(()=>{u(_,x)},o):u(_,x),()=>{}}return f.callbacks.push(u),f.cancel||(f.cancel=l((_,x)=>{f.result=[_,x];for(const A of f.callbacks)this.scheduler?this.scheduler.add(()=>{A(_,x)},o):A(_,x);setTimeout(()=>delete this.entries[e],3e3)})),()=>{f.result||(f.callbacks=f.callbacks.filter(_=>_!==u),f.callbacks.length||(f.cancel(),delete this.entries[e]))}}}function Fg(n,e,o){const l=JSON.stringify(n.request);return n.data&&(this.deduped.entries[l]={result:[null,n.data]}),this.deduped.request(l,{type:"parseTile",isSymbolTile:n.isSymbolTile,zoom:n.tileZoom},u=>{const f=de(n.request,(_,x,A,w)=>{_?u(_):x&&u(null,{vectorTile:o?void 0:new ss.VectorTile(new kc(x)),rawData:x,cacheControl:A,expires:w})});return()=>{f.cancel(),u()}},e)}h.ARRAY_TYPE=In,h.AUTH_ERR_MSG=Cn,h.Aabb=qn,h.Actor=class{constructor(n,e,o){this.target=n,this.parent=e,this.mapId=o,this.callbacks={},this.cancelCallbacks={},Kn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ji()?n:Oe,this.scheduler=new qh}send(n,e,o,l,u=!1,f){const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(o.metadata=f,this.callbacks[_]=o);const x=Br(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:n,hasCallback:!!o,targetMapId:l,mustQueue:u,sourceMapId:this.mapId,data:qs(e,x)},x),{cancel:()=>{o&&delete this.callbacks[_],this.target.postMessage({id:_,type:"<cancel>",targetMapId:l,sourceMapId:this.mapId})}}}receive(n){const e=n.data,o=e.id;if(o&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const l=this.cancelCallbacks[o];delete this.cancelCallbacks[o],l&&l.cancel()}else if(e.mustQueue||Ji()){const l=this.callbacks[o];this.cancelCallbacks[o]=this.scheduler.add(()=>this.processTask(o,e),l&&l.metadata||{type:"message"})}else this.processTask(o,e)}processTask(n,e){if("<response>"===e.type){const o=this.callbacks[n];delete this.callbacks[n],o&&(e.error?o(Ys(e.error)):o(null,Ys(e.data)))}else{const o=Br(this.globalScope)?void 0:[],l=e.hasCallback?(f,_)=>{delete this.cancelCallbacks[n],this.target.postMessage({id:n,type:"<response>",sourceMapId:this.mapId,error:f?qs(f):null,data:qs(_,o)},o)}:f=>{},u=Ys(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,u,l);else if(this.parent.getWorkerSource){const f=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,f[0],u.source)[f[1]](u,l)}else l(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},h.CanonicalTileID=_h,h.Color=bi,h.ColorMode=Jo,h.CullFaceMode=Ko,h.DEMData=du,h.DataConstantProperty=ie,h.DedupedRequest=Ig,h.DepthMode=Gc,h.EXTENT=rt,h.Elevation=class{isDataAvailableAtPoint(n){const e=this._source();if(!e||n.y<0||n.y>1)return!1;const o=e.getSource().maxzoom,l=1<<o,u=Math.floor(n.x),f=Math.floor((n.x-u)*l),_=Math.floor(n.y*l),x=this.findDEMTileFor(new Hi(o,u,o,f,_));return!(!x||!x.dem)}getAtPointOrZero(n,e=0){return this.getAtPoint(n,e)||0}getAtPoint(n,e,o=!0){null==e&&(e=null);const l=this._source();if(!l||n.y<0||n.y>1)return e;const u=l.getSource().maxzoom,f=1<<u,_=Math.floor(n.x),x=n.x-_,A=new Hi(u,_,u,Math.floor(x*f),Math.floor(n.y*f)),w=this.findDEMTileFor(A);if(!w||!w.dem)return e;const T=w.dem,S=1<<w.tileID.canonical.z,D=(x*S-w.tileID.canonical.x)*T.dim,P=(n.y*S-w.tileID.canonical.y)*T.dim,F=Math.floor(D),z=Math.floor(P);return(o?this.exaggeration():1)*Ot(Ot(T.get(F,z),T.get(F,z+1),P-z),Ot(T.get(F+1,z),T.get(F+1,z+1),P-z),D-F)}getAtTileOffset(n,e,o){const l=1<<n.canonical.z;return this.getAtPointOrZero(new $a(n.wrap+(n.canonical.x+e/rt)/l,(n.canonical.y+o/rt)/l))}getAtTileOffsetFunc(n,e,o,l){return u=>{const f=this.getAtTileOffset(n,u.x,u.y),_=l.upVector(n.canonical,u.x,u.y);return yr(_,_,f*l.upVectorScale(n.canonical,e,o).metersToTile),_}}getForTilePoints(n,e,o,l){const u=Xh.create(this,n,l);return!!u&&(e.forEach(f=>{f[2]=this.exaggeration()*u.getElevationAt(f[0],f[1],o)}),!0)}getMinMaxForTile(n){const e=this.findDEMTileFor(n);if(!e||!e.dem)return null;const o=e.dem.tree,l=e.tileID,u=1<<n.canonical.z-l.canonical.z;let f=n.canonical.x/u-l.canonical.x,_=n.canonical.y/u-l.canonical.y,x=0;for(let A=0;A<n.canonical.z-l.canonical.z&&!o.leaves[x];A++){f*=2,_*=2;const w=2*Math.floor(_)+Math.floor(f);x=o.childOffsets[x]+w,f%=1,_%=1}return{min:this.exaggeration()*o.minimums[x],max:this.exaggeration()*o.maximums[x]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(n,e,o){throw new Error("Pure virtual method called.")}pointCoordinate(n){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(n){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},h.ErrorEvent=ii,h.EvaluationParameters=j,h.Event=Nt,h.Evented=jt,h.FillExtrusionBucket=Ud,h.Frustum=vc,h.FrustumCorners=Pd,h.GLOBE_METERS_TO_ECEF=Lh,h.GLOBE_RADIUS=ml,h.GLOBE_SCALE_MATCH_LATITUDE=45,h.GLOBE_ZOOM_THRESHOLD_MAX=6,h.GLOBE_ZOOM_THRESHOLD_MIN=5,h.GlobeSharedBuffers=class{constructor(n){this._createGrid(n),this._createPoles(n)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const n of this._poleSegments)n.destroy();for(const n of this._gridSegments)n.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const n of this._wireframeSegments)n.destroy()}}_createGrid(n){const e=new ut,o=new _i,l=65;for(let u=0;u<l;u++)for(let f=0;f<l;f++)e.emplaceBack(f,u);this._gridSegments=[];for(let u=0,f=0;u<cs.length;u++){const _=cs[u];for(let A=0;A<_;A++)for(let w=0;w<64;w++){const T=A*l+w;o.emplaceBack(T+1,T,T+l),o.emplaceBack(T+l,T+l+1,T+1)}const x=64*_*2;this._gridSegments.push(yi.simpleSegment(0,f,(_+1)*l,x)),f+=x}this._gridBuffer=n.createVertexBuffer(e,eu.members),this._gridIndexBuffer=n.createIndexBuffer(o,!0)}_createPoles(n){const e=new _i;for(let u=0;u<=64;u++)e.emplaceBack(0,u+1,u+2);this._poleIndexBuffer=n.createIndexBuffer(e,!0);const o=new Kr,l=new Kr;this._poleSegments=[];for(let u=0,f=0;u<5;u++){const _=1<<u,x=512*_/Math.PI/2,A=360/_;o.emplaceBack(0,-x,0,0,0,.5,0),l.emplaceBack(0,-x,0,0,0,.5,1);for(let w=0;w<=64;w++){const T=w/64,S=Ot(0,A,T),[D,P,F]=Oh(cg,dg,S,x);o.emplaceBack(D,P,F,0,0,T,0),l.emplaceBack(D,P,F,0,0,T,1)}this._poleSegments.push(yi.simpleSegment(f,0,66,64)),f+=66}this._poleNorthVertexBuffer=n.createVertexBuffer(o,og,!1),this._poleSouthVertexBuffer=n.createVertexBuffer(l,og,!1)}getGridBuffers(n){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[n]]}getPoleBuffers(n){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[n]]}getWirefameBuffers(n,e){if(!this._wireframeSegments){const o=new Pn,l=64,u=l+1;this._wireframeSegments=[];for(let f=0,_=0;f<cs.length;f++){const x=cs[f];for(let w=0;w<x;w++)for(let T=0;T<l;T++){const S=w*u+T;o.emplaceBack(S,S+1),o.emplaceBack(S,S+u),o.emplaceBack(S,S+u+1)}const A=x*l*3;this._wireframeSegments.push(yi.simpleSegment(0,_,(x+1)*u,A)),_+=A}this._wireframeIndexBuffer=n.createIndexBuffer(o)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}},h.GlyphManager=Fc,h.ImagePosition=Th,h.LineAtlas=Ff,h.LngLat=qt,h.LngLatBounds=mr,h.LocalGlyphMode=xf,h.MAX_MERCATOR_LATITUDE=Co,h.MercatorCoordinate=$a,h.ONE_EM=24,h.OverscaledTileID=Hi,h.Properties=ze,h.RGBAImage=yn,h.Ray=ol,h.RequestManager=class{constructor(n,e,o){this._transformRequestFn=n,this._customAccessToken=e,this._silenceAuthErrors=!!o,this._createSkuToken()}_createSkuToken(){const n=function(){let e="";for(let o=0;o<10;o++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",gs,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=n.token,this._skuTokenExpiresAt=n.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(n,e){return this._transformRequestFn&&this._transformRequestFn(n,e)||{url:n}}normalizeStyleURL(n,e){if(!ho(n))return n;const o=Mn(n);return o.path=`/styles/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||e)}normalizeGlyphsURL(n,e){if(!ho(n))return n;const o=Mn(n);return o.path=`/fonts/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||e)}normalizeSourceURL(n,e,o,l){if(!ho(n))return n;const u=Mn(n);return u.path=`/v4/${u.authority}.json`,u.params.push("secure"),o&&u.params.push(`language=${o}`),l&&u.params.push(`worldview=${l}`),this._makeAPIURL(u,this._customAccessToken||e)}normalizeSpriteURL(n,e,o,l){const u=Mn(n);return ho(n)?(u.path=`/styles/v1${u.path}/sprite${e}${o}`,this._makeAPIURL(u,this._customAccessToken||l)):(u.path+=`${e}${o}`,Vo(u))}normalizeTileURL(n,e,o){if(this._isSkuTokenExpired()&&this._createSkuToken(),n&&!ho(n))return n;const l=Mn(n);l.path=l.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||o&&"raster"!==l.authority&&512===o?"@2x":""}${or.supported?".webp":"$1"}`),"raster"===l.authority?l.path=`/${Tt.RASTER_URL_PREFIX}${l.path}`:(l.path=l.path.replace(/^.+\/v4\//,"/"),l.path=`/${Tt.TILE_URL_VERSION}${l.path}`);const u=this._customAccessToken||function(f){for(const _ of f){const x=_.match(/^access_token=(.*)$/);if(x)return x[1]}return null}(l.params)||Tt.ACCESS_TOKEN;return Tt.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&l.params.push(`sku=${this._skuToken}`),this._makeAPIURL(l,u)}canonicalizeTileURL(n,e){const o=Mn(n);if(!o.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!o.path.match(/\.[\w]+$/))return n;let l="mapbox://";o.path.match(/^\/raster\/v1\//)?l+=`raster/${o.path.replace(`/${Tt.RASTER_URL_PREFIX}/`,"")}`:l+=`tiles/${o.path.replace(`/${Tt.TILE_URL_VERSION}/`,"")}`;let u=o.params;return e&&(u=u.filter(f=>!f.match(/^access_token=/))),u.length&&(l+=`?${u.join("&")}`),l}canonicalizeTileset(n,e){const o=!!e&&ho(e),l=[];for(const u of n.tiles||[])Fr(u)?l.push(this.canonicalizeTileURL(u,o)):l.push(u);return l}_makeAPIURL(n,e){const o="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",l=Mn(Tt.API_URL);if(n.protocol=l.protocol,n.authority=l.authority,"http"===n.protocol){const u=n.params.indexOf("secure");u>=0&&n.params.splice(u,1)}if("/"!==l.path&&(n.path=`${l.path}${n.path}`),!Tt.REQUIRE_ACCESS_TOKEN)return Vo(n);if(e=e||Tt.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${o}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${o}`)}return n.params=n.params.filter(u=>-1===u.indexOf("access_token")),n.params.push(`access_token=${e||""}`),Vo(n)}},h.ResourceType=ee,h.SegmentVector=yi,h.SourceCache=_l,h.StencilMode=Wh,h.StructArrayLayout1ui2=vo,h.StructArrayLayout2f1f2i16=Di,h.StructArrayLayout2i4=ut,h.StructArrayLayout2ui4=Pn,h.StructArrayLayout3f12=$t,h.StructArrayLayout3ui6=_i,h.StructArrayLayout4i8=dt,h.StructArrayLayout5f20=fr,h.Texture=gl,h.Tile=Of,h.Transitionable=$,h.Uniform1f=Ju,h.Uniform1i=class extends ta{constructor(n,e){super(n,e),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},h.Uniform2f=class extends ta{constructor(n,e){super(n,e),this.current=[0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1]))}},h.Uniform3f=class extends ta{constructor(n,e){super(n,e),this.current=[0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2]))}},h.Uniform4f=cm,h.UniformColor=Ku,h.UniformMatrix2f=class extends ta{constructor(n,e){super(n,e),this.current=Ug}set(n){for(let e=0;e<4;e++)if(n[e]!==this.current[e]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}},h.UniformMatrix3f=class extends ta{constructor(n,e){super(n,e),this.current=Ng}set(n){for(let e=0;e<9;e++)if(n[e]!==this.current[e]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}},h.UniformMatrix4f=class extends ta{constructor(n,e){super(n,e),this.current=Vg}set(n){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let e=1;e<16;e++)if(n[e]!==this.current[e]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}},h.UnwrappedTileID=Fm,h.ValidationError=Xe,h.VectorTileWorkerSource=class extends jt{constructor(n,e,o,l,u){super(),this.actor=n,this.layerIndex=e,this.availableImages=o,this.loadVectorData=u||Fg,this.loading={},this.loaded={},this.deduped=new Ig(n.scheduler),this.isSpriteLoaded=l,this.scheduler=n.scheduler}loadTile(n,e){const o=n.uid,l=n&&n.request,u=l&&l.collectResourceTiming,f=this.loading[o]=new f_(n);f.abort=this.loadVectorData(n,(_,x)=>{const A=!this.loading[o];if(delete this.loading[o],A||_||!x)return f.status="done",A||(this.loaded[o]=f),e(_);const w=x.rawData,T={};x.expires&&(T.expires=x.expires),x.cacheControl&&(T.cacheControl=x.cacheControl),f.vectorTile=x.vectorTile||new ss.VectorTile(new kc(w));const S=()=>{f.parse(f.vectorTile,this.layerIndex,this.availableImages,this.actor,(D,P)=>{if(D||!P)return e(D);const F={};if(u){const z=$n(l);z.length>0&&(F.resourceTiming=JSON.parse(JSON.stringify(z)))}e(null,fi({rawTileData:w.slice(0)},P,T,F))})};this.isSpriteLoaded?S():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(S,{type:"parseTile",isSymbolTile:n.isSymbolTile,zoom:n.tileZoom}):S()}),this.loaded=this.loaded||{},this.loaded[o]=f})}reloadTile(n,e){const o=this.loaded,l=n.uid,u=this;if(o&&o[l]){const f=o[l];f.showCollisionBoxes=n.showCollisionBoxes,f.enableTerrain=!!n.enableTerrain,f.projection=n.projection,f.tileTransform=ds(n.tileID.canonical,n.projection);const _=(x,A)=>{const w=f.reloadCallback;w&&(delete f.reloadCallback,f.parse(f.vectorTile,u.layerIndex,this.availableImages,u.actor,w)),e(x,A)};"parsing"===f.status?f.reloadCallback=_:"done"===f.status&&(f.vectorTile?f.parse(f.vectorTile,this.layerIndex,this.availableImages,this.actor,_):_())}}abortTile(n,e){const o=n.uid,l=this.loading[o];l&&(l.abort&&l.abort(),delete this.loading[o]),e()}removeTile(n,e){const o=this.loaded,l=n.uid;o&&o[l]&&delete o[l],e()}},h.WritingMode=Yn,h.ZoomHistory=Ru,h.add=_r,h.addDynamicAttributes=Uc,h.adjoint=function(n,e){var o=e[0],l=e[1],u=e[2],f=e[3],_=e[4],x=e[5],A=e[6],w=e[7],T=e[8];return n[0]=_*T-x*w,n[1]=u*w-l*T,n[2]=l*x-u*_,n[3]=x*A-f*T,n[4]=o*T-u*A,n[5]=u*f-o*x,n[6]=f*w-_*A,n[7]=l*A-o*w,n[8]=o*_-l*f,n},h.asyncAll=an,h.bezier=Er,h.bindAll=Kn,h.boundsAttributes=Rf,h.bufferConvexPolygon=function(n,e){const o=[];for(let l=0;l<n.length;l++){const u=Rn(l-1,-1,n.length-1),f=Rn(l+1,-1,n.length-1),_=n[l],x=n[f],A=n[u].sub(_).unit(),w=x.sub(_).unit(),T=w.angleWithSep(A.x,A.y),S=A.add(w).unit().mult(-1*e/Math.sin(T/2));o.push(_.add(S))}return o},h.cacheEntryPossiblyAdded=function(n){Y++,Y>Dl&&(n.getActor().send("enforceCacheSizeLimit",Aa),Y=0)},h.calculateGlobeLabelMatrix=function(n,e){const{x:o,y:l}=n.point,u=Tf(o,l,n.worldSize/n._projectionScaler,0,0);return Mo(u,u,sg(So(e)))},h.calculateGlobeMatrix=function(n){const{x:e,y:o}=n.point,{lng:l,lat:u}=n._center;return Tf(e,o,n.worldSize,l,u)},h.calculateGlobeMercatorMatrix=function(n){const e=n.worldSize,o=n.point,l=Zn(1,n.center.lat)*e,u=n.pixelsPerMeter,f=e/(l/n.pixelsPerMeter),_=Fn(new Float64Array(16));return To(_,_,[o.x,o.y,0]),jn(_,_,[f,f,u]),Float32Array.from(_)},h.circumferenceAtLatitude=bd,h.clamp=_t,h.clearTileCache=function(n){const e=[];for(const o in mn)e.push(Oe.caches.delete(o)),delete mn[o];n&&Promise.all(e).catch(n).then(()=>n())},h.clipLine=kh,h.clone=function(n){var e=new In(16);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},h.clone$1=vi,h.collisionCircleLayout=tf,h.config=Tt,h.conjugate=function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3],n},h.create=function(){var n=new In(16);return In!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n},h.create$1=Ep,h.createExpression=qr,h.createLayout=Ye,h.createStyleLayer=function(n){return"custom"===n.type?new vg(n):new bg[n.type](n)},h.cross=xc,h.degToRad=st,h.distance=function(n,e){return Math.hypot(e[0]-n[0],e[1]-n[1],e[2]-n[2])},h.div=function(n,e,o){return n[0]=e[0]/o[0],n[1]=e[1]/o[1],n[2]=e[2]/o[2],n},h.dot=Hn,h.ease=Xn,h.easeCubicInOut=Tr,h.emitValidationErrors=Iu,h.endsWith=wt,h.enforceCacheSizeLimit=function(n){for(const e in mn)X(e),mn[e].then(o=>{o.keys().then(l=>{for(let u=0;u<l.length-n;u++)o.delete(l[u])})})},h.evaluateSizeForFeature=hl,h.evaluateSizeForZoom=xr,h.evaluateVariableOffset=Ph,h.evented=U,h.exactEquals=function(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]},h.exactEquals$1=function(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]},h.exported=sn,h.exported$1=or,h.extend=fi,h.extend$1=Tn,h.fillExtrusionHeightLift=Qp,h.filterObject=Io,h.fromMat4=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],n},h.fromQuat=function(n,e){var o=e[0],l=e[1],u=e[2],f=e[3],_=o+o,x=l+l,A=u+u,w=o*_,T=l*_,S=l*x,D=u*_,P=u*x,F=u*A,z=f*_,q=f*x,W=f*A;return n[0]=1-S-F,n[1]=T+W,n[2]=D-q,n[3]=0,n[4]=T-W,n[5]=1-w-F,n[6]=P+z,n[7]=0,n[8]=D+q,n[9]=P-z,n[10]=1-w-S,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},h.fromRotation=function(n,e){var o=Math.sin(e),l=Math.cos(e);return n[0]=l,n[1]=o,n[2]=0,n[3]=-o,n[4]=l,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},h.fromScaling=function(n,e){return n[0]=e[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},h.furthestTileCorner=function(n){const e=Math.round((n+45+360)%360/90)%4;return so[e]},h.getAABBPointSquareDist=function(n,e,o){let l=0;for(let u=0;u<2;++u){const f=o?o[u]:0;n[u]>f&&(l+=(n[u]-f)*(n[u]-f)),e[u]<f&&(l+=(f-e[u])*(f-e[u]))}return l},h.getAnchorAlignment=Bh,h.getAnchorJustification=Af,h.getBounds=function(n){let e=1/0,o=1/0,l=-1/0,u=-1/0;for(const f of n)e=Math.min(e,f.x),o=Math.min(o,f.y),l=Math.max(l,f.x),u=Math.max(u,f.y);return{min:new Ue(e,o),max:new Ue(l,u)}},h.getColumn=Lo,h.getGridMatrix=function(n,e,o){const[l,u]=e,f=.015625;return[0,(u[1]-l[1])*f,1<<n.z,(u[0]-l[0])/cs[o],0,n.y,l[0],l[1],f]},h.getImage=ot,h.getJSON=function(n,e){return pe(fi(n,{type:"json"}),e)},h.getLatitudinalLod=function(n){const e=80.051129;n=_t(n,-80.051129,e)/e*90;const o=Math.pow(Math.abs(Math.sin(st(n))),3);return Math.round(o*(cs.length-1))},h.getMapSessionAPI=jc,h.getPerformanceMeasurement=$n,h.getProjection=kf,h.getRTLTextPluginStatus=K,h.getReferrer=me,h.getTilePoint=function(n,{x:e,y:o},l=0){return new Ue(((e-l)*n.scale-n.x)*rt,(o*n.scale-n.y)*rt)},h.getTileVec3=function(n,e,o=0){return el(((e.x-o)*n.scale-n.x)*rt,(e.y*n.scale-n.y)*rt,bp(e.z,e.y))},h.getVideo=function(n,e){const o=Oe.document.createElement("video");o.muted=!0,o.onloadstart=function(){e(null,o)};for(let l=0;l<n.length;l++){const u=Oe.document.createElement("source");We(n[l])||(o.crossOrigin="Anonymous"),u.src=n[l],o.appendChild(u)}return{cancel:()=>{}}},h.globeCenterToScreenPoint=function(n){const e=[0,0,0],o=Fn(new Float64Array(16));return Mo(o,n.pixelMatrix,n.globeMatrix),Ii(e,e,o),new Ue(e[0],e[1])},h.globeECEFOrigin=function(n,e){const o=[0,0,0];return Ii(o,o,ua(So(e.canonical))),Ii(o,o,n),o},h.globeNormalizeECEF=ua,h.globePixelsToTileUnits=function(n,e){return rt/(512*Math.pow(2,n))*iu(So(e))},h.globePoleMatrixForTile=function(n,e,o){const l=Fn(new Float64Array(16)),u=1<<n,f=360*(e/u-.5),_=o.point,x=o.worldSize/(o.tileSize*u);return To(l,l,[_.x,_.y,-o.worldSize/Math.PI/2]),jn(l,l,[x,x,x]),es(l,l,st(-o._center.lat)),Md(l,l,st(-o._center.lng+f)),Float32Array.from(l)},h.globeTileBounds=So,h.globeTileLatLngCorners=Rh,h.globeTiltAtLngLat=lg,h.globeToMercatorTransition=Ef,h.globeUseCustomAntiAliasing=function(n,e,o){const l=Ef(o.zoom),u=n.style.map._antialias,f=!!e.extStandardDerivatives,_=e.extStandardDerivativesForceOff||n.terrain&&n.terrain.exaggeration()>0;return 0===l&&!u&&!_&&f},h.identity=Fn,h.identity$1=lh,h.invert=function(n,e){var o=e[0],l=e[1],u=e[2],f=e[3],_=e[4],x=e[5],A=e[6],w=e[7],T=e[8],S=e[9],D=e[10],P=e[11],F=e[12],z=e[13],q=e[14],W=e[15],re=o*x-l*_,oe=o*A-u*_,ae=o*w-f*_,ce=l*A-u*x,ue=l*w-f*x,Ae=u*w-f*A,be=T*z-S*F,Se=T*q-D*F,Ie=T*W-P*F,ye=S*q-D*z,Te=S*W-P*z,ke=D*W-P*q,Fe=re*ke-oe*Te+ae*ye+ce*Ie-ue*Se+Ae*be;return Fe?(n[0]=(x*ke-A*Te+w*ye)*(Fe=1/Fe),n[1]=(u*Te-l*ke-f*ye)*Fe,n[2]=(z*Ae-q*ue+W*ce)*Fe,n[3]=(D*ue-S*Ae-P*ce)*Fe,n[4]=(A*Ie-_*ke-w*Se)*Fe,n[5]=(o*ke-u*Ie+f*Se)*Fe,n[6]=(q*ae-F*Ae-W*oe)*Fe,n[7]=(T*Ae-D*ae+P*oe)*Fe,n[8]=(_*Te-x*Ie+w*be)*Fe,n[9]=(l*Ie-o*Te-f*be)*Fe,n[10]=(F*ue-z*ae+W*re)*Fe,n[11]=(S*ae-T*ue-P*re)*Fe,n[12]=(x*Se-_*ye-A*be)*Fe,n[13]=(o*ye-l*Se+u*be)*Fe,n[14]=(z*oe-F*ce-q*re)*Fe,n[15]=(T*ce-S*oe+D*re)*Fe,n):null},h.isLngLatBehindGlobe=function(n,e){return lg(n,e)>Math.PI/2*1.01},h.isMapAuthenticated=function(n){return rr.has(n)},h.isMapboxURL=ho,h.isSafariWithAntialiasingBug=function(n){const e=n.navigator?n.navigator.userAgent:null;return!!Br(n)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},h.latFromMercatorY=Ti,h.len=il,h.length=$s,h.length$1=function(n){return Math.hypot(n[0],n[1],n[2],n[3])},h.loadVectorTile=Fg,h.makeRequest=pe,h.mapValue=function(n,e,o,l,u){return _t((n-e)/(o-e)*(u-l)+l,l,u)},h.mercatorXfromLng=Wo,h.mercatorYfromLat=oa,h.mercatorZfromAltitude=Zn,h.mul=Ed,h.mul$1=Dd,h.multiply=Mo,h.multiply$1=function(n,e,o){var l=e[0],u=e[1],f=e[2],_=e[3],x=e[4],A=e[5],w=e[6],T=e[7],S=e[8],D=o[0],P=o[1],F=o[2],z=o[3],q=o[4],W=o[5],re=o[6],oe=o[7],ae=o[8];return n[0]=D*l+P*_+F*w,n[1]=D*u+P*x+F*T,n[2]=D*f+P*A+F*S,n[3]=z*l+q*_+W*w,n[4]=z*u+q*x+W*T,n[5]=z*f+q*A+W*S,n[6]=re*l+oe*_+ae*w,n[7]=re*u+oe*x+ae*T,n[8]=re*f+oe*A+ae*S,n},h.multiply$2=gm,h.nextPowerOfTwo=Tl,h.normalize=dn,h.normalize$1=function(n,e){var o=e[0],l=e[1],u=e[2],f=e[3],_=o*o+l*l+u*u+f*f;return _>0&&(_=1/Math.sqrt(_)),n[0]=o*_,n[1]=l*_,n[2]=u*_,n[3]=f*_,n},h.number=Ot,h.ortho=function(n,e,o,l,u,f,_){var x=1/(e-o),A=1/(l-u),w=1/(f-_);return n[0]=-2*x,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*A,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*w,n[11]=0,n[12]=(e+o)*x,n[13]=(u+l)*A,n[14]=(_+f)*w,n[15]=1,n},h.pbf=kc,h.perspective=function(n,e,o,l,u){var f,_=1/Math.tan(e/2);return n[0]=_/o,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=_,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=u&&u!==1/0?(n[10]=(u+l)*(f=1/(l-u)),n[14]=2*u*l*f):(n[10]=-1,n[14]=-2*l),n},h.pick=function(n,e){const o={};for(let l=0;l<e.length;l++){const u=e[l];u in n&&(o[u]=n[u])}return o},h.plugin=Q,h.pointGeometry=Ue,h.polygonContainsPoint=gr,h.polygonIntersectsBox=Tp,h.polygonIntersectsPolygon=cn,h.polygonizeBounds=function(n,e,o=0,l=!0){const u=new Ue(o,o),f=n.sub(u),_=e.add(u),x=[f,new Ue(_.x,f.y),_,new Ue(f.x,_.y)];return l&&x.push(f.clone()),x},h.posAttributes=eu,h.postMapLoadEvent=va,h.postTurnstileEvent=vs,h.potpack=Mh,h.prevPowerOfTwo=function(n){return n<=1?1:Math.pow(2,Math.floor(Math.log(n)/Math.LN2))},h.radToDeg=Xi,h.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],h.registerForPluginStateChange=function(n){return n({pluginStatus:L,pluginURL:V}),U.on("pluginStateChange",n),n},h.removeAuthState=function(n){rr.delete(n)},h.renderColorRamp=Ip,h.resample=ih,h.rotateX=es,h.rotateX$1=kd,h.rotateY=Md,h.rotateY$1=ch,h.rotateZ=function(n,e,o){var l=Math.sin(o),u=Math.cos(o),f=e[0],_=e[1],x=e[2],A=e[3],w=e[4],T=e[5],S=e[6],D=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=f*u+w*l,n[1]=_*u+T*l,n[2]=x*u+S*l,n[3]=A*u+D*l,n[4]=w*u-f*l,n[5]=T*u-_*l,n[6]=S*u-x*l,n[7]=D*u-A*l,n},h.rotateZ$1=function(n,e,o){o*=.5;var l=e[0],u=e[1],f=e[2],_=e[3],x=Math.sin(o),A=Math.cos(o);return n[0]=l*A+u*x,n[1]=u*A-l*x,n[2]=f*A+_*x,n[3]=_*A-f*x,n},h.scale=jn,h.scale$1=nl,h.scale$2=yr,h.scaleAndAdd=tl,h.setCacheLimits=function(n,e){Aa=n,Dl=e},h.setColumn=function(n,e,o){n[4*e+0]=o[0],n[4*e+1]=o[1],n[4*e+2]=o[2],n[4*e+3]=o[3]},h.setRTLTextPlugin=function(n,e,o=!1){if(L===M||L===E||L===k)throw new Error("setRTLTextPlugin cannot be called multiple times.");V=sn.resolveURL(n),L=M,I=e,H(),o||G()},h.smoothstep=rn,h.spec=fe,h.storeAuthState=function(n,e){e?rr.add(n):rr.delete(n)},h.sub=un,h.subtract=sh,h.symbolSize=nf,h.tileAABB=function(n,e,o,l,u,f,_,x,A){if("globe"===A.name)return function ag(n,e,o){const l=e/n.worldSize,u=Number.MAX_VALUE,f=[-u,-u,-u],_=[u,u,u],x=Fn(new Float64Array(16));if(jn(x,x,[l,l,l]),Mo(x,x,n.globeMatrix),o.z<=1){const ye=So(o).getCorners();for(let Te=0;Te<ye.length;Te++)Ii(ye[Te],ye[Te],x),Sd(_,_,ye[Te]),yc(f,f,ye[Te]);return new qn(_,f)}const[A,w]=Rh(o),T=new mr;T.setSouthWest([A[1],w[0]]),T.setNorthEast([w[1],A[0]]);const S=[hn(T.getSouth(),T.getWest()),hn(T.getSouth(),T.getEast()),hn(T.getNorth(),T.getEast()),hn(T.getNorth(),T.getWest())];for(let ye=0;ye<S.length;ye++)Ii(S[ye],S[ye],x),Sd(_,_,S[ye]),yc(f,f,S[ye]);if(T.contains(n.center)){f[2]=0;const ye=n.point,Te=[ye.x*l,ye.y*l,0];return Sd(_,_,Te),yc(f,f,Te),new qn(_,f)}const D=[x[12],x[13],x[14]],P=n.center.lng,F=_t(n.center.lat,-85.051129,Co),z=[Wo(P),oa(F)],q=T.getCenter().lng,W=_t(T.getCenter().lat,-85.051129,Co),re=[Wo(q),oa(W)];let oe=new Array(3),ae=0,ce=z[0]-re[0];const ue=z[1]-re[1];if(ce>.5?ce-=1:ce<-.5&&(ce+=1),Math.abs(ce)>Math.abs(ue))ae=ce>=0?1:3,oe=D;else{ae=ue>=0?0:2;const ye=[x[4],x[5],x[6]];let Te;Te=ue>=0?-Math.sin(st(T.getSouth()))*ml:-Math.sin(st(T.getNorth()))*ml,oe=tl(oe,D,ye,Te)}const Ae=S[ae],be=S[(ae+1)%4],Se=new Cf(Ae,be,oe),Ie=[tu(Se,0)||Ae[0],tu(Se,1)||Ae[1],tu(Se,2)||Ae[2]];return _[2]=Math.min(Ae[2],be[2]),Sd(_,_,Ie),yc(f,f,Ie),new qn(_,f)}(n,e,new _h(o,l,u));const w=ds({z:o,x:l,y:u},A);return new qn([(f+w.x/w.scale)*e,e*(w.y/w.scale),_],[(f+w.x2/w.scale)*e,e*(w.y2/w.scale),x])},h.tileTransform=ds,h.transformMat3=function(n,e,o){var l=e[0],u=e[1],f=e[2];return n[0]=l*o[0]+u*o[3]+f*o[6],n[1]=l*o[1]+u*o[4]+f*o[7],n[2]=l*o[2]+u*o[5]+f*o[8],n},h.transformMat4=Ii,h.transformMat4$1=is,h.transformQuat=_m,h.translate=To,h.transpose=function(n,e){if(n===e){var o=e[1],l=e[2],u=e[5];n[1]=e[3],n[2]=e[6],n[3]=o,n[5]=e[7],n[6]=l,n[7]=u}else n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8];return n},h.triggerPluginCompletionEvent=Z,h.uniqueId=Sr,h.updateGlobeVertexNormal=function(n,e,o,l,u){const f=5*e+2;n.float32[f+0]=o,n.float32[f+1]=l,n.float32[f+2]=u},h.validateCustomStyleLayer=function(n){const e=[],o=n.id;return void 0===o&&e.push({message:`layers.${o}: missing required property "id"`}),void 0===n.render&&e.push({message:`layers.${o}: missing required method "render"`}),n.renderingMode&&"2d"!==n.renderingMode&&"3d"!==n.renderingMode&&e.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),e},h.validateFilter=n=>oo(js(n)),h.validateFog=n=>oo(dd(n)),h.validateLayer=n=>oo(cd(n)),h.validateLight=n=>oo(Hs(n)),h.validateSource=n=>oo(Xl(n)),h.validateStyle=ud,h.validateTerrain=n=>oo(Jl(n)),h.values=ir,h.vectorTile=ss,h.version="2.9.1",h.warnOnce=Ai,h.window=Oe,h.wrap=Rn}),r(0,function(h){function Oe(X){if("number"==typeof X||"boolean"==typeof X||"string"==typeof X||null==X)return JSON.stringify(X);if(Array.isArray(X)){let O="[";for(const Y of X)O+=`${Oe(Y)},`;return`${O}]`}let R="{";for(const O of Object.keys(X).sort())R+=`${O}:${Oe(X[O])},`;return`${R}}`}function tr(X){let R="";for(const O of h.refProperties)R+=`/${Oe(X[O])}`;return R}class Ci{constructor(R){this.keyCache={},R&&this.replace(R)}replace(R){this._layerConfigs={},this._layers={},this.update(R,[])}update(R,O){for(const ee of R)this._layerConfigs[ee.id]=ee,(this._layers[ee.id]=h.createStyleLayer(ee)).compileFilter(),this.keyCache[ee.id]&&delete this.keyCache[ee.id];for(const ee of O)delete this.keyCache[ee],delete this._layerConfigs[ee],delete this._layers[ee];this.familiesBySource={};const Y=function(ee,le){const me={};for(let de=0;de<ee.length;de++){const xe=le&&le[ee[de].id]||tr(ee[de]);le&&(le[ee[de].id]=xe);let De=me[xe];De||(De=me[xe]=[]),De.push(ee[de])}const pe=[];for(const de in me)pe.push(me[de]);return pe}(h.values(this._layerConfigs),this.keyCache);for(const ee of Y){const le=ee.map(We=>this._layers[We.id]),me=le[0];if("none"===me.visibility)continue;const pe=me.source||"";let de=this.familiesBySource[pe];de||(de=this.familiesBySource[pe]={});const xe=me.sourceLayer||"_geojsonTileLayer";let De=de[xe];De||(De=de[xe]=[]),De.push(le)}}}class Ue{loadTile(R,O){const{uid:Y,encoding:ee,rawImageData:le,padding:me,buildQuadTree:pe}=R,de=h.window.ImageBitmap&&le instanceof h.window.ImageBitmap?this.getImageData(le,me):le;O(null,new h.DEMData(Y,de,ee,me<1,pe))}getImageData(R,O){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(R.width,R.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=R.width,this.offscreenCanvas.height=R.height,this.offscreenCanvasContext.drawImage(R,0,0,R.width,R.height);const Y=this.offscreenCanvasContext.getImageData(-O,-O,R.width+2*O,R.height+2*O);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Y}}var gt=function X(R,O){var Y,ee=R&&R.type;if("FeatureCollection"===ee)for(Y=0;Y<R.features.length;Y++)X(R.features[Y],O);else if("GeometryCollection"===ee)for(Y=0;Y<R.geometries.length;Y++)X(R.geometries[Y],O);else if("Feature"===ee)X(R.geometry,O);else if("Polygon"===ee)fn(R.coordinates,O);else if("MultiPolygon"===ee)for(Y=0;Y<R.coordinates.length;Y++)fn(R.coordinates[Y],O);return R};function fn(X,R){if(0!==X.length){bn(X[0],R);for(var O=1;O<X.length;O++)bn(X[O],!R)}}function bn(X,R){for(var O=0,Y=0,ee=0,le=X.length,me=le-1;ee<le;me=ee++){var pe=(X[ee][0]-X[me][0])*(X[me][1]+X[ee][1]),de=O+pe;Y+=Math.abs(O)>=Math.abs(pe)?O-de+pe:pe-de+O,O=de}O+Y>=0!=!!R&&X.reverse()}const st=h.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Xi{constructor(R){this._feature=R,this.extent=h.EXTENT,this.type=R.type,this.properties=R.tags,"id"in R&&!isNaN(R.id)&&(this.id=parseInt(R.id,10))}loadGeometry(){if(1===this._feature.type){const R=[];for(const O of this._feature.geometry)R.push([new h.pointGeometry(O[0],O[1])]);return R}{const R=[];for(const O of this._feature.geometry){const Y=[];for(const ee of O)Y.push(new h.pointGeometry(ee[0],ee[1]));R.push(Y)}return R}}toGeoJSON(R,O,Y){return st.call(this,R,O,Y)}}class so{constructor(R){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.EXTENT,this.length=R.length,this._features=R}feature(R){return new Xi(this._features[R])}}var Tr=h.vectorTile.VectorTileFeature,Er=Xn;function Xn(X,R){this.options=R||{},this.features=X,this.length=X.length}function _t(X,R){this.id="number"==typeof X.id?X.id:void 0,this.type=X.type,this.rawGeometry=1===X.type?[X.geometry]:X.geometry,this.properties=X.tags,this.extent=R||4096}Xn.prototype.feature=function(X){return new _t(this.features[X],this.options.extent)},_t.prototype.loadGeometry=function(){var X=this.rawGeometry;this.geometry=[];for(var R=0;R<X.length;R++){for(var O=X[R],Y=[],ee=0;ee<O.length;ee++)Y.push(new h.pointGeometry(O[ee][0],O[ee][1]));this.geometry.push(Y)}return this.geometry},_t.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var X=this.geometry,R=1/0,O=-1/0,Y=1/0,ee=-1/0,le=0;le<X.length;le++)for(var me=X[le],pe=0;pe<me.length;pe++){var de=me[pe];R=Math.min(R,de.x),O=Math.max(O,de.x),Y=Math.min(Y,de.y),ee=Math.max(ee,de.y)}return[R,Y,O,ee]},_t.prototype.toGeoJSON=Tr.prototype.toGeoJSON;var rn=an,Rn=Er;function an(X){var R=new h.pbf;return function(O,Y){for(var ee in O.layers)Y.writeMessage(3,ir,O.layers[ee])}(X,R),R.finish()}function ir(X,R){var O;R.writeVarintField(15,X.version||1),R.writeStringField(1,X.name||""),R.writeVarintField(5,X.extent||4096);var Y={keys:[],values:[],keycache:{},valuecache:{}};for(O=0;O<X.length;O++)Y.feature=X.feature(O),R.writeMessage(2,fi,Y);var ee=Y.keys;for(O=0;O<ee.length;O++)R.writeStringField(3,ee[O]);var le=Y.values;for(O=0;O<le.length;O++)R.writeMessage(4,Jn,le[O])}function fi(X,R){var O=X.feature;void 0!==O.id&&R.writeVarintField(1,O.id),R.writeMessage(2,ya,X),R.writeVarintField(3,O.type),R.writeMessage(4,Tl,O)}function ya(X,R){var O=X.feature,Y=X.keys,ee=X.values,le=X.keycache,me=X.valuecache;for(var pe in O.properties){var de=O.properties[pe],xe=le[pe];if(null!==de){void 0===xe&&(Y.push(pe),le[pe]=xe=Y.length-1),R.writeVarint(xe);var De=typeof de;"string"!==De&&"boolean"!==De&&"number"!==De&&(de=JSON.stringify(de));var We=De+":"+de,Pe=me[We];void 0===Pe&&(ee.push(de),me[We]=Pe=ee.length-1),R.writeVarint(Pe)}}}function Sr(X,R){return(R<<3)+(7&X)}function Dr(X){return X<<1^X>>31}function Tl(X,R){for(var O=X.loadGeometry(),Y=X.type,ee=0,le=0,me=O.length,pe=0;pe<me;pe++){var de=O[pe],xe=1;1===Y&&(xe=de.length),R.writeVarint(Sr(1,xe));for(var De=3===Y?de.length-1:de.length,We=0;We<De;We++){1===We&&1!==Y&&R.writeVarint(Sr(2,De-1));var Pe=de[We].x-ee,nt=de[We].y-le;R.writeVarint(Dr(Pe)),R.writeVarint(Dr(nt)),ee+=Pe,le+=nt}3===Y&&R.writeVarint(Sr(7,1))}}function Jn(X,R){var O=typeof X;"string"===O?R.writeStringField(1,X):"boolean"===O?R.writeBooleanField(7,X):"number"===O&&(X%1!=0?R.writeDoubleField(3,X):X<0?R.writeSVarintField(6,X):R.writeVarintField(5,X))}function Kn(X,R,O,Y,ee,le){if(ee-Y<=O)return;const me=Y+ee>>1;wt(X,R,me,Y,ee,le%2),Kn(X,R,O,Y,me-1,le+1),Kn(X,R,O,me+1,ee,le+1)}function wt(X,R,O,Y,ee,le){for(;ee>Y;){if(ee-Y>600){const xe=ee-Y+1,De=O-Y+1,We=Math.log(xe),Pe=.5*Math.exp(2*We/3),nt=.5*Math.sqrt(We*Pe*(xe-Pe)/xe)*(De-xe/2<0?-1:1);wt(X,R,O,Math.max(Y,Math.floor(O-De*Pe/xe+nt)),Math.min(ee,Math.floor(O+(xe-De)*Pe/xe+nt)),le)}const me=R[2*O+le];let pe=Y,de=ee;for(Bi(X,R,Y,O),R[2*ee+le]>me&&Bi(X,R,Y,ee);pe<de;){for(Bi(X,R,pe,de),pe++,de--;R[2*pe+le]<me;)pe++;for(;R[2*de+le]>me;)de--}R[2*Y+le]===me?Bi(X,R,Y,de):(de++,Bi(X,R,de,ee)),de<=O&&(Y=de+1),O<=de&&(ee=de-1)}}function Bi(X,R,O,Y){Io(X,O,Y),Io(R,2*O,2*Y),Io(R,2*O+1,2*Y+1)}function Io(X,R,O){const Y=X[R];X[R]=X[O],X[O]=Y}function vi(X,R,O,Y){const ee=X-O,le=R-Y;return ee*ee+le*le}rn.fromVectorTileJs=an,rn.fromGeojsonVt=function(X,R){R=R||{};var O={};for(var Y in X)O[Y]=new Er(X[Y].features,R),O[Y].name=Y,O[Y].version=R.version,O[Y].extent=R.extent;return an({layers:O})},rn.GeoJSONWrapper=Rn;const ps=X=>X[0],Ai=X=>X[1];class Gi{constructor(R,O=ps,Y=Ai,ee=64,le=Float64Array){this.nodeSize=ee,this.points=R;const me=R.length<65536?Uint16Array:Uint32Array,pe=this.ids=new me(R.length),de=this.coords=new le(2*R.length);for(let xe=0;xe<R.length;xe++)pe[xe]=xe,de[2*xe]=O(R[xe]),de[2*xe+1]=Y(R[xe]);Kn(pe,de,ee,0,pe.length-1,0)}range(R,O,Y,ee){return function(le,me,pe,de,xe,De,We){const Pe=[0,le.length-1,0],nt=[];let at,ot;for(;Pe.length;){const ct=Pe.pop(),At=Pe.pop(),Nt=Pe.pop();if(At-Nt<=We){for(let fe=Nt;fe<=At;fe++)at=me[2*fe],ot=me[2*fe+1],at>=pe&&at<=xe&&ot>=de&&ot<=De&&nt.push(le[fe]);continue}const ii=Math.floor((Nt+At)/2);at=me[2*ii],ot=me[2*ii+1],at>=pe&&at<=xe&&ot>=de&&ot<=De&&nt.push(le[ii]);const jt=(ct+1)%2;(0===ct?pe<=at:de<=ot)&&(Pe.push(Nt),Pe.push(ii-1),Pe.push(jt)),(0===ct?xe>=at:De>=ot)&&(Pe.push(ii+1),Pe.push(At),Pe.push(jt))}return nt}(this.ids,this.coords,R,O,Y,ee,this.nodeSize)}within(R,O,Y){return function(ee,le,me,pe,de,xe){const De=[0,ee.length-1,0],We=[],Pe=de*de;for(;De.length;){const nt=De.pop(),at=De.pop(),ot=De.pop();if(at-ot<=xe){for(let jt=ot;jt<=at;jt++)vi(le[2*jt],le[2*jt+1],me,pe)<=Pe&&We.push(ee[jt]);continue}const ct=Math.floor((ot+at)/2),At=le[2*ct],Nt=le[2*ct+1];vi(At,Nt,me,pe)<=Pe&&We.push(ee[ct]);const ii=(nt+1)%2;(0===nt?me-de<=At:pe-de<=Nt)&&(De.push(ot),De.push(ct-1),De.push(ii)),(0===nt?me+de>=At:pe+de>=Nt)&&(De.push(ct+1),De.push(at),De.push(ii))}return We}(this.ids,this.coords,R,O,Y,this.nodeSize)}}const Fo={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:X=>X},Ji=Math.fround||(lo=new Float32Array(1),X=>(lo[0]=+X,lo[0]));var lo;class co{constructor(R){this.options=uo(Object.create(Fo),R),this.trees=new Array(this.options.maxZoom+1)}load(R){const{log:O,minZoom:Y,maxZoom:ee,nodeSize:le}=this.options;O&&console.time("total time");const me=`prepare ${R.length} points`;O&&console.time(me),this.points=R;let pe=[];for(let de=0;de<R.length;de++)R[de].geometry&&pe.push(fs(R[de],de));this.trees[ee+1]=new Gi(pe,nr,wn,le,Float32Array),O&&console.timeEnd(me);for(let de=ee;de>=Y;de--){const xe=+Date.now();pe=this._cluster(pe,de),this.trees[de]=new Gi(pe,nr,wn,le,Float32Array),O&&console.log("z%d: %d clusters in %dms",de,pe.length,+Date.now()-xe)}return O&&console.timeEnd("total time"),this}getClusters(R,O){let Y=((R[0]+180)%360+360)%360-180;const ee=Math.max(-90,Math.min(90,R[1]));let le=180===R[2]?180:((R[2]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,R[3]));if(R[2]-R[0]>=360)Y=-180,le=180;else if(Y>le){const De=this.getClusters([Y,ee,180,me],O),We=this.getClusters([-180,ee,le,me],O);return De.concat(We)}const pe=this.trees[this._limitZoom(O)],de=pe.range($n(Y),kr(me),$n(le),kr(ee)),xe=[];for(const De of de){const We=pe.points[De];xe.push(We.numPoints?Lo(We):this.points[We.index])}return xe}getChildren(R){const O=this._getOriginId(R),Y=this._getOriginZoom(R),ee="No cluster with the specified id.",le=this.trees[Y];if(!le)throw new Error(ee);const me=le.points[O];if(!me)throw new Error(ee);const pe=this.options.radius/(this.options.extent*Math.pow(2,Y-1)),de=le.within(me.x,me.y,pe),xe=[];for(const De of de){const We=le.points[De];We.parentId===R&&xe.push(We.numPoints?Lo(We):this.points[We.index])}if(0===xe.length)throw new Error(ee);return xe}getLeaves(R,O,Y){const ee=[];return this._appendLeaves(ee,R,O=O||10,Y=Y||0,0),ee}getTile(R,O,Y){const ee=this.trees[this._limitZoom(R)],le=Math.pow(2,R),{extent:me,radius:pe}=this.options,de=pe/me,xe=(Y-de)/le,De=(Y+1+de)/le,We={features:[]};return this._addTileFeatures(ee.range((O-de)/le,xe,(O+1+de)/le,De),ee.points,O,Y,le,We),0===O&&this._addTileFeatures(ee.range(1-de/le,xe,1,De),ee.points,le,Y,le,We),O===le-1&&this._addTileFeatures(ee.range(0,xe,de/le,De),ee.points,-1,Y,le,We),We.features.length?We:null}getClusterExpansionZoom(R){let O=this._getOriginZoom(R)-1;for(;O<=this.options.maxZoom;){const Y=this.getChildren(R);if(O++,1!==Y.length)break;R=Y[0].properties.cluster_id}return O}_appendLeaves(R,O,Y,ee,le){const me=this.getChildren(O);for(const pe of me){const de=pe.properties;if(de&&de.cluster?le+de.point_count<=ee?le+=de.point_count:le=this._appendLeaves(R,de.cluster_id,Y,ee,le):le<ee?le++:R.push(pe),R.length===Y)break}return le}_addTileFeatures(R,O,Y,ee,le,me){for(const pe of R){const de=O[pe],xe=de.numPoints;let De,We,Pe;if(xe)De=xa(de),We=de.x,Pe=de.y;else{const ot=this.points[de.index];De=ot.properties,We=$n(ot.geometry.coordinates[0]),Pe=kr(ot.geometry.coordinates[1])}const nt={type:1,geometry:[[Math.round(this.options.extent*(We*le-Y)),Math.round(this.options.extent*(Pe*le-ee))]],tags:De};let at;xe?at=de.id:this.options.generateId?at=de.index:this.points[de.index].id&&(at=this.points[de.index].id),void 0!==at&&(nt.id=at),me.features.push(nt)}}_limitZoom(R){return Math.max(this.options.minZoom,Math.min(+R,this.options.maxZoom+1))}_cluster(R,O){const Y=[],{radius:ee,extent:le,reduce:me,minPoints:pe}=this.options,de=ee/(le*Math.pow(2,O));for(let xe=0;xe<R.length;xe++){const De=R[xe];if(De.zoom<=O)continue;De.zoom=O;const We=this.trees[O+1],Pe=We.within(De.x,De.y,de),nt=De.numPoints||1;let at=nt;for(const ot of Pe){const ct=We.points[ot];ct.zoom>O&&(at+=ct.numPoints||1)}if(at>nt&&at>=pe){let ot=De.x*nt,ct=De.y*nt,At=me&&nt>1?this._map(De,!0):null;const Nt=(xe<<5)+(O+1)+this.points.length;for(const ii of Pe){const jt=We.points[ii];if(jt.zoom<=O)continue;jt.zoom=O;const fe=jt.numPoints||1;ot+=jt.x*fe,ct+=jt.y*fe,jt.parentId=Nt,me&&(At||(At=this._map(De,!0)),me(At,this._map(jt)))}De.parentId=Nt,Y.push(Br(ot/at,ct/at,Nt,at,At))}else if(Y.push(De),at>1)for(const ot of Pe){const ct=We.points[ot];ct.zoom<=O||(ct.zoom=O,Y.push(ct))}}return Y}_getOriginId(R){return R-this.points.length>>5}_getOriginZoom(R){return(R-this.points.length)%32}_map(R,O){if(R.numPoints)return O?uo({},R.properties):R.properties;const Y=this.points[R.index].properties,ee=this.options.map(Y);return O&&ee===Y?uo({},ee):ee}}function Br(X,R,O,Y,ee){return{x:Ji(X),y:Ji(R),zoom:1/0,id:O,parentId:-1,numPoints:Y,properties:ee}}function fs(X,R){const[O,Y]=X.geometry.coordinates;return{x:Ji($n(O)),y:Ji(kr(Y)),zoom:1/0,index:R,parentId:-1}}function Lo(X){return{type:"Feature",id:X.id,properties:xa(X),geometry:{type:"Point",coordinates:[(R=X.x,360*(R-.5)),Lt(X.y)]}};var R}function xa(X){const R=X.numPoints,O=R>=1e4?`${Math.round(R/1e3)}k`:R>=1e3?Math.round(R/100)/10+"k":R;return uo(uo({},X.properties),{cluster:!0,cluster_id:X.id,point_count:R,point_count_abbreviated:O})}function $n(X){return X/360+.5}function kr(X){const R=Math.sin(X*Math.PI/180),O=.5-.25*Math.log((1+R)/(1-R))/Math.PI;return O<0?0:O>1?1:O}function Lt(X){const R=(180-360*X)*Math.PI/180;return 360*Math.atan(Math.exp(R))/Math.PI-90}function uo(X,R){for(const O in R)X[O]=R[O];return X}function nr(X){return X.x}function wn(X){return X.y}function sn(X,R,O,Y){for(var ee,le=Y,me=O-R>>1,pe=O-R,de=X[R],xe=X[R+1],De=X[O],We=X[O+1],Pe=R+3;Pe<O;Pe+=3){var nt=Ro(X[Pe],X[Pe+1],de,xe,De,We);if(nt>le)ee=Pe,le=nt;else if(nt===le){var at=Math.abs(Pe-me);at<pe&&(ee=Pe,pe=at)}}le>Y&&(ee-R>3&&sn(X,R,ee,Y),X[ee+2]=le,O-ee>3&&sn(X,ee,O,Y))}function Ro(X,R,O,Y,ee,le){var me=ee-O,pe=le-Y;if(0!==me||0!==pe){var de=((X-O)*me+(R-Y)*pe)/(me*me+pe*pe);de>1?(O=ee,Y=le):de>0&&(O+=me*de,Y+=pe*de)}return(me=X-O)*me+(pe=R-Y)*pe}function Tt(X,R,O,Y){var ee={id:void 0===X?null:X,type:R,geometry:O,tags:Y,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(le){var me=le.geometry,pe=le.type;if("Point"===pe||"MultiPoint"===pe||"LineString"===pe)or(le,me);else if("Polygon"===pe||"MultiLineString"===pe)for(var de=0;de<me.length;de++)or(le,me[de]);else if("MultiPolygon"===pe)for(de=0;de<me.length;de++)for(var xe=0;xe<me[de].length;xe++)or(le,me[de][xe])}(ee),ee}function or(X,R){for(var O=0;O<R.length;O+=3)X.minX=Math.min(X.minX,R[O]),X.minY=Math.min(X.minY,R[O+1]),X.maxX=Math.max(X.maxX,R[O]),X.maxY=Math.max(X.maxY,R[O+1])}function Oo(X,R,O,Y){if(R.geometry){var ee=R.geometry.coordinates,le=R.geometry.type,me=Math.pow(O.tolerance/((1<<O.maxZoom)*O.extent),2),pe=[],de=R.id;if(O.promoteId?de=R.properties[O.promoteId]:O.generateId&&(de=Y||0),"Point"===le)zo(ee,pe);else if("MultiPoint"===le)for(var xe=0;xe<ee.length;xe++)zo(ee[xe],pe);else if("LineString"===le)Pr(ee,pe,me,!1);else if("MultiLineString"===le){if(O.lineMetrics){for(xe=0;xe<ee.length;xe++)Pr(ee[xe],pe=[],me,!1),X.push(Tt(de,"LineString",pe,R.properties));return}Ir(ee,pe,me,!1)}else if("Polygon"===le)Ir(ee,pe,me,!0);else{if("MultiPolygon"!==le){if("GeometryCollection"===le){for(xe=0;xe<R.geometry.geometries.length;xe++)Oo(X,{id:de,geometry:R.geometry.geometries[xe],properties:R.properties},O,Y);return}throw new Error("Input data is not a valid GeoJSON object.")}for(xe=0;xe<ee.length;xe++){var De=[];Ir(ee[xe],De,me,!0),pe.push(De)}}X.push(Tt(de,le,pe,R.properties))}}function zo(X,R){R.push(ms(X[0])),R.push(gs(X[1])),R.push(0)}function Pr(X,R,O,Y){for(var ee,le,me=0,pe=0;pe<X.length;pe++){var de=ms(X[pe][0]),xe=gs(X[pe][1]);R.push(de),R.push(xe),R.push(0),pe>0&&(me+=Y?(ee*xe-de*le)/2:Math.sqrt(Math.pow(de-ee,2)+Math.pow(xe-le,2))),ee=de,le=xe}var De=R.length-3;R[2]=1,sn(R,0,De,O),R[De+2]=1,R.size=Math.abs(me),R.start=0,R.end=R.size}function Ir(X,R,O,Y){for(var ee=0;ee<X.length;ee++){var le=[];Pr(X[ee],le,O,Y),R.push(le)}}function ms(X){return X/360+.5}function gs(X){var R=Math.sin(X*Math.PI/180),O=.5-.25*Math.log((1+R)/(1-R))/Math.PI;return O<0?0:O>1?1:O}function Cn(X,R,O,Y,ee,le,me,pe){if(Y/=R,le>=(O/=R)&&me<Y)return X;if(me<O||le>=Y)return null;for(var de=[],xe=0;xe<X.length;xe++){var De=X[xe],We=De.geometry,Pe=De.type,nt=0===ee?De.minX:De.minY,at=0===ee?De.maxX:De.maxY;if(nt>=O&&at<Y)de.push(De);else if(!(at<O||nt>=Y)){var ot=[];if("Point"===Pe||"MultiPoint"===Pe)ho(We,ot,O,Y,ee);else if("LineString"===Pe)Fr(We,ot,O,Y,ee,!1,pe.lineMetrics);else if("MultiLineString"===Pe)Mn(We,ot,O,Y,ee,!1);else if("Polygon"===Pe)Mn(We,ot,O,Y,ee,!0);else if("MultiPolygon"===Pe)for(var ct=0;ct<We.length;ct++){var At=[];Mn(We[ct],At,O,Y,ee,!0),At.length&&ot.push(At)}if(ot.length){if(pe.lineMetrics&&"LineString"===Pe){for(ct=0;ct<ot.length;ct++)de.push(Tt(De.id,Pe,ot[ct],De.tags));continue}"LineString"!==Pe&&"MultiLineString"!==Pe||(1===ot.length?(Pe="LineString",ot=ot[0]):Pe="MultiLineString"),"Point"!==Pe&&"MultiPoint"!==Pe||(Pe=3===ot.length?"Point":"MultiPoint"),de.push(Tt(De.id,Pe,ot,De.tags))}}}return de.length?de:null}function ho(X,R,O,Y,ee){for(var le=0;le<X.length;le+=3){var me=X[le+ee];me>=O&&me<=Y&&(R.push(X[le]),R.push(X[le+1]),R.push(X[le+2]))}}function Fr(X,R,O,Y,ee,le,me){for(var pe,de,xe=El(X),De=0===ee?_s:ys,We=X.start,Pe=0;Pe<X.length-3;Pe+=3){var nt=X[Pe],at=X[Pe+1],ot=X[Pe+2],ct=X[Pe+3],At=X[Pe+4],Nt=0===ee?nt:at,ii=0===ee?ct:At,jt=!1;me&&(pe=Math.sqrt(Math.pow(nt-ct,2)+Math.pow(at-At,2))),Nt<O?ii>O&&(de=De(xe,nt,at,ct,At,O),me&&(xe.start=We+pe*de)):Nt>Y?ii<Y&&(de=De(xe,nt,at,ct,At,Y),me&&(xe.start=We+pe*de)):Vo(xe,nt,at,ot),ii<O&&Nt>=O&&(de=De(xe,nt,at,ct,At,O),jt=!0),ii>Y&&Nt<=Y&&(de=De(xe,nt,at,ct,At,Y),jt=!0),!le&&jt&&(me&&(xe.end=We+pe*de),R.push(xe),xe=El(X)),me&&(We+=pe)}var fe=X.length-3;nt=X[fe],at=X[fe+1],ot=X[fe+2],(Nt=0===ee?nt:at)>=O&&Nt<=Y&&Vo(xe,nt,at,ot),fe=xe.length-3,le&&fe>=3&&(xe[fe]!==xe[0]||xe[fe+1]!==xe[1])&&Vo(xe,xe[0],xe[1],xe[2]),xe.length&&R.push(xe)}function El(X){var R=[];return R.size=X.size,R.start=X.start,R.end=X.end,R}function Mn(X,R,O,Y,ee,le){for(var me=0;me<X.length;me++)Fr(X[me],R,O,Y,ee,le,!1)}function Vo(X,R,O,Y){X.push(R),X.push(O),X.push(Y)}function _s(X,R,O,Y,ee,le){var me=(le-R)/(Y-R);return X.push(le),X.push(O+(ee-O)*me),X.push(1),me}function ys(X,R,O,Y,ee,le){var me=(le-O)/(ee-O);return X.push(R+(Y-R)*me),X.push(le),X.push(1),me}function xs(X,R){for(var O=[],Y=0;Y<X.length;Y++){var ee,le=X[Y],me=le.type;if("Point"===me||"MultiPoint"===me||"LineString"===me)ee=vs(le.geometry,R);else if("MultiLineString"===me||"Polygon"===me){ee=[];for(var pe=0;pe<le.geometry.length;pe++)ee.push(vs(le.geometry[pe],R))}else if("MultiPolygon"===me)for(ee=[],pe=0;pe<le.geometry.length;pe++){for(var de=[],xe=0;xe<le.geometry[pe].length;xe++)de.push(vs(le.geometry[pe][xe],R));ee.push(de)}O.push(Tt(le.id,me,ee,le.tags))}return O}function vs(X,R){var O=[];O.size=X.size,void 0!==X.start&&(O.start=X.start,O.end=X.end);for(var Y=0;Y<X.length;Y+=3)O.push(X[Y]+R,X[Y+1],X[Y+2]);return O}function As(X,R){if(X.transformed)return X;var O,Y,ee,le=1<<X.z,me=X.x,pe=X.y;for(O=0;O<X.features.length;O++){var de=X.features[O],xe=de.geometry,De=de.type;if(de.geometry=[],1===De)for(Y=0;Y<xe.length;Y+=2)de.geometry.push(va(xe[Y],xe[Y+1],R,le,me,pe));else for(Y=0;Y<xe.length;Y++){var We=[];for(ee=0;ee<xe[Y].length;ee+=2)We.push(va(xe[Y][ee],xe[Y][ee+1],R,le,me,pe));de.geometry.push(We)}}return X.transformed=!0,X}function va(X,R,O,Y,ee,le){return[Math.round(O*(X*Y-ee)),Math.round(O*(R*Y-le))]}function Sl(X,R,O,Y,ee){for(var le=R===ee.maxZoom?0:ee.tolerance/((1<<R)*ee.extent),me={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:O,y:Y,z:R,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},pe=0;pe<X.length;pe++){me.numFeatures++,jc(me,X[pe],le,ee);var de=X[pe].minX,xe=X[pe].minY,De=X[pe].maxX,We=X[pe].maxY;de<me.minX&&(me.minX=de),xe<me.minY&&(me.minY=xe),De>me.maxX&&(me.maxX=De),We>me.maxY&&(me.maxY=We)}return me}function jc(X,R,O,Y){var ee=R.geometry,le=R.type,me=[];if("Point"===le||"MultiPoint"===le)for(var pe=0;pe<ee.length;pe+=3)me.push(ee[pe]),me.push(ee[pe+1]),X.numPoints++,X.numSimplified++;else if("LineString"===le)rr(me,ee,X,O,!1,!1);else if("MultiLineString"===le||"Polygon"===le)for(pe=0;pe<ee.length;pe++)rr(me,ee[pe],X,O,"Polygon"===le,0===pe);else if("MultiPolygon"===le)for(var de=0;de<ee.length;de++){var xe=ee[de];for(pe=0;pe<xe.length;pe++)rr(me,xe[pe],X,O,!0,0===pe)}if(me.length){var De=R.tags||null;if("LineString"===le&&Y.lineMetrics){for(var We in De={},R.tags)De[We]=R.tags[We];De.mapbox_clip_start=ee.start/ee.size,De.mapbox_clip_end=ee.end/ee.size}var Pe={geometry:me,type:"Polygon"===le||"MultiPolygon"===le?3:"LineString"===le||"MultiLineString"===le?2:1,tags:De};null!==R.id&&(Pe.id=R.id),X.features.push(Pe)}}function rr(X,R,O,Y,ee,le){var me=Y*Y;if(Y>0&&R.size<(ee?me:Y))O.numPoints+=R.length/3;else{for(var pe=[],de=0;de<R.length;de+=3)(0===Y||R[de+2]>me)&&(O.numSimplified++,pe.push(R[de]),pe.push(R[de+1])),O.numPoints++;ee&&function(xe,De){for(var We=0,Pe=0,nt=xe.length,at=nt-2;Pe<nt;at=Pe,Pe+=2)We+=(xe[Pe]-xe[at])*(xe[Pe+1]+xe[at+1]);if(We>0===De)for(Pe=0,nt=xe.length;Pe<nt/2;Pe+=2){var ot=xe[Pe],ct=xe[Pe+1];xe[Pe]=xe[nt-2-Pe],xe[Pe+1]=xe[nt-1-Pe],xe[nt-2-Pe]=ot,xe[nt-1-Pe]=ct}}(pe,le),X.push(pe)}}function No(X,R){var O=(R=this.options=function(ee,le){for(var me in le)ee[me]=le[me];return ee}(Object.create(this.options),R)).debug;if(O&&console.time("preprocess data"),R.maxZoom<0||R.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(R.promoteId&&R.generateId)throw new Error("promoteId and generateId cannot be used together.");var ee,le,me,pe,de,xe,Y=function(ee,le){var me=[];if("FeatureCollection"===ee.type)for(var pe=0;pe<ee.features.length;pe++)Oo(me,ee.features[pe],le,pe);else Oo(me,"Feature"===ee.type?ee:{geometry:ee},le);return me}(X,R);this.tiles={},this.tileCoords=[],O&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",R.indexMaxZoom,R.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(ee=Y,le=R,me=le.buffer/le.extent,pe=ee,de=Cn(ee,1,-1-me,me,0,-1,2,le),xe=Cn(ee,1,1-me,2+me,0,-1,2,le),(de||xe)&&(pe=Cn(ee,1,-me,1+me,0,-1,2,le)||[],de&&(pe=xs(de,1).concat(pe)),xe&&(pe=pe.concat(xs(xe,-1)))),Y=pe).length&&this.splitTile(Y,0,0,0),O&&(Y.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Aa(X,R,O){return 32*((1<<X)*O+R)+X}function Dl(X,R){const O=X.tileID.canonical;if(!this._geoJSONIndex)return R(null,null);const Y=this._geoJSONIndex.getTile(O.z,O.x,O.y);if(!Y)return R(null,null);const ee=new so(Y.features);let le=rn(ee);0===le.byteOffset&&le.byteLength===le.buffer.byteLength||(le=new Uint8Array(le)),R(null,{vectorTile:ee,rawData:le.buffer})}No.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},No.prototype.splitTile=function(X,R,O,Y,ee,le,me){for(var pe=[X,R,O,Y],de=this.options,xe=de.debug;pe.length;){Y=pe.pop(),O=pe.pop(),R=pe.pop(),X=pe.pop();var De=1<<R,We=Aa(R,O,Y),Pe=this.tiles[We];if(!Pe&&(xe>1&&console.time("creation"),Pe=this.tiles[We]=Sl(X,R,O,Y,de),this.tileCoords.push({z:R,x:O,y:Y}),xe)){xe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",R,O,Y,Pe.numFeatures,Pe.numPoints,Pe.numSimplified),console.timeEnd("creation"));var nt="z"+R;this.stats[nt]=(this.stats[nt]||0)+1,this.total++}if(Pe.source=X,ee){if(R===de.maxZoom||R===ee)continue;var at=1<<ee-R;if(O!==Math.floor(le/at)||Y!==Math.floor(me/at))continue}else if(R===de.indexMaxZoom||Pe.numPoints<=de.indexMaxPoints)continue;if(Pe.source=null,0!==X.length){xe>1&&console.time("clipping");var ot,ct,At,Nt,ii,jt,fe=.5*de.buffer/de.extent,Tn=.5-fe,ci=.5+fe,On=1+fe;ot=ct=At=Nt=null,ii=Cn(X,De,O-fe,O+ci,0,Pe.minX,Pe.maxX,de),jt=Cn(X,De,O+Tn,O+On,0,Pe.minX,Pe.maxX,de),X=null,ii&&(ot=Cn(ii,De,Y-fe,Y+ci,1,Pe.minY,Pe.maxY,de),ct=Cn(ii,De,Y+Tn,Y+On,1,Pe.minY,Pe.maxY,de),ii=null),jt&&(At=Cn(jt,De,Y-fe,Y+ci,1,Pe.minY,Pe.maxY,de),Nt=Cn(jt,De,Y+Tn,Y+On,1,Pe.minY,Pe.maxY,de),jt=null),xe>1&&console.timeEnd("clipping"),pe.push(ot||[],R+1,2*O,2*Y),pe.push(ct||[],R+1,2*O,2*Y+1),pe.push(At||[],R+1,2*O+1,2*Y),pe.push(Nt||[],R+1,2*O+1,2*Y+1)}}},No.prototype.getTile=function(X,R,O){var Y=this.options,ee=Y.extent,le=Y.debug;if(X<0||X>24)return null;var me=1<<X,pe=Aa(X,R=(R%me+me)%me,O);if(this.tiles[pe])return As(this.tiles[pe],ee);le>1&&console.log("drilling down to z%d-%d-%d",X,R,O);for(var de,xe=X,De=R,We=O;!de&&xe>0;)xe--,De=Math.floor(De/2),We=Math.floor(We/2),de=this.tiles[Aa(xe,De,We)];return de&&de.source?(le>1&&console.log("found parent tile z%d-%d-%d",xe,De,We),le>1&&console.time("drilling down"),this.splitTile(de.source,xe,De,We,X,R,O),le>1&&console.timeEnd("drilling down"),this.tiles[pe]?As(this.tiles[pe],ee):null):null};class mn extends h.VectorTileWorkerSource{constructor(R,O,Y,ee,le){super(R,O,Y,ee,Dl),le&&(this.loadGeoJSON=le)}loadData(R,O){const Y=R&&R.request,ee=Y&&Y.collectResourceTiming;this.loadGeoJSON(R,(le,me)=>{if(le||!me)return O(le);if("object"!=typeof me)return O(new Error(`Input data given to '${R.source}' is not a valid GeoJSON object.`));{gt(me,!0);try{if(R.filter){const de=h.createExpression(R.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===de.result)throw new Error(de.value.map(De=>`${De.key}: ${De.message}`).join(", "));const xe=me.features.filter(De=>de.value.evaluate({zoom:0},De));me={type:"FeatureCollection",features:xe}}this._geoJSONIndex=R.cluster?new co(function({superclusterOptions:de,clusterProperties:xe}){if(!xe||!de)return de;const De={},We={},Pe={accumulated:null,zoom:0},nt={properties:null},at=Object.keys(xe);for(const ot of at){const[ct,At]=xe[ot],Nt=h.createExpression(At),ii=h.createExpression("string"==typeof ct?[ct,["accumulated"],["get",ot]]:ct);De[ot]=Nt.value,We[ot]=ii.value}return de.map=ot=>{nt.properties=ot;const ct={};for(const At of at)ct[At]=De[At].evaluate(Pe,nt);return ct},de.reduce=(ot,ct)=>{nt.properties=ct;for(const At of at)Pe.accumulated=ot[At],ot[At]=We[At].evaluate(Pe,nt)},de}(R)).load(me.features):new No(de=me,R.geojsonVtOptions)}catch(de){return O(de)}this.loaded={};const pe={};if(ee){const de=h.getPerformanceMeasurement(Y);de&&(pe.resourceTiming={},pe.resourceTiming[R.source]=JSON.parse(JSON.stringify(de)))}O(null,pe)}var de})}reloadTile(R,O){const Y=this.loaded;return Y&&Y[R.uid]?super.reloadTile(R,O):this.loadTile(R,O)}loadGeoJSON(R,O){if(R.request)h.getJSON(R.request,O);else{if("string"!=typeof R.data)return O(new Error(`Input data given to '${R.source}' is not a valid GeoJSON object.`));try{return O(null,JSON.parse(R.data))}catch(Y){return O(new Error(`Input data given to '${R.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(R,O){try{O(null,this._geoJSONIndex.getClusterExpansionZoom(R.clusterId))}catch(Y){O(Y)}}getClusterChildren(R,O){try{O(null,this._geoJSONIndex.getChildren(R.clusterId))}catch(Y){O(Y)}}getClusterLeaves(R,O){try{O(null,this._geoJSONIndex.getLeaves(R.clusterId,R.limit,R.offset))}catch(Y){O(Y)}}}class bs{constructor(R){this.self=R,this.actor=new h.Actor(R,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=h.getProjection({name:"mercator"}),this.workerSourceTypes={vector:h.VectorTileWorkerSource,geojson:mn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(O,Y)=>{if(this.workerSourceTypes[O])throw new Error(`Worker source with name "${O}" already registered.`);this.workerSourceTypes[O]=Y},this.self.registerRTLTextPlugin=O=>{if(h.plugin.isParsed())throw new Error("RTL text plugin already registered.");h.plugin.applyArabicShaping=O.applyArabicShaping,h.plugin.processBidirectionalText=O.processBidirectionalText,h.plugin.processStyledBidirectionalText=O.processStyledBidirectionalText}}clearCaches(R,O,Y){delete this.layerIndexes[R],delete this.availableImages[R],delete this.workerSources[R],delete this.demWorkerSources[R],Y()}checkIfReady(R,O,Y){Y()}setReferrer(R,O){this.referrer=O}spriteLoaded(R,O){this.isSpriteLoaded[R]=O;for(const Y in this.workerSources[R]){const ee=this.workerSources[R][Y];for(const le in ee)ee[le]instanceof h.VectorTileWorkerSource&&(ee[le].isSpriteLoaded=O,ee[le].fire(new h.Event("isSpriteLoaded")))}}setImages(R,O,Y){this.availableImages[R]=O;for(const ee in this.workerSources[R]){const le=this.workerSources[R][ee];for(const me in le)le[me].availableImages=O}Y()}enableTerrain(R,O,Y){this.terrain=O,Y()}setProjection(R,O){this.projections[R]=h.getProjection(O)}setLayers(R,O,Y){this.getLayerIndex(R).replace(O),Y()}updateLayers(R,O,Y){this.getLayerIndex(R).update(O.layers,O.removedIds),Y()}loadTile(R,O,Y){const ee=this.enableTerrain?h.extend({enableTerrain:this.terrain},O):O;ee.projection=this.projections[R]||this.defaultProjection,this.getWorkerSource(R,O.type,O.source).loadTile(ee,Y)}loadDEMTile(R,O,Y){const ee=this.enableTerrain?h.extend({buildQuadTree:this.terrain},O):O;this.getDEMWorkerSource(R,O.source).loadTile(ee,Y)}reloadTile(R,O,Y){const ee=this.enableTerrain?h.extend({enableTerrain:this.terrain},O):O;ee.projection=this.projections[R]||this.defaultProjection,this.getWorkerSource(R,O.type,O.source).reloadTile(ee,Y)}abortTile(R,O,Y){this.getWorkerSource(R,O.type,O.source).abortTile(O,Y)}removeTile(R,O,Y){this.getWorkerSource(R,O.type,O.source).removeTile(O,Y)}removeSource(R,O,Y){if(!this.workerSources[R]||!this.workerSources[R][O.type]||!this.workerSources[R][O.type][O.source])return;const ee=this.workerSources[R][O.type][O.source];delete this.workerSources[R][O.type][O.source],void 0!==ee.removeSource?ee.removeSource(O,Y):Y()}loadWorkerSource(R,O,Y){try{this.self.importScripts(O.url),Y()}catch(ee){Y(ee.toString())}}syncRTLPluginState(R,O,Y){try{h.plugin.setState(O);const ee=h.plugin.getPluginURL();if(h.plugin.isLoaded()&&!h.plugin.isParsed()&&null!=ee){this.self.importScripts(ee);const le=h.plugin.isParsed();Y(le?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ee}`),le)}}catch(ee){Y(ee.toString())}}getAvailableImages(R){let O=this.availableImages[R];return O||(O=[]),O}getLayerIndex(R){let O=this.layerIndexes[R];return O||(O=this.layerIndexes[R]=new Ci),O}getWorkerSource(R,O,Y){return this.workerSources[R]||(this.workerSources[R]={}),this.workerSources[R][O]||(this.workerSources[R][O]={}),this.workerSources[R][O][Y]||(this.workerSources[R][O][Y]=new this.workerSourceTypes[O]({send:(ee,le,me,pe,de,xe)=>{this.actor.send(ee,le,me,R,de,xe)},scheduler:this.actor.scheduler},this.getLayerIndex(R),this.getAvailableImages(R),this.isSpriteLoaded[R])),this.workerSources[R][O][Y]}getDEMWorkerSource(R,O){return this.demWorkerSources[R]||(this.demWorkerSources[R]={}),this.demWorkerSources[R][O]||(this.demWorkerSources[R][O]=new Ue),this.demWorkerSources[R][O]}enforceCacheSizeLimit(R,O){h.enforceCacheSizeLimit(O)}getWorkerPerformanceMetrics(R,O,Y){Y(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new bs(self)),bs}),r(0,function(h){function Oe(p,i){if(Array.isArray(p)){if(!Array.isArray(i)||p.length!==i.length)return!1;for(let d=0;d<p.length;d++)if(!Oe(p[d],i[d]))return!1;return!0}if("object"==typeof p&&null!==p&&null!==i){if("object"!=typeof i||Object.keys(p).length!==Object.keys(i).length)return!1;for(const d in p)if(!Oe(p[d],i[d]))return!1;return!0}return p===i}var tr=Ci;function Ci(p){return i=p,!("undefined"==typeof window||"undefined"==typeof document||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var m,y,v=new Blob([""],{type:"text/javascript"}),C=URL.createObjectURL(v);try{y=new Worker(C),m=!0}catch(M){m=!1}return y&&y.terminate(),URL.revokeObjectURL(C),m}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var m=document.createElement("canvas");m.width=m.height=1;var y=m.getContext("2d");if(!y)return!1;var v=y.getImageData(0,0,1,1);return v&&v.width===m.width}()||(void 0===Ue[d=i&&i.failIfMajorPerformanceCaveat]&&(Ue[d]=function(m){var y,C,M,E,v=(C=m,M=document.createElement("canvas"),(E=Object.create(Ci.webGLContextAttributes)).failIfMajorPerformanceCaveat=C,M.getContext("webgl",E)||M.getContext("experimental-webgl",E));if(!v)return!1;try{y=v.createShader(v.VERTEX_SHADER)}catch(C){return!1}return!(!y||v.isContextLost())&&(v.shaderSource(y,"void main() {}"),v.compileShader(y),!0===v.getShaderParameter(y,v.COMPILE_STATUS))}(d)),!Ue[d]||document.documentMode));var i,d}var Ue={};function gt(p,i,d){const m=h.window.document.createElement(p);return void 0!==i&&(m.className=i),d&&d.appendChild(m),m}function fn(p,i,d){const m=h.window.document.createElementNS("http://www.w3.org/2000/svg",p);for(const y of Object.keys(i))m.setAttributeNS(null,y,i[y]);return d&&d.appendChild(m),m}Ci.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const bn=h.window.document&&h.window.document.documentElement.style,st=bn&&void 0!==bn.userSelect?"userSelect":"WebkitUserSelect";let Xi;function so(){bn&&st&&(Xi=bn[st],bn[st]="none")}function Tr(){bn&&st&&(bn[st]=Xi)}function Er(p){p.preventDefault(),p.stopPropagation(),h.window.removeEventListener("click",Er,!0)}function Xn(){h.window.addEventListener("click",Er,!0),h.window.setTimeout(()=>{h.window.removeEventListener("click",Er,!0)},0)}function _t(p,i){const d=p.getBoundingClientRect();return an(p,d,i)}function rn(p,i){const d=p.getBoundingClientRect(),m=[];for(let y=0;y<i.length;y++)m.push(an(p,d,i[y]));return m}function Rn(p){return void 0!==h.window.InstallTrigger&&2===p.button&&p.ctrlKey&&h.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:p.button}function an(p,i,d){const m=p.offsetWidth===i.width?1:p.offsetWidth/i.width;return new h.pointGeometry((d.clientX-i.left)*m,(d.clientY-i.top)*m)}function ir(p,i){var d=i[0],m=i[1],y=i[2],v=i[3],C=d*v-y*m;return C?(p[0]=v*(C=1/C),p[1]=-m*C,p[2]=-y*C,p[3]=d*C,p):null}function fi(p){const{userImage:i}=p;return!!(i&&i.render&&i.render())&&(p.data.replace(new Uint8Array(i.data.buffer)),!0)}class ya extends h.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new h.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:d,callback:m}of this.requestors)this._notify(d,m);this.requestors=[]}}hasImage(i){return!!this.getImage(i)}getImage(i){return this.images[i]}addImage(i,d){this._validate(i,d)&&(this.images[i]=d)}_validate(i,d){let m=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new h.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),m=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new h.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),m=!1),this._validateContent(d.content,d)||(this.fire(new h.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),m=!1),m}_validateStretch(i,d){if(!i)return!0;let m=0;for(const y of i){if(y[0]<m||y[1]<y[0]||d<y[1])return!1;m=y[1]}return!0}_validateContent(i,d){return!(i&&(4!==i.length||i[0]<0||d.data.width<i[0]||i[1]<0||d.data.height<i[1]||i[2]<0||d.data.width<i[2]||i[3]<0||d.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,d){d.version=this.images[i].version+1,this.images[i]=d,this.updatedImages[i]=!0}removeImage(i){const d=this.images[i];delete this.images[i],delete this.patterns[i],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,d){let m=!0;if(!this.isLoaded())for(const y of i)this.images[y]||(m=!1);this.isLoaded()||m?this._notify(i,d):this.requestors.push({ids:i,callback:d})}_notify(i,d){const m={};for(const y of i){this.images[y]||this.fire(new h.Event("styleimagemissing",{id:y}));const v=this.images[y];v?m[y]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,hasRenderCallback:Boolean(v.userImage&&v.userImage.render)}:h.warnOnce(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,m)}getPixelSize(){const{width:i,height:d}=this.atlasImage;return{width:i,height:d}}getPattern(i){const d=this.patterns[i],m=this.getImage(i);if(!m)return null;if(d&&d.position.version===m.version)return d.position;if(d)d.position.version=m.version;else{const y={w:m.data.width+2,h:m.data.height+2,x:0,y:0},v=new h.ImagePosition(y,m);this.patterns[i]={bin:y,position:v}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const d=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new h.Texture(i,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const v in this.patterns)i.push(this.patterns[v].bin);const{w:d,h:m}=h.potpack(i),y=this.atlasImage;y.resize({width:d||1,height:m||1});for(const v in this.patterns){const{bin:C}=this.patterns[v],M=C.x+1,E=C.y+1,k=this.images[v].data,I=k.width,L=k.height;h.RGBAImage.copy(k,y,{x:0,y:0},{x:M,y:E},{width:I,height:L}),h.RGBAImage.copy(k,y,{x:0,y:L-1},{x:M,y:E-1},{width:I,height:1}),h.RGBAImage.copy(k,y,{x:0,y:0},{x:M,y:E+L},{width:I,height:1}),h.RGBAImage.copy(k,y,{x:I-1,y:0},{x:M-1,y:E},{width:1,height:L}),h.RGBAImage.copy(k,y,{x:0,y:0},{x:M+I,y:E},{width:1,height:L})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const d of i){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const m=this.images[d];fi(m)&&this.updateImage(d,m)}}}const Sr=new h.Properties({anchor:new h.DataConstantProperty(h.spec.light.anchor),position:new class{constructor(){this.specification=h.spec.light.position}possiblyEvaluate(p,i){return function([d,m,y]){const v=h.degToRad(m+90),C=h.degToRad(y);return{x:d*Math.cos(v)*Math.sin(C),y:d*Math.sin(v)*Math.sin(C),z:d*Math.cos(C),azimuthal:m,polar:y}}(p.expression.evaluate(i))}interpolate(p,i,d){return{x:h.number(p.x,i.x,d),y:h.number(p.y,i.y,d),z:h.number(p.z,i.z,d),azimuthal:h.number(p.azimuthal,i.azimuthal,d),polar:h.number(p.polar,i.polar,d)}}},color:new h.DataConstantProperty(h.spec.light.color),intensity:new h.DataConstantProperty(h.spec.light.intensity)}),Dr="-transition";class Tl extends h.Evented{constructor(i){super(),this._transitionable=new h.Transitionable(Sr),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,d={}){if(!this._validate(h.validateLight,i,d))for(const m in i){const y=i[m];h.endsWith(m,Dr)?this._transitionable.setTransition(m.slice(0,-Dr.length),y):this._transitionable.setValue(m,y)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,d,m){return(!m||!1!==m.validate)&&h.emitValidationErrors(this,i.call(h.validateStyle,h.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:h.spec})))}}const Jn=new h.Properties({source:new h.DataConstantProperty(h.spec.terrain.source),exaggeration:new h.DataConstantProperty(h.spec.terrain.exaggeration)}),Kn="-transition";class wt extends h.Evented{constructor(i,d){super(),this._transitionable=new h.Transitionable(Jn),this.set(i),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=d}get(){return this._transitionable.serialize()}set(i){for(const d in i){const m=i[d];h.endsWith(d,Kn)?this._transitionable.setTransition(d.slice(0,-Kn.length),m):this._transitionable.setValue(d,m)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}}function Bi(p,i,d,m){const y=h.smoothstep(45,65,d),[v,C]=Io(p,m),M=h.length(i);let E=1-Math.min(1,Math.exp((M-v)/(C-v)*-6));return E*=E*E,E=Math.min(1,1.00747*E),E*y*p.alpha}function Io(p,i){const d=.5/Math.tan(.5*i);return[p.range[0]+d,p.range[1]+d]}const vi=new h.Properties({range:new h.DataConstantProperty(h.spec.fog.range),color:new h.DataConstantProperty(h.spec.fog.color),"high-color":new h.DataConstantProperty(h.spec.fog["high-color"]),"space-color":new h.DataConstantProperty(h.spec.fog["space-color"]),"horizon-blend":new h.DataConstantProperty(h.spec.fog["horizon-blend"]),"star-intensity":new h.DataConstantProperty(h.spec.fog["star-intensity"])}),ps="-transition";class Ai extends h.Evented{constructor(i,d){super(),this._transitionable=new h.Transitionable(vi),this.set(i),this._transitioning=this._transitionable.untransitioned(),this._transform=d}get state(){const i=this._transform,d="globe"===i.projection.name,m=h.globeToMercatorTransition(i.zoom),y=this.properties.get("range"),v=[.5,3];return{range:d?[h.number(v[0],y[0],m),h.number(v[1],y[1],m)]:y,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(i,d={}){if(!this._validate(h.validateFog,i,d)){for(const m of Object.keys(h.spec.fog))i&&void 0===i[m]&&(i[m]=h.spec.fog[m].default);for(const m in i){const y=i[m];h.endsWith(m,ps)?this._transitionable.setTransition(m.slice(0,-ps.length),y):this._transitionable.setValue(m,y)}}}getOpacity(i){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:h.smoothstep(45,65,i))*d.a}getOpacityAtLatLng(i,d){return this._transform.projection.supportsFog?function(m,y,v){const C=h.MercatorCoordinate.fromLngLat(y),M=v.elevation?v.elevation.getAtPointOrZero(C):0,E=[C.x,C.y,M];return h.transformMat4(E,E,v.mercatorFogMatrix),Bi(m,E,v.pitch,v._fov)}(this.state,i,d):0}getFovAdjustedRange(i){return this._transform.projection.supportsFog?Io(this.state,i):[0,1]}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,d,m){return(!m||!1!==m.validate)&&h.emitValidationErrors(this,i.call(h.validateStyle,h.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:h.spec})))}}class Gi{constructor(i,d){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=h.uniqueId();const m=this.workerPool.acquire(this.id);for(let y=0;y<m.length;y++){const v=new Gi.Actor(m[y],d,this.id);v.name=`Worker ${y}`,this.actors.push(v)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(i,d,m){h.asyncAll(this.actors,(y,v)=>{y.send(i,d,v)},m=m||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Fo(p,i,d){return i*(h.EXTENT/(p.tileSize*Math.pow(2,d-p.tileID.overscaledZ)))}Gi.Actor=h.Actor;class Ji{constructor(i,d,m,y){this.screenBounds=i,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=m,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,y)}static createFromScreenPoints(i,d){let m,y;if(i instanceof h.pointGeometry||"number"==typeof i[0]){const v=h.pointGeometry.convert(i);m=[h.pointGeometry.convert(i)],y=d.isPointAboveHorizon(v)}else{const v=h.pointGeometry.convert(i[0]),C=h.pointGeometry.convert(i[1]);m=[v,C],y=h.polygonizeBounds(v,C).every(M=>d.isPointAboveHorizon(M))}return new Ji(m,d.getCameraPoint(),y,d)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(i){return h.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],i)}bufferedCameraGeometry(i){const d=this.screenBounds[0],m=1===this.screenBounds.length?this.screenBounds[0].add(new h.pointGeometry(1,1)):this.screenBounds[1],y=h.polygonizeBounds(d,m,0,!1);return this.cameraPoint.y>m.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<m.x?y.splice(3,0,this.cameraPoint):this.cameraPoint.x>=m.x?y[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(y[3]=this.cameraPoint)),h.bufferConvexPolygon(y,i)}bufferedCameraGeometryGlobe(i){const d=this.screenBounds[0],m=1===this.screenBounds.length?this.screenBounds[0].add(new h.pointGeometry(1,1)):this.screenBounds[1],y=h.polygonizeBounds(d,m,i),v=this.cameraPoint.clone();switch(3*((v.y>d.y)+(v.y>m.y))+((v.x>d.x)+(v.x>m.x))){case 0:y[0]=v,y[4]=v.clone();break;case 1:y.splice(1,0,v);break;case 2:y[1]=v;break;case 3:y.splice(4,0,v);break;case 5:y.splice(2,0,v);break;case 6:y[3]=v;break;case 7:y.splice(3,0,v);break;case 8:y[2]=v}return y}containsTile(i,d,m,y=0){const v=i.queryPadding/d._projectionScaler+1,C=m?this._bufferedCameraMercator(v,d):this._bufferedScreenMercator(v,d);let M=i.tileID.wrap+(C.unwrapped?y:0);const E=C.polygon.map(K=>h.getTilePoint(i.tileTransform,K,M));if(!h.polygonIntersectsBox(E,0,0,h.EXTENT,h.EXTENT))return;M=i.tileID.wrap+(this.screenGeometryMercator.unwrapped?y:0);const k=this.screenGeometryMercator.polygon.map(K=>h.getTileVec3(i.tileTransform,K,M)),I=k.map(K=>new h.pointGeometry(K[0],K[1])),L=d.getFreeCameraOptions().position||new h.MercatorCoordinate(0,0,0),V=h.getTileVec3(i.tileTransform,L,M),Z=k.map(K=>{const G=h.sub(K,K,V);return h.normalize(G,G),new h.Ray(V,G)}),H=Fo(i,1,d.zoom)*d._projectionScaler;return{queryGeometry:this,tilespaceGeometry:I,tilespaceRays:Z,bufferedTilespaceGeometry:E,bufferedTilespaceBounds:(U=h.getBounds(E),U.min.x=h.clamp(U.min.x,0,h.EXTENT),U.min.y=h.clamp(U.min.y,0,h.EXTENT),U.max.x=h.clamp(U.max.x,0,h.EXTENT),U.max.y=h.clamp(U.max.y,0,h.EXTENT),U),tile:i,tileID:i.tileID,pixelToTileUnitsFactor:H};var U}_bufferedScreenMercator(i,d){const m=Br(i);if(this._screenRaycastCache[m])return this._screenRaycastCache[m];{let y;return y="globe"===d.projection.name?this._projectAndResample(this.bufferedScreenGeometry(i),d):{polygon:this.bufferedScreenGeometry(i).map(v=>d.pointCoordinate3D(v)),unwrapped:!0},this._screenRaycastCache[m]=y,y}}_bufferedCameraMercator(i,d){const m=Br(i);if(this._cameraRaycastCache[m])return this._cameraRaycastCache[m];{let y;return y="globe"===d.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(i),d):{polygon:this.bufferedCameraGeometry(i).map(v=>d.pointCoordinate3D(v)),unwrapped:!0},this._cameraRaycastCache[m]=y,y}}_projectAndResample(i,d){const m=function(v,C){const M=h.multiply([],C.pixelMatrix,C.globeMatrix),E=[0,-h.GLOBE_RADIUS,0,1],k=[0,h.GLOBE_RADIUS,0,1],I=[0,0,0,1];h.transformMat4$1(E,E,M),h.transformMat4$1(k,k,M),h.transformMat4$1(I,I,M);const L=new h.pointGeometry(E[0]/E[3],E[1]/E[3]),V=new h.pointGeometry(k[0]/k[3],k[1]/k[3]),Z=h.polygonContainsPoint(v,L)&&E[3]<I[3],H=h.polygonContainsPoint(v,V)&&k[3]<I[3];if(!Z&&!H)return null;const U=function(se,_e,Ce){for(let ve=1;ve<se.length;ve++){const Le=co(_e.pointCoordinate3D(se[ve-1]).x),ie=co(_e.pointCoordinate3D(se[ve]).x);if(Ce<0){if(Le<ie)return{idx:ve,t:-Le/(ie-1-Le)}}else if(ie<Le)return{idx:ve,t:(1-Le)/(ie+1-Le)}}return null}(v,C,Z?-1:1);if(!U)return null;const{idx:K,t:G}=U;let Q=K>1?lo(v.slice(0,K),C):[],j=K<v.length?lo(v.slice(K),C):[];Q=Q.map(se=>new h.pointGeometry(co(se.x),se.y)),j=j.map(se=>new h.pointGeometry(co(se.x),se.y));const ne=[...Q];0===ne.length&&ne.push(j[j.length-1]);const J=h.number(ne[ne.length-1].y,(0===j.length?Q[0]:j[0]).y,G);let $;return $=Z?[new h.pointGeometry(0,J),new h.pointGeometry(0,0),new h.pointGeometry(1,0),new h.pointGeometry(1,J)]:[new h.pointGeometry(1,J),new h.pointGeometry(1,1),new h.pointGeometry(0,1),new h.pointGeometry(0,J)],ne.push(...$),0===j.length?ne.push(Q[0]):ne.push(...j),{polygon:ne.map(se=>new h.MercatorCoordinate(se.x,se.y)),unwrapped:!1}}(i,d);if(m)return m;const y=function(v,C){let M=!1,E=-1/0,k=0;for(let L=0;L<v.length-1;L++)v[L].x>E&&(E=v[L].x,k=L);for(let L=0;L<v.length-1;L++){const V=(k+L)%(v.length-1),Z=v[V],H=v[V+1];Math.abs(Z.x-H.x)>.5&&(Z.x<H.x?(Z.x+=1,0===V&&(v[v.length-1].x+=1)):(H.x+=1,V+1===v.length-1&&(v[0].x+=1)),M=!0)}const I=h.mercatorXfromLng(C.center.lng);return M&&I<Math.abs(I-1)&&v.forEach(L=>{L.x-=1}),{polygon:v,unwrapped:M}}(lo(i,d).map(v=>new h.pointGeometry(co(v.x),v.y)),d);return{polygon:y.polygon.map(v=>new h.MercatorCoordinate(v.x,v.y)),unwrapped:y.unwrapped}}}function lo(p,i){return h.resample(p,d=>{const m=i.pointCoordinate3D(d);d.x=m.x,d.y=m.y},1/256)}function co(p){return p<0?1+p%1:p%1}function Br(p){return 100*p|0}function fs(p,i,d,m,y){const v=function(C,M){if(C)return y(C);if(M){const E=h.pick(h.extend(M,p),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);M.vector_layers&&(E.vectorLayers=M.vector_layers,E.vectorLayerIds=E.vectorLayers.map(k=>k.id)),M.language_options&&(E.languageOptions=M.language_options),M.language&&M.language[M.id]&&(E.language=M.language[M.id]),M.worldview_options&&(E.worldviewOptions=M.worldview_options),M.worldview?E.worldview=M.worldview[M.id]:M.worldview_default&&(E.worldview=M.worldview_default),E.tiles=i.canonicalizeTileset(E,p.url),y(null,E)}};return p.url?h.getJSON(i.transformRequest(i.normalizeSourceURL(p.url,null,d,m),h.ResourceType.Source),v):h.exported.frame(()=>v(null,p))}class Lo{constructor(i,d,m){this.bounds=h.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=d||0,this.maxzoom=m||24}validateBounds(i){return Array.isArray(i)&&4===i.length?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const d=Math.pow(2,i.z),m=Math.floor(h.mercatorXfromLng(this.bounds.getWest())*d),y=Math.floor(h.mercatorYfromLat(this.bounds.getNorth())*d),v=Math.ceil(h.mercatorXfromLng(this.bounds.getEast())*d),C=Math.ceil(h.mercatorYfromLat(this.bounds.getSouth())*d);return i.x>=m&&i.x<v&&i.y>=y&&i.y<C}}class xa{constructor(i,d,m){this.context=i;const y=i.gl;this.buffer=y.createBuffer(),this.dynamicDraw=Boolean(m),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||d.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const $n={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class kr{constructor(i,d,m,y){this.length=d.length,this.attributes=m,this.itemSize=d.bytesPerElement,this.dynamicDraw=y,this.context=i;const v=i.gl;this.buffer=v.createBuffer(),i.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,d){for(let m=0;m<this.attributes.length;m++){const y=d.attributes[this.attributes[m].name];void 0!==y&&i.enableVertexAttribArray(y)}}setVertexAttribPointers(i,d,m){for(let y=0;y<this.attributes.length;y++){const v=this.attributes[y],C=d.attributes[v.name];void 0!==C&&i.vertexAttribPointer(C,v.components,i[$n[v.type]],!1,this.itemSize,v.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Lt{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class uo extends Lt{getDefault(){return h.Color.transparent}set(i){const d=this.current;(i.r!==d.r||i.g!==d.g||i.b!==d.b||i.a!==d.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class nr extends Lt{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class wn extends Lt{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class sn extends Lt{getDefault(){return[!0,!0,!0,!0]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||i[2]!==d[2]||i[3]!==d[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ro extends Lt{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Tt extends Lt{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class or extends Lt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const d=this.current;(i.func!==d.func||i.ref!==d.ref||i.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Oo extends Lt{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||i[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class zo extends Lt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=i,this.dirty=!1}}class Pr extends Lt{getDefault(){return[0,1]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Ir extends Lt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=i,this.dirty=!1}}class ms extends Lt{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class gs extends Lt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.BLEND):d.disable(d.BLEND),this.current=i,this.dirty=!1}}class Cn extends Lt{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class ho extends Lt{getDefault(){return h.Color.transparent}set(i){const d=this.current;(i.r!==d.r||i.g!==d.g||i.b!==d.b||i.a!==d.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Fr extends Lt{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class El extends Lt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=i,this.dirty=!1}}class Mn extends Lt{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Vo extends Lt{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class _s extends Lt{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class ys extends Lt{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class xs extends Lt{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||i[2]!==d[2]||i[3]!==d[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class vs extends Lt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class As extends Lt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class va extends Lt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Sl extends Lt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class jc extends Lt{getDefault(){return null}set(i){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class rr extends Lt{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class No extends Lt{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Aa extends Lt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Dl extends Lt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class mn extends Lt{constructor(i,d){super(i),this.context=i,this.parent=d}getDefault(){return null}}class bs extends mn{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class X extends mn{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class R extends X{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class O{constructor(i,d,m,y){this.context=i,this.width=d,this.height=m;const v=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new bs(i,v),y&&(this.depthAttachment=new X(i,v))}destroy(){const i=this.context.gl,d=this.colorAttachment.get();if(d&&i.deleteTexture(d),this.depthAttachment){const m=this.depthAttachment.get();m&&i.deleteRenderbuffer(m)}i.deleteFramebuffer(this.framebuffer)}}class Y{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new uo(this),this.clearDepth=new nr(this),this.clearStencil=new wn(this),this.colorMask=new sn(this),this.depthMask=new Ro(this),this.stencilMask=new Tt(this),this.stencilFunc=new or(this),this.stencilOp=new Oo(this),this.stencilTest=new zo(this),this.depthRange=new Pr(this),this.depthTest=new Ir(this),this.depthFunc=new ms(this),this.blend=new gs(this),this.blendFunc=new Cn(this),this.blendColor=new ho(this),this.blendEquation=new Fr(this),this.cullFace=new El(this),this.cullFaceSide=new Mn(this),this.frontFace=new Vo(this),this.program=new _s(this),this.activeTexture=new ys(this),this.viewport=new xs(this),this.bindFramebuffer=new vs(this),this.bindRenderbuffer=new As(this),this.bindTexture=new va(this),this.bindVertexBuffer=new Sl(this),this.bindElementBuffer=new jc(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new rr(this),this.pixelStoreUnpack=new No(this),this.pixelStoreUnpackPremultiplyAlpha=new Aa(this),this.pixelStoreUnpackFlipY=new Dl(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=i.getExtension("OES_standard_derivatives"),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,d){return new xa(this,i,d)}createVertexBuffer(i,d,m){return new kr(this,i,d,m)}createRenderbuffer(i,d,m){const y=this.gl,v=y.createRenderbuffer();return this.bindRenderbuffer.set(v),y.renderbufferStorage(y.RENDERBUFFER,i,d,m),this.bindRenderbuffer.set(null),v}createFramebuffer(i,d,m){return new O(this,i,d,m)}clear({color:i,depth:d,stencil:m}){const y=this.gl;let v=0;i&&(v|=y.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),void 0!==d&&(v|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),void 0!==m&&(v|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),y.clear(v)}setCullFace(i){!1===i.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){Oe(i.blendFunction,h.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class ee extends h.Evented{constructor(i,d,m,y){super(),this.id=i,this.dispatcher=m,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=h.extend({type:"raster"},d),h.extend(this,h.pick(d,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=fs(this._options,this.map._requestManager,null,null,(i,d)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new h.ErrorEvent(i)):d&&(h.extend(this,d),d.bounds&&(this.tileBounds=new Lo(d.bounds,this.minzoom,this.maxzoom)),h.postTurnstileEvent(d.tiles),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return h.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,d){const m=h.exported.devicePixelRatio>=2,y=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),m,this.tileSize);i.request=h.getImage(this.map._requestManager.transformRequest(y,h.ResourceType.Tile),(v,C,M,E)=>(delete i.request,i.aborted?(i.state="unloaded",d(null)):v?(i.state="errored",d(v)):C?(this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:M,expires:E}),i.setTexture(C,this.map.painter),i.state="loaded",h.cacheEntryPossiblyAdded(this.dispatcher),void d(null)):d(null)))}static loadTileData(i,d,m){i.setTexture(d,m)}static unloadTileData(i,d){i.texture&&d.saveTileTexture(i.texture)}abortTile(i,d){i.request&&(i.request.cancel(),delete i.request),d()}unloadTile(i,d){i.texture&&this.map.painter.saveTileTexture(i.texture),d()}hasTransition(){return!1}}let le;function me(p,i,d,m,y,v,C,M){const E=[p,d,y,i,m,v,1,1,1],k=[C,M,1],I=h.adjoint([],E),[L,V,Z]=h.transformMat3(k,k,h.transpose(I,I));return h.multiply$1(E,[L,0,0,0,V,0,0,0,Z],E)}class pe extends h.Evented{constructor(i,d,m,y){super(),this.id=i,this.dispatcher=m,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=d}load(i,d){this._loaded=d||!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this.url=this.options.url,h.getImage(this.map._requestManager.transformRequest(this.url,h.ResourceType.Image),(m,y)=>{if(this._loaded=!0,m)this.fire(new h.ErrorEvent(m));else if(y){const{HTMLImageElement:v}=h.window;this.image=y instanceof v?h.exported.getImageData(y):y,this.width=this.image.width,this.height=this.image.height,i&&(this.coordinates=i),this._finishLoading()}})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this.texture&&this.texture.destroy()}setCoordinates(i){this.coordinates=i,this._boundsArray=void 0;const d=i.map(h.MercatorCoordinate.fromLngLat);return this.tileID=function(m){let y=1/0,v=1/0,C=-1/0,M=-1/0;for(const L of m)y=Math.min(y,L.x),v=Math.min(v,L.y),C=Math.max(C,L.x),M=Math.max(M,L.y);const E=Math.max(C-y,M-v),k=Math.max(0,Math.floor(-Math.log(E)/Math.LN2)),I=Math.pow(2,k);return new h.CanonicalTileID(k,Math.floor((y+C)/2*I),Math.floor((v+M)/2*I))}(d),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(i){for(const E in this.tiles){const k=this.tiles[E];"loaded"!==k.state&&(k.state="loaded",k.texture=this.texture)}if(this._boundsArray)return;const d=h.tileTransform(this.tileID,this.map.transform.projection),[m,y,v,C]=this.coordinates.map(E=>{const k=d.projection.project(E[0],E[1]);return h.getTilePoint(d,k)._round()});this.perspectiveTransform=function(E,k,I,L,V,Z,H,U,K,G){const Q=me(0,0,E,0,0,k,E,k),j=me(I,L,V,Z,H,U,K,G);return h.multiply$1(j,h.adjoint(Q,Q),j),[j[6]/j[8]*E/h.EXTENT,j[7]/j[8]*k/h.EXTENT]}(this.width,this.height,m.x,m.y,y.x,y.y,C.x,C.y,v.x,v.y);const M=this._boundsArray=new h.StructArrayLayout4i8;M.emplaceBack(m.x,m.y,0,0),M.emplaceBack(y.x,y.y,h.EXTENT,0),M.emplaceBack(C.x,C.y,0,h.EXTENT),M.emplaceBack(v.x,v.y,h.EXTENT,h.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=i.createVertexBuffer(M,h.boundsAttributes.members),this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const i=this.map.painter.context,d=i.gl;this.texture?this.texture.update(this.image):(this.texture=new h.Texture(i,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this._prepareData(i)}loadTile(i,d){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},d(null)):(i.state="errored",d(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const de={vector:class extends h.Evented{constructor(p,i,d,m){if(super(),this.id=p,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,h.extend(this,h.pick(i,["url","scheme","tileSize","promoteId"])),this._options=h.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m),this._tileWorkers={},this._deduped=new h.DedupedRequest}load(p){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"}));const i=this.language||this.map._language,d=this.worldview||this.map._worldview;this._tileJSONRequest=fs(this._options,this.map._requestManager,i,d,(m,y)=>{this._tileJSONRequest=null,this._loaded=!0,m?(i&&console.warn(`Ensure that your requested language string is a valid BCP-47 code. Found: ${i}`),d&&2!==d.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${d}`),this.fire(new h.ErrorEvent(m))):y&&(h.extend(this,y),y.bounds&&(this.tileBounds=new Lo(y.bounds,this.minzoom,this.maxzoom)),h.postTurnstileEvent(y.tiles,this.map._requestManager._customAccessToken),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"}))),p&&p(m)})}loaded(){return this._loaded}hasTile(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)}onAdd(p){this.map=p,this.load()}setSourceProperty(p){this._tileJSONRequest&&this._tileJSONRequest.cancel(),p(),this.load(()=>{const i=this.map.style._getSourceCaches(this.id);for(const d of i)d.clearTiles()})}setTiles(p){return this.setSourceProperty(()=>{this._options.tiles=p}),this}setUrl(p){return this.setSourceProperty(()=>{this.url=p,this._options.url=p}),this}_setLanguage(p){return p===this.language||this.setSourceProperty(()=>{this.language=p}),this}_setWorldview(p){return p===this.worldview?this:this.worldviewOptions&&p&&!this.worldviewOptions[p]?(console.warn(`Vector tile source "${this.id}" does not support worldview "${p}".`),this):(this.setSourceProperty(()=>{this.worldview=p}),this)}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return h.extend({},this._options)}loadTile(p,i){const d=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme)),m={request:this.map._requestManager.transformRequest(d,h.ResourceType.Tile),data:void 0,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,tileSize:this.tileSize*p.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:h.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:p.isSymbolTile};if(m.request.collectResourceTiming=this._collectResourceTiming,p.actor&&"expired"!==p.state)"loading"===p.state?p.reloadCallback=i:p.request=p.actor.send("reloadTile",m,y.bind(this));else if(p.actor=this._tileWorkers[d]=this._tileWorkers[d]||this.dispatcher.getActor(),this.dispatcher.ready)p.request=p.actor.send("loadTile",m,y.bind(this),void 0,!0);else{const v=h.loadVectorTile.call({deduped:this._deduped},m,(C,M)=>{C||!M?y.call(this,C):(m.data={cacheControl:M.cacheControl,expires:M.expires,rawData:M.rawData.slice(0)},p.actor&&p.actor.send("loadTile",m,y.bind(this),void 0,!0))},!0);p.request={cancel:v}}function y(v,C){return delete p.request,p.aborted?i(null):v&&404!==v.status?i(v):(C&&C.resourceTiming&&(p.resourceTiming=C.resourceTiming),this.map._refreshExpiredTiles&&C&&p.setExpiryData(C),p.loadVectorData(C,this.map.painter),h.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(p.reloadCallback&&(this.loadTile(p,p.reloadCallback),p.reloadCallback=null)))}}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.actor&&p.actor.send("abortTile",{uid:p.uid,type:this.type,source:this.id})}unloadTile(p){p.unloadVectorData(),p.actor&&p.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:ee,"raster-dem":class extends ee{constructor(p,i,d,m){super(p,i,d,m),this.type="raster-dem",this.maxzoom=22,this._options=h.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(p,i){const d=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function m(y,v){y&&(p.state="errored",i(y)),v&&(p.dem=v,p.dem.onDeserialize(),p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0,p.state="loaded",i(null))}p.request=h.getImage(this.map._requestManager.transformRequest(d,h.ResourceType.Tile),function(y,v,C,M){if(delete p.request,p.aborted)p.state="unloaded",i(null);else if(y)p.state="errored",i(y);else if(v){this.map._refreshExpiredTiles&&p.setExpiryData({cacheControl:C,expires:M});const E=h.window.ImageBitmap&&v instanceof h.window.ImageBitmap&&(null==le&&(le=h.window.OffscreenCanvas&&new h.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof h.window.createImageBitmap),le),k=1-(v.width-h.prevPowerOfTwo(v.width))/2;k<1||p.neighboringTiles||(p.neighboringTiles=this._getNeighboringTiles(p.tileID));const I=E?v:h.exported.getImageData(v,k),L={uid:p.uid,coord:p.tileID,source:this.id,rawImageData:I,encoding:this.encoding,padding:k};p.actor&&"expired"!==p.state||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",L,m.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(p){const i=p.canonical,d=Math.pow(2,i.z),m=(i.x-1+d)%d,y=0===i.x?p.wrap-1:p.wrap,v=(i.x+1+d)%d,C=i.x+1===d?p.wrap+1:p.wrap,M={};return M[new h.OverscaledTileID(p.overscaledZ,y,i.z,m,i.y).key]={backfilled:!1},M[new h.OverscaledTileID(p.overscaledZ,C,i.z,v,i.y).key]={backfilled:!1},i.y>0&&(M[new h.OverscaledTileID(p.overscaledZ,y,i.z,m,i.y-1).key]={backfilled:!1},M[new h.OverscaledTileID(p.overscaledZ,p.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},M[new h.OverscaledTileID(p.overscaledZ,C,i.z,v,i.y-1).key]={backfilled:!1}),i.y+1<d&&(M[new h.OverscaledTileID(p.overscaledZ,y,i.z,m,i.y+1).key]={backfilled:!1},M[new h.OverscaledTileID(p.overscaledZ,p.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},M[new h.OverscaledTileID(p.overscaledZ,C,i.z,v,i.y+1).key]={backfilled:!1}),M}unloadTile(p){p.demTexture&&this.map.painter.saveTileTexture(p.demTexture),p.fbo&&(p.fbo.destroy(),delete p.fbo),p.dem&&delete p.dem,delete p.neighboringTiles,p.state="unloaded"}},geojson:class extends h.Evented{constructor(p,i,d,m){super(),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(m),this._data=i.data,this._options=h.extend({},i),this._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const y=h.EXTENT/this.tileSize;this.workerOptions=h.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*y,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*y,extent:h.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:h.EXTENT,radius:(void 0!==i.clusterRadius?i.clusterRadius:50)*y,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}onAdd(p){this.map=p,this.setData(this._data)}setData(p){return this._data=p,this._updateWorkerData(),this}getClusterExpansionZoom(p,i){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id},i),this}getClusterChildren(p,i){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id},i),this}getClusterLeaves(p,i,d,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:p,limit:i,offset:d},m),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new h.Event("dataloading",{dataType:"source"})),this._loaded=!1;const p=h.extend({},this.workerOptions),i=this._data;"string"==typeof i?(p.request=this.map._requestManager.transformRequest(h.exported.resolveURL(i),h.ResourceType.Source),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(i),this._pendingLoad=this.actor.send(`${this.type}.loadData`,p,(d,m)=>{if(this._loaded=!0,this._pendingLoad=null,d)this.fire(new h.ErrorEvent(d));else{const y={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&m&&m.resourceTiming&&m.resourceTiming[this.id]&&(y.resourceTiming=m.resourceTiming[this.id]),this.fire(new h.Event("data",y)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(p,i){const d=p.actor?"reloadTile":"loadTile";p.actor=this.actor,p.request=this.actor.send(d,{type:this.type,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:h.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(m,y)=>(delete p.request,p.unloadVectorData(),p.aborted?i(null):m?i(m):(p.loadVectorData(y,this.map.painter,"reloadTile"===d),i(null))),void 0,"loadTile"===d)}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0}unloadTile(p){p.unloadVectorData(),this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return h.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends pe{constructor(p,i,d,m){super(p,i,d,m),this.roundZoom=!0,this.type="video",this.options=i}load(){this._loaded=!1;const p=this.options;this.urls=[];for(const i of p.urls)this.urls.push(this.map._requestManager.transformRequest(i,h.ResourceType.Source).url);h.getVideo(this.urls,(i,d)=>{this._loaded=!0,i?this.fire(new h.ErrorEvent(i)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(p){if(this.video){const i=this.video.seekable;p<i.start(0)||p>i.end(0)?this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=p}}getVideo(){return this.video}onAdd(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const p=this.map.painter.context,i=p.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new h.Texture(p,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(p)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:pe,canvas:class extends pe{constructor(p,i,d,m){super(p,i,d,m),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some(y=>!Array.isArray(y)||2!==y.length||y.some(v=>"number"!=typeof v))||this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${p}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${p}`,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${p}`,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof h.window.HTMLCanvasElement||this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${p}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${p}`,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof h.window.HTMLCanvasElement?this.options.canvas:h.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new h.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let p=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,p=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,p=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const i=this.map.painter.context;this.texture?(p||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new h.Texture(i,this.canvas,i.gl.RGBA,{premultiply:!0}),this._prepareData(i)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const p of[this.canvas.width,this.canvas.height])if(isNaN(p)||p<=0)return!0;return!1}},custom:class extends h.Evented{constructor(p,i,d,m){super(),this.id=p,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=i,this.setEventedParent(m),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new h.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new h.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Lo(this._implementation.bounds,this.minzoom,this.maxzoom)),i.update=this._update.bind(this),i.coveringTiles=this._coveringTiles.bind(this),h.extend(this,h.pick(i,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return h.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(p){this._map=p,this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(p),this.load()}onRemove(p){this._implementation.onRemove&&this._implementation.onRemove(p)}hasTile(p){if(this._implementation.hasTile){const{x:i,y:d,z:m}=p.canonical;return this._implementation.hasTile({x:i,y:d,z:m})}return!this.tileBounds||this.tileBounds.contains(p.canonical)}loadTile(p,i){const{x:d,y:m,z:y}=p.tileID.canonical,v=new h.window.AbortController,C=this._implementation.loadTile({x:d,y:m,z:y},{signal:v.signal});if(!C)return this.loadTileData(p,{width:this.tileSize,height:this.tileSize,data:null}),p.state="loaded",i(null);C.cancel=()=>v.abort(),p.request=C.then(function(M){return delete p.request,p.aborted?(p.state="unloaded",i(null)):M?(E=M)instanceof h.window.ImageData||E instanceof h.window.ImageBitmap||E instanceof h.window.HTMLCanvasElement?(this.loadTileData(p,M),p.state="loaded",void i(null)):(p.state="errored",i(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`))):(this.loadTileData(p,{width:this.tileSize,height:this.tileSize,data:null}),p.state="loaded",i(null));var E}.bind(this)).catch(M=>{20!==M.code&&(p.state="errored",i(M))})}loadTileData(p,i){ee.loadTileData(p,i,this._map.painter)}unloadTileData(p){ee.unloadTileData(p,this._map.painter)}prepareTile(p){if(!this._implementation.prepareTile)return null;const{x:i,y:d,z:m}=p.tileID.canonical,y=this._implementation.prepareTile({x:i,y:d,z:m});return y?(this.loadTileData(p,y),p.state="loaded",y):null}unloadTile(p,i){if(this.unloadTileData(p),this._implementation.unloadTile){const{x:d,y:m,z:y}=p.tileID.canonical;this._implementation.unloadTile({x:d,y:m,z:y})}i()}abortTile(p,i){p.request&&p.request.cancel&&(p.request.cancel(),delete p.request),i()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(p=>({x:p.canonical.x,y:p.canonical.y,z:p.canonical.z}))}_update(){this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"}))}}},xe=function(p,i,d,m){const y=new de[i.type](p,i,d,m);if(y.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${y.id}`);return h.bindAll(["load","abort","unload","serialize","prepare"],y),y};function De(p,i){const d=h.identity([]);return h.scale(d,d,[.5*p.width,.5*-p.height,1]),h.translate(d,d,[1,-1,0]),h.multiply(d,d,p.calculateProjMatrix(i.toUnwrapped())),Float32Array.from(d)}function We(p,i,d,m,y,v,C,M=!1){const E=p.tilesIn(m,C,M);E.sort(nt);const k=[];for(const L of E)k.push({wrappedTileID:L.tile.tileID.wrapped().key,queryResults:L.tile.queryRenderedFeatures(i,d,p._state,L,y,v,De(p.transform,L.tile.tileID),M)});const I=function(L){const V={},Z={};for(const H of L){const U=H.queryResults,K=H.wrappedTileID,G=Z[K]=Z[K]||{};for(const Q in U){const j=U[Q],ne=G[Q]=G[Q]||{},J=V[Q]=V[Q]||[];for(const $ of j)ne[$.featureIndex]||(ne[$.featureIndex]=!0,J.push($))}}return V}(k);for(const L in I)I[L].forEach(V=>{const Z=V.feature,H=Z.layer;H&&"background"!==H.type&&"sky"!==H.type&&(Z.source=H.source,H["source-layer"]&&(Z.sourceLayer=H["source-layer"]),Z.state=void 0!==Z.id?p.getFeatureState(H["source-layer"],Z.id):{})});return I}function Pe(p,i){const d=p.getRenderableIds().map(v=>p.getTileByID(v)),m=[],y={};for(let v=0;v<d.length;v++){const C=d[v],M=C.tileID.canonical.key;y[M]||(y[M]=!0,C.querySourceFeatures(m,i))}return m}function nt(p,i){const d=p.tileID,m=i.tileID;return d.overscaledZ-m.overscaledZ||d.canonical.y-m.canonical.y||d.wrap-m.wrap||d.canonical.x-m.canonical.x}function at(){return null!=Xa.workerClass?new Xa.workerClass:new h.window.Worker(Xa.workerUrl)}const ot="mapboxgl_preloaded_worker_pool";class ct{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<ct.workerCount;)this.workers.push(new at);return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],0===this.numActive()&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ot]}numActive(){return Object.keys(this.active).length}}let At;function Nt(){return At||(At=new ct),At}function ii(p,i){const d={};for(const m in p)"ref"!==m&&(d[m]=p[m]);return h.refProperties.forEach(m=>{m in i&&(d[m]=i[m])}),d}function jt(p){p=p.slice();const i=Object.create(null);for(let d=0;d<p.length;d++)i[p[d].id]=p[d];for(let d=0;d<p.length;d++)"ref"in p[d]&&(p[d]=ii(p[d],i[p[d].ref]));return p}ct.workerCount=2;const fe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Tn(p,i,d){d.push({command:fe.addSource,args:[p,i[p]]})}function ci(p,i,d){i.push({command:fe.removeSource,args:[p]}),d[p]=!0}function On(p,i,d,m){ci(p,d,m),Tn(p,i,d)}function ip(p,i,d){let m;for(m in p[d])if(p[d].hasOwnProperty(m)&&"data"!==m&&!Oe(p[d][m],i[d][m]))return!1;for(m in i[d])if(i[d].hasOwnProperty(m)&&"data"!==m&&!Oe(p[d][m],i[d][m]))return!1;return!0}function En(p,i,d,m,y,v){let C;for(C in i=i||{},p=p||{})p.hasOwnProperty(C)&&(Oe(p[C],i[C])||d.push({command:v,args:[m,C,i[C],y]}));for(C in i)i.hasOwnProperty(C)&&!p.hasOwnProperty(C)&&(Oe(p[C],i[C])||d.push({command:v,args:[m,C,i[C],y]}))}function Bl(p){return p.id}function fu(p,i){return p[i.id]=i,p}class ws{constructor(i,d){this.reset(i,d)}reset(i,d){this.points=i||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(1===this.points.length)return this.points[0];i=h.clamp(i,0,1);let d=1,m=this._distances[d];const y=i*this.paddedLength+this.padding;for(;m<y&&d<this._distances.length;)m=this._distances[++d];const v=d-1,C=this._distances[v],M=m-C,E=M>0?(y-C)/M:0;return this.points[v].mult(1-E).add(this.points[d].mult(E))}}class Qe{constructor(i,d,m){const y=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(i/m),this.yCellCount=Math.ceil(d/m);for(let C=0;C<this.xCellCount*this.yCellCount;C++)y.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=d,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,d,m,y,v){this._forEachCell(d,m,y,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(y),this.bboxes.push(v)}insertCircle(i,d,m,y){this._forEachCell(d-y,m-y,d+y,m+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(d),this.circles.push(m),this.circles.push(y)}_insertBoxCell(i,d,m,y,v,C){this.boxCells[v].push(C)}_insertCircleCell(i,d,m,y,v,C){this.circleCells[v].push(C)}_query(i,d,m,y,v,C){if(m<0||i>this.width||y<0||d>this.height)return!v&&[];const M=[];if(i<=0&&d<=0&&this.width<=m&&this.height<=y){if(v)return!0;for(let E=0;E<this.boxKeys.length;E++)M.push({key:this.boxKeys[E],x1:this.bboxes[4*E],y1:this.bboxes[4*E+1],x2:this.bboxes[4*E+2],y2:this.bboxes[4*E+3]});for(let E=0;E<this.circleKeys.length;E++){const k=this.circles[3*E],I=this.circles[3*E+1],L=this.circles[3*E+2];M.push({key:this.circleKeys[E],x1:k-L,y1:I-L,x2:k+L,y2:I+L})}return C?M.filter(C):M}return this._forEachCell(i,d,m,y,this._queryCell,M,{hitTest:v,seenUids:{box:{},circle:{}}},C),v?M.length>0:M}_queryCircle(i,d,m,y,v){const C=i-m,M=i+m,E=d-m,k=d+m;if(M<0||C>this.width||k<0||E>this.height)return!y&&[];const I=[];return this._forEachCell(C,E,M,k,this._queryCellCircle,I,{hitTest:y,circle:{x:i,y:d,radius:m},seenUids:{box:{},circle:{}}},v),y?I.length>0:I}query(i,d,m,y,v){return this._query(i,d,m,y,!1,v)}hitTest(i,d,m,y,v){return this._query(i,d,m,y,!0,v)}hitTestCircle(i,d,m,y){return this._queryCircle(i,d,m,!0,y)}_queryCell(i,d,m,y,v,C,M,E){const k=M.seenUids,I=this.boxCells[v];if(null!==I){const V=this.bboxes;for(const Z of I)if(!k.box[Z]){k.box[Z]=!0;const H=4*Z;if(i<=V[H+2]&&d<=V[H+3]&&m>=V[H+0]&&y>=V[H+1]&&(!E||E(this.boxKeys[Z]))){if(M.hitTest)return C.push(!0),!0;C.push({key:this.boxKeys[Z],x1:V[H],y1:V[H+1],x2:V[H+2],y2:V[H+3]})}}}const L=this.circleCells[v];if(null!==L){const V=this.circles;for(const Z of L)if(!k.circle[Z]){k.circle[Z]=!0;const H=3*Z;if(this._circleAndRectCollide(V[H],V[H+1],V[H+2],i,d,m,y)&&(!E||E(this.circleKeys[Z]))){if(M.hitTest)return C.push(!0),!0;{const U=V[H],K=V[H+1],G=V[H+2];C.push({key:this.circleKeys[Z],x1:U-G,y1:K-G,x2:U+G,y2:K+G})}}}}}_queryCellCircle(i,d,m,y,v,C,M,E){const k=M.circle,I=M.seenUids,L=this.boxCells[v];if(null!==L){const Z=this.bboxes;for(const H of L)if(!I.box[H]){I.box[H]=!0;const U=4*H;if(this._circleAndRectCollide(k.x,k.y,k.radius,Z[U+0],Z[U+1],Z[U+2],Z[U+3])&&(!E||E(this.boxKeys[H])))return C.push(!0),!0}}const V=this.circleCells[v];if(null!==V){const Z=this.circles;for(const H of V)if(!I.circle[H]){I.circle[H]=!0;const U=3*H;if(this._circlesCollide(Z[U],Z[U+1],Z[U+2],k.x,k.y,k.radius)&&(!E||E(this.circleKeys[H])))return C.push(!0),!0}}}_forEachCell(i,d,m,y,v,C,M,E){const k=this._convertToXCellCoord(i),I=this._convertToYCellCoord(d),L=this._convertToXCellCoord(m),V=this._convertToYCellCoord(y);for(let Z=k;Z<=L;Z++)for(let H=I;H<=V;H++)if(v.call(this,i,d,m,y,this.xCellCount*H+Z,C,M,E))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,d,m,y,v,C){const M=y-i,E=v-d,k=m+C;return k*k>M*M+E*E}_circleAndRectCollide(i,d,m,y,v,C,M){const E=(C-y)/2,k=Math.abs(i-(y+E));if(k>E+m)return!1;const I=(M-v)/2,L=Math.abs(d-(v+I));if(L>I+m)return!1;if(k<=E||L<=I)return!0;const V=k-E,Z=L-I;return V*V+Z*Z<=m*m}}const kt=Math.tan(85*Math.PI/180);function bt(p,i,d,m,y,v,C){const M=h.create();if(d)if("globe"===v.name){const E=h.calculateGlobeLabelMatrix(y,i);h.multiply(M,M,E)}else{const E=ir([],C);M[0]=E[0],M[1]=E[1],M[4]=E[2],M[5]=E[3],m||h.rotateZ(M,M,y.angle)}else h.multiply(M,y.labelPlaneMatrix,p);return M}function eo(p,i,d,m,y,v,C){const M=bt(p,i,d,m,y,v,C);return"globe"===v.name&&d||(M[2]=M[6]=M[10]=M[14]=0),M}function Lr(p,i,d,m,y,v,C){if(d){if("globe"===v.name){const M=bt(p,i,d,m,y,v,C);return h.invert(M,M),h.multiply(M,p,M),M}{const M=h.clone(p),E=h.identity([]);return E[0]=C[0],E[1]=C[1],E[4]=C[2],E[5]=C[3],h.multiply(M,M,E),m||h.rotateZ(M,M,-y.angle),M}}return y.glCoordMatrix}function yt(p,i,d=0){const m=[p.x,p.y,d,1];d?h.transformMat4$1(m,m,i):bi(m,m,i);const y=m[3];return{point:[m[0]/y,m[1]/y,m[2]/y],signedDistanceFromCamera:y}}function Uo(p,i){const d=[p[0],p[1],p[2],1];h.transformMat4$1(d,d,i);const m=d[3];return{point:[d[0]/m,d[1]/m,d[2]/m],signedDistanceFromCamera:m}}function ba(p,i){return Math.min(.5+p/i*.5,1.5)}function Cs(p,i){const d=p[0]/p[3],m=p[1]/p[3];return d>=-i[0]&&d<=i[0]&&m>=-i[1]&&m<=i[1]}function zn(p,i,d,m,y,v,C,M,E,k){const I=d.transform,L=m?p.textSizeData:p.iconSizeData,V=h.evaluateSizeForZoom(L,d.transform.zoom),Z="globe"===I.projection.name,H=[256/d.width*2+1,256/d.height*2+1],U=m?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;U.clear();let K=null;Z&&(K=m?p.text.globeExtVertexArray:p.icon.globeExtVertexArray);const G=p.lineVertexArray,Q=m?p.text.placedSymbolArray:p.icon.placedSymbolArray,j=d.transform.width/d.transform.height;let ne=!1;for(let J=0;J<Q.length;J++){const $=Q.get(J);if($.writingMode!==h.WritingMode.vertical||ne||0!==J&&Q.get(J-1).writingMode===h.WritingMode.horizontal||(ne=!0),($.hidden||$.writingMode===h.WritingMode.vertical)&&!ne){ki($.numGlyphs,U);continue}ne=!1;const se=new h.pointGeometry($.tileAnchorX,$.tileAnchorY),_e=E?E(se):[0,0,0],Ce=I.projection.projectTilePoint(se.x,se.y,k.canonical),ve=[Ce.x+_e[0],Ce.y+_e[1],Ce.z+_e[2]],Le=[...ve,1];if(h.transformMat4$1(Le,Le,i),!Cs(Le,H)){ki($.numGlyphs,U);continue}const ie=ba(d.transform.cameraToCenterDistance,Le[3]),ge=h.evaluateSizeForFeature(L,V,$),Ee=C?ge/ie:ge*ie,Ze=yt(new h.pointGeometry(ve[0],ve[1]),y,ve[2]);if(Ze.signedDistanceFromCamera<=0){ki($.numGlyphs,U);continue}let Me={};const ze=C?null:E,Ve=wa($,Ee,!1,M,i,y,v,p.glyphOffsetArray,G,U,K,Ze.point,se,Me,j,ze,I.projection,k,C);ne=Ve.useVertical,ze&&Ve.needsFlipping&&(Me={}),(Ve.notEnoughRoom||ne||Ve.needsFlipping&&wa($,Ee,!0,M,i,y,v,p.glyphOffsetArray,G,U,K,Ze.point,se,Me,j,ze,I.projection,k,C).notEnoughRoom)&&ki($.numGlyphs,U)}m?(p.text.dynamicLayoutVertexBuffer.updateData(U),K&&p.text.globeExtVertexBuffer.updateData(K)):(p.icon.dynamicLayoutVertexBuffer.updateData(U),K&&p.icon.globeExtVertexBuffer.updateData(K))}function di(p,i,d,m,y,v,C,M,E,k,I,L,V,Z,H,U){const K=M.glyphStartIndex+M.numGlyphs,G=M.lineStartIndex,Q=M.lineStartIndex+M.lineLength,j=i.getoffsetX(M.glyphStartIndex),ne=i.getoffsetX(K-1),J=Ma(p*j,d,m,y,v,C,M.segment,G,Q,E,k,I,L,V,!0,Z,H,U);if(!J)return null;const $=Ma(p*ne,d,m,y,v,C,M.segment,G,Q,E,k,I,L,V,!0,Z,H,U);return $?{first:J,last:$}:null}function mu(p,i,d,m){return p.writingMode===h.WritingMode.horizontal&&Math.abs(d.y-i.y)>Math.abs(d.x-i.x)*m?{useVertical:!0}:p.writingMode===h.WritingMode.vertical?i.y<d.y?{needsFlipping:!0}:null:0!==p.flipState&&function(y,v,C){const M=(v.x-y.x)*C;return 0===M||Math.abs((v.y-y.y)/M)>kt}(i,d,m)?1===p.flipState?{needsFlipping:!0}:null:i.x>d.x?{needsFlipping:!0}:null}function wa(p,i,d,m,y,v,C,M,E,k,I,L,V,Z,H,U,K,G,Q){const j=i/24,ne=p.lineOffsetX*j,J=p.lineOffsetY*j;let $;if(p.numGlyphs>1){const se=p.glyphStartIndex+p.numGlyphs,_e=p.lineStartIndex,Ce=p.lineStartIndex+p.lineLength,ve=di(j,M,ne,J,d,L,V,p,E,v,Z,U,!1,K,G,Q);if(!ve)return{notEnoughRoom:!0};const Le=Uo(ve.first.point,C).point,ie=Uo(ve.last.point,C).point,ge=new h.pointGeometry(Le[0],Le[1]),Ee=new h.pointGeometry(ie[0],ie[1]);if(m&&!d){const Ze=mu(p,ge,Ee,H);if(p.flipState=Ze&&Ze.needsFlipping?1:2,Ze)return Ze}$=[ve.first];for(let Ze=p.glyphStartIndex+1;Ze<se-1;Ze++)$.push(Ma(j*M.getoffsetX(Ze),ne,J,d,L,V,p.segment,_e,Ce,E,v,Z,U,!1,!1,K,G,Q));$.push(ve.last)}else{if(m&&!d){const _e=yt(V,y).point,Ce=p.lineStartIndex+p.segment+1,ve=new h.pointGeometry(E.getx(Ce),E.gety(Ce)),Le=yt(ve,y),ie=Le.signedDistanceFromCamera>0?Le.point:Ca(V,ve,_e,1,y,void 0,K,G.canonical),ge=mu(p,new h.pointGeometry(_e[0],_e[1]),new h.pointGeometry(ie[0],ie[1]),H);if(p.flipState=ge&&ge.needsFlipping?1:2,ge)return ge}const se=Ma(j*M.getoffsetX(p.glyphStartIndex),ne,J,d,L,V,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,E,v,Z,U,!1,!1,K,G,Q);if(!se)return{notEnoughRoom:!0};$=[se]}if(I)for(const se of $)h.updateGlobeVertexNormal(I,k.length+0,se.up[0],se.up[1],se.up[2]),h.updateGlobeVertexNormal(I,k.length+1,se.up[0],se.up[1],se.up[2]),h.updateGlobeVertexNormal(I,k.length+2,se.up[0],se.up[1],se.up[2]),h.updateGlobeVertexNormal(I,k.length+3,se.up[0],se.up[1],se.up[2]),h.addDynamicAttributes(k,se.point[0],se.point[1],se.point[2],se.angle);else for(const se of $)h.addDynamicAttributes(k,se.point[0],se.point[1],se.point[2],se.angle);return{}}function kl(p,i,d,m,y){const v=m.projectTilePoint(p.x,p.y,i);if(!y)return yt(v,d,v.z);const C=y(p);return yt(new h.pointGeometry(v.x+C[0],v.y+C[1]),d,v.z+C[2])}function Ca(p,i,d,m,y,v,C,M){const E=kl(p.add(p.sub(i)._unit()),M,y,C,v).point,k=h.sub([],d,E);return h.scaleAndAdd([],d,k,m/h.length(k))}function Ma(p,i,d,m,y,v,C,M,E,k,I,L,V,Z,H,U,K,G){const Q=m?p-i:p+i;let j=Q>0?1:-1,ne=0;m&&(j*=-1,ne=Math.PI),j<0&&(ne+=Math.PI);let J=j>0?M+C:M+C+1,$=y,se=y,_e=0,Ce=0;const ve=Math.abs(Q),Le=[],ie=[];let ge=v;const Ee=()=>{const tt=J-j;return 0===_e?v:new h.pointGeometry(k.getx(tt),k.gety(tt))},Ze=()=>Ca(Ee(),ge,se,ve-_e+1,I,V,U,K.canonical);for(;_e+Ce<=ve;){if(J+=j,J<M||J>=E)return null;if(se=$,Le.push($),Z&&ie.push(ge||Ee()),$=L[J],void 0===$){ge=new h.pointGeometry(k.getx(J),k.gety(J));const tt=kl(ge,K.canonical,I,U,V);$=tt.signedDistanceFromCamera>0?L[J]=tt.point:Ze()}else ge=null;_e+=Ce,Ce=h.distance(se,$)}ge=ge||new h.pointGeometry(k.getx(J),k.gety(J));const Me=Ee();H&&V&&(L[J]=$=void 0===L[J]?$:Ze(),Ce=h.distance(se,$));const ze=(ve-_e)/Ce,Ve=ge.sub(Me).mult(ze)._add(Me),je=h.sub([],$,se),Ge=h.scaleAndAdd([],se,je,ze);let Ne=[0,0,1],Ye=je[0],lt=je[1];if(G&&(Ne=U.upVector(K.canonical,Ve.x,Ve.y),0!==Ne[0]||0!==Ne[1]||1!==Ne[2])){const tt=[1,0,0],dt=[0,1,0];tt[0]=Ne[2],tt[1]=0,tt[2]=-Ne[0],h.cross(dt,Ne,tt),h.normalize(tt,tt),h.normalize(dt,dt),Ye=h.dot(je,tt),lt=h.dot(je,dt)}if(d){const tt=h.cross([],Ne,je);h.normalize(tt,tt),h.scaleAndAdd(Ge,Ge,tt,d*j)}const ut=ne+Math.atan2(lt,Ye);return Le.push(Ge),Z&&ie.push(Ve),{point:Ge,angle:ut,path:Le,tilePath:ie,up:Ne}}const gu=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ki(p,i){for(let d=0;d<p;d++){const m=i.length;i.resize(m+4),i.float32.set(gu,4*m)}}function bi(p,i,d){const m=i[0],y=i[1];return p[0]=d[0]*m+d[4]*y+d[12],p[1]=d[1]*m+d[5]*y+d[13],p[3]=d[3]*m+d[7]*y+d[15],p}const Vn=100;class Hc{constructor(i,d,m=new Qe(i.width+200,i.height+200,25),y=new Qe(i.width+200,i.height+200,25)){this.transform=i,this.grid=m,this.ignoredGrid=y,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Vn,this.screenBottomBoundary=i.height+Vn,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.fogState=d}placeCollisionBox(i,d,m,y,v,C,M,E){let k=m.projectedAnchorX,I=m.projectedAnchorY,L=m.projectedAnchorZ;const V=m.elevation,Z=m.tileID;if(V&&Z){const J=i.getProjection().upVector(Z.canonical,m.tileAnchorX,m.tileAnchorY),$=i.getProjection().upVectorScale(Z.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;k+=J[0]*V*$,I+=J[1]*V*$,L+=J[2]*V*$}const H=this.projectAndGetPerspectiveRatio(M,[k,I,L],m.tileID,"globe"===i.projection.name||!!V||this.transform.pitch>0,i.getProjection()),U=C*H.perspectiveRatio,K=(m.x1*d+y.x-m.padding)*U+H.point.x,G=(m.y1*d+y.y-m.padding)*U+H.point.y,Q=(m.x2*d+y.x+m.padding)*U+H.point.x,j=(m.y2*d+y.y+m.padding)*U+H.point.y,ne=H.perspectiveRatio<=.55||H.occluded;return!this.isInsideGrid(K,G,Q,j)||!v&&this.grid.hitTest(K,G,Q,j,E)||ne?{box:[],offscreen:!1,occluded:H.occluded}:{box:[K,G,Q,j],offscreen:this.isOffscreen(K,G,Q,j),occluded:!1}}placeCollisionCircles(i,d,m,y,v,C,M,E,k,I,L,V,Z,H,U){const K=[],G=this.transform.elevation,Q=G?G.getAtTileOffsetFunc(U,this.transform.center.lat,this.transform.worldSize,i.getProjection()):Me=>[0,0,0],j=new h.pointGeometry(m.tileAnchorX,m.tileAnchorY),ne=i.getProjection().projectTilePoint(m.tileAnchorX,m.tileAnchorY,U.canonical),J=Q(j),$=[ne.x+J[0],ne.y+J[1],ne.z+J[2]],se="globe"===i.projection.name,_e=this.projectAndGetPerspectiveRatio(M,[$[0],$[1],$[2]],U,se||!!G||this.transform.pitch>0,i.getProjection()),{perspectiveRatio:Ce}=_e,ve=(L?C/Ce:C*Ce)/h.ONE_EM,Le=yt(new h.pointGeometry($[0],$[1]),E,$[2]).point,ie=_e.signedDistanceFromCamera>0?di(ve,v,m.lineOffsetX*ve,m.lineOffsetY*ve,!1,Le,j,m,y,E,{},G&&!L?Q:null,L&&!!G,i.getProjection(),U,L):null;let ge=!1,Ee=!1,Ze=!0;if(ie&&!_e.occluded){const Me=.5*Z*Ce+H,ze=new h.pointGeometry(-100,-100),Ve=new h.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),je=new ws,Ge=ie.first,Ne=ie.last;let Ye=[];for(let tt=Ge.path.length-1;tt>=1;tt--)Ye.push(Ge.path[tt]);for(let tt=1;tt<Ne.path.length;tt++)Ye.push(Ne.path[tt]);const lt=2.5*Me;if(k){const tt=Ye.map(G&&!se?(dt,Ht)=>{const Kt=Q(Ht<Ge.path.length-1?Ge.tilePath[Ge.path.length-1-Ht]:Ne.tilePath[Ht-Ge.path.length+2]);return dt[2]=Kt[2],Uo(dt,k)}:dt=>Uo(dt,k));Ye=tt.some(dt=>dt.signedDistanceFromCamera<=0)?[]:tt.map(dt=>dt.point)}let ut=[];if(Ye.length>0){const tt=Ye.map(Xt=>new h.pointGeometry(Xt[0],Xt[1]));let dt=1/0,Ht=-1/0,Kt=1/0,ai=-1/0;for(let Xt=0;Xt<tt.length;Xt++)dt=Math.min(dt,tt[Xt].x),Kt=Math.min(Kt,tt[Xt].y),Ht=Math.max(Ht,tt[Xt].x),ai=Math.max(ai,tt[Xt].y);ut=dt>=ze.x&&Ht<=Ve.x&&Kt>=ze.y&&ai<=Ve.y?[tt]:Ht<ze.x||dt>Ve.x||ai<ze.y||Kt>Ve.y?[]:h.clipLine([tt],ze.x,ze.y,Ve.x,Ve.y)}for(const tt of ut){je.reset(tt,.25*Me);let dt=0;dt=je.length<=.5*Me?1:Math.ceil(je.paddedLength/lt)+1;for(let Ht=0;Ht<dt;Ht++){const Kt=Ht/Math.max(dt-1,1),ai=je.lerp(Kt),Xt=ai.x+Vn,_n=ai.y+Vn;K.push(Xt,_n,Me,0);const yo=Xt-Me,Yo=_n-Me,ri=Xt+Me,hi=_n+Me;if(Ze=Ze&&this.isOffscreen(yo,Yo,ri,hi),Ee=Ee||this.isInsideGrid(yo,Yo,ri,hi),!d&&this.grid.hitTestCircle(Xt,_n,Me,V)&&(ge=!0,!I))return{circles:[],offscreen:!1,collisionDetected:ge,occluded:!1}}}}return{circles:!I&&ge||!Ee?[]:K,offscreen:Ze,collisionDetected:ge,occluded:_e.occluded}}queryRenderedSymbols(i){if(0===i.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const d=[];let m=1/0,y=1/0,v=-1/0,C=-1/0;for(const I of i){const L=new h.pointGeometry(I.x+Vn,I.y+Vn);m=Math.min(m,L.x),y=Math.min(y,L.y),v=Math.max(v,L.x),C=Math.max(C,L.y),d.push(L)}const M=this.grid.query(m,y,v,C).concat(this.ignoredGrid.query(m,y,v,C)),E={},k={};for(const I of M){const L=I.key;if(void 0===E[L.bucketInstanceId]&&(E[L.bucketInstanceId]={}),E[L.bucketInstanceId][L.featureIndex])continue;const V=[new h.pointGeometry(I.x1,I.y1),new h.pointGeometry(I.x2,I.y1),new h.pointGeometry(I.x2,I.y2),new h.pointGeometry(I.x1,I.y2)];h.polygonIntersectsPolygon(d,V)&&(E[L.bucketInstanceId][L.featureIndex]=!0,void 0===k[L.bucketInstanceId]&&(k[L.bucketInstanceId]=[]),k[L.bucketInstanceId].push(L.featureIndex))}return k}insertCollisionBox(i,d,m,y,v){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:y,collisionGroupID:v},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,d,m,y,v){const C=d?this.ignoredGrid:this.grid,M={bucketInstanceId:m,featureIndex:y,collisionGroupID:v};for(let E=0;E<i.length;E+=4)C.insertCircle(M,i[E],i[E+1],i[E+2])}projectAndGetPerspectiveRatio(i,d,m,y,v){const C=[d[0],d[1],d[2],1];let M=!1;if(d[2]||this.transform.pitch>0){h.transformMat4$1(C,C,i);const E="globe"===v.name;this.fogState&&m&&!E&&(M=function(k,I,L,V,Z,H){const U=H.calculateFogTileMatrix(Z),K=[I,L,V];return h.transformMat4(K,K,U),Bi(k,K,H.pitch,H._fov)}(this.fogState,d[0],d[1],d[2],m.toUnwrapped(),this.transform)>.9)}else bi(C,C,i);return{point:new h.pointGeometry((C[0]/C[3]+1)/2*this.transform.width+Vn,(-C[1]/C[3]+1)/2*this.transform.height+Vn),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(v)/C[3]*.5,1.5),signedDistanceFromCamera:C[3],occluded:y&&C[2]>C[3]||M}}isOffscreen(i,d,m,y){return m<Vn||i>=this.screenRightBoundary||y<Vn||d>this.screenBottomBoundary}isInsideGrid(i,d,m,y){return m>=0&&i<this.gridRightBoundary&&y>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const i=h.identity([]);return h.translate(i,i,[-100,-100,0]),i}}function Ki(p,i,d){const m=i.createTileMatrix(p,p.worldSize,d.toUnwrapped());return h.multiply(new Float32Array(16),p.projMatrix,m)}function Nn(p,i,d){if(i.projection.name===d.projection.name)return p.projMatrix;const m=d.clone();return m.setProjection(i.projection),Ki(m,i.getProjection(),p)}function Pl(p,i,d){return i.name===d.projection.name?p.projMatrix:Ki(d,i,p)}class Ms{constructor(i,d,m,y){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?d:-d))):y&&m?1:0,this.placed=m}isHidden(){return 0===this.opacity&&!this.placed}}class mi{constructor(i,d,m,y,v,C=!1){this.text=new Ms(i?i.text:null,d,m,v),this.icon=new Ms(i?i.icon:null,d,y,v),this.clipped=C}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Rr{constructor(i,d,m,y=!1){this.text=i,this.icon=d,this.skipFade=m,this.clipped=y}}class qc{constructor(){this.invProjMatrix=h.create(),this.viewportMatrix=h.create(),this.circles=[]}}class Ts{constructor(i,d,m,y,v){this.bucketInstanceId=i,this.featureIndex=d,this.sourceLayerIndex=m,this.bucketIndex=y,this.tileID=v}}class Zi{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const d=++this.maxGroupID;this.collisionGroups[i]={ID:d,predicate:m=>m.collisionGroupID===d}}return this.collisionGroups[i]}}function Il(p,i,d,m,y){const{horizontalAlign:v,verticalAlign:C}=h.getAnchorAlignment(p),M=-(v-.5)*i,E=-(C-.5)*d,k=h.evaluateVariableOffset(p,m);return new h.pointGeometry(M+k[0]*y,E+k[1]*y)}function Es(p,i,d,m,y){const v=new h.pointGeometry(p,i);return d&&v._rotate(m?y:-y),v}class Go{constructor(i,d,m,y,v){this.transform=i.clone(),this.projection=i.projection.name,this.collisionIndex=new Hc(this.transform,v),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new Zi(m),this.collisionCircleArrays={},this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,d,m,y){const v=m.getBucket(d),C=m.latestFeatureIndex;if(!v||!C||d.id!==v.layerIds[0])return;const M=v.layers[0].layout,E=m.collisionBoxArray,k=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),I=m.tileSize/h.EXTENT,L=m.tileID.toUnwrapped();this.transform.setProjection(v.projection);const V=(Z=m.tileID,H=v.getProjection(),U=this.transform,H.name===this.projection?U.calculateProjMatrix(Z.toUnwrapped()):Ki(U,H,Z));var Z,H,U;const K="map"===M.get("text-pitch-alignment"),G="map"===M.get("text-rotation-alignment");d.compileFilter();const Q=d.dynamicFilter(),j=d.dynamicFilterNeedsFeature(),ne=this.transform.calculatePixelsToTileUnitsMatrix(m),J=eo(V,m.tileID.canonical,K,G,this.transform,v.getProjection(),ne);let $=null;if(K){const Ce=Lr(V,m.tileID.canonical,K,G,this.transform,v.getProjection(),ne);$=h.multiply([],this.transform.labelPlaneMatrix,Ce)}let se=null;Q&&m.latestFeatureIndex&&(se={unwrappedTileID:L,dynamicFilter:Q,dynamicFilterNeedsFeature:j,featureIndex:m.latestFeatureIndex}),this.retainedQueryData[v.bucketInstanceId]=new Ts(v.bucketInstanceId,C,v.sourceLayerIndex,v.index,m.tileID);const _e={bucket:v,layout:M,posMatrix:V,textLabelPlaneMatrix:J,labelToScreenMatrix:$,clippingData:se,scale:k,textPixelRatio:I,holdingForFade:m.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:h.evaluateSizeForZoom(v.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:h.evaluateSizeForZoom(v.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(y)for(const Ce of v.sortKeyRanges){const{sortKey:ve,symbolInstanceStart:Le,symbolInstanceEnd:ie}=Ce;i.push({sortKey:ve,symbolInstanceStart:Le,symbolInstanceEnd:ie,parameters:_e})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:_e})}attemptAnchorPlacement(i,d,m,y,v,C,M,E,k,I,L,V,Z,H,U,K,G,Q){const j=[V.textOffset0,V.textOffset1],ne=Il(i,m,y,j,v),J=this.collisionIndex.placeCollisionBox(H,v,d,Es(ne.x,ne.y,C,M,this.transform.angle),L,E,k,I.predicate);if((!K||0!==this.collisionIndex.placeCollisionBox(H,H.getSymbolInstanceIconSize(Q,this.transform.zoom,Z),K,Es(ne.x,ne.y,C,M,this.transform.angle),L,E,k,I.predicate).box.length)&&J.box.length>0){let $;return this.prevPlacement&&this.prevPlacement.variableOffsets[V.crossTileID]&&this.prevPlacement.placements[V.crossTileID]&&this.prevPlacement.placements[V.crossTileID].text&&($=this.prevPlacement.variableOffsets[V.crossTileID].anchor),this.variableOffsets[V.crossTileID]={textOffset:j,width:m,height:y,anchor:i,textScale:v,prevAnchor:$},this.markUsedJustification(H,i,V,U),H.allowVerticalPlacement&&(this.markUsedOrientation(H,U,V),this.placedOrientations[V.crossTileID]=U),{shift:ne,placedGlyphBoxes:J}}}placeLayerBucketPart(i,d,m,y){const{bucket:v,layout:C,posMatrix:M,textLabelPlaneMatrix:E,labelToScreenMatrix:k,clippingData:I,textPixelRatio:L,holdingForFade:V,collisionBoxArray:Z,partiallyEvaluatedTextSize:H,partiallyEvaluatedIconSize:U,collisionGroup:K}=i.parameters,G=C.get("text-optional"),Q=C.get("icon-optional"),j=C.get("text-allow-overlap"),ne=C.get("icon-allow-overlap"),J="map"===C.get("text-rotation-alignment"),$="map"===C.get("text-pitch-alignment"),se="none"!==C.get("icon-text-fit"),_e="viewport-y"===C.get("symbol-z-order");this.transform.setProjection(v.projection);let Ce=j&&(ne||!v.hasIconData()||Q),ve=ne&&(j||!v.hasTextData()||G);!v.collisionArrays&&Z&&v.deserializeCollisionBoxes(Z),m&&y&&v.updateCollisionDebugBuffers(this.transform.zoom,Z);const Le=(ie,ge,Ee)=>{if(I){const ri={zoom:this.transform.zoom,pitch:this.transform.pitch};let hi=null;if(I.dynamicFilterNeedsFeature){const Gt=this.retainedQueryData[v.bucketInstanceId];hi=I.featureIndex.loadFeature({featureIndex:ie.featureIndex,bucketIndex:Gt.bucketIndex,sourceLayerIndex:Gt.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,I.dynamicFilter)(ri,hi,this.retainedQueryData[v.bucketInstanceId].tileID.canonical,new h.pointGeometry(ie.tileAnchorX,ie.tileAnchorY),this.transform.calculateDistanceTileData(I.unwrappedTileID)))return this.placements[ie.crossTileID]=new Rr(!1,!1,!1,!0),void(d[ie.crossTileID]=!0)}if(d[ie.crossTileID])return;if(V)return void(this.placements[ie.crossTileID]=new Rr(!1,!1,!1));let Ze=!1,Me=!1,ze=!0,Ve=!1,je=!1,Ge=null,Ne={box:null,offscreen:null,occluded:null},Ye={box:null,offscreen:null,occluded:null},lt=null,ut=null,tt=null,dt=0,Ht=0,Kt=0;Ee.textFeatureIndex?dt=Ee.textFeatureIndex:ie.useRuntimeCollisionCircles&&(dt=ie.featureIndex),Ee.verticalTextFeatureIndex&&(Ht=Ee.verticalTextFeatureIndex);const ai=ri=>{ri.tileID=this.retainedQueryData[v.bucketInstanceId].tileID,(this.transform.elevation||ri.elevation)&&(ri.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[v.bucketInstanceId].tileID,ri.tileAnchorX,ri.tileAnchorY):0)},Xt=Ee.textBox;if(Xt){ai(Xt);const ri=Gt=>{let Di=h.WritingMode.horizontal;if(v.allowVerticalPlacement&&!Gt&&this.prevPlacement){const $i=this.prevPlacement.placedOrientations[ie.crossTileID];$i&&(this.placedOrientations[ie.crossTileID]=$i,Di=$i,this.markUsedOrientation(v,Di,ie))}return Di},hi=(Gt,Di)=>{if(v.allowVerticalPlacement&&ie.numVerticalGlyphVertices>0&&Ee.verticalTextBox){for(const $i of v.writingModes)if($i===h.WritingMode.vertical?(Ne=Di(),Ye=Ne):Ne=Gt(),Ne&&Ne.box&&Ne.box.length)break}else Ne=Gt()};if(C.get("text-variable-anchor")){let Gt=C.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[ie.crossTileID]){const $t=this.prevPlacement.variableOffsets[ie.crossTileID];Gt.indexOf($t.anchor)>0&&(Gt=Gt.filter(_i=>_i!==$t.anchor),Gt.unshift($t.anchor))}const Di=($t,_i,Jr)=>{const xo=v.getSymbolInstanceTextSize(H,ie,this.transform.zoom,ge),Ja=($t.x2-$t.x1)*xo+2*$t.padding,Kr=($t.y2-$t.y1)*xo+2*$t.padding,fr=se&&!ne?_i:null;fr&&ai(fr);let en={box:[],offscreen:!1,occluded:!1};const Pn=j?2*Gt.length:Gt.length;for(let vo=0;vo<Pn;++vo){const $r=this.attemptAnchorPlacement(Gt[vo%Gt.length],$t,Ja,Kr,xo,J,$,L,M,K,vo>=Gt.length,ie,ge,v,Jr,fr,H,U);if($r&&(en=$r.placedGlyphBoxes,en&&en.box&&en.box.length)){Ze=!0,Ge=$r.shift;break}}return en};hi(()=>Di(Xt,Ee.iconBox,h.WritingMode.horizontal),()=>{const $t=Ee.verticalTextBox;return $t&&ai($t),v.allowVerticalPlacement&&!(Ne&&Ne.box&&Ne.box.length)&&ie.numVerticalGlyphVertices>0&&$t?Di($t,Ee.verticalIconBox,h.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Ne&&(Ze=Ne.box,ze=Ne.offscreen,Ve=Ne.occluded);const $i=ri(Ne&&Ne.box);if(!Ze&&this.prevPlacement){const $t=this.prevPlacement.variableOffsets[ie.crossTileID];$t&&(this.variableOffsets[ie.crossTileID]=$t,this.markUsedJustification(v,$t.anchor,ie,$i))}}else{const Gt=(Di,$i)=>{const $t=v.getSymbolInstanceTextSize(H,ie,this.transform.zoom,ge),_i=this.collisionIndex.placeCollisionBox(v,$t,Di,new h.pointGeometry(0,0),j,L,M,K.predicate);return _i&&_i.box&&_i.box.length&&(this.markUsedOrientation(v,$i,ie),this.placedOrientations[ie.crossTileID]=$i),_i};hi(()=>Gt(Xt,h.WritingMode.horizontal),()=>{const Di=Ee.verticalTextBox;return v.allowVerticalPlacement&&ie.numVerticalGlyphVertices>0&&Di?(ai(Di),Gt(Di,h.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),ri(Ne&&Ne.box&&Ne.box.length)}}if(lt=Ne,Ze=lt&&lt.box&&lt.box.length>0,ze=lt&&lt.offscreen,Ve=lt&&lt.occluded,ie.useRuntimeCollisionCircles){const ri=v.text.placedSymbolArray.get(ie.centerJustifiedTextSymbolIndex>=0?ie.centerJustifiedTextSymbolIndex:ie.verticalPlacedTextSymbolIndex),hi=h.evaluateSizeForFeature(v.textSizeData,H,ri),Gt=C.get("text-padding");ut=this.collisionIndex.placeCollisionCircles(v,j,ri,v.lineVertexArray,v.glyphOffsetArray,hi,M,E,k,m,$,K.predicate,ie.collisionCircleDiameter*hi/h.ONE_EM,Gt,this.retainedQueryData[v.bucketInstanceId].tileID),Ze=j||ut.circles.length>0&&!ut.collisionDetected,ze=ze&&ut.offscreen,Ve=ut.occluded}if(Ee.iconFeatureIndex&&(Kt=Ee.iconFeatureIndex),Ee.iconBox){const ri=hi=>{ai(hi);const Gt=se&&Ge?Es(Ge.x,Ge.y,J,$,this.transform.angle):new h.pointGeometry(0,0),Di=v.getSymbolInstanceIconSize(U,this.transform.zoom,ge);return this.collisionIndex.placeCollisionBox(v,Di,hi,Gt,ne,L,M,K.predicate)};Ye&&Ye.box&&Ye.box.length&&Ee.verticalIconBox?(tt=ri(Ee.verticalIconBox),Me=tt.box.length>0):(tt=ri(Ee.iconBox),Me=tt.box.length>0),ze=ze&&tt.offscreen,je=tt.occluded}const _n=G||0===ie.numHorizontalGlyphVertices&&0===ie.numVerticalGlyphVertices,yo=Q||0===ie.numIconVertices;if(_n||yo?yo?_n||(Me=Me&&Ze):Ze=Me&&Ze:Me=Ze=Me&&Ze,Ze&&lt&&lt.box&&this.collisionIndex.insertCollisionBox(lt.box,C.get("text-ignore-placement"),v.bucketInstanceId,Ye&&Ye.box&&Ht?Ht:dt,K.ID),Me&&tt&&this.collisionIndex.insertCollisionBox(tt.box,C.get("icon-ignore-placement"),v.bucketInstanceId,Kt,K.ID),ut&&(Ze&&this.collisionIndex.insertCollisionCircles(ut.circles,C.get("text-ignore-placement"),v.bucketInstanceId,dt,K.ID),m)){const ri=v.bucketInstanceId;let hi=this.collisionCircleArrays[ri];void 0===hi&&(hi=this.collisionCircleArrays[ri]=new qc);for(let Gt=0;Gt<ut.circles.length;Gt+=4)hi.circles.push(ut.circles[Gt+0]),hi.circles.push(ut.circles[Gt+1]),hi.circles.push(ut.circles[Gt+2]),hi.circles.push(ut.collisionDetected?1:0)}const Yo="globe"!==v.projection.name;Ce=Ce&&(Yo||!Ve),ve=ve&&(Yo||!je),this.placements[ie.crossTileID]=new Rr(Ze||Ce,Me||ve,ze||v.justReloaded),d[ie.crossTileID]=!0};if(_e){const ie=v.getSortedSymbolIndexes(this.transform.angle);for(let ge=ie.length-1;ge>=0;--ge){const Ee=ie[ge];Le(v.symbolInstances.get(Ee),Ee,v.collisionArrays[Ee])}}else for(let ie=i.symbolInstanceStart;ie<i.symbolInstanceEnd;ie++)Le(v.symbolInstances.get(ie),ie,v.collisionArrays[ie]);if(m&&v.bucketInstanceId in this.collisionCircleArrays){const ie=this.collisionCircleArrays[v.bucketInstanceId];h.invert(ie.invProjMatrix,M),ie.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1}markUsedJustification(i,d,m,y){let v;v=y===h.WritingMode.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[h.getAnchorJustification(d)];const C=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const M of C)M>=0&&(i.text.placedSymbolArray.get(M).crossTileID=v>=0&&M!==v?0:m.crossTileID)}markUsedOrientation(i,d,m){const y=d===h.WritingMode.horizontal||d===h.WritingMode.horizontalOnly?d:0,v=d===h.WritingMode.vertical?d:0,C=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const M of C)i.text.placedSymbolArray.get(M).placedOrientation=y;m.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let m=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const y=d?d.symbolFadeChange(i):1,v=d?d.opacities:{},C=d?d.variableOffsets:{},M=d?d.placedOrientations:{};for(const E in this.placements){const k=this.placements[E],I=v[E];I?(this.opacities[E]=new mi(I,y,k.text,k.icon,null,k.clipped),m=m||k.text!==I.text.placed||k.icon!==I.icon.placed):(this.opacities[E]=new mi(null,y,k.text,k.icon,k.skipFade,k.clipped),m=m||k.text||k.icon)}for(const E in v){const k=v[E];if(!this.opacities[E]){const I=new mi(k,y,!1,!1);I.isHidden()||(this.opacities[E]=I,m=m||k.text.placed||k.icon.placed)}}for(const E in C)this.variableOffsets[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.variableOffsets[E]=C[E]);for(const E in M)this.placedOrientations[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.placedOrientations[E]=M[E]);m?this.lastPlacementChangeTime=i:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:i)}updateLayerOpacities(i,d){const m={};for(const y of d){const v=y.getBucket(i);v&&y.latestFeatureIndex&&i.id===v.layerIds[0]&&this.updateBucketOpacities(v,m,y.collisionBoxArray)}}updateBucketOpacities(i,d,m){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const y=i.layers[0].layout,v=!!i.layers[0].dynamicFilter(),C=new mi(null,0,!1,!1,!0),M=y.get("text-allow-overlap"),E=y.get("icon-allow-overlap"),k=y.get("text-variable-anchor"),I="map"===y.get("text-rotation-alignment"),L="map"===y.get("text-pitch-alignment"),V="none"!==y.get("icon-text-fit"),Z=new mi(null,0,M&&(E||!i.hasIconData()||y.get("icon-optional")),E&&(M||!i.hasTextData()||y.get("text-optional")),!0);!i.collisionArrays&&m&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(m);const H=(K,G,Q)=>{for(let j=0;j<G/4;j++)K.opacityVertexArray.emplaceBack(Q)};let U=0;for(let K=0;K<i.symbolInstances.length;K++){const G=i.symbolInstances.get(K),{numHorizontalGlyphVertices:Q,numVerticalGlyphVertices:j,crossTileID:ne}=G;let J=this.opacities[ne];d[ne]?J=C:J||(J=Z,this.opacities[ne]=J),d[ne]=!0;const $=Q>0||j>0,se=G.numIconVertices>0,_e=this.placedOrientations[G.crossTileID],Ce=_e===h.WritingMode.vertical,ve=_e===h.WritingMode.horizontal||_e===h.WritingMode.horizontalOnly;if(!$&&!se||J.isHidden()||U++,$){const Le=po(J.text);H(i.text,Q,Ce?Sn:Le),H(i.text,j,ve?Sn:Le);const ie=J.text.isHidden();[G.rightJustifiedTextSymbolIndex,G.centerJustifiedTextSymbolIndex,G.leftJustifiedTextSymbolIndex].forEach(Ze=>{Ze>=0&&(i.text.placedSymbolArray.get(Ze).hidden=ie||Ce?1:0)}),G.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(G.verticalPlacedTextSymbolIndex).hidden=ie||ve?1:0);const ge=this.variableOffsets[G.crossTileID];ge&&this.markUsedJustification(i,ge.anchor,G,_e);const Ee=this.placedOrientations[G.crossTileID];Ee&&(this.markUsedJustification(i,"left",G,Ee),this.markUsedOrientation(i,Ee,G))}if(se){const Le=po(J.icon);G.placedIconSymbolIndex>=0&&(H(i.icon,G.numIconVertices,Ce?Sn:Le),i.icon.placedSymbolArray.get(G.placedIconSymbolIndex).hidden=J.icon.isHidden()),G.verticalPlacedIconSymbolIndex>=0&&(H(i.icon,G.numVerticalIconVertices,ve?Sn:Le),i.icon.placedSymbolArray.get(G.verticalPlacedIconSymbolIndex).hidden=J.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Le=i.collisionArrays[K];if(Le){let ie=new h.pointGeometry(0,0),ge=!0;if(Le.textBox||Le.verticalTextBox){if(k){const Ze=this.variableOffsets[ne];Ze?(ie=Il(Ze.anchor,Ze.width,Ze.height,Ze.textOffset,Ze.textScale),I&&ie._rotate(L?this.transform.angle:-this.transform.angle)):ge=!1}v&&(ge=!J.clipped),Le.textBox&&ar(i.textCollisionBox.collisionVertexArray,J.text.placed,!ge||Ce,ie.x,ie.y),Le.verticalTextBox&&ar(i.textCollisionBox.collisionVertexArray,J.text.placed,!ge||ve,ie.x,ie.y)}const Ee=ge&&Boolean(!ve&&Le.verticalIconBox);Le.iconBox&&ar(i.iconCollisionBox.collisionVertexArray,J.icon.placed,Ee,V?ie.x:0,V?ie.y:0),Le.verticalIconBox&&ar(i.iconCollisionBox.collisionVertexArray,J.icon.placed,!Ee,V?ie.x:0,V?ie.y:0)}}}if(i.fullyClipped=0===U,i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const K=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=K.invProjMatrix,i.placementViewportMatrix=K.viewportMatrix,i.collisionCircleArray=K.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return 0===this.fadeDuration?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,d){const m=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*m>i}setStale(){this.stale=!0}}function ar(p,i,d,m,y){p.emplaceBack(i?1:0,d?1:0,m||0,y||0),p.emplaceBack(i?1:0,d?1:0,m||0,y||0),p.emplaceBack(i?1:0,d?1:0,m||0,y||0),p.emplaceBack(i?1:0,d?1:0,m||0,y||0)}const Fl=Math.pow(2,25),np=Math.pow(2,24),Yc=Math.pow(2,17),Ta=Math.pow(2,16),op=Math.pow(2,9),_u=Math.pow(2,8),Ea=Math.pow(2,1);function po(p){if(0===p.opacity&&!p.placed)return 0;if(1===p.opacity&&p.placed)return 4294967295;const i=p.placed?1:0,d=Math.floor(127*p.opacity);return d*Fl+i*np+d*Yc+i*Ta+d*op+i*_u+d*Ea+i}const Sn=0;class Dn{constructor(i){this._sortAcrossTiles="viewport-y"!==i.layout.get("symbol-z-order")&&void 0!==i.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,d,m,y,v){const C=this._bucketParts;for(;this._currentTileIndex<i.length;)if(d.getBucketParts(C,y,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((M,E)=>M.sortKey-E.sortKey));this._currentPartIndex<C.length;){const M=C[this._currentPartIndex];if(d.placeLayerBucketPart(M,this._seenCrossTileIDs,m,0===M.symbolInstanceStart),this._currentPartIndex++,v())return!0}return!1}}class Ll{constructor(i,d,m,y,v,C,M,E){this.placement=new Go(i,v,C,M,E),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(i,d,m){const y=h.exported.now(),v=()=>{const C=h.exported.now()-y;return!this._forceFullPlacement&&C>2};for(;this._currentPlacementIndex>=0;){const C=d[i[this._currentPlacementIndex]],M=this.placement.collisionIndex.transform.zoom;if("symbol"===C.type&&(!C.minzoom||C.minzoom<=M)&&(!C.maxzoom||C.maxzoom>M)){if(this._inProgressLayer||(this._inProgressLayer=new Dn(C)),this._inProgressLayer.continuePlacement(m[C.source],this.placement,this._showCollisionBoxes,C,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const sr=512/h.EXTENT/2;class yu{constructor(i,d,m){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=m;for(let y=0;y<d.length;y++){const v=d.get(y),C=v.key;this.indexedSymbolInstances[C]||(this.indexedSymbolInstances[C]=[]),this.indexedSymbolInstances[C].push({crossTileID:v.crossTileID,coord:this.getScaledCoordinates(v,i)})}}getScaledCoordinates(i,d){const m=sr/Math.pow(2,d.canonical.z-this.tileID.canonical.z);return{x:Math.floor((d.canonical.x*h.EXTENT+i.tileAnchorX)*m),y:Math.floor((d.canonical.y*h.EXTENT+i.tileAnchorY)*m)}}findMatches(i,d,m){const y=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let v=0;v<i.length;v++){const C=i.get(v);if(C.crossTileID)continue;const M=this.indexedSymbolInstances[C.key];if(!M)continue;const E=this.getScaledCoordinates(C,d);for(const k of M)if(Math.abs(k.coord.x-E.x)<=y&&Math.abs(k.coord.y-E.y)<=y&&!m[k.crossTileID]){m[k.crossTileID]=!0,C.crossTileID=k.crossTileID;break}}}}class Rl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ss{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const d=Math.round((i-this.lng)/360);if(0!==d)for(const m in this.indexes){const y=this.indexes[m],v={};for(const C in y){const M=y[C];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+d),v[M.tileID.key]=M}this.indexes[m]=v}this.lng=i}addBucket(i,d,m){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let v=0;v<d.symbolInstances.length;v++)d.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const y=this.usedCrossTileIDs[i.overscaledZ];for(const v in this.indexes){const C=this.indexes[v];if(Number(v)>i.overscaledZ)for(const M in C){const E=C[M];E.tileID.isChildOf(i)&&E.findMatches(d.symbolInstances,i,y)}else{const M=C[i.scaledTo(Number(v)).key];M&&M.findMatches(d.symbolInstances,i,y)}}for(let v=0;v<d.symbolInstances.length;v++){const C=d.symbolInstances.get(v);C.crossTileID||(C.crossTileID=m.generate(),y[C.crossTileID]=!0)}return void 0===this.indexes[i.overscaledZ]&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new yu(i,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(i,d){for(const m in d.indexedSymbolInstances)for(const y of d.indexedSymbolInstances[m])delete this.usedCrossTileIDs[i][y.crossTileID]}removeStaleBuckets(i){let d=!1;for(const m in this.indexes){const y=this.indexes[m];for(const v in y)i[y[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,y[v]),delete y[v],d=!0)}return d}}class Or{constructor(){this.layerIndexes={},this.crossTileIDs=new Rl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,d,m,y){let v=this.layerIndexes[i.id];void 0===v&&(v=this.layerIndexes[i.id]=new Ss);let C=!1;const M={};"globe"!==y.name&&v.handleWrapJump(m);for(const E of d){const k=E.getBucket(i);k&&i.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(E.tileID,k,this.crossTileIDs)&&(C=!0),M[k.bucketInstanceId]=!0)}return v.removeStaleBuckets(M)&&(C=!0),C}pruneUnusedLayers(i){const d={};i.forEach(m=>{d[m]=!0});for(const m in this.layerIndexes)d[m]||delete this.layerIndexes[m]}}const lr=(p,i)=>h.emitValidationErrors(p,i&&i.filter(d=>"source.canvas"!==d.identifier)),Ds=h.pick(fe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Qc=h.pick(fe,["setCenter","setZoom","setBearing","setPitch"]),Sa={version:8,layers:[],sources:{}},fo={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class gn extends h.Evented{constructor(i,d={}){super(),this.map=i,this.dispatcher=new Gi(Nt(),this),this.imageManager=new ya,this.imageManager.setEventedParent(this),this.glyphManager=new h.GlyphManager(i._requestManager,d.localFontFamily?h.LocalGlyphMode.all:d.localIdeographFontFamily?h.LocalGlyphMode.ideographs:h.LocalGlyphMode.none,d.localFontFamily||d.localIdeographFontFamily),this.lineAtlas=new h.LineAtlas(256,512),this.crossTileSymbolIndex=new Or,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new h.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",h.getReferrer());const m=this;this._rtlTextPluginCallback=gn.registerForPluginStateChange(y=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},(v,C)=>{if(h.triggerPluginCompletionEvent(v),C&&C.every(M=>M))for(const M in m._sourceCaches){const E=m._sourceCaches[M],k=E.getSource().type;"vector"!==k&&"geojson"!==k||E.reload()}})}),this.on("data",y=>{if("source"!==y.dataType||"metadata"!==y.sourceDataType)return;const v=this.getSource(y.sourceId);if(v&&v.vectorLayerIds)for(const C in this._layers){const M=this._layers[C];M.source===v.id&&this._validateLayer(M)}})}loadURL(i,d={}){this.fire(new h.Event("dataloading",{dataType:"style"}));const m="boolean"==typeof d.validate?d.validate:!h.isMapboxURL(i);i=this.map._requestManager.normalizeStyleURL(i,d.accessToken);const y=this.map._requestManager.transformRequest(i,h.ResourceType.Style);this._request=h.getJSON(y,(v,C)=>{this._request=null,v?this.fire(new h.ErrorEvent(v)):C&&this._load(C,m)})}loadJSON(i,d={}){this.fire(new h.Event("dataloading",{dataType:"style"})),this._request=h.exported.frame(()=>{this._request=null,this._load(i,!1!==d.validate)})}loadEmpty(){this.fire(new h.Event("dataloading",{dataType:"style"})),this._load(Sa,!1)}_updateLayerCount(i,d){const m=d?1:-1;i.is3D()&&(this._num3DLayers+=m),"circle"===i.type&&(this._numCircleLayers+=m),"symbol"===i.type&&(this._numSymbolLayers+=m)}_load(i,d){if(d&&lr(this,h.validateStyle(i)))return;this._loaded=!0,this.stylesheet=h.clone$1(i),this._updateMapProjection();for(const y in i.sources)this.addSource(y,i.sources[y],{validate:!1});this._changed=!1,i.sprite?this._loadSprite(i.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(i.glyphs);const m=jt(this.stylesheet.layers);this._order=m.map(y=>y.id),this._layers={},this._serializedLayers={};for(let y of m)y=h.createStyleLayer(y),y.setEventedParent(this,{layer:{id:y.id}}),this._layers[y.id]=y,this._serializedLayers[y.id]=y.serialize(),this._updateLayerCount(y,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Tl(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new h.Event("data",{dataType:"style"})),this.fire(new h.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(i){i?this.stylesheet.projection=i:delete this.stylesheet.projection,this.map._explicitProjection||this.map._updateProjection()}_updateMapProjection(){this.map._explicitProjection?this.applyProjectionUpdate():this.map._updateProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_loadSprite(i){this._spriteRequest=function(d,m,y){let v,C,M;const E=h.exported.devicePixelRatio>1?"@2x":"";let k=h.getJSON(m.transformRequest(m.normalizeSpriteURL(d,E,".json"),h.ResourceType.SpriteJSON),(V,Z)=>{k=null,M||(M=V,v=Z,L())}),I=h.getImage(m.transformRequest(m.normalizeSpriteURL(d,E,".png"),h.ResourceType.SpriteImage),(V,Z)=>{I=null,M||(M=V,C=Z,L())});function L(){if(M)y(M);else if(v&&C){const V=h.exported.getImageData(C),Z={};for(const H in v){const{width:U,height:K,x:G,y:Q,sdf:j,pixelRatio:ne,stretchX:J,stretchY:$,content:se}=v[H],_e=new h.RGBAImage({width:U,height:K});h.RGBAImage.copy(V,_e,{x:G,y:Q},{x:0,y:0},{width:U,height:K}),Z[H]={data:_e,pixelRatio:ne,sdf:j,stretchX:J,stretchY:$,content:se}}y(null,Z)}}return{cancel(){k&&(k.cancel(),k=null),I&&(I.cancel(),I=null)}}}(i,this.map._requestManager,(d,m)=>{if(this._spriteRequest=null,d)this.fire(new h.ErrorEvent(d));else if(m)for(const y in m)this.imageManager.addImage(y,m[y]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new h.Event("data",{dataType:"style"}))})}_validateLayer(i){const d=this.getSource(i.source);if(!d)return;const m=i.sourceLayer;m&&("geojson"===d.type||d.vectorLayerIds&&-1===d.vectorLayerIds.indexOf(m))&&this.fire(new h.ErrorEvent(new Error(`Source layer "${m}" does not exist on source "${d.id}" as specified by style layer "${i.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this._sourceCaches)if(!this._sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const d=[];for(const m of i){const y=this._layers[m];"custom"!==y.type&&d.push(y.serialize())}return d}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const i in this._sourceCaches)if(this._sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(i){return!!this.terrain&&fo[i.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(i){if(!this._loaded)return;const d=this._changed;if(this._changed){const y=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(y.length||v.length)&&this._updateWorkerLayers(y,v);for(const C in this._updatedSources){const M=this._updatedSources[C];"reload"===M?this._reloadSource(C):"clear"===M&&this._clearSource(C)}this._updateTilesForChangedImages();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(i);this.light.updateTransitions(i),this.fog&&this.fog.updateTransitions(i),this._resetUpdates()}const m={};for(const y in this._sourceCaches){const v=this._sourceCaches[y];m[y]=v.used,v.used=!1}for(const y of this._order){const v=this._layers[y];if(v.recalculate(i,this._availableImages),!v.isHidden(i.zoom)){const M=this._getLayerSourceCache(v);M&&(M.used=!0)}const C=this.map.painter;if(C){const M=v.getProgramIds();if(!M)continue;const E=v.getProgramConfiguration(i.zoom);for(const k of M)C.useProgram(k,E)}}for(const y in m){const v=this._sourceCaches[y];m[y]!==v.used&&v.getSource().fire(new h.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:v.getSource().id}))}this.light.recalculate(i),this.terrain&&this.terrain.recalculate(i),this.fog&&this.fog.recalculate(i),this.z=i.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),d&&this.fire(new h.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const d in this._sourceCaches)this._sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),lr(this,h.validateStyle(i)))return!1;(i=h.clone$1(i)).layers=jt(i.layers);const d=function(y,v){if(!y)return[{command:fe.setStyle,args:[v]}];let C=[];try{if(!Oe(y.version,v.version))return[{command:fe.setStyle,args:[v]}];Oe(y.center,v.center)||C.push({command:fe.setCenter,args:[v.center]}),Oe(y.zoom,v.zoom)||C.push({command:fe.setZoom,args:[v.zoom]}),Oe(y.bearing,v.bearing)||C.push({command:fe.setBearing,args:[v.bearing]}),Oe(y.pitch,v.pitch)||C.push({command:fe.setPitch,args:[v.pitch]}),Oe(y.sprite,v.sprite)||C.push({command:fe.setSprite,args:[v.sprite]}),Oe(y.glyphs,v.glyphs)||C.push({command:fe.setGlyphs,args:[v.glyphs]}),Oe(y.transition,v.transition)||C.push({command:fe.setTransition,args:[v.transition]}),Oe(y.light,v.light)||C.push({command:fe.setLight,args:[v.light]}),Oe(y.fog,v.fog)||C.push({command:fe.setFog,args:[v.fog]}),Oe(y.projection,v.projection)||C.push({command:fe.setProjection,args:[v.projection]});const M={},E=[];!function(L,V,Z,H){let U;for(U in V=V||{},L=L||{})L.hasOwnProperty(U)&&(V.hasOwnProperty(U)||ci(U,Z,H));for(U in V)V.hasOwnProperty(U)&&(L.hasOwnProperty(U)?Oe(L[U],V[U])||("geojson"===L[U].type&&"geojson"===V[U].type&&ip(L,V,U)?Z.push({command:fe.setGeoJSONSourceData,args:[U,V[U].data]}):On(U,V,Z,H)):Tn(U,V,Z))}(y.sources,v.sources,E,M);const k=[];y.layers&&y.layers.forEach(L=>{L.source&&M[L.source]?C.push({command:fe.removeLayer,args:[L.id]}):k.push(L)});let I=y.terrain;I&&M[I.source]&&(C.push({command:fe.setTerrain,args:[void 0]}),I=void 0),C=C.concat(E),Oe(I,v.terrain)||C.push({command:fe.setTerrain,args:[v.terrain]}),function(L,V,Z){V=V||[];const H=(L=L||[]).map(Bl),U=V.map(Bl),K=L.reduce(fu,{}),G=V.reduce(fu,{}),Q=H.slice(),j=Object.create(null);let ne,J,$,se,_e,Ce,ve;for(ne=0,J=0;ne<H.length;ne++)$=H[ne],G.hasOwnProperty($)?J++:(Z.push({command:fe.removeLayer,args:[$]}),Q.splice(Q.indexOf($,J),1));for(ne=0,J=0;ne<U.length;ne++)$=U[U.length-1-ne],Q[Q.length-1-ne]!==$&&(K.hasOwnProperty($)?(Z.push({command:fe.removeLayer,args:[$]}),Q.splice(Q.lastIndexOf($,Q.length-J),1)):J++,Ce=Q[Q.length-ne],Z.push({command:fe.addLayer,args:[G[$],Ce]}),Q.splice(Q.length-ne,0,$),j[$]=!0);for(ne=0;ne<U.length;ne++)if($=U[ne],se=K[$],_e=G[$],!j[$]&&!Oe(se,_e))if(Oe(se.source,_e.source)&&Oe(se["source-layer"],_e["source-layer"])&&Oe(se.type,_e.type)){for(ve in En(se.layout,_e.layout,Z,$,null,fe.setLayoutProperty),En(se.paint,_e.paint,Z,$,null,fe.setPaintProperty),Oe(se.filter,_e.filter)||Z.push({command:fe.setFilter,args:[$,_e.filter]}),Oe(se.minzoom,_e.minzoom)&&Oe(se.maxzoom,_e.maxzoom)||Z.push({command:fe.setLayerZoomRange,args:[$,_e.minzoom,_e.maxzoom]}),se)se.hasOwnProperty(ve)&&"layout"!==ve&&"paint"!==ve&&"filter"!==ve&&"metadata"!==ve&&"minzoom"!==ve&&"maxzoom"!==ve&&(0===ve.indexOf("paint.")?En(se[ve],_e[ve],Z,$,ve.slice(6),fe.setPaintProperty):Oe(se[ve],_e[ve])||Z.push({command:fe.setLayerProperty,args:[$,ve,_e[ve]]}));for(ve in _e)_e.hasOwnProperty(ve)&&!se.hasOwnProperty(ve)&&"layout"!==ve&&"paint"!==ve&&"filter"!==ve&&"metadata"!==ve&&"minzoom"!==ve&&"maxzoom"!==ve&&(0===ve.indexOf("paint.")?En(se[ve],_e[ve],Z,$,ve.slice(6),fe.setPaintProperty):Oe(se[ve],_e[ve])||Z.push({command:fe.setLayerProperty,args:[$,ve,_e[ve]]}))}else Z.push({command:fe.removeLayer,args:[$]}),Ce=Q[Q.lastIndexOf($)+1],Z.push({command:fe.addLayer,args:[_e,Ce]})}(k,v.layers,C)}catch(M){console.warn("Unable to compute style diff:",M),C=[{command:fe.setStyle,args:[v]}]}return C}(this.serialize(),i).filter(y=>!(y.command in Qc));if(0===d.length)return!1;const m=d.filter(y=>!(y.command in Ds));if(m.length>0)throw new Error(`Unimplemented: ${m.map(y=>y.command).join(", ")}.`);return d.forEach(y=>{"setTransition"!==y.command&&this[y.command].apply(this,y.args)}),this.stylesheet=i,this._updateMapProjection(),!0}addImage(i,d){return this.getImage(i)?this.fire(new h.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(i,d),this._afterImageUpdated(i),this)}updateImage(i,d){this.imageManager.updateImage(i,d)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){return this.getImage(i)?(this.imageManager.removeImage(i),this._afterImageUpdated(i),this):this.fire(new h.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(i,d,m={}){if(this._checkLoaded(),void 0!==this.getSource(i))throw new Error("There is already a source with this ID");if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(h.validateSource,`sources.${i}`,d,null,m))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const y=xe(i,d,this.dispatcher,this);y.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(i),source:y.serialize(),sourceId:i}));const v=C=>{const M=(C?"symbol:":"other:")+i,E=this._sourceCaches[M]=new h.SourceCache(M,y,C);(C?this._symbolSourceCaches:this._otherSourceCaches)[i]=E,E.style=this,E.onAdd(this.map)};v(!1),"vector"!==d.type&&"geojson"!==d.type||v(!0),y.onAdd&&y.onAdd(this.map),this._changed=!0}removeSource(i){this._checkLoaded();const d=this.getSource(i);if(!d)throw new Error("There is no source with this ID");for(const y in this._layers)if(this._layers[y].source===i)return this.fire(new h.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${y}" is using it.`)));if(this.terrain&&this.terrain.get().source===i)return this.fire(new h.ErrorEvent(new Error(`Source "${i}" cannot be removed while terrain is using it.`)));const m=this._getSourceCaches(i);for(const y of m)delete this._sourceCaches[y.id],delete this._updatedSources[y.id],y.fire(new h.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:y.getSource().id})),y.setEventedParent(null),y.clearTiles();return delete this._otherSourceCaches[i],delete this._symbolSourceCaches[i],d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(i,d){this._checkLoaded(),this.getSource(i).setData(d),this._changed=!0}getSource(i){const d=this._getSourceCache(i);return d&&d.getSource()}addLayer(i,d,m={}){this._checkLoaded();const y=i.id;if(this.getLayer(y))return void this.fire(new h.ErrorEvent(new Error(`Layer with id "${y}" already exists on this map`)));let v;if("custom"===i.type){if(lr(this,h.validateCustomStyleLayer(i)))return;v=h.createStyleLayer(i)}else{if("object"==typeof i.source&&(this.addSource(y,i.source),i=h.clone$1(i),i=h.extend(i,{source:y})),this._validate(h.validateLayer,`layers.${y}`,i,{arrayIndex:-1},m))return;v=h.createStyleLayer(i),this._validateLayer(v),v.setEventedParent(this,{layer:{id:y}}),this._serializedLayers[v.id]=v.serialize(),this._updateLayerCount(v,!0)}const C=d?this._order.indexOf(d):this._order.length;if(d&&-1===C)return void this.fire(new h.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`)));this._order.splice(C,0,y),this._layerOrderChanged=!0,this._layers[y]=v;const M=this._getLayerSourceCache(v);if(this._removedLayers[y]&&v.source&&M&&"custom"!==v.type){const E=this._removedLayers[y];delete this._removedLayers[y],E.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",M.pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(i,d){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new h.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===d)return;const m=this._order.indexOf(i);this._order.splice(m,1);const y=d?this._order.indexOf(d):this._order.length;d&&-1===y?this.fire(new h.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`))):(this._order.splice(y,0,i),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(i){this._checkLoaded();const d=this._layers[i];if(!d)return void this.fire(new h.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be removed.`)));d.setEventedParent(null),this._updateLayerCount(d,!1);const m=this._order.indexOf(i);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=d,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],d.onRemove&&d.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}hasLayerType(i){for(const d in this._layers)if(this._layers[d].type===i)return!0;return!1}setLayerZoomRange(i,d,m){this._checkLoaded();const y=this.getLayer(i);y?y.minzoom===d&&y.maxzoom===m||(null!=d&&(y.minzoom=d),null!=m&&(y.maxzoom=m),this._updateLayer(y)):this.fire(new h.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(i,d,m={}){this._checkLoaded();const y=this.getLayer(i);if(y){if(!Oe(y.filter,d))return null==d?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(h.validateFilter,`layers.${y.id}.filter`,d,{layerType:y.type},m)||(y.filter=h.clone$1(d),this._updateLayer(y)))}else this.fire(new h.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be filtered.`)))}getFilter(i){const d=this.getLayer(i);return d&&h.clone$1(d.filter)}setLayoutProperty(i,d,m,y={}){this._checkLoaded();const v=this.getLayer(i);v?Oe(v.getLayoutProperty(d),m)||(v.setLayoutProperty(d,m,y),this._updateLayer(v)):this.fire(new h.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(i,d){const m=this.getLayer(i);if(m)return m.getLayoutProperty(d);this.fire(new h.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style.`)))}setPaintProperty(i,d,m,y={}){this._checkLoaded();const v=this.getLayer(i);v?Oe(v.getPaintProperty(d),m)||(v.setPaintProperty(d,m,y)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new h.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(i,d){const m=this.getLayer(i);return m&&m.getPaintProperty(d)}setFeatureState(i,d){this._checkLoaded();const m=i.source,y=i.sourceLayer,v=this.getSource(m);if(!v)return void this.fire(new h.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const C=v.type;if("geojson"===C&&y)return void this.fire(new h.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===C&&!y)return void this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===i.id&&this.fire(new h.ErrorEvent(new Error("The feature id parameter must be provided.")));const M=this._getSourceCaches(m);for(const E of M)E.setFeatureState(y,i.id,d)}removeFeatureState(i,d){this._checkLoaded();const m=i.source,y=this.getSource(m);if(!y)return void this.fire(new h.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const v=y.type,C="vector"===v?i.sourceLayer:void 0;if("vector"===v&&!C)return void this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&"string"!=typeof i.id&&"number"!=typeof i.id)return void this.fire(new h.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const M=this._getSourceCaches(m);for(const E of M)E.removeFeatureState(C,i.id,d)}getFeatureState(i){this._checkLoaded();const d=i.source,m=i.sourceLayer,y=this.getSource(d);if(y){if("vector"!==y.type||m)return void 0===i.id&&this.fire(new h.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(d)[0].getFeatureState(m,i.id);this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new h.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return h.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const i={};for(const d in this._sourceCaches){const m=this._sourceCaches[d].getSource();i[m.id]||(i[m.id]=m.serialize())}return h.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:i,layers:this._serializeLayers(this._order)},d=>void 0!==d)}_updateLayer(i){this._updatedLayers[i.id]=!0;const d=this._getLayerSourceCache(i);i.source&&!this._updatedSources[i.source]&&d&&"raster"!==d.getSource().type&&(this._updatedSources[i.source]="reload",d.pause()),this._changed=!0,i.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(i){const d=C=>"fill-extrusion"===this._layers[C].type,m={},y=[];for(let C=this._order.length-1;C>=0;C--){const M=this._order[C];if(d(M)){m[M]=C;for(const E of i){const k=E[M];if(k)for(const I of k)y.push(I)}}}y.sort((C,M)=>M.intersectionZ-C.intersectionZ);const v=[];for(let C=this._order.length-1;C>=0;C--){const M=this._order[C];if(d(M))for(let E=y.length-1;E>=0;E--){const k=y[E].feature;if(m[k.layer.id]<C)break;v.push(k),y.pop()}else for(const E of i){const k=E[M];if(k)for(const I of k)v.push(I.feature)}}return v}queryRenderedFeatures(i,d,m){d&&d.filter&&this._validate(h.validateFilter,"queryRenderedFeatures.filter",d.filter,null,d);const y={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new h.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const E of d.layers){const k=this._layers[E];if(!k)return this.fire(new h.ErrorEvent(new Error(`The layer '${E}' does not exist in the map's style and cannot be queried for features.`))),[];y[k.source]=!0}}const v=[];d.availableImages=this._availableImages;const C=d&&d.layers?d.layers.some(E=>{const k=this.getLayer(E);return k&&k.is3D()}):this.has3DLayers(),M=Ji.createFromScreenPoints(i,m);for(const E in this._sourceCaches){const k=this._sourceCaches[E].getSource().id;d.layers&&!y[k]||v.push(We(this._sourceCaches[E],this._layers,this._serializedLayers,M,d,m,C,!!this.map._showQueryGeometry))}return this.placement&&v.push(function(E,k,I,L,V,Z,H){const U={},K=Z.queryRenderedSymbols(L),G=[];for(const Q of Object.keys(K).map(Number))G.push(H[Q]);G.sort(nt);for(const Q of G){const j=Q.featureIndex.lookupSymbolFeatures(K[Q.bucketInstanceId],k,Q.bucketIndex,Q.sourceLayerIndex,V.filter,V.layers,V.availableImages,E);for(const ne in j){const J=U[ne]=U[ne]||[],$=j[ne];$.sort((se,_e)=>{const Ce=Q.featureSortOrder;if(Ce){const ve=Ce.indexOf(se.featureIndex);return Ce.indexOf(_e.featureIndex)-ve}return _e.featureIndex-se.featureIndex});for(const se of $)J.push(se)}}for(const Q in U)U[Q].forEach(j=>{const ne=j.feature,J=I(E[Q]).getFeatureState(ne.layer["source-layer"],ne.id);ne.source=ne.layer.source,ne.layer["source-layer"]&&(ne.sourceLayer=ne.layer["source-layer"]),ne.state=J});return U}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),M.screenGeometry,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(i,d){d&&d.filter&&this._validate(h.validateFilter,"querySourceFeatures.filter",d.filter,null,d);const m=this._getSourceCaches(i);let y=[];for(const v of m)y=y.concat(Pe(v,d));return y}addSourceType(i,d,m){return gn.getSourceType(i)?m(new Error(`A source type called "${i}" already exists.`)):(gn.setSourceType(i,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:d.workerSourceURL},m):m(null,null))}getLight(){return this.light.getLight()}setLight(i,d={}){this._checkLoaded();const m=this.light.getLight();let y=!1;for(const C in i)if(!Oe(i[C],m[C])){y=!0;break}if(!y)return;const v=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(i,d),this.light.updateTransitions(v)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(i,d=1){if(this._checkLoaded(),!i)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===d){if("object"==typeof i.source){const m="terrain-dem-src";this.addSource(m,i.source),i=h.clone$1(i),i=h.extend(i,{source:m})}if(this._validate(h.validateTerrain,"terrain",i))return}if(!this.terrain||this.terrain&&d!==this.terrain.drapeRenderMode)this._createTerrain(i,d);else{const m=this.terrain,y=m.get();for(const v of Object.keys(h.spec.terrain))!i.hasOwnProperty(v)&&h.spec.terrain[v].default&&(i[v]=h.spec.terrain[v].default);for(const v in i)if(!Oe(i[v],y[v])){m.set(i),this.stylesheet.terrain=i;const C=this._setTransitionParameters({duration:0});m.updateTransitions(C);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(i){const d=this.fog=new Ai(i,this.map.transform);this.stylesheet.fog=i;const m=this._setTransitionParameters({duration:0});d.updateTransitions(m)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const i of this.map._markers)i._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(i){if(this._checkLoaded(),!i)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog,m=d.get();0===Object.keys(i).length&&d.set(i);for(const y in i)if(!Oe(i[y],m[y])){d.set(i),this.stylesheet.fog=i;const v=this._setTransitionParameters({duration:0});d.updateTransitions(v);break}}else this._createFog(i);this._markersNeedUpdate=!0}_setTransitionParameters(i){return{now:h.exported.now(),transition:h.extend(i,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const i=this._order.filter(m=>this.isLayerDraped(this._layers[m])),d=this._order.filter(m=>!this.isLayerDraped(this._layers[m]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...i),this._drapedFirstOrder.push(...d)}_createTerrain(i,d){const m=this.terrain=new wt(i,d);this.stylesheet.terrain=i,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const y=this._setTransitionParameters({duration:0});m.updateTransitions(y)}_force3DLayerUpdate(){for(const i in this._layers){const d=this._layers[i];"fill-extrusion"===d.type&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const i in this._layers){const d=this._layers[i];"symbol"===d.type&&this._updateLayer(d)}}_validate(i,d,m,y,v={}){return(!v||!1!==v.validate)&&lr(this,i.call(h.validateStyle,h.extend({key:d,style:this.serialize(),value:m,styleSpec:h.spec},y)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),h.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this._sourceCaches)this._sourceCaches[i].clearTiles(),this._sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){const d=this._getSourceCaches(i);for(const m of d)m.clearTiles()}_reloadSource(i){const d=this._getSourceCaches(i);for(const m of d)m.resume(),m.reload()}_updateSources(i){for(const d in this._sourceCaches)this._sourceCaches[d].update(i)}_generateCollisionBoxes(){for(const i in this._sourceCaches){const d=this._sourceCaches[i];d.resume(),d.reload()}}_updatePlacement(i,d,m,y,v=!1){let C=!1,M=!1;const E={};for(const k of this._order){const I=this._layers[k];if("symbol"!==I.type)continue;if(!E[I.source]){const V=this._getLayerSourceCache(I);if(!V)continue;E[I.source]=V.getRenderableIds(!0).map(Z=>V.getTileByID(Z)).sort((Z,H)=>H.tileID.overscaledZ-Z.tileID.overscaledZ||(Z.tileID.isLessThan(H.tileID)?-1:1))}const L=this.crossTileSymbolIndex.addLayer(I,E[I.source],i.center.lng,i.projection);C=C||L}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),v=v||this._layerOrderChanged||0===m,this._layerOrderChanged&&this.fire(new h.Event("neworder")),(v||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(h.exported.now(),i.zoom))&&(this.pauseablePlacement=new Ll(i,this._order,v,d,m,y,this.placement,this.fog&&i.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,E),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(h.exported.now()),M=!0),C&&this.pauseablePlacement.placement.setStale()),M||C)for(const k of this._order){const I=this._layers[k];"symbol"===I.type&&this.placement.updateLayerOpacities(I,E[I.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(h.exported.now())}_releaseSymbolFadeTiles(){for(const i in this._sourceCaches)this._sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,d,m){this.imageManager.getImages(d.icons,m),this._updateTilesForChangedImages();const y=v=>{v&&v.setDependencies(d.tileID.key,d.type,d.icons)};y(this._otherSourceCaches[d.source]),y(this._symbolSourceCaches[d.source])}getGlyphs(i,d,m){this.glyphManager.getGlyphs(d.stacks,m)}getResource(i,d,m){return h.makeRequest(d,m)}_getSourceCache(i){return this._otherSourceCaches[i]}_getLayerSourceCache(i){return"symbol"===i.type?this._symbolSourceCaches[i.source]:this._otherSourceCaches[i.source]}_getSourceCaches(i){const d=[];return this._otherSourceCaches[i]&&d.push(this._otherSourceCaches[i]),this._symbolSourceCaches[i]&&d.push(this._symbolSourceCaches[i]),d}_isSourceCacheLoaded(i){const d=this._getSourceCaches(i);return 0===d.length?(this.fire(new h.ErrorEvent(new Error(`There is no source with ID '${i}'`))),!1):d.every(m=>m.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}gn.getSourceType=function(p){return de[p]},gn.setSourceType=function(p,i){de[p]=i},gn.registerForPluginStateChange=h.registerForPluginStateChange;var Pi="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",ji="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let zi={},to={};zi=Rt("","\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0),to=Rt("#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif","#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",!0);const Bs=Rt("\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}\n#ifdef TERRAIN\nhighp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}\n#endif","\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),cr=Pi,zr="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var dr={background:Rt("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Rt("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Rt("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);\n#else \nmat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Rt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Rt("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\nvec3 pos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Rt("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Rt("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Rt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Rt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:Rt("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Rt("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Rt("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Rt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Rt("varying vec4 v_color;void main() {vec4 color=v_color;\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);\n#else\nvec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(pos.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Rt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);\n#else\nvec3 p=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Rt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Rt("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Rt("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\n#ifdef RENDER_LINE_GRADIENT\nhighp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nvec4 out_color=color;\n#endif\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Rt("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Rt("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Rt("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\nvec4 offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:Rt("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\nvec4 offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:Rt("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:Rt("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n}"),terrainDepth:Rt("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Rt("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",ji),skyboxGradient:Rt("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",ji),skyboxCapture:Rt("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Rt("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);vec4 color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\nvec4 color=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_merc_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 merc_pos=a_merc_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;uv=uv*EXTENT;vec4 up_vector=vec4(elevationVector(uv),1.0);float height=elevation(uv);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector.xyz*height;vec4 globe=u_globe_matrix*vec4(globe_pos,1.0);vec4 mercator=vec4(0.0);if (u_zoom_transition > 0.0) {mercator=vec4(merc_pos,height,1.0);mercator.xy-=u_merc_center;mercator.x=wrap(mercator.x,-0.5,0.5);mercator=u_merc_matrix*mercator;}vec3 position=mix(globe.xyz,mercator.xyz,u_zoom_transition);gl_Position=u_proj_matrix*vec4(position,1.0);\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:Rt("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);\n#ifdef PROJECTION_GLOBE_VIEW\nfloat globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));float horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nfloat horizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function Rt(p,i,d){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,v=i.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),C=p.match(y),M=i.match(y),E=Pi.match(y);let k=M?M.concat(C):C;d||(zi.staticUniforms&&(k=zi.staticUniforms.concat(k)),to.staticUniforms&&(k=to.staticUniforms.concat(k))),k&&(k=k.concat(E));const I={};return{fragmentSource:p=p.replace(m,(L,V,Z,H,U)=>(I[U]=!0,"define"===V?`\n#ifndef HAS_UNIFORM_u_${U}\nvarying ${Z} ${H} ${U};\n#else\nuniform ${Z} ${H} u_${U};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${U}\n    ${Z} ${H} ${U} = u_${U};\n#endif\n`)),vertexSource:i=i.replace(m,(L,V,Z,H,U)=>{const K="float"===H?"vec2":"vec4",G=U.match(/color/)?"color":K;return I[U]?"define"===V?`\n#ifndef HAS_UNIFORM_u_${U}\nuniform lowp float u_${U}_t;\nattribute ${Z} ${K} a_${U};\nvarying ${Z} ${H} ${U};\n#else\nuniform ${Z} ${H} u_${U};\n#endif\n`:"vec4"===G?`\n#ifndef HAS_UNIFORM_u_${U}\n    ${U} = a_${U};\n#else\n    ${Z} ${H} ${U} = u_${U};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${U}\n    ${U} = unpack_mix_${G}(a_${U}, u_${U}_t);\n#else\n    ${Z} ${H} ${U} = u_${U};\n#endif\n`:"define"===V?`\n#ifndef HAS_UNIFORM_u_${U}\nuniform lowp float u_${U}_t;\nattribute ${Z} ${K} a_${U};\n#else\nuniform ${Z} ${H} u_${U};\n#endif\n`:"vec4"===G?`\n#ifndef HAS_UNIFORM_u_${U}\n    ${Z} ${H} ${U} = a_${U};\n#else\n    ${Z} ${H} ${U} = u_${U};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${U}\n    ${Z} ${H} ${U} = unpack_mix_${G}(a_${U}, u_${U}_t);\n#else\n    ${Z} ${H} ${U} = u_${U};\n#endif\n`}),staticAttributes:v,staticUniforms:k}}class Ut{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,d,m,y,v,C,M,E,k){this.context=i;let I=this.boundPaintVertexBuffers.length!==y.length;for(let L=0;!I&&L<y.length;L++)this.boundPaintVertexBuffers[L]!==y[L]&&(I=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===d&&this.boundLayoutVertexBuffer===m&&!I&&this.boundIndexBuffer===v&&this.boundVertexOffset===C&&this.boundDynamicVertexBuffer===M&&this.boundDynamicVertexBuffer2===E&&this.boundDynamicVertexBuffer3===k?(i.bindVertexArrayOES.set(this.vao),M&&M.bind(),v&&v.dynamicDraw&&v.bind(),E&&E.bind(),k&&k.bind()):this.freshBind(d,m,y,v,C,M,E,k)}freshBind(i,d,m,y,v,C,M,E){let k;const I=i.numAttributes,L=this.context,V=L.gl;if(L.extVertexArrayObject)this.vao&&this.destroy(),this.vao=L.extVertexArrayObject.createVertexArrayOES(),L.bindVertexArrayOES.set(this.vao),k=0,this.boundProgram=i,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=y,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=M,this.boundDynamicVertexBuffer3=E;else{k=L.currentNumAttributes||0;for(let Z=I;Z<k;Z++)V.disableVertexAttribArray(Z)}d.enableAttributes(V,i);for(const Z of m)Z.enableAttributes(V,i);C&&C.enableAttributes(V,i),M&&M.enableAttributes(V,i),E&&E.enableAttributes(V,i),d.bind(),d.setVertexAttribPointers(V,i,v);for(const Z of m)Z.bind(),Z.setVertexAttribPointers(V,i,v);C&&(C.bind(),C.setVertexAttribPointers(V,i,v)),y&&y.bind(),M&&(M.bind(),M.setVertexAttribPointers(V,i,v)),E&&(E.bind(),E.setVertexAttribPointers(V,i,v)),L.currentNumAttributes=I}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Yt(p,i){const d=Math.pow(2,i.canonical.z),m=i.canonical.y;return[new h.MercatorCoordinate(0,m/d).toLngLat().lat,new h.MercatorCoordinate(0,(m+1)/d).toLngLat().lat]}function Vr(p,i,d,m,y,v,C){const M=p.context,E=M.gl,k=d.fbo;if(!k)return;p.prepareDrawTile();const I=p.useProgram("hillshade");M.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,k.colorAttachment.get());const L=((U,K,G,Q)=>{const j=G.paint.get("hillshade-shadow-color"),ne=G.paint.get("hillshade-highlight-color"),J=G.paint.get("hillshade-accent-color");let $=G.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===G.paint.get("hillshade-illumination-anchor")&&($-=U.transform.angle);const se=!U.options.moving;return{u_matrix:Q||U.transform.calculateProjMatrix(K.tileID.toUnwrapped(),se),u_image:0,u_latrange:Yt(0,K.tileID),u_light:[G.paint.get("hillshade-exaggeration"),$],u_shadow:j,u_highlight:ne,u_accent:J}})(p,d,m,p.terrain?i.projMatrix:null);p.prepareDrawProgram(M,I,i.toUnwrapped());const{tileBoundsBuffer:V,tileBoundsIndexBuffer:Z,tileBoundsSegments:H}=p.getTileBoundsBuffers(d);I.draw(M,E.TRIANGLES,y,v,C,h.CullFaceMode.disabled,L,m.id,V,Z,H)}function ks(p,i,d){if(!i.needsDEMTextureUpload)return;const m=p.context,y=m.gl;m.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||p.getTileTexture(d.stride);const v=d.getPixels();i.demTexture?i.demTexture.update(v,{premultiply:!1}):i.demTexture=new h.Texture(m,v,y.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1}function Da(p,i,d,m,y,v){const C=p.context,M=C.gl;if(!i.dem)return;const E=i.dem;if(C.activeTexture.set(M.TEXTURE1),ks(p,i,E),!i.demTexture)return;i.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE);const k=E.dim;C.activeTexture.set(M.TEXTURE0);let I=i.fbo;if(!I){const H=new h.Texture(C,{width:k,height:k,data:null},M.RGBA);H.bind(M.LINEAR,M.CLAMP_TO_EDGE),I=i.fbo=C.createFramebuffer(k,k,!0),I.colorAttachment.set(H.texture)}C.bindFramebuffer.set(I.framebuffer),C.viewport.set([0,0,k,k]);const{tileBoundsBuffer:L,tileBoundsIndexBuffer:V,tileBoundsSegments:Z}=p.getMercatorTileBoundsBuffers();p.useProgram("hillshadePrepare").draw(C,M.TRIANGLES,m,y,v,h.CullFaceMode.disabled,((H,U)=>{const K=U.stride,G=h.create();return h.ortho(G,0,h.EXTENT,-h.EXTENT,0,0,1),h.translate(G,G,[0,-h.EXTENT,0]),{u_matrix:G,u_image:1,u_dimension:[K,K],u_zoom:H.overscaledZ,u_unpack:U.unpackVector}})(i.tileID,E),d.id,L,V,Z),i.needsHillshadePrepare=!1}const gi=(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_image0:new h.Uniform1i(p,i.u_image0),u_skirt_height:new h.Uniform1f(p,i.u_skirt_height)}),io=(p,i)=>({u_matrix:p,u_image0:0,u_skirt_height:i}),Ot=(p,i,d,m,y,v,C,M,E,k,I,L,V,Z)=>({u_proj_matrix:Float32Array.from(p),u_globe_matrix:i,u_normalize_matrix:Float32Array.from(m),u_merc_matrix:d,u_zoom_transition:y,u_merc_center:v,u_image0:0,u_frustum_tl:C,u_frustum_tr:M,u_frustum_br:E,u_frustum_bl:k,u_globe_pos:I,u_globe_radius:L,u_viewport:V,u_grid_matrix:Z?Float32Array.from(Z):new Float32Array(9)});function Bn(p,i){return null!=p&&null!=i&&!(!p.hasData()||!i.hasData())&&null!=p.demTexture&&null!=i.demTexture&&p.tileID.key!==i.tileID.key}const Zo=new class{constructor(){this.operations={}}newMorphing(p,i,d,m,y){if(p in this.operations){const v=this.operations[p];v.to.tileID.key!==d.tileID.key&&(v.queued=d)}else this.operations[p]={startTime:m,phase:0,duration:y,from:i,to:d,queued:null}}getMorphValuesForProxy(p){if(!(p in this.operations))return null;const i=this.operations[p];return{from:i.from,to:i.to,phase:i.phase}}update(p){for(const i in this.operations){const d=this.operations[i];for(d.phase=(p-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,p)){delete this.operations[i];break}}}_nextOp(p,i){return!!p.queued&&(p.from=p.to,p.to=p.queued,p.queued=null,p.phase=0,p.startTime=i,!0)}_validOp(p){return p.from.hasData()&&p.to.hasData()}},Ba={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Wc(p,i){const d=1<<p.z;return!i&&(0===p.x||p.x===d-1)||0===p.y||p.y===d-1}const Nr=p=>({u_matrix:p});function Ps(p,i,d,m,y){if(y>0){const v=h.exported.now(),C=(v-p.timeAdded)/y,M=i?(v-i.timeAdded)/y:-1,E=d.getSource(),k=m.coveringZoomLevel({tileSize:E.tileSize,roundZoom:E.roundZoom}),I=!i||Math.abs(i.tileID.overscaledZ-k)>Math.abs(p.tileID.overscaledZ-k),L=I&&p.refreshedUponExpiration?1:h.clamp(I?C:1-M,0,1);return p.refreshedUponExpiration&&C>=1&&(p.refreshedUponExpiration=!1),i?{opacity:1,mix:1-L}:{opacity:L,mix:0}}return{opacity:1,mix:0}}class rp extends h.SourceCache{constructor(i){const d={type:"raster-dem",maxzoom:i.transform.maxZoom},m=new Gi(Nt(),null),y=xe("mock-dem",d,m,i.style);super("mock-dem",y,!1),y.setEventedParent(this),this._sourceLoaded=!0}_loadTile(i,d){i.state="loaded",d(null)}}class ap extends h.SourceCache{constructor(i){const d=xe("proxy",{type:"geojson",maxzoom:i.transform.maxZoom},new Gi(Nt(),null),i.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=i,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(i,d,m){if(i.freezeTileCoverage)return;this.transform=i;const y=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((v,C)=>{if(v[C.key]="",!this._tiles[C.key]){const M=new h.Tile(C,this._source.tileSize*C.overscaleFactor(),i.tileZoom);M.state="loaded",this._tiles[C.key]=M}return v},{});for(const v in this._tiles)v in y||(this.freeFBO(v),this._tiles[v].unloadVectorData(),delete this._tiles[v])}freeFBO(i){const d=this.proxyCachedFBO[i];if(void 0!==d){const m=Object.values(d);this.renderCachePool.push(...m),delete this.proxyCachedFBO[i]}}deallocRenderCache(){this.renderCache.forEach(i=>i.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class ka extends h.OverscaledTileID{constructor(i,d,m){super(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,i.canonical.y),this.proxyTileKey=d,this.projMatrix=m}}class Xc extends h.Elevation{constructor(i,d){super(),this.painter=i,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[m,y,v]=function(E){const k=new h.StructArrayLayout4i8,I=new h.StructArrayLayout3ui6,L=131;k.reserve(17161),I.reserve(33800);const V=h.EXTENT/128,Z=h.EXTENT+V/2,H=Z+V;for(let K=-V;K<H;K+=V)for(let G=-V;G<H;G+=V){const Q=G<0||G>Z||K<0||K>Z?24575:0,j=h.clamp(Math.round(G),0,h.EXTENT),ne=h.clamp(Math.round(K),0,h.EXTENT);k.emplaceBack(j+Q,ne,j,ne)}const U=(K,G)=>{const Q=G*L+K;I.emplaceBack(Q+1,Q,Q+L),I.emplaceBack(Q+L,Q+L+1,Q+1)};for(let K=1;K<129;K++)for(let G=1;G<129;G++)U(G,K);return[0,129].forEach(K=>{for(let G=0;G<130;G++)U(G,K),U(K,G)}),[k,I,32768]}(),C=i.context;this.gridBuffer=C.createVertexBuffer(m,h.boundsAttributes.members),this.gridIndexBuffer=C.createIndexBuffer(y),this.gridSegments=h.SegmentVector.simpleSegment(0,0,m.length,y.length),this.gridNoSkirtSegments=h.SegmentVector.simpleSegment(0,0,m.length,v),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new ap(d.map),this.orthoMatrix=h.create(),h.ortho(this.orthoMatrix,0,h.EXTENT,0,h.EXTENT,0,1);const M=C.gl;this._overlapStencilMode=new h.StencilMode({func:M.GEQUAL,mask:255},0,255,M.KEEP,M.KEEP,M.REPLACE),this._previousZoom=i.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new rp(d.map)}set style(i){i.on("data",this._onStyleDataEvent.bind(this)),i.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=i,this._checkRenderCacheEfficiency()}update(i,d,m){if(i&&i.terrain){this._style!==i&&(this.style=i),this.enabled=!0;const y=i.terrain.properties;this.sourceCache=0===i.terrain.drapeRenderMode?this._mockSourceCache:i._getSourceCache(y.get("source")),this._exaggeration=y.get("exaggeration");const v=()=>{this.sourceCache.used&&h.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const C=this.getScaledDemTileSize();this.sourceCache.update(d,C,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,v(),this._initializing=!0),v(),d.updateElevation(!m),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(i){this._findCoveringTileCache[i]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const i=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==i.efficiency&&h.warnOnce(`Terrain render cache efficiency is not optimal (${i.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${i.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(i){i.coord&&"source"===i.dataType?this._clearRenderCacheForTile(i.sourceCacheId,i.coord):"style"===i.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const i in this._style._sourceCaches)this._style._sourceCaches[i].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(i=>i.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const i=2*this.proxySourceCache.getSource().tileSize;return[i,i]}set useVertexMorphing(i){this._useVertexMorphing=i}updateTileBinding(i){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,m=this.painter.transform;this._initializing&&(this._initializing=0===m._centerAltitude&&-1===this.getAtPointOrZero(h.MercatorCoordinate.fromLngLat(m.center),-1),this._emptyDEMTextureDirty=!this._initializing);const y=this.proxyCoords=d.getIds().map(E=>{const k=d.getTileByID(E).tileID;return k.projMatrix=m.calculateProjMatrix(k.toUnwrapped()),k});(function(E,k){const I=k.transform.pointCoordinate(k.transform.getCameraPoint()),L=new h.pointGeometry(I.x,I.y);E.sort((V,Z)=>{if(Z.overscaledZ-V.overscaledZ)return Z.overscaledZ-V.overscaledZ;const H=new h.pointGeometry(V.canonical.x+(1<<V.canonical.z)*V.wrap,V.canonical.y),U=new h.pointGeometry(Z.canonical.x+(1<<Z.canonical.z)*Z.wrap,Z.canonical.y),K=L.mult(1<<V.canonical.z);return K.x-=.5,K.y-=.5,K.distSqr(H)-K.distSqr(U)})})(y,this.painter),this._previousZoom=m.zoom;const v=this.proxyToSource||{};this.proxyToSource={},y.forEach(E=>{this.proxyToSource[E.key]={}}),this.terrainTileForTile={};const C=this._style._sourceCaches;for(const E in C){const k=C[E];if(!k.used||(k!==this.sourceCache&&this.resetTileLookupCache(k.id),this._setupProxiedCoordsForOrtho(k,i[E],v),k.usedForTerrain))continue;const I=i[E];k.getSource().reparseOverscaled&&this._assignTerrainTiles(I)}this.proxiedCoords[d.id]=y.map(E=>new ka(E,E.key,this.orthoMatrix)),this._assignTerrainTiles(y),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(v),this.renderingToTexture=!1,this._updateTimestamp=h.exported.now();const M={};this._visibleDemTiles=[];for(const E of this.proxyCoords){const k=this.terrainTileForTile[E.key];if(!k)continue;const I=k.tileID.key;I in M||(this._visibleDemTiles.push(k),M[I]=I)}}_assignTerrainTiles(i){this._initializing||i.forEach(d=>{if(this.terrainTileForTile[d.key])return;const m=this._findTileCoveringTileID(d,this.sourceCache);m&&(this.terrainTileForTile[d.key]=m)})}_prepareDEMTextures(){const i=this.painter.context,d=i.gl;for(const m in this.terrainTileForTile){const y=this.terrainTileForTile[m],v=y.dem;!v||y.demTexture&&!y.needsDEMTextureUpload||(i.activeTexture.set(d.TEXTURE1),ks(this.painter,y,v))}}_prepareDemTileUniforms(i,d,m,y){if(!d||null==d.demTexture)return!1;const v=i.tileID.canonical,C=Math.pow(2,d.tileID.canonical.z-v.z),M=y||"";return m[`u_dem_tl${M}`]=[v.x*C%1,v.y*C%1],m[`u_dem_scale${M}`]=C,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const i=this.painter.context,d=i.gl;if(!this._emptyDepthBufferTexture){const m=new h.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new h.Texture(i,m,d.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let i=0;const d=this._visibleDemTiles.reduce((m,y)=>{if(!y.dem)return m;const v=y.dem.tree.minimums[0];return v>0&&i++,m+v},0);return i?d/i:0}_updateEmptyDEMTexture(){const i=this.painter.context,d=i.gl;i.activeTexture.set(d.TEXTURE2);const m=this._getLoadedAreaMinimum(),y=new h.RGBAImage({width:1,height:1},new Uint8Array(h.DEMData.pack(m,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let v=this._emptyDEMTexture;return v?v.update(y,{premultiply:!1}):v=this._emptyDEMTexture=new h.Texture(i,y,d.RGBA,{premultiply:!1}),v}setupElevationDraw(i,d,m){const y=this.painter.context,v=y.gl,C=(M=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:h.DEMData.getUnpackVector(M),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var M;C.u_dem_size=this.sourceCache.getSource().tileSize,C.u_exaggeration=this.exaggeration();const E=this.painter.transform,k=E.projection,I=i.tileID.canonical;C.u_tile_tl_up=k.upVector(I,0,0),C.u_tile_tr_up=k.upVector(I,h.EXTENT,0),C.u_tile_br_up=k.upVector(I,h.EXTENT,h.EXTENT),C.u_tile_bl_up=k.upVector(I,0,h.EXTENT),C.u_tile_up_scale=m&&m.useDenormalizedUpVectorScale?h.GLOBE_METERS_TO_ECEF:k.upVectorScale(I,E.center.lat,E.worldSize).metersToTile;let L=null,V=null,Z=1;if(m&&m.morphing&&this._useVertexMorphing){const H=m.morphing.srcDemTile,U=m.morphing.dstDemTile;Z=m.morphing.phase,H&&U&&(this._prepareDemTileUniforms(i,H,C,"_prev")&&(V=H),this._prepareDemTileUniforms(i,U,C)&&(L=U))}if(V&&L?(y.activeTexture.set(v.TEXTURE2),L.demTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE,v.NEAREST),y.activeTexture.set(v.TEXTURE4),V.demTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE,v.NEAREST),C.u_dem_lerp=Z):(L=this.terrainTileForTile[i.tileID.key],y.activeTexture.set(v.TEXTURE2),(this._prepareDemTileUniforms(i,L,C)?L.demTexture:this.emptyDEMTexture).bind(v.NEAREST,v.CLAMP_TO_EDGE)),y.activeTexture.set(v.TEXTURE3),m&&m.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE),this._depthFBO&&(C.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE),C.u_depth_size_inv=[1,1]),m&&m.useMeterToDem&&L){const H=(1<<L.tileID.canonical.z)*h.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;C.u_meter_to_dem=H}m&&m.labelPlaneMatrixInv&&(C.u_label_plane_matrix_inv=m.labelPlaneMatrixInv),d.setTerrainUniformValues(y,C)}renderToBackBuffer(i){const d=this.painter,m=this.painter.context;0!==i.length&&(m.bindFramebuffer.set(null),m.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(y,v,C,M,E){if("globe"===y.transform.projection.name)!function(k,I,L,V,Z){const H=k.context,U=H.gl;let K,G;const Q=k.options.showTerrainWireframe?2:0,j=k.transform,ne=h.globeUseCustomAntiAliasing(k,H,j),J=(ie,ge)=>{if(G===ie)return;const Ee=[Ba[ie],"PROJECTION_GLOBE_VIEW"];ne&&Ee.push("CUSTOM_ANTIALIASING"),ge&&Ee.push(Ba[Q]),K=k.useProgram("globeRaster",null,Ee),G=ie},$=k.colorModeForRenderPass(),se=new h.DepthMode(U.LEQUAL,h.DepthMode.ReadWrite,k.depthRangeFor3D);Zo.update(Z);const _e=h.calculateGlobeMercatorMatrix(j),Ce=[h.mercatorXfromLng(j.center.lng),h.mercatorYfromLat(j.center.lat)],ve=k.globeSharedBuffers,Le=[j.width*h.exported.devicePixelRatio,j.height*h.exported.devicePixelRatio];if((Q?[!1,!0]:[!1]).forEach(ie=>{G=-1;const ge=ie?U.LINES:U.TRIANGLES;for(const Ee of V){const Ze=L.getTile(Ee),Me=h.StencilMode.disabled,ze=I.prevTerrainTileForTile[Ee.key],Ve=I.terrainTileForTile[Ee.key];Bn(ze,Ve)&&Zo.newMorphing(Ee.key,ze,Ve,Z,250),H.activeTexture.set(U.TEXTURE0),Ze.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE);const je=Zo.getMorphValuesForProxy(Ee.key),Ge=je?1:0,Ne={useDenormalizedUpVectorScale:!0};je&&h.extend$1(Ne,{morphing:{srcDemTile:je.from,dstDemTile:je.to,phase:h.easeCubicInOut(je.phase)}});const Ye=Float32Array.from(j.globeMatrix),lt=h.globeTileLatLngCorners(Ee.canonical),ut=h.getLatitudinalLod((lt[0][0]+lt[1][0])/2),tt=h.getGridMatrix(Ee.canonical,lt,ut),dt=h.globeNormalizeECEF(h.globeTileBounds(Ee.canonical)),Ht=Ot(j.projMatrix,Ye,_e,dt,h.globeToMercatorTransition(j.zoom),Ce,j.frustumCorners.TL,j.frustumCorners.TR,j.frustumCorners.BR,j.frustumCorners.BL,j.globeCenterInViewSpace,j.globeRadius,Le,tt);if(J(Ge,ie),I.setupElevationDraw(Ze,K,Ne),k.prepareDrawProgram(H,K,Ee.toUnwrapped()),ve){const[Kt,ai,Xt]=ie?ve.getWirefameBuffers(k.context,ut):ve.getGridBuffers(ut);K.draw(H,ge,se,Me,$,h.CullFaceMode.backCCW,Ht,"globe_raster",Kt,ai,Xt)}}}),ve){const ie=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ne&&ie.push("CUSTOM_ANTIALIASING"),K=k.useProgram("globeRaster",null,ie);for(const ge of V){const{x:Ee,y:Ze,z:Me}=ge.canonical,ze=0===Ze,Ve=Ze===(1<<Me)-1,[je,Ge,Ne,Ye]=ve.getPoleBuffers(Me);if(Ye&&(ze||Ve)){const lt=L.getTile(ge);H.activeTexture.set(U.TEXTURE0),lt.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE);let ut=h.globePoleMatrixForTile(Me,Ee,j);const tt=h.globeNormalizeECEF(h.globeTileBounds(ge.canonical)),dt=(Ht,Kt)=>Ht.draw(H,U.TRIANGLES,se,h.StencilMode.disabled,$,h.CullFaceMode.disabled,Ot(j.projMatrix,ut,ut,tt,0,Ce,j.frustumCorners.TL,j.frustumCorners.TR,j.frustumCorners.BR,j.frustumCorners.BL,j.globeCenterInViewSpace,j.globeRadius,Le),"globe_pole_raster",Kt,Ne,Ye);I.setupElevationDraw(lt,K,{}),k.prepareDrawProgram(H,K,ge.toUnwrapped()),ze&&dt(K,je),Ve&&(ut=h.scale(h.create(),ut,[1,-1,1]),dt(K,Ge))}}}}(y,v,C,M,E);else{const k=y.context,I=k.gl;let L,V;const Z=y.options.showTerrainWireframe?2:0,H=(j,ne)=>{if(V===j)return;const J=[Ba[j]];ne&&J.push(Ba[Z]),L=y.useProgram("terrainRaster",null,J),V=j},U=y.colorModeForRenderPass(),K=new h.DepthMode(I.LEQUAL,h.DepthMode.ReadWrite,y.depthRangeFor3D);Zo.update(E);const G=y.transform,Q=6*Math.pow(1.5,22-G.zoom)*v.exaggeration();(Z?[!1,!0]:[!1]).forEach(j=>{V=-1;const ne=j?I.LINES:I.TRIANGLES,[J,$]=j?v.getWirefameBuffer():[v.gridIndexBuffer,v.gridSegments];for(const se of M){const _e=C.getTile(se),Ce=h.StencilMode.disabled,ve=v.prevTerrainTileForTile[se.key],Le=v.terrainTileForTile[se.key];Bn(ve,Le)&&Zo.newMorphing(se.key,ve,Le,E,250),k.activeTexture.set(I.TEXTURE0),_e.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST);const ie=Zo.getMorphValuesForProxy(se.key),ge=ie?1:0;let Ee;ie&&(Ee={morphing:{srcDemTile:ie.from,dstDemTile:ie.to,phase:h.easeCubicInOut(ie.phase)}});const Ze=io(se.projMatrix,Wc(se.canonical,G.renderWorldCopies)?Q/10:Q);H(ge,j),v.setupElevationDraw(_e,L,Ee),y.prepareDrawProgram(k,L,se.toUnwrapped()),L.draw(k,ne,K,Ce,U,h.CullFaceMode.backCCW,Ze,"terrain_raster",v.gridBuffer,J,$)}})}}(d,this,this.proxySourceCache,i,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),i.splice(0,i.length))}renderBatch(i){if(0===this._drapedRenderBatches.length)return i+1;this.renderingToTexture=!0;const d=this.painter,m=this.painter.context,y=this.proxySourceCache,v=this.proxiedCoords[y.id],C=this._drapedRenderBatches.shift(),M=[],E=d.style.order;let k=0;for(const I of v){const L=y.getTileByID(I.proxyTileKey),V=y.proxyCachedFBO[I.key]?y.proxyCachedFBO[I.key][i]:void 0,Z=void 0!==V?y.renderCache[V]:this.pool[k++],H=void 0!==V;if(L.texture=Z.tex,H&&!Z.dirty){M.push(L.tileID);continue}let U;m.bindFramebuffer.set(Z.fb.framebuffer),this.renderedToTile=!1,Z.dirty&&(m.clear({color:h.Color.transparent,stencil:0}),Z.dirty=!1);for(let K=C.start;K<=C.end;++K){const G=d.style._layers[E[K]];if(G.isHidden(d.transform.zoom))continue;const Q=d.style._getLayerSourceCache(G),j=Q?this.proxyToSource[I.key][Q.id]:[I];if(!j)continue;const ne=j;m.viewport.set([0,0,Z.fb.width,Z.fb.height]),U!==(Q?Q.id:null)&&(this._setupStencil(Z,j,G,Q),U=Q?Q.id:null),d.renderLayer(d,Q,G,ne)}this.renderedToTile?(Z.dirty=!0,M.push(L.tileID)):H||--k,5===k&&(k=0,this.renderToBackBuffer(M))}return this.renderToBackBuffer(M),this.renderingToTexture=!1,m.bindFramebuffer.set(null),m.viewport.set([0,0,d.width,d.height]),C.end+1}postRender(){}renderCacheEfficiency(i){const d=i.order.length;if(0===d)return{efficiency:100};let m,y=0,v=0,C=!1;for(let M=0;M<d;++M){const E=i._layers[i.order[M]];this._style.isLayerDraped(E)?(C&&++y,++v):C||(C=!0,m=E.id)}return 0===v?{efficiency:100}:{efficiency:100*(1-y/v),firstUndrapedLayer:m}}getMinElevationBelowMSL(){let i=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{i=Math.min(i,d.dem.tree.minimums[0])}),0===i?i:(i-30)*this._exaggeration}raycast(i,d,m){if(!this._visibleDemTiles)return null;const y=this._visibleDemTiles.filter(v=>v.dem).map(v=>{const C=v.tileID,M=Math.pow(2,C.overscaledZ),{x:E,y:k}=C.canonical,I=E/M,L=(E+1)/M,V=k/M,Z=(k+1)/M;return{minx:I,miny:V,maxx:L,maxy:Z,t:v.dem.tree.raycastRoot(I,V,L,Z,i,d,m),tile:v}});y.sort((v,C)=>(null!==v.t?v.t:Number.MAX_VALUE)-(null!==C.t?C.t:Number.MAX_VALUE));for(const v of y){if(null==v.t)return null;const C=v.tile.dem.tree.raycast(v.minx,v.miny,v.maxx,v.maxy,i,d,m);if(null!=C)return C}return null}_createFBO(){const i=this.painter.context,d=i.gl,m=this.drapeBufferSize;i.activeTexture.set(d.TEXTURE0);const y=new h.Texture(i,{width:m[0],height:m[1],data:null},d.RGBA);y.bind(d.LINEAR,d.CLAMP_TO_EDGE);const v=i.createFramebuffer(m[0],m[1],!1);return v.colorAttachment.set(y.texture),v.depthAttachment=new R(i,v.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=i.createRenderbuffer(i.gl.DEPTH_STENCIL,m[0],m[1]),this._stencilRef=0,v.depthAttachment.set(this._sharedDepthStencil),i.clear({stencil:0})):v.depthAttachment.set(this._sharedDepthStencil),i.extTextureFilterAnisotropic&&!i.extTextureFilterAnisotropicForceOff&&d.texParameterf(d.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax),{fb:v,tex:y,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const i in this._style._sourceCaches)if(this._style._sourceCaches[i].hasTransition())return!0;return this._style.order.some(i=>{const d=this._style._layers[i],m=d.isHidden(this.painter.transform.zoom),y=d.getCrossfadeParameters(),v=!!y&&1!==y.t,C=d.hasTransition();return"custom"!==d.type&&!m&&(v||C)})}_clearRasterFadeFromRenderCache(){let i=!1;for(const d in this._style._sourceCaches)if(this._style._sourceCaches[d]._source instanceof ee){i=!0;break}if(i)for(let d=0;d<this._style.order.length;++d){const m=this._style._layers[this._style.order[d]],y=m.isHidden(this.painter.transform.zoom),v=this._style._getLayerSourceCache(m);if("raster"!==m.type||y||!v)continue;const C=m.paint.get("raster-fade-duration");for(const M of this.proxyCoords){const E=this.proxyToSource[M.key][v.id];if(E)for(const k of E){const I=Ps(v.getTile(k),v.findLoadedParent(k,0),v,this.painter.transform,C);(1!==I.opacity||0!==I.mix)&&this._clearRenderCacheForTile(v.id,k)}}}}_setupDrapedRenderBatches(){const i=this._style.order,d=i.length;if(0===d)return;const m=[];let y,v=0,C=this._style._layers[i[v]];for(;!this._style.isLayerDraped(C)&&C.isHidden(this.painter.transform.zoom)&&++v<d;)C=this._style._layers[i[v]];for(;v<d;++v){const M=this._style._layers[i[v]];M.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(M)?void 0===y&&(y=v):void 0!==y&&(m.push({start:y,end:v-1}),y=void 0))}void 0!==y&&m.push({start:y,end:v-1}),this._drapedRenderBatches=m}_setupRenderCache(i){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const C=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let M=0;M<C.length;++M){const E=Object.values(C[M]);d.renderCachePool.push(...E)}}return}this._clearRasterFadeFromRenderCache();const m=this.proxyCoords,y=this._tilesDirty;for(let C=m.length-1;C>=0;C--){const M=m[C];if(d.getTileByID(M.key),void 0!==d.proxyCachedFBO[M.key]){const E=i[M.key],k=this.proxyToSource[M.key];let I=0;for(const L in k){const V=k[L],Z=E[L];if(!Z||Z.length!==V.length||V.some((H,U)=>H!==Z[U]||y[L]&&y[L].hasOwnProperty(H.key))){I=-1;break}++I}for(const L in d.proxyCachedFBO[M.key])d.renderCache[d.proxyCachedFBO[M.key][L]].dirty=I<0||I!==Object.values(E).length}}const v=[...this._drapedRenderBatches];v.sort((C,M)=>M.end-M.start-(C.end-C.start));for(const C of v)for(const M of m){if(d.proxyCachedFBO[M.key])continue;let E=d.renderCachePool.pop();void 0===E&&d.renderCache.length<50&&(E=d.renderCache.length,d.renderCache.push(this._createFBO())),void 0!==E&&(d.proxyCachedFBO[M.key]={},d.proxyCachedFBO[M.key][C.start]=E,d.renderCache[E].dirty=!0)}this._tilesDirty={}}_setupStencil(i,d,m,y){if(!y||!this._sourceTilesOverlap[y.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const v=this.painter.context,C=v.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let M;if(m.isTileClipped())M=d.length,this._overlapStencilMode.test={func:C.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);M=1,this._overlapStencilMode.test={func:C.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+M>255&&(v.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=M,this._overlapStencilMode.ref=this._stencilRef,m.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(i){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[i.key]),this._overlapStencilMode):h.StencilMode.disabled}_renderTileClippingMasks(i,d){const m=this.painter,y=this.painter.context,v=y.gl;m._tileClippingMaskIDs={},y.setColorMode(h.ColorMode.disabled),y.setDepthMode(h.DepthMode.disabled);const C=m.useProgram("clippingMask");for(const M of i){const E=m._tileClippingMaskIDs[M.key]=--d;C.draw(y,v.TRIANGLES,h.DepthMode.disabled,new h.StencilMode({func:v.ALWAYS,mask:0},E,255,v.KEEP,v.KEEP,v.REPLACE),h.ColorMode.disabled,h.CullFaceMode.disabled,Nr(M.projMatrix),"$clipping",m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}}pointCoordinate(i){const d=this.painter.transform;if(i.x<0||i.x>d.width||i.y<0||i.y>d.height)return null;const m=[i.x,i.y,1,1];h.transformMat4$1(m,m,d.pixelMatrixInverse),h.scale$1(m,m,1/m[3]),m[0]/=d.worldSize,m[1]/=d.worldSize;const y=d._camera.position,v=h.mercatorZfromAltitude(1,d.center.lat),C=[y[0],y[1],y[2]/v,0],M=h.subtract([],m.slice(0,3),C);h.normalize(M,M);const E=this.raycast(C,M,this._exaggeration);return null!==E&&E?(h.scaleAndAdd(C,C,M,E),C[3]=C[2],C[2]*=v,C):null}drawDepth(){const i=this.painter,d=i.context,m=this.proxySourceCache,y=Math.ceil(i.width),v=Math.ceil(i.height);if(!this._depthFBO||this._depthFBO.width===y&&this._depthFBO.height===v||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const C=d.gl,M=d.createFramebuffer(y,v,!0);d.activeTexture.set(C.TEXTURE0);const E=new h.Texture(d,{width:y,height:v,data:null},C.RGBA);E.bind(C.NEAREST,C.CLAMP_TO_EDGE),M.colorAttachment.set(E.texture);const k=d.createRenderbuffer(d.gl.DEPTH_COMPONENT16,y,v);M.depthAttachment.set(k),this._depthFBO=M,this._depthTexture=E}d.bindFramebuffer.set(this._depthFBO.framebuffer),d.viewport.set([0,0,y,v]),function(C,M,E,k){if("globe"===C.transform.projection.name)return;const I=C.context,L=I.gl;I.clear({depth:1});const V=C.useProgram("terrainDepth"),Z=new h.DepthMode(L.LESS,h.DepthMode.ReadWrite,C.depthRangeFor3D);for(const H of k){const U=E.getTile(H),K=io(H.projMatrix,0);M.setupElevationDraw(U,V),V.draw(I,L.TRIANGLES,Z,h.StencilMode.disabled,h.ColorMode.unblended,h.CullFaceMode.backCCW,K,"terrain_depth",M.gridBuffer,M.gridIndexBuffer,M.gridNoSkirtSegments)}}(i,this,m,this.proxyCoords)}_setupProxiedCoordsForOrtho(i,d,m){if(i.getSource()instanceof pe)return this._setupProxiedCoordsForImageSource(i,d,m);this._findCoveringTileCache[i.id]=this._findCoveringTileCache[i.id]||{};const y=this.proxiedCoords[i.id]=[],v=this.proxyCoords;for(let M=0;M<v.length;M++){const E=v[M],k=this._findTileCoveringTileID(E,i);if(k){const I=this._createProxiedId(E,k,m[E.key]&&m[E.key][i.id]);y.push(I),this.proxyToSource[E.key][i.id]=[I]}}let C=!1;for(let M=0;M<d.length;M++){const E=i.getTile(d[M]);if(!E||!E.hasData())continue;const k=this._findTileCoveringTileID(E.tileID,this.proxySourceCache);if(k&&k.tileID.canonical.z!==E.tileID.canonical.z){const I=this.proxyToSource[k.tileID.key][i.id],L=this._createProxiedId(k.tileID,E,m[k.tileID.key]&&m[k.tileID.key][i.id]);I?I.splice(I.length-1,0,L):this.proxyToSource[k.tileID.key][i.id]=[L],y.push(L),C=!0}}this._sourceTilesOverlap[i.id]=C}_setupProxiedCoordsForImageSource(i,d,m){if(!i.getSource().loaded())return;const y=this.proxiedCoords[i.id]=[],v=this.proxyCoords,C=i.getSource(),M=new h.pointGeometry(C.tileID.x,C.tileID.y)._div(1<<C.tileID.z),E=C.coordinates.map(h.MercatorCoordinate.fromLngLat).reduce((I,L)=>(I.min.x=Math.min(I.min.x,L.x-M.x),I.min.y=Math.min(I.min.y,L.y-M.y),I.max.x=Math.max(I.max.x,L.x-M.x),I.max.y=Math.max(I.max.y,L.y-M.y),I),{min:new h.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new h.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),k=(I,L)=>{const V=I.wrap+I.canonical.x/(1<<I.canonical.z),Z=I.canonical.y/(1<<I.canonical.z),H=h.EXTENT/(1<<I.canonical.z),U=L.wrap+L.canonical.x/(1<<L.canonical.z),K=L.canonical.y/(1<<L.canonical.z);return V+H<U+E.min.x||V>U+E.max.x||Z+H<K+E.min.y||Z>K+E.max.y};for(let I=0;I<v.length;I++){const L=v[I];for(let V=0;V<d.length;V++){const Z=i.getTile(d[V]);if(!Z||!Z.hasData()||k(L,Z.tileID))continue;const H=this._createProxiedId(L,Z,m[L.key]&&m[L.key][i.id]),U=this.proxyToSource[L.key][i.id];U?U.push(H):this.proxyToSource[L.key][i.id]=[H],y.push(H)}}}_createProxiedId(i,d,m){let y=this.orthoMatrix;if(m){const v=m.find(C=>C.key===d.tileID.key);if(v)return v}if(d.tileID.key!==i.key){const v=i.canonical.z-d.tileID.canonical.z;let C,M,E;y=h.create();const k=d.tileID.wrap-i.wrap<<i.overscaledZ;v>0?(C=h.EXTENT>>v,M=C*((d.tileID.canonical.x<<v)-i.canonical.x+k),E=C*((d.tileID.canonical.y<<v)-i.canonical.y)):(C=h.EXTENT<<-v,M=h.EXTENT*(d.tileID.canonical.x-(i.canonical.x+k<<-v)),E=h.EXTENT*(d.tileID.canonical.y-(i.canonical.y<<-v))),h.ortho(y,0,C,0,C,0,1),h.translate(y,y,[M,E,0])}return new ka(d.tileID,i.key,y)}_findTileCoveringTileID(i,d){let m=d.getTile(i);if(m&&m.hasData())return m;const y=this._findCoveringTileCache[d.id],v=y[i.key];if(m=v?d.getTileByID(v):null,m&&m.hasData()||null===v)return m;let C=m?m.tileID:i,M=C.overscaledZ;const E=d.getSource().minzoom,k=[];if(!v){const L=d.getSource().maxzoom;if(i.canonical.z>=L){const V=i.canonical.z-L;d.getSource().reparseOverscaled?(M=Math.max(i.canonical.z+2,d.transform.tileZoom),C=new h.OverscaledTileID(M,i.wrap,L,i.canonical.x>>V,i.canonical.y>>V)):0!==V&&(M=L,C=new h.OverscaledTileID(M,i.wrap,L,i.canonical.x>>V,i.canonical.y>>V))}C.key!==i.key&&(k.push(C.key),m=d.getTile(C))}const I=L=>{k.forEach(V=>{y[V]=L}),k.length=0};for(M-=1;M>=E&&(!m||!m.hasData());M--){m&&I(m.tileID.key);const L=C.calculateScaledKey(M);if(m=d.getTileByID(L),m&&m.hasData())break;const V=y[L];if(null===V)break;void 0===V?k.push(L):m=d.getTileByID(V)}return I(m?m.tileID.key:null),m&&m.hasData()?m:null}findDEMTileFor(i){return this.enabled?this._findTileCoveringTileID(i,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(i,d){let m=this._tilesDirty[i];m||(m=this._tilesDirty[i]={}),m[d.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const i=function(d){let m=0;const y=new h.StructArrayLayout2ui4,v=131;for(let C=1;C<129;C++){for(let M=1;M<129;M++)m=C*v+M,y.emplaceBack(m,m+1),y.emplaceBack(m,m+v),y.emplaceBack(m+1,m+v),128===C&&y.emplaceBack(m+v,m+v+1);y.emplaceBack(m+1,m+1+v)}return y}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(i),this.wireframeSegments=h.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,i.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function Is(p){const i=[];for(let d=0;d<p.length;d++){if(null===p[d])continue;const m=p[d].split(" ");i.push(m.pop())}return i}class Ol{static cacheKey(i,d,m){let y=`${i}${m?m.cacheKey:""}`;for(const v of d)y+=`/${v}`;return y}constructor(i,d,m,y,v,C){const M=i.gl;this.program=M.createProgram();const E=Is(m.staticAttributes),k=y?y.getBinderAttributes():[],I=E.concat(k),L=m.staticUniforms?Is(m.staticUniforms):[],V=y?y.getBinderUniforms():[],Z=L.concat(V),H=[];for(const J of Z)H.indexOf(J)<0&&H.push(J);let U=y?y.defines():[];U=U.concat(C.map(J=>`#define ${J}`));const K=U.concat(i.extStandardDerivatives?"#extension GL_OES_standard_derivatives : enable\n".concat(zr):zr,zr,cr,Bs.fragmentSource,to.fragmentSource,m.fragmentSource).join("\n"),G=U.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",cr,Bs.vertexSource,to.vertexSource,zi.vertexSource,m.vertexSource).join("\n"),Q=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);M.shaderSource(Q,K),M.compileShader(Q),M.attachShader(this.program,Q);const j=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);M.shaderSource(j,G),M.compileShader(j),M.attachShader(this.program,j),this.attributes={};const ne={};this.numAttributes=I.length;for(let J=0;J<this.numAttributes;J++)I[J]&&(M.bindAttribLocation(this.program,J,I[J]),this.attributes[I[J]]=J);M.linkProgram(this.program),M.deleteShader(j),M.deleteShader(Q);for(let J=0;J<H.length;J++){const $=H[J];if($&&!ne[$]){const se=M.getUniformLocation(this.program,$);se&&(ne[$]=se)}}var J,$;this.fixedUniforms=v(i,ne),this.binderUniforms=y?y.getUniforms(i,ne):[],-1!==C.indexOf("TERRAIN")&&(this.terrainUniforms={u_dem:new h.Uniform1i(J=i,($=ne).u_dem),u_dem_prev:new h.Uniform1i(J,$.u_dem_prev),u_dem_unpack:new h.Uniform4f(J,$.u_dem_unpack),u_dem_tl:new h.Uniform2f(J,$.u_dem_tl),u_dem_scale:new h.Uniform1f(J,$.u_dem_scale),u_dem_tl_prev:new h.Uniform2f(J,$.u_dem_tl_prev),u_dem_scale_prev:new h.Uniform1f(J,$.u_dem_scale_prev),u_dem_size:new h.Uniform1f(J,$.u_dem_size),u_dem_lerp:new h.Uniform1f(J,$.u_dem_lerp),u_exaggeration:new h.Uniform1f(J,$.u_exaggeration),u_depth:new h.Uniform1i(J,$.u_depth),u_depth_size_inv:new h.Uniform2f(J,$.u_depth_size_inv),u_meter_to_dem:new h.Uniform1f(J,$.u_meter_to_dem),u_label_plane_matrix_inv:new h.UniformMatrix4f(J,$.u_label_plane_matrix_inv),u_tile_tl_up:new h.Uniform3f(J,$.u_tile_tl_up),u_tile_tr_up:new h.Uniform3f(J,$.u_tile_tr_up),u_tile_br_up:new h.Uniform3f(J,$.u_tile_br_up),u_tile_bl_up:new h.Uniform3f(J,$.u_tile_bl_up),u_tile_up_scale:new h.Uniform1f(J,$.u_tile_up_scale)}),-1!==C.indexOf("FOG")&&(this.fogUniforms=((J,$)=>({u_fog_matrix:new h.UniformMatrix4f(J,$.u_fog_matrix),u_fog_range:new h.Uniform2f(J,$.u_fog_range),u_fog_color:new h.Uniform4f(J,$.u_fog_color),u_fog_horizon_blend:new h.Uniform1f(J,$.u_fog_horizon_blend),u_fog_temporal_offset:new h.Uniform1f(J,$.u_fog_temporal_offset),u_frustum_tl:new h.Uniform3f(J,$.u_frustum_tl),u_frustum_tr:new h.Uniform3f(J,$.u_frustum_tr),u_frustum_br:new h.Uniform3f(J,$.u_frustum_br),u_frustum_bl:new h.Uniform3f(J,$.u_frustum_bl),u_globe_pos:new h.Uniform3f(J,$.u_globe_pos),u_globe_radius:new h.Uniform1f(J,$.u_globe_radius),u_globe_transition:new h.Uniform1f(J,$.u_globe_transition),u_is_globe:new h.Uniform1i(J,$.u_is_globe),u_viewport:new h.Uniform2f(J,$.u_viewport)}))(i,ne))}setTerrainUniformValues(i,d){if(!this.terrainUniforms)return;const m=this.terrainUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const y in d)m[y].set(d[y])}}setFogUniformValues(i,d){if(!this.fogUniforms)return;const m=this.fogUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const y in d)m[y].location&&m[y].set(d[y])}}draw(i,d,m,y,v,C,M,E,k,I,L,V,Z,H,U,K,G){const Q=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(m),i.setStencilMode(y),i.setColorMode(v),i.setCullFace(C);for(const ne of Object.keys(this.fixedUniforms))this.fixedUniforms[ne].set(M[ne]);H&&H.setUniforms(i,this.binderUniforms,V,{zoom:Z});const j={[Q.LINES]:2,[Q.TRIANGLES]:3,[Q.LINE_STRIP]:1}[d];for(const ne of L.get()){const J=ne.vaos||(ne.vaos={});(J[E]||(J[E]=new Ut)).bind(i,this,k,H?H.getPaintVertexBuffers():[],I,ne.vertexOffset,U,K,G),Q.drawElements(d,ne.primitiveLength*j,Q.UNSIGNED_SHORT,ne.primitiveOffset*j*2)}}}function zl(p,i,d){const m=1/Fo(d,1,i.transform.tileZoom),y=Math.pow(2,d.tileID.overscaledZ),v=d.tileSize*Math.pow(2,i.transform.tileZoom)/y,C=v*(d.tileID.canonical.x+d.tileID.wrap*y),M=v*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[m,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[C>>16,M>>16],u_pixel_coord_lower:[65535&C,65535&M]}}const xu=h.create(),vu=(p,i,d,m,y,v,C,M,E)=>{const k=i.style.light,I=k.properties.get("position"),L=[I.x,I.y,I.z],V=h.create$1();"viewport"===k.properties.get("anchor")&&(h.fromRotation(V,-i.transform.angle),h.transformMat3(L,L,V));const Z=k.properties.get("color"),H=i.transform,U={u_matrix:p,u_lightpos:L,u_lightintensity:k.properties.get("intensity"),u_lightcolor:[Z.r,Z.g,Z.b],u_vertical_gradient:+d,u_opacity:m,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:xu,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0};return"globe"===H.projection.name&&(U.u_tile_id=[y.canonical.x,y.canonical.y,1<<y.canonical.z],U.u_zoom_transition=C,U.u_inv_rot_matrix=E,U.u_merc_center=M,U.u_up_dir=H.projection.upVector(new h.CanonicalTileID(0,0,0),M[0]*h.EXTENT,M[1]*h.EXTENT),U.u_height_lift=v),U},Fs=(p,i,d,m,y,v,C,M,E,k,I)=>{const L=vu(p,i,d,m,y,M,E,k,I),V={u_height_factor:-Math.pow(2,y.overscaledZ)/C.tileSize/8};return h.extend(L,zl(v,i,C),V)},Ur=p=>({u_matrix:p}),Jc=(p,i,d,m)=>h.extend(Ur(p),zl(d,i,m)),Gr=(p,i)=>({u_matrix:p,u_world:i}),Kc=(p,i,d,m,y)=>h.extend(Jc(p,i,d,m),{u_world:y}),Un=h.create(),Vl=(p,i,d,m,y,v)=>{const C=p.transform,M="globe"===C.projection.name;let E;if("map"===v.paint.get("circle-pitch-alignment"))if(M){const I=h.globePixelsToTileUnits(C.zoom,i.canonical)*C._projectionScaler;E=Float32Array.from([I,0,0,I])}else E=C.calculatePixelsToTileUnitsMatrix(d);else E=new Float32Array([C.pixelsToGLUnits[0],0,0,C.pixelsToGLUnits[1]]);const k={u_camera_to_center_distance:C.cameraToCenterDistance,u_matrix:p.translatePosMatrix(i.projMatrix,d,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_device_pixel_ratio:h.exported.devicePixelRatio,u_extrude_scale:E,u_inv_rot_matrix:Un,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(M){k.u_inv_rot_matrix=m,k.u_merc_center=y,k.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],k.u_zoom_transition=h.globeToMercatorTransition(C.zoom);const I=y[0]*h.EXTENT,L=y[1]*h.EXTENT;k.u_up_dir=C.projection.upVector(new h.CanonicalTileID(0,0,0),I,L)}return k},$c=p=>{const i=[];return"map"===p.paint.get("circle-pitch-alignment")&&i.push("PITCH_WITH_MAP"),"map"===p.paint.get("circle-pitch-scale")&&i.push("SCALE_WITH_MAP"),i},Nl=(p,i,d,m)=>{const y=h.EXTENT/d.tileSize;return{u_matrix:p,u_camera_to_center_distance:i.getCameraToCenterDistance(m),u_extrude_scale:[i.pixelsToGLUnits[0]/y,i.pixelsToGLUnits[1]/y]}},Ul=(p,i,d=1)=>({u_matrix:p,u_color:i,u_overlay:0,u_overlay_scale:d}),Gl=h.create(),Au=(p,i,d,m,y,v,C)=>{const M=p.transform,E="globe"===M.projection.name,k=E?h.globePixelsToTileUnits(M.zoom,i.canonical)*M._projectionScaler:Fo(d,1,v),I={u_matrix:i.projMatrix,u_extrude_scale:k,u_intensity:C,u_inv_rot_matrix:Gl,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(E){I.u_inv_rot_matrix=m,I.u_merc_center=y,I.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],I.u_zoom_transition=h.globeToMercatorTransition(M.zoom);const L=y[0]*h.EXTENT,V=y[1]*h.EXTENT;I.u_up_dir=M.projection.upVector(new h.CanonicalTileID(0,0,0),L,V)}return I},Zl=(p,i,d,m,y,v,C,M)=>{const E=p.transform,k=E.calculatePixelsToTileUnitsMatrix(i),I={u_matrix:td(p,i,d,y),u_pixels_to_tile_units:k,u_device_pixel_ratio:C,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:v,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:M};if(Ls(d)){const L=Zr(i,p.transform);I.u_texsize=i.lineAtlasTexture.size,I.u_scale=[L,m.fromScale,m.toScale],I.u_mix=m.t}return I},ed=(p,i,d,m,y,v)=>{const C=p.transform,M=Zr(i,C);return{u_matrix:td(p,i,d,y),u_texsize:i.imageAtlasTexture.size,u_pixels_to_tile_units:C.calculatePixelsToTileUnitsMatrix(i),u_device_pixel_ratio:v,u_image:0,u_scale:[M,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Zr(p,i){return 1/Fo(p,1,i.tileZoom)}function td(p,i,d,m){return p.translatePosMatrix(m||i.tileID.projMatrix,i,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}function Ls(p){const i=p.paint.get("line-dasharray").value;return i.value||"constant"!==i.kind}const bu=(p,i,d,m,y,v)=>{return{u_matrix:p,u_tl_parent:i,u_scale_parent:d,u_fade_t:m.mix,u_opacity:m.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(M=y.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(C=y.paint.get("raster-contrast"),C>0?1/(1-C):1+C),u_spin_weights:jl(y.paint.get("raster-hue-rotate")),u_perspective_transform:v};var C,M};function jl(p){p*=Math.PI/180;const i=Math.sin(p),d=Math.cos(p);return[(2*d+1)/3,(-Math.sqrt(3)*i-d+1)/3,(Math.sqrt(3)*i-d+1)/3]}const id=h.create(),Rs=(p,i,d,m,y,v,C,M,E,k,I,L,V,Z,H,U)=>{const K=y.transform,G={u_is_size_zoom_constant:+("constant"===p||"source"===p),u_is_size_feature_constant:+("constant"===p||"camera"===p),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_rotate_symbol:+d,u_aspect_ratio:K.width/K.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:v,u_label_plane_matrix:C,u_coord_matrix:M,u_is_text:+E,u_pitch_with_map:+m,u_texsize:k,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:id,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:id,u_up_vector:[0,-1,0]};return"globe"===U.name&&(G.u_tile_id=[I.canonical.x,I.canonical.y,1<<I.canonical.z],G.u_zoom_transition=L,G.u_inv_rot_matrix=Z,G.u_merc_center=V,G.u_camera_forward=K._camera.forward(),G.u_ecef_origin=h.globeECEFOrigin(K.globeMatrix,I.toUnwrapped()),G.u_tile_matrix=Float32Array.from(K.globeMatrix),G.u_up_vector=H),G},wu=(p,i,d,m,y,v,C,M,E,k,I,L,V,Z,H,U,K)=>h.extend(Rs(p,i,d,m,y,v,C,M,E,k,L,V,Z,H,U,K),{u_gamma_scale:m?y.transform.cameraToCenterDistance*Math.cos(y.terrain?0:y.transform._pitch):1,u_device_pixel_ratio:h.exported.devicePixelRatio,u_is_halo:+I}),Cu=(p,i,d,m,y,v,C,M,E,k,I,L,V,Z,H,U)=>h.extend(wu(p,i,d,m,y,v,C,M,!0,E,!0,I,L,V,Z,H,U),{u_texsize_icon:k,u_texture_icon:1}),Mu=(p,i,d)=>({u_matrix:p,u_opacity:i,u_color:d}),Pa=(p,i,d,m,y,v)=>h.extend(function(C,M,E,k){const I=E.imageManager.getPattern(C.from.toString()),L=E.imageManager.getPattern(C.to.toString()),{width:V,height:Z}=E.imageManager.getPixelSize(),H=Math.pow(2,k.tileID.overscaledZ),U=k.tileSize*Math.pow(2,E.transform.tileZoom)/H,K=U*(k.tileID.canonical.x+k.tileID.wrap*H),G=U*k.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:I.tl,u_pattern_br_a:I.br,u_pattern_tl_b:L.tl,u_pattern_br_b:L.br,u_texsize:[V,Z],u_mix:M.t,u_pattern_size_a:I.displaySize,u_pattern_size_b:L.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/Fo(k,1,E.transform.tileZoom),u_pixel_coord_upper:[K>>16,G>>16],u_pixel_coord_lower:[65535&K,65535&G]}}(m,v,d,y),{u_matrix:p,u_opacity:i}),sp={fillExtrusion:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_lightpos:new h.Uniform3f(p,i.u_lightpos),u_lightintensity:new h.Uniform1f(p,i.u_lightintensity),u_lightcolor:new h.Uniform3f(p,i.u_lightcolor),u_vertical_gradient:new h.Uniform1f(p,i.u_vertical_gradient),u_opacity:new h.Uniform1f(p,i.u_opacity),u_tile_id:new h.Uniform3f(p,i.u_tile_id),u_zoom_transition:new h.Uniform1f(p,i.u_zoom_transition),u_inv_rot_matrix:new h.UniformMatrix4f(p,i.u_inv_rot_matrix),u_merc_center:new h.Uniform2f(p,i.u_merc_center),u_up_dir:new h.Uniform3f(p,i.u_up_dir),u_height_lift:new h.Uniform1f(p,i.u_height_lift)}),fillExtrusionPattern:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_lightpos:new h.Uniform3f(p,i.u_lightpos),u_lightintensity:new h.Uniform1f(p,i.u_lightintensity),u_lightcolor:new h.Uniform3f(p,i.u_lightcolor),u_vertical_gradient:new h.Uniform1f(p,i.u_vertical_gradient),u_height_factor:new h.Uniform1f(p,i.u_height_factor),u_tile_id:new h.Uniform3f(p,i.u_tile_id),u_zoom_transition:new h.Uniform1f(p,i.u_zoom_transition),u_inv_rot_matrix:new h.UniformMatrix4f(p,i.u_inv_rot_matrix),u_merc_center:new h.Uniform2f(p,i.u_merc_center),u_up_dir:new h.Uniform3f(p,i.u_up_dir),u_height_lift:new h.Uniform1f(p,i.u_height_lift),u_image:new h.Uniform1i(p,i.u_image),u_texsize:new h.Uniform2f(p,i.u_texsize),u_pixel_coord_upper:new h.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(p,i.u_pixel_coord_lower),u_scale:new h.Uniform3f(p,i.u_scale),u_fade:new h.Uniform1f(p,i.u_fade),u_opacity:new h.Uniform1f(p,i.u_opacity)}),fill:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix)}),fillPattern:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_image:new h.Uniform1i(p,i.u_image),u_texsize:new h.Uniform2f(p,i.u_texsize),u_pixel_coord_upper:new h.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(p,i.u_pixel_coord_lower),u_scale:new h.Uniform3f(p,i.u_scale),u_fade:new h.Uniform1f(p,i.u_fade)}),fillOutline:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_world:new h.Uniform2f(p,i.u_world)}),fillOutlinePattern:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_world:new h.Uniform2f(p,i.u_world),u_image:new h.Uniform1i(p,i.u_image),u_texsize:new h.Uniform2f(p,i.u_texsize),u_pixel_coord_upper:new h.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(p,i.u_pixel_coord_lower),u_scale:new h.Uniform3f(p,i.u_scale),u_fade:new h.Uniform1f(p,i.u_fade)}),circle:(p,i)=>({u_camera_to_center_distance:new h.Uniform1f(p,i.u_camera_to_center_distance),u_extrude_scale:new h.UniformMatrix2f(p,i.u_extrude_scale),u_device_pixel_ratio:new h.Uniform1f(p,i.u_device_pixel_ratio),u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_inv_rot_matrix:new h.UniformMatrix4f(p,i.u_inv_rot_matrix),u_merc_center:new h.Uniform2f(p,i.u_merc_center),u_tile_id:new h.Uniform3f(p,i.u_tile_id),u_zoom_transition:new h.Uniform1f(p,i.u_zoom_transition),u_up_dir:new h.Uniform3f(p,i.u_up_dir)}),collisionBox:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_camera_to_center_distance:new h.Uniform1f(p,i.u_camera_to_center_distance),u_extrude_scale:new h.Uniform2f(p,i.u_extrude_scale)}),collisionCircle:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_inv_matrix:new h.UniformMatrix4f(p,i.u_inv_matrix),u_camera_to_center_distance:new h.Uniform1f(p,i.u_camera_to_center_distance),u_viewport_size:new h.Uniform2f(p,i.u_viewport_size)}),debug:(p,i)=>({u_color:new h.UniformColor(p,i.u_color),u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_overlay:new h.Uniform1i(p,i.u_overlay),u_overlay_scale:new h.Uniform1f(p,i.u_overlay_scale)}),clippingMask:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix)}),heatmap:(p,i)=>({u_extrude_scale:new h.Uniform1f(p,i.u_extrude_scale),u_intensity:new h.Uniform1f(p,i.u_intensity),u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_inv_rot_matrix:new h.UniformMatrix4f(p,i.u_inv_rot_matrix),u_merc_center:new h.Uniform2f(p,i.u_merc_center),u_tile_id:new h.Uniform3f(p,i.u_tile_id),u_zoom_transition:new h.Uniform1f(p,i.u_zoom_transition),u_up_dir:new h.Uniform3f(p,i.u_up_dir)}),heatmapTexture:(p,i)=>({u_image:new h.Uniform1i(p,i.u_image),u_color_ramp:new h.Uniform1i(p,i.u_color_ramp),u_opacity:new h.Uniform1f(p,i.u_opacity)}),hillshade:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_image:new h.Uniform1i(p,i.u_image),u_latrange:new h.Uniform2f(p,i.u_latrange),u_light:new h.Uniform2f(p,i.u_light),u_shadow:new h.UniformColor(p,i.u_shadow),u_highlight:new h.UniformColor(p,i.u_highlight),u_accent:new h.UniformColor(p,i.u_accent)}),hillshadePrepare:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_image:new h.Uniform1i(p,i.u_image),u_dimension:new h.Uniform2f(p,i.u_dimension),u_zoom:new h.Uniform1f(p,i.u_zoom),u_unpack:new h.Uniform4f(p,i.u_unpack)}),line:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_pixels_to_tile_units:new h.UniformMatrix2f(p,i.u_pixels_to_tile_units),u_device_pixel_ratio:new h.Uniform1f(p,i.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(p,i.u_units_to_pixels),u_dash_image:new h.Uniform1i(p,i.u_dash_image),u_gradient_image:new h.Uniform1i(p,i.u_gradient_image),u_image_height:new h.Uniform1f(p,i.u_image_height),u_texsize:new h.Uniform2f(p,i.u_texsize),u_scale:new h.Uniform3f(p,i.u_scale),u_mix:new h.Uniform1f(p,i.u_mix),u_alpha_discard_threshold:new h.Uniform1f(p,i.u_alpha_discard_threshold),u_trim_offset:new h.Uniform2f(p,i.u_trim_offset)}),linePattern:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_texsize:new h.Uniform2f(p,i.u_texsize),u_pixels_to_tile_units:new h.UniformMatrix2f(p,i.u_pixels_to_tile_units),u_device_pixel_ratio:new h.Uniform1f(p,i.u_device_pixel_ratio),u_image:new h.Uniform1i(p,i.u_image),u_units_to_pixels:new h.Uniform2f(p,i.u_units_to_pixels),u_scale:new h.Uniform3f(p,i.u_scale),u_fade:new h.Uniform1f(p,i.u_fade),u_alpha_discard_threshold:new h.Uniform1f(p,i.u_alpha_discard_threshold)}),raster:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_tl_parent:new h.Uniform2f(p,i.u_tl_parent),u_scale_parent:new h.Uniform1f(p,i.u_scale_parent),u_fade_t:new h.Uniform1f(p,i.u_fade_t),u_opacity:new h.Uniform1f(p,i.u_opacity),u_image0:new h.Uniform1i(p,i.u_image0),u_image1:new h.Uniform1i(p,i.u_image1),u_brightness_low:new h.Uniform1f(p,i.u_brightness_low),u_brightness_high:new h.Uniform1f(p,i.u_brightness_high),u_saturation_factor:new h.Uniform1f(p,i.u_saturation_factor),u_contrast_factor:new h.Uniform1f(p,i.u_contrast_factor),u_spin_weights:new h.Uniform3f(p,i.u_spin_weights),u_perspective_transform:new h.Uniform2f(p,i.u_perspective_transform)}),symbolIcon:(p,i)=>({u_is_size_zoom_constant:new h.Uniform1i(p,i.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(p,i.u_is_size_feature_constant),u_size_t:new h.Uniform1f(p,i.u_size_t),u_size:new h.Uniform1f(p,i.u_size),u_camera_to_center_distance:new h.Uniform1f(p,i.u_camera_to_center_distance),u_rotate_symbol:new h.Uniform1i(p,i.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(p,i.u_aspect_ratio),u_fade_change:new h.Uniform1f(p,i.u_fade_change),u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(p,i.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(p,i.u_coord_matrix),u_is_text:new h.Uniform1i(p,i.u_is_text),u_pitch_with_map:new h.Uniform1i(p,i.u_pitch_with_map),u_texsize:new h.Uniform2f(p,i.u_texsize),u_tile_id:new h.Uniform3f(p,i.u_tile_id),u_zoom_transition:new h.Uniform1f(p,i.u_zoom_transition),u_inv_rot_matrix:new h.UniformMatrix4f(p,i.u_inv_rot_matrix),u_merc_center:new h.Uniform2f(p,i.u_merc_center),u_camera_forward:new h.Uniform3f(p,i.u_camera_forward),u_tile_matrix:new h.UniformMatrix4f(p,i.u_tile_matrix),u_up_vector:new h.Uniform3f(p,i.u_up_vector),u_ecef_origin:new h.Uniform3f(p,i.u_ecef_origin),u_texture:new h.Uniform1i(p,i.u_texture)}),symbolSDF:(p,i)=>({u_is_size_zoom_constant:new h.Uniform1i(p,i.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(p,i.u_is_size_feature_constant),u_size_t:new h.Uniform1f(p,i.u_size_t),u_size:new h.Uniform1f(p,i.u_size),u_camera_to_center_distance:new h.Uniform1f(p,i.u_camera_to_center_distance),u_rotate_symbol:new h.Uniform1i(p,i.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(p,i.u_aspect_ratio),u_fade_change:new h.Uniform1f(p,i.u_fade_change),u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(p,i.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(p,i.u_coord_matrix),u_is_text:new h.Uniform1i(p,i.u_is_text),u_pitch_with_map:new h.Uniform1i(p,i.u_pitch_with_map),u_texsize:new h.Uniform2f(p,i.u_texsize),u_texture:new h.Uniform1i(p,i.u_texture),u_gamma_scale:new h.Uniform1f(p,i.u_gamma_scale),u_device_pixel_ratio:new h.Uniform1f(p,i.u_device_pixel_ratio),u_tile_id:new h.Uniform3f(p,i.u_tile_id),u_zoom_transition:new h.Uniform1f(p,i.u_zoom_transition),u_inv_rot_matrix:new h.UniformMatrix4f(p,i.u_inv_rot_matrix),u_merc_center:new h.Uniform2f(p,i.u_merc_center),u_camera_forward:new h.Uniform3f(p,i.u_camera_forward),u_tile_matrix:new h.UniformMatrix4f(p,i.u_tile_matrix),u_up_vector:new h.Uniform3f(p,i.u_up_vector),u_ecef_origin:new h.Uniform3f(p,i.u_ecef_origin),u_is_halo:new h.Uniform1i(p,i.u_is_halo)}),symbolTextAndIcon:(p,i)=>({u_is_size_zoom_constant:new h.Uniform1i(p,i.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(p,i.u_is_size_feature_constant),u_size_t:new h.Uniform1f(p,i.u_size_t),u_size:new h.Uniform1f(p,i.u_size),u_camera_to_center_distance:new h.Uniform1f(p,i.u_camera_to_center_distance),u_rotate_symbol:new h.Uniform1i(p,i.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(p,i.u_aspect_ratio),u_fade_change:new h.Uniform1f(p,i.u_fade_change),u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(p,i.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(p,i.u_coord_matrix),u_is_text:new h.Uniform1i(p,i.u_is_text),u_pitch_with_map:new h.Uniform1i(p,i.u_pitch_with_map),u_texsize:new h.Uniform2f(p,i.u_texsize),u_texsize_icon:new h.Uniform2f(p,i.u_texsize_icon),u_texture:new h.Uniform1i(p,i.u_texture),u_texture_icon:new h.Uniform1i(p,i.u_texture_icon),u_gamma_scale:new h.Uniform1f(p,i.u_gamma_scale),u_device_pixel_ratio:new h.Uniform1f(p,i.u_device_pixel_ratio),u_is_halo:new h.Uniform1i(p,i.u_is_halo)}),background:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_opacity:new h.Uniform1f(p,i.u_opacity),u_color:new h.UniformColor(p,i.u_color)}),backgroundPattern:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_opacity:new h.Uniform1f(p,i.u_opacity),u_image:new h.Uniform1i(p,i.u_image),u_pattern_tl_a:new h.Uniform2f(p,i.u_pattern_tl_a),u_pattern_br_a:new h.Uniform2f(p,i.u_pattern_br_a),u_pattern_tl_b:new h.Uniform2f(p,i.u_pattern_tl_b),u_pattern_br_b:new h.Uniform2f(p,i.u_pattern_br_b),u_texsize:new h.Uniform2f(p,i.u_texsize),u_mix:new h.Uniform1f(p,i.u_mix),u_pattern_size_a:new h.Uniform2f(p,i.u_pattern_size_a),u_pattern_size_b:new h.Uniform2f(p,i.u_pattern_size_b),u_scale_a:new h.Uniform1f(p,i.u_scale_a),u_scale_b:new h.Uniform1f(p,i.u_scale_b),u_pixel_coord_upper:new h.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(p,i.u_pixel_coord_lower),u_tile_units_to_pixels:new h.Uniform1f(p,i.u_tile_units_to_pixels)}),terrainRaster:gi,terrainDepth:gi,skybox:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_sun_direction:new h.Uniform3f(p,i.u_sun_direction),u_cubemap:new h.Uniform1i(p,i.u_cubemap),u_opacity:new h.Uniform1f(p,i.u_opacity),u_temporal_offset:new h.Uniform1f(p,i.u_temporal_offset)}),skyboxGradient:(p,i)=>({u_matrix:new h.UniformMatrix4f(p,i.u_matrix),u_color_ramp:new h.Uniform1i(p,i.u_color_ramp),u_center_direction:new h.Uniform3f(p,i.u_center_direction),u_radius:new h.Uniform1f(p,i.u_radius),u_opacity:new h.Uniform1f(p,i.u_opacity),u_temporal_offset:new h.Uniform1f(p,i.u_temporal_offset)}),skyboxCapture:(p,i)=>({u_matrix_3f:new h.UniformMatrix3f(p,i.u_matrix_3f),u_sun_direction:new h.Uniform3f(p,i.u_sun_direction),u_sun_intensity:new h.Uniform1f(p,i.u_sun_intensity),u_color_tint_r:new h.Uniform4f(p,i.u_color_tint_r),u_color_tint_m:new h.Uniform4f(p,i.u_color_tint_m),u_luminance:new h.Uniform1f(p,i.u_luminance)}),globeRaster:(p,i)=>({u_proj_matrix:new h.UniformMatrix4f(p,i.u_proj_matrix),u_globe_matrix:new h.UniformMatrix4f(p,i.u_globe_matrix),u_normalize_matrix:new h.UniformMatrix4f(p,i.u_normalize_matrix),u_merc_matrix:new h.UniformMatrix4f(p,i.u_merc_matrix),u_zoom_transition:new h.Uniform1f(p,i.u_zoom_transition),u_merc_center:new h.Uniform2f(p,i.u_merc_center),u_image0:new h.Uniform1i(p,i.u_image0),u_grid_matrix:new h.UniformMatrix3f(p,i.u_grid_matrix),u_frustum_tl:new h.Uniform3f(p,i.u_frustum_tl),u_frustum_tr:new h.Uniform3f(p,i.u_frustum_tr),u_frustum_br:new h.Uniform3f(p,i.u_frustum_br),u_frustum_bl:new h.Uniform3f(p,i.u_frustum_bl),u_globe_pos:new h.Uniform3f(p,i.u_globe_pos),u_globe_radius:new h.Uniform1f(p,i.u_globe_radius),u_viewport:new h.Uniform2f(p,i.u_viewport)}),globeAtmosphere:(p,i)=>({u_frustum_tl:new h.Uniform3f(p,i.u_frustum_tl),u_frustum_tr:new h.Uniform3f(p,i.u_frustum_tr),u_frustum_br:new h.Uniform3f(p,i.u_frustum_br),u_frustum_bl:new h.Uniform3f(p,i.u_frustum_bl),u_horizon:new h.Uniform1f(p,i.u_horizon),u_transition:new h.Uniform1f(p,i.u_transition),u_fadeout_range:new h.Uniform1f(p,i.u_fadeout_range),u_color:new h.Uniform4f(p,i.u_color),u_high_color:new h.Uniform4f(p,i.u_high_color),u_space_color:new h.Uniform4f(p,i.u_space_color),u_star_intensity:new h.Uniform1f(p,i.u_star_intensity),u_star_density:new h.Uniform1f(p,i.u_star_density),u_star_size:new h.Uniform1f(p,i.u_star_size),u_temporal_offset:new h.Uniform1f(p,i.u_temporal_offset),u_horizon_angle:new h.Uniform1f(p,i.u_horizon_angle),u_rotation_matrix:new h.UniformMatrix4f(p,i.u_rotation_matrix)})};let jr;function Os(p,i,d,m,y,v,C){const M=p.context,E=M.gl,k=p.transform,I=p.useProgram("collisionBox"),L=[];let V=0,Z=0;for(let ne=0;ne<m.length;ne++){const J=m[ne],$=i.getTile(J),se=$.getBucket(d);if(!se)continue;const _e=Nn(J,se,k);let Ce=_e;0===y[0]&&0===y[1]||(Ce=p.translatePosMatrix(_e,$,y,v));const ve=C?se.textCollisionBox:se.iconCollisionBox,Le=se.collisionCircleArray;if(Le.length>0){const ie=h.create(),ge=Ce;h.mul(ie,se.placementInvProjMatrix,k.glCoordMatrix),h.mul(ie,ie,se.placementViewportMatrix),L.push({circleArray:Le,circleOffset:Z,transform:ge,invTransform:ie,projection:se.getProjection()}),V+=Le.length/4,Z=V}ve&&(p.terrain&&p.terrain.setupElevationDraw($,I),I.draw(M,E.LINES,h.DepthMode.disabled,h.StencilMode.disabled,p.colorModeForRenderPass(),h.CullFaceMode.disabled,Nl(Ce,k,$,se.getProjection()),d.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,null,k.zoom,null,ve.collisionVertexBuffer,ve.collisionVertexBufferExt))}if(!C||!L.length)return;const H=p.useProgram("collisionCircle"),U=new h.StructArrayLayout2f1f2i16;U.resize(4*V),U._trim();let K=0;for(const ne of L)for(let J=0;J<ne.circleArray.length/4;J++){const $=4*J,se=ne.circleArray[$+0],_e=ne.circleArray[$+1],Ce=ne.circleArray[$+2],ve=ne.circleArray[$+3];U.emplace(K++,se,_e,Ce,ve,0),U.emplace(K++,se,_e,Ce,ve,1),U.emplace(K++,se,_e,Ce,ve,2),U.emplace(K++,se,_e,Ce,ve,3)}(!jr||jr.length<2*V)&&(jr=function(ne){const J=2*ne,$=new h.StructArrayLayout3ui6;$.resize(J),$._trim();for(let se=0;se<J;se++){const _e=6*se;$.uint16[_e+0]=4*se+0,$.uint16[_e+1]=4*se+1,$.uint16[_e+2]=4*se+2,$.uint16[_e+3]=4*se+2,$.uint16[_e+4]=4*se+3,$.uint16[_e+5]=4*se+0}return $}(V));const G=M.createIndexBuffer(jr,!0),Q=M.createVertexBuffer(U,h.collisionCircleLayout.members,!0);for(const ne of L){const J={u_matrix:ne.transform,u_inv_matrix:ne.invTransform,u_camera_to_center_distance:(j=k).getCameraToCenterDistance(ne.projection),u_viewport_size:[j.width,j.height]};H.draw(M,E.TRIANGLES,h.DepthMode.disabled,h.StencilMode.disabled,p.colorModeForRenderPass(),h.CullFaceMode.disabled,J,d.id,Q,G,h.SegmentVector.simpleSegment(0,2*ne.circleOffset,ne.circleArray.length,ne.circleArray.length/2),null,k.zoom)}var j;Q.destroy(),G.destroy()}const nd=h.create();function Tu(p,i,d,m,y,v){const{horizontalAlign:C,verticalAlign:M}=h.getAnchorAlignment(p),E=-(C-.5)*i,k=-(M-.5)*d,I=h.evaluateVariableOffset(p,m);return new h.pointGeometry((E/y+I[0])*v,(k/y+I[1])*v)}function od(p,i,d,m,y,v,C,M,E,k,I){const L=p.text.placedSymbolArray,V=p.text.dynamicLayoutVertexArray,Z=p.icon.dynamicLayoutVertexArray,H={},U=Pl(M,p.getProjection(),v),K=v.elevation,G=p.getProjection().upVectorScale(M.canonical,v.center.lat,v.worldSize);V.clear();for(let Q=0;Q<L.length;Q++){const j=L.get(Q),ne=p.allowVerticalPlacement&&!j.placedOrientation,J=j.hidden||!j.crossTileID||ne?null:m[j.crossTileID];if(J){const $=new h.pointGeometry(j.tileAnchorX,j.tileAnchorY),se=p.getProjection().upVector(M.canonical,$.x,$.y),_e=K?K.getAtTileOffset(M,$.x,$.y):0,Ce=Uo([j.projectedAnchorX+_e*se[0]*G.metersToTile,j.projectedAnchorY+_e*se[1]*G.metersToTile,j.projectedAnchorZ+_e*se[2]*G.metersToTile],d?U:C),ve=ba(v.getCameraToCenterDistance(p.getProjection()),Ce.signedDistanceFromCamera);let Le=y.evaluateSizeForFeature(p.textSizeData,k,j)*ve/h.ONE_EM;d&&(Le*=p.tilePixelRatio/E);const{width:ie,height:ge,anchor:Ee,textOffset:Ze,textScale:Me}=J,ze=Tu(Ee,ie,ge,Ze,Me,Le);let Ve;if(d){const Ge=$.add(ze),{x:Ne,y:Ye,z:lt}=p.getProjection().projectTilePoint(Ge.x,Ge.y,M.canonical);Ve=Uo([Ne+_e*se[0]*G.metersToTile,Ye+_e*se[1]*G.metersToTile,lt+_e*se[2]*G.metersToTile],C).point}else{const Ge=i?ze.rotate(-v.angle):ze;Ve=[Ce.point[0]+Ge.x,Ce.point[1]+Ge.y,0]}const je=p.allowVerticalPlacement&&j.placedOrientation===h.WritingMode.vertical?Math.PI/2:0;for(let Ge=0;Ge<j.numGlyphs;Ge++)h.addDynamicAttributes(V,Ve[0],Ve[1],Ve[2],je);I&&j.associatedIconIndex>=0&&(H[j.associatedIconIndex]={shiftedAnchor:Ve,angle:je})}else ki(j.numGlyphs,V)}if(I){Z.clear();const Q=p.icon.placedSymbolArray;for(let j=0;j<Q.length;j++){const ne=Q.get(j);if(ne.hidden)ki(ne.numGlyphs,Z);else{const J=H[j];if(J)for(let $=0;$<ne.numGlyphs;$++)h.addDynamicAttributes(Z,J.shiftedAnchor[0],J.shiftedAnchor[1],J.shiftedAnchor[2],J.angle);else ki(ne.numGlyphs,Z)}}p.icon.dynamicLayoutVertexBuffer.updateData(Z)}p.text.dynamicLayoutVertexBuffer.updateData(V)}function jo(p,i,d){return d.iconsInText&&i?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function zs(p,i,d,m,y,v,C,M,E,k,I,L){const V=p.context,Z=V.gl,H=p.transform,U="map"===M,K="map"===E,G=U&&"point"!==d.layout.get("symbol-placement"),Q=U&&!K&&!G,j=void 0!==d.layout.get("symbol-sort-key").constantOr(1);let ne=!1;const J=p.depthModeForSublayer(0,h.DepthMode.ReadOnly),$=[h.mercatorXfromLng(H.center.lng),h.mercatorYfromLat(H.center.lat)],se=d.layout.get("text-variable-anchor"),_e="globe"===H.projection.name,Ce=[],ve=[0,-1,0];let Le=ve;!_e&&!H.mercatorFromTransition||U||(Le=function(ie){const ge=ie._camera.getWorldToCamera(ie.worldSize,1),Ee=h.multiply([],ge,ie.globeMatrix);h.invert(Ee,Ee);const Ze=[0,0,0],Me=[0,1,0,0];return h.transformMat4$1(Me,Me,Ee),Ze[0]=Me[0],Ze[1]=Me[1],Ze[2]=Me[2],h.normalize(Ze,Ze),Ze}(H));for(const ie of m){const ge=i.getTile(ie),Ee=ge.getBucket(d);if(!Ee||"mercator"===Ee.projection.name&&_e)continue;const Ze=y?Ee.text:Ee.icon;if(!Ze||Ee.fullyClipped||!Ze.segments.get().length)continue;const Me=Ze.programConfigurations.get(d.id),ze=y||Ee.sdfIcons,Ve=y?Ee.textSizeData:Ee.iconSizeData,je=K||0!==H.pitch,Ge=h.evaluateSizeForZoom(Ve,H.zoom);let Ne,Ye,lt,ut,tt=[0,0],dt=null;if(y){if(Ye=ge.glyphAtlasTexture,lt=Z.LINEAR,Ne=ge.glyphAtlasTexture.size,Ee.iconsInText){tt=ge.imageAtlasTexture.size,dt=ge.imageAtlasTexture;const en="composite"===Ve.kind||"camera"===Ve.kind;ut=je||p.options.rotating||p.options.zooming||en?Z.LINEAR:Z.NEAREST}}else{const en=1!==d.layout.get("icon-size").constantOr(0)||Ee.iconsNeedLinear;Ye=ge.imageAtlasTexture,lt=ze||p.options.rotating||p.options.zooming||en||je?Z.LINEAR:Z.NEAREST,Ne=ge.imageAtlasTexture.size}const Ht="globe"===Ee.projection.name,Kt=Ht?Le:ve,ai=Ht?h.globeToMercatorTransition(H.zoom):0,Xt=Pl(ie,Ee.getProjection(),H),_n=H.calculatePixelsToTileUnitsMatrix(ge),yo=bt(Xt,ge.tileID.canonical,K,U,H,Ee.getProjection(),_n),Yo=p.terrain&&K&&G?h.invert(h.create(),yo):nd,ri=Lr(Xt,ge.tileID.canonical,K,U,H,Ee.getProjection(),_n),hi=se&&Ee.hasTextData(),Gt="none"!==d.layout.get("icon-text-fit")&&hi&&Ee.hasIconData();if(G){const en=H.elevation,Pn=en?en.getAtTileOffsetFunc(ie,H.center.lat,H.worldSize,Ee.getProjection()):$r=>[0,0,0],vo=eo(Xt,ge.tileID.canonical,K,U,H,Ee.getProjection(),_n);zn(Ee,Xt,p,y,vo,ri,K,k,Pn,ie)}const Di=G||y&&se||Gt,$i=p.translatePosMatrix(Xt,ge,v,C),$t=Di?nd:yo,_i=p.translatePosMatrix(ri,ge,v,C,!0),Jr=Ee.getProjection().createInversionMatrix(H,ie.canonical),xo=[];p.terrain&&K&&xo.push("PITCH_WITH_MAP_TERRAIN"),Ht&&xo.push("PROJECTION_GLOBE_VIEW"),Di&&xo.push("PROJECTED_POS_ON_VIEWPORT");const Ja=ze&&0!==d.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1);let Kr;Kr=ze?Ee.iconsInText?Cu(Ve.kind,Ge,Q,K,p,$i,$t,_i,Ne,tt,ie,ai,$,Jr,Kt,Ee.getProjection()):wu(Ve.kind,Ge,Q,K,p,$i,$t,_i,y,Ne,!0,ie,ai,$,Jr,Kt,Ee.getProjection()):Rs(Ve.kind,Ge,Q,K,p,$i,$t,_i,y,Ne,ie,ai,$,Jr,Kt,Ee.getProjection());const fr={program:p.useProgram(jo(ze,y,Ee),Me,xo),buffers:Ze,uniformValues:Kr,atlasTexture:Ye,atlasTextureIcon:dt,atlasInterpolation:lt,atlasInterpolationIcon:ut,isSDF:ze,hasHalo:Ja,tile:ge,labelPlaneMatrixInv:Yo};if(j&&Ee.canOverlap){ne=!0;const en=Ze.segments.get();for(const Pn of en)Ce.push({segments:new h.SegmentVector([Pn]),sortKey:Pn.sortKey,state:fr})}else Ce.push({segments:Ze.segments,sortKey:0,state:fr})}ne&&Ce.sort((ie,ge)=>ie.sortKey-ge.sortKey);for(const ie of Ce){const ge=ie.state;if(p.terrain&&p.terrain.setupElevationDraw(ge.tile,ge.program,{useDepthForOcclusion:!_e,labelPlaneMatrixInv:ge.labelPlaneMatrixInv}),V.activeTexture.set(Z.TEXTURE0),ge.atlasTexture.bind(ge.atlasInterpolation,Z.CLAMP_TO_EDGE),ge.atlasTextureIcon&&(V.activeTexture.set(Z.TEXTURE1),ge.atlasTextureIcon&&ge.atlasTextureIcon.bind(ge.atlasInterpolationIcon,Z.CLAMP_TO_EDGE)),ge.isSDF){const Ee=ge.uniformValues;ge.hasHalo&&(Ee.u_is_halo=1,rd(ge.buffers,ie.segments,d,p,ge.program,J,I,L,Ee)),Ee.u_is_halo=0}rd(ge.buffers,ie.segments,d,p,ge.program,J,I,L,ge.uniformValues)}}function rd(p,i,d,m,y,v,C,M,E){const k=m.context;y.draw(k,k.gl.TRIANGLES,v,C,M,h.CullFaceMode.disabled,E,d.id,p.layoutVertexBuffer,p.indexBuffer,i,d.paint,m.transform.zoom,p.programConfigurations.get(d.id),p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer,p.globeExtVertexBuffer)}function Hl(p,i,d,m,y,v,C){const M=p.context.gl,E=d.paint.get("fill-pattern"),k=E&&E.constantOr(1),I=d.getCrossfadeParameters();let L,V,Z,H,U;C?(V=k&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",L=M.LINES):(V=k?"fillPattern":"fill",L=M.TRIANGLES);for(const K of m){const G=i.getTile(K);if(k&&!G.patternsLoaded())continue;const Q=G.getBucket(d);if(!Q)continue;p.prepareDrawTile();const j=Q.programConfigurations.get(d.id),ne=p.useProgram(V,j);k&&(p.context.activeTexture.set(M.TEXTURE0),G.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),j.updatePaintBuffers(I));const J=E.constantOr(null);if(J&&G.imageAtlas){const se=G.imageAtlas,_e=se.patternPositions[J.to.toString()],Ce=se.patternPositions[J.from.toString()];_e&&Ce&&j.setConstantPatternPositions(_e,Ce)}const $=p.translatePosMatrix(K.projMatrix,G,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(C){H=Q.indexBuffer2,U=Q.segments2;const se=p.terrain&&p.terrain.renderingToTexture?p.terrain.drapeBufferSize:[M.drawingBufferWidth,M.drawingBufferHeight];Z="fillOutlinePattern"===V&&k?Kc($,p,I,G,se):Gr($,se)}else H=Q.indexBuffer,U=Q.segments,Z=k?Jc($,p,I,G):Ur($);p.prepareDrawProgram(p.context,ne,K.toUnwrapped()),ne.draw(p.context,L,y,p.stencilModeForClipping(K),v,h.CullFaceMode.disabled,Z,d.id,Q.layoutVertexBuffer,H,U,d.paint,p.transform.zoom,j)}}function ql(p,i,d,m,y,v,C){const M=p.context,E=M.gl,k=p.transform,I=d.paint.get("fill-extrusion-pattern"),L=I.constantOr(1),V=d.getCrossfadeParameters(),Z=d.paint.get("fill-extrusion-opacity"),H="globe"===k.projection.name?h.fillExtrusionHeightLift():0,U="globe"===k.projection.name,K=U?h.globeToMercatorTransition(k.zoom):0,G=[h.mercatorXfromLng(k.center.lng),h.mercatorYfromLat(k.center.lat)],Q=[];U&&Q.push("PROJECTION_GLOBE_VIEW");for(const j of m){const ne=i.getTile(j),J=ne.getBucket(d);if(!J||J.projection.name!==k.projection.name)continue;const $=J.programConfigurations.get(d.id),se=p.useProgram(L?"fillExtrusionPattern":"fillExtrusion",$,Q);if(p.terrain){const ge=p.terrain;if(p.style.terrainSetForDrapingOnly())ge.setupElevationDraw(ne,se,{useMeterToDem:!0});else{if(!J.enableTerrain)continue;if(ge.setupElevationDraw(ne,se,{useMeterToDem:!0}),ad(M,i,j,J,d,ge),!J.centroidVertexBuffer){const Ee=se.attributes.a_centroid_pos;void 0!==Ee&&E.vertexAttrib2f(Ee,0,0)}}}L&&(p.context.activeTexture.set(E.TEXTURE0),ne.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),$.updatePaintBuffers(V));const _e=I.constantOr(null);if(_e&&ne.imageAtlas){const ge=ne.imageAtlas,Ee=ge.patternPositions[_e.to.toString()],Ze=ge.patternPositions[_e.from.toString()];Ee&&Ze&&$.setConstantPatternPositions(Ee,Ze)}const Ce=p.translatePosMatrix(j.projMatrix,ne,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ve=k.projection.createInversionMatrix(k,j.canonical),Le=d.paint.get("fill-extrusion-vertical-gradient"),ie=L?Fs(Ce,p,Le,Z,j,V,ne,H,K,G,ve):vu(Ce,p,Le,Z,j,H,K,G,ve);p.prepareDrawProgram(M,se,j.toUnwrapped()),se.draw(M,M.gl.TRIANGLES,y,v,C,h.CullFaceMode.backCCW,ie,d.id,J.layoutVertexBuffer,J.indexBuffer,J.segments,d.paint,p.transform.zoom,$,p.terrain?J.centroidVertexBuffer:null,U?J.layoutVertexExtBuffer:null)}}function ad(p,i,d,m,y,v){const C=[G=>{let Q=G.canonical.x-1,j=G.wrap;return Q<0&&(Q=(1<<G.canonical.z)-1,j--),new h.OverscaledTileID(G.overscaledZ,j,G.canonical.z,Q,G.canonical.y)},G=>{let Q=G.canonical.x+1,j=G.wrap;return Q===1<<G.canonical.z&&(Q=0,j++),new h.OverscaledTileID(G.overscaledZ,j,G.canonical.z,Q,G.canonical.y)},G=>new h.OverscaledTileID(G.overscaledZ,G.wrap,G.canonical.z,G.canonical.x,(0===G.canonical.y?1<<G.canonical.z:G.canonical.y)-1),G=>new h.OverscaledTileID(G.overscaledZ,G.wrap,G.canonical.z,G.canonical.x,G.canonical.y===(1<<G.canonical.z)-1?0:G.canonical.y+1)],M=G=>{const Q=i.getSource().minzoom,j=J=>{const $=i.getTileByID(J);if($&&$.hasData())return $.getBucket(y)},ne=[0,-1,1];for(const J of ne){if(G.overscaledZ+J<Q)continue;const $=j(G.calculateScaledKey(G.overscaledZ+J));if($)return $}},E=[0,0,0],k=(G,Q)=>(E[0]=Math.min(G.min.y,Q.min.y),E[1]=Math.max(G.max.y,Q.max.y),E[2]=h.EXTENT-Q.min.x>G.max.x?Q.min.x-h.EXTENT:G.max.x,E),I=(G,Q)=>(E[0]=Math.min(G.min.x,Q.min.x),E[1]=Math.max(G.max.x,Q.max.x),E[2]=h.EXTENT-Q.min.y>G.max.y?Q.min.y-h.EXTENT:G.max.y,E),L=[(G,Q)=>k(G,Q),(G,Q)=>k(Q,G),(G,Q)=>I(G,Q),(G,Q)=>I(Q,G)],V=new h.pointGeometry(0,0);let Z,H,U;const K=(G,Q,j,ne,J)=>{const $=[[ne?j:G,ne?G:j,0],[ne?j:Q,ne?Q:j,0]],se=J<0?h.EXTENT+J:J,_e=[ne?se:(G+Q)/2,ne?(G+Q)/2:se,0];return 0===j&&J<0||0!==j&&J>0?v.getForTilePoints(U,[_e],!0,H):$.push(_e),v.getForTilePoints(d,$,!0,Z),Math.max($[0][2],$[1][2],_e[2])/v.exaggeration()};for(let G=0;G<4;G++){const Q=(G<2?1:5)-G,j=m.borders[G];if(0===j.length)continue;const ne=U=C[G](d),J=M(ne);if(!(J&&J instanceof h.FillExtrusionBucket&&J.enableTerrain)||m.borderDoneWithNeighborZ[G]===J.canonical.z&&J.borderDoneWithNeighborZ[Q]===m.canonical.z||(H=v.findDEMTileFor(ne),!H||!H.dem))continue;if(!Z){const Ce=v.findDEMTileFor(d);if(!Ce||!Ce.dem)return;Z=Ce}const $=J.borders[Q];let se=0;const _e=J.borderDoneWithNeighborZ[Q]!==m.canonical.z;if(m.canonical.z===J.canonical.z){for(let Ce=0;Ce<j.length;Ce++){const ve=m.featuresOnBorder[j[Ce]],Le=ve.borders[G];let ie;for(;se<$.length&&(ie=J.featuresOnBorder[$[se]],!(ie.borders[Q][1]>Le[0]+3));)_e&&J.encodeCentroid(void 0,ie,!1),se++;if(ie&&se<$.length){const ge=se;let Ee=0;for(;!(ie.borders[Q][0]>Le[1]-3)&&(Ee++,++se!==$.length);)ie=J.featuresOnBorder[$[se]];if(ie=J.featuresOnBorder[$[ge]],ve.intersectsCount()>1||ie.intersectsCount()>1||1!==Ee){1!==Ee&&(se=ge),m.encodeCentroid(void 0,ve,!1),_e&&J.encodeCentroid(void 0,ie,!1);continue}const Ze=L[G](ve,ie),Me=G%2?h.EXTENT-1:0;V.x=K(Ze[0],Math.min(h.EXTENT-1,Ze[1]),Me,G<2,Ze[2]),V.y=0,m.encodeCentroid(V,ve,!1),_e&&J.encodeCentroid(V,ie,!1)}else m.encodeCentroid(void 0,ve,!1)}m.borderDoneWithNeighborZ[G]=J.canonical.z,m.needsCentroidUpdate=!0,_e&&(J.borderDoneWithNeighborZ[Q]=m.canonical.z,J.needsCentroidUpdate=!0)}else{for(const Ce of j)m.encodeCentroid(void 0,m.featuresOnBorder[Ce],!1);if(_e){for(const Ce of $)J.encodeCentroid(void 0,J.featuresOnBorder[Ce],!1);J.borderDoneWithNeighborZ[Q]=m.canonical.z,J.needsCentroidUpdate=!0}m.borderDoneWithNeighborZ[G]=J.canonical.z,m.needsCentroidUpdate=!0}}(m.needsCentroidUpdate||!m.centroidVertexBuffer&&0!==m.centroidVertexArray.length)&&m.uploadCentroid(p)}const Hr=new h.Color(1,0,0,1),Ia=new h.Color(0,1,0,1),Fa=new h.Color(0,0,1,1),kn=new h.Color(1,0,1,1),La=new h.Color(0,1,1,1);function Vs(p,i,d,m){Et(p,0,i+d/2,p.transform.width,d,m)}function Ra(p,i,d,m){Et(p,i-d/2,0,d,p.transform.height,m)}function Et(p,i,d,m,y,v){const C=p.context,M=C.gl;M.enable(M.SCISSOR_TEST),M.scissor(i*h.exported.devicePixelRatio,d*h.exported.devicePixelRatio,m*h.exported.devicePixelRatio,y*h.exported.devicePixelRatio),C.clear({color:v}),M.disable(M.SCISSOR_TEST)}function Oa(p,i,d){const m=p.context,y=m.gl,v="globe"===p.transform.projection.name,C=d.projMatrix,M=p.useProgram("debug",null,v?["PROJECTION_GLOBE_VIEW"]:null),E=i.getTileByID(d.key);p.terrain&&p.terrain.setupElevationDraw(E,M);const k=h.DepthMode.disabled,I=h.StencilMode.disabled,L=p.colorModeForRenderPass(),V="$debug";m.activeTexture.set(y.TEXTURE0),p.emptyTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),v?E._makeGlobeTileDebugBuffers(p.context,p.transform.projection):E._makeDebugTileBoundsBuffers(p.context,p.transform.projection);const Z=E._tileDebugBuffer||p.debugBuffer,H=E._tileDebugIndexBuffer||p.debugIndexBuffer,U=E._tileDebugSegments||p.debugSegments;M.draw(m,y.LINE_STRIP,k,I,L,h.CullFaceMode.disabled,Ul(C,h.Color.red),V,Z,H,U,null,null,null,E._globeTileDebugBorderBuffer);const K=E.latestRawTileData,G=Math.floor((K&&K.byteLength||0)/1024),Q=i.getTile(d).tileSize,j=512/Math.min(Q,512)*(d.overscaledZ/p.transform.zoom)*.5;let ne=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ne+=` => ${d.overscaledZ}`),function(_e,Ce){_e.initDebugOverlayCanvas();const ve=_e.debugOverlayCanvas,Le=_e.context.gl,ie=_e.debugOverlayCanvas.getContext("2d");ie.clearRect(0,0,ve.width,ve.height),ie.shadowColor="white",ie.shadowBlur=2,ie.lineWidth=1.5,ie.strokeStyle="white",ie.textBaseline="top",ie.font="bold 36px Open Sans, sans-serif",ie.fillText(Ce,5,5),ie.strokeText(Ce,5,5),_e.debugOverlayTexture.update(ve),_e.debugOverlayTexture.bind(Le.LINEAR,Le.CLAMP_TO_EDGE)}(p,`${ne} ${G}kb`);const J=E._tileDebugTextBuffer||p.debugBuffer,$=E._tileDebugTextIndexBuffer||p.quadTriangleIndexBuffer,se=E._tileDebugTextSegments||p.debugSegments;M.draw(m,y.TRIANGLES,k,I,h.ColorMode.alphaBlended,h.CullFaceMode.disabled,Ul(C,h.Color.transparent,j),V,J,$,se,null,null,null,E._globeTileDebugTextBuffer)}const Eu=h.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:no}=Eu;function Mi(p,i,d,m){p.emplaceBack(i,d,m)}class Su{constructor(i){this.vertexArray=new h.StructArrayLayout3f12,this.indices=new h.StructArrayLayout3ui6,Mi(this.vertexArray,-1,-1,1),Mi(this.vertexArray,1,-1,1),Mi(this.vertexArray,-1,1,1),Mi(this.vertexArray,1,1,1),Mi(this.vertexArray,-1,-1,-1),Mi(this.vertexArray,1,-1,-1),Mi(this.vertexArray,-1,1,-1),Mi(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=i.createVertexBuffer(this.vertexArray,no),this.indexBuffer=i.createIndexBuffer(this.indices),this.segment=h.SegmentVector.simpleSegment(0,0,36,12)}}function za(p,i,d,m,y,v){const C=p.gl,M=i.paint.get("sky-atmosphere-color"),E=i.paint.get("sky-atmosphere-halo-color"),k=i.paint.get("sky-atmosphere-sun-intensity"),I={u_matrix_3f:h.fromMat4(h.create$1(),m),u_sun_direction:y,u_sun_intensity:k,u_color_tint_r:[(H=M).r,H.g,H.b,H.a],u_color_tint_m:[(U=E).r,U.g,U.b,U.a],u_luminance:5e-5};var H,U;C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_CUBE_MAP_POSITIVE_X+v,i.skyboxTexture,0),d.draw(p,C.TRIANGLES,h.DepthMode.disabled,h.StencilMode.disabled,h.ColorMode.unblended,h.CullFaceMode.frontCW,I,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const Du=h.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class lp{constructor(i){const d=new h.StructArrayLayout5f20;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const m=new h.StructArrayLayout3ui6;m.emplaceBack(0,1,2),m.emplaceBack(2,3,0),this.vertexBuffer=i.createVertexBuffer(d,Du.members),this.indexBuffer=i.createIndexBuffer(m),this.segments=h.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Yl={symbol:function(p,i,d,m,y){if("translucent"!==p.renderPass)return;const v=h.StencilMode.disabled,C=p.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&function(M,E,k,I,L,V,Z){const H=E.transform,U="map"===L,K="map"===V;for(const G of M){const Q=I.getTile(G),j=Q.getBucket(k);if(!j||!j.text||!j.text.segments.get().length)continue;const ne=h.evaluateSizeForZoom(j.textSizeData,H.zoom),J=Pl(G,j.getProjection(),H),$=H.calculatePixelsToTileUnitsMatrix(Q),se=bt(J,Q.tileID.canonical,K,U,H,j.getProjection(),$),_e="none"!==k.layout.get("icon-text-fit")&&j.hasIconData();if(ne){const Ce=Math.pow(2,H.zoom-Q.tileID.overscaledZ);od(j,U,K,Z,h.symbolSize,H,se,G,Ce,ne,_e)}}}(m,p,d,i,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),y),0!==d.paint.get("icon-opacity").constantOr(1)&&zs(p,i,d,m,!1,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),d.layout.get("icon-rotation-alignment"),d.layout.get("icon-pitch-alignment"),d.layout.get("icon-keep-upright"),v,C),0!==d.paint.get("text-opacity").constantOr(1)&&zs(p,i,d,m,!0,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),d.layout.get("text-keep-upright"),v,C),i.map.showCollisionBoxes&&(Os(p,i,d,m,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),Os(p,i,d,m,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(p,i,d,m){if("translucent"!==p.renderPass)return;const y=d.paint.get("circle-opacity"),v=d.paint.get("circle-stroke-width"),C=d.paint.get("circle-stroke-opacity"),M=void 0!==d.layout.get("circle-sort-key").constantOr(1);if(0===y.constantOr(1)&&(0===v.constantOr(1)||0===C.constantOr(1)))return;const E=p.context,k=E.gl,I=p.transform,L=p.depthModeForSublayer(0,h.DepthMode.ReadOnly),V=h.StencilMode.disabled,Z=p.colorModeForRenderPass(),H="globe"===I.projection.name,U=[h.mercatorXfromLng(I.center.lng),h.mercatorYfromLat(I.center.lat)],K=[];for(let Q=0;Q<m.length;Q++){const j=m[Q],ne=i.getTile(j),J=ne.getBucket(d);if(!J||J.projection.name!==I.projection.name)continue;const $=J.programConfigurations.get(d.id),se=$c(d);H&&se.push("PROJECTION_GLOBE_VIEW");const _e=p.useProgram("circle",$,se),Ce=J.layoutVertexBuffer,ve=J.globeExtVertexBuffer,Le=J.indexBuffer,ie=I.projection.createInversionMatrix(I,j.canonical),ge={programConfiguration:$,program:_e,layoutVertexBuffer:Ce,globeExtVertexBuffer:ve,indexBuffer:Le,uniformValues:Vl(p,j,ne,ie,U,d),tile:ne};if(M){const Ee=J.segments.get();for(const Ze of Ee)K.push({segments:new h.SegmentVector([Ze]),sortKey:Ze.sortKey,state:ge})}else K.push({segments:J.segments,sortKey:0,state:ge})}M&&K.sort((Q,j)=>Q.sortKey-j.sortKey);const G={useDepthForOcclusion:!H};for(const Q of K){const{programConfiguration:j,program:ne,layoutVertexBuffer:J,globeExtVertexBuffer:$,indexBuffer:se,uniformValues:_e,tile:Ce}=Q.state,ve=Q.segments;p.terrain&&p.terrain.setupElevationDraw(Ce,ne,G),p.prepareDrawProgram(E,ne,Ce.tileID.toUnwrapped()),ne.draw(E,k.TRIANGLES,L,V,Z,h.CullFaceMode.disabled,_e,d.id,J,se,ve,d.paint,I.zoom,j,H?$:null)}},heatmap:function(p,i,d,m){if(0!==d.paint.get("heatmap-opacity"))if("offscreen"===p.renderPass){const y=p.context,v=y.gl,C=h.StencilMode.disabled,M=new h.ColorMode([v.ONE,v.ONE],h.Color.transparent,[!0,!0,!0,!0]);(function(Z,H,U,K){const G=Z.gl,Q=H.width*K,j=H.height*K;Z.activeTexture.set(G.TEXTURE1),Z.viewport.set([0,0,Q,j]);let ne=U.heatmapFbo;if(!ne||ne&&(ne.width!==Q||ne.height!==j)){ne&&ne.destroy();const J=G.createTexture();G.bindTexture(G.TEXTURE_2D,J),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.CLAMP_TO_EDGE),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.CLAMP_TO_EDGE),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.LINEAR),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.LINEAR),ne=U.heatmapFbo=Z.createFramebuffer(Q,j,!1),function($,se,_e,Ce,ve,Le){const ie=$.gl;ie.texImage2D(ie.TEXTURE_2D,0,ie.RGBA,ve,Le,0,ie.RGBA,$.extRenderToTextureHalfFloat?$.extTextureHalfFloat.HALF_FLOAT_OES:ie.UNSIGNED_BYTE,null),Ce.colorAttachment.set(_e)}(Z,0,J,ne,Q,j)}else G.bindTexture(G.TEXTURE_2D,ne.colorAttachment.get()),Z.bindFramebuffer.set(ne.framebuffer)})(y,p,d,"globe"===p.transform.projection.name?.5:.25),y.clear({color:h.Color.transparent});const E=p.transform,k="globe"===E.projection.name,I=k?["PROJECTION_GLOBE_VIEW"]:null,L=k?h.CullFaceMode.frontCCW:h.CullFaceMode.disabled,V=[h.mercatorXfromLng(E.center.lng),h.mercatorYfromLat(E.center.lat)];for(let Z=0;Z<m.length;Z++){const H=m[Z];if(i.hasRenderableParent(H))continue;const U=i.getTile(H),K=U.getBucket(d);if(!K||K.projection.name!==E.projection.name)continue;const G=K.programConfigurations.get(d.id),Q=p.useProgram("heatmap",G,I),{zoom:j}=p.transform;p.terrain&&p.terrain.setupElevationDraw(U,Q),p.prepareDrawProgram(y,Q,H.toUnwrapped());const ne=E.projection.createInversionMatrix(E,H.canonical);Q.draw(y,v.TRIANGLES,h.DepthMode.disabled,C,M,L,Au(p,H,U,ne,V,j,d.paint.get("heatmap-intensity")),d.id,K.layoutVertexBuffer,K.indexBuffer,K.segments,d.paint,p.transform.zoom,G,k?K.globeExtVertexBuffer:null)}y.viewport.set([0,0,p.width,p.height])}else"translucent"===p.renderPass&&(p.context.setColorMode(p.colorModeForRenderPass()),function(y,v){const C=y.context,M=C.gl,E=v.heatmapFbo;if(!E)return;C.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,E.colorAttachment.get()),C.activeTexture.set(M.TEXTURE1);let k=v.colorRampTexture;k||(k=v.colorRampTexture=new h.Texture(C,v.colorRamp,M.RGBA)),k.bind(M.LINEAR,M.CLAMP_TO_EDGE),y.useProgram("heatmapTexture").draw(C,M.TRIANGLES,h.DepthMode.disabled,h.StencilMode.disabled,y.colorModeForRenderPass(),h.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:v.paint.get("heatmap-opacity")},v.id,y.viewportBuffer,y.quadTriangleIndexBuffer,y.viewportSegments,v.paint,y.transform.zoom)}(p,d))},line:function(p,i,d,m){if("translucent"!==p.renderPass)return;const y=d.paint.get("line-opacity"),v=d.paint.get("line-width");if(0===y.constantOr(1)||0===v.constantOr(1))return;const C=p.depthModeForSublayer(0,h.DepthMode.ReadOnly),M=p.colorModeForRenderPass(),E=p.terrain&&p.terrain.renderingToTexture?1:h.exported.devicePixelRatio,k=d.paint.get("line-dasharray"),I=k.constantOr(1),L=d.layout.get("line-cap"),V=d.paint.get("line-pattern"),Z=V.constantOr(1),H=d.paint.get("line-gradient"),U=d.getCrossfadeParameters(),K=Z?"linePattern":"line",G=p.context,Q=G.gl,j=(J=>{const $=[];Ls(J)&&$.push("RENDER_LINE_DASH"),J.paint.get("line-gradient")&&$.push("RENDER_LINE_GRADIENT");const se=J.paint.get("line-trim-offset");0===se[0]&&0===se[1]||$.push("RENDER_LINE_TRIM_OFFSET");const _e=J.paint.get("line-pattern").constantOr(1),Ce=1!==J.paint.get("line-opacity").constantOr(1);return!_e&&Ce&&$.push("RENDER_LINE_ALPHA_DISCARD"),$})(d);let ne=j.includes("RENDER_LINE_ALPHA_DISCARD");p.terrain&&p.terrain.clipOrMaskOverlapStencilType()&&(ne=!1);for(const J of m){const $=i.getTile(J);if(Z&&!$.patternsLoaded())continue;const se=$.getBucket(d);if(!se)continue;p.prepareDrawTile();const _e=se.programConfigurations.get(d.id),Ce=p.useProgram(K,_e,j),ve=V.constantOr(null);if(ve&&$.imageAtlas){const Ve=$.imageAtlas,je=Ve.patternPositions[ve.to.toString()],Ge=Ve.patternPositions[ve.from.toString()];je&&Ge&&_e.setConstantPatternPositions(je,Ge)}const Le=k.constantOr(null),ie=L.constantOr(null);if(!Z&&Le&&ie&&$.lineAtlas){const Ve=$.lineAtlas,je=Ve.getDash(Le.to,ie),Ge=Ve.getDash(Le.from,ie);je&&Ge&&_e.setConstantPatternPositions(je,Ge)}let[ge,Ee]=d.paint.get("line-trim-offset");("round"===ie||"square"===ie)&&ge!==Ee&&(0===ge&&(ge-=1),1===Ee&&(Ee+=1));const Ze=p.terrain?J.projMatrix:null,Me=Z?ed(p,$,d,U,Ze,E):Zl(p,$,d,U,Ze,se.lineClipsArray.length,E,[ge,Ee]);if(H){const Ve=se.gradients[d.id];let je=Ve.texture;if(d.gradientVersion!==Ve.version){let Ge=256;if(d.stepInterpolant){const Ne=i.getSource().maxzoom,Ye=J.canonical.z===Ne?Math.ceil(1<<p.transform.maxZoom-J.canonical.z):1;Ge=h.clamp(h.nextPowerOfTwo(se.maxLineLength/h.EXTENT*1024*Ye),256,G.maxTextureSize)}Ve.gradient=h.renderColorRamp({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:Ge,image:Ve.gradient||void 0,clips:se.lineClipsArray}),Ve.texture?Ve.texture.update(Ve.gradient):Ve.texture=new h.Texture(G,Ve.gradient,Q.RGBA),Ve.version=d.gradientVersion,je=Ve.texture}G.activeTexture.set(Q.TEXTURE1),je.bind(d.stepInterpolant?Q.NEAREST:Q.LINEAR,Q.CLAMP_TO_EDGE)}I&&(G.activeTexture.set(Q.TEXTURE0),$.lineAtlasTexture.bind(Q.LINEAR,Q.REPEAT),_e.updatePaintBuffers(U)),Z&&(G.activeTexture.set(Q.TEXTURE0),$.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),_e.updatePaintBuffers(U)),p.prepareDrawProgram(G,Ce,J.toUnwrapped());const ze=Ve=>{Ce.draw(G,Q.TRIANGLES,C,Ve,M,h.CullFaceMode.disabled,Me,d.id,se.layoutVertexBuffer,se.indexBuffer,se.segments,d.paint,p.transform.zoom,_e,se.layoutVertexBuffer2)};if(ne){const Ve=p.stencilModeForClipping(J).ref;0===Ve&&p.terrain&&G.clear({stencil:0});const je={func:Q.EQUAL,mask:255};Me.u_alpha_discard_threshold=.8,ze(new h.StencilMode(je,Ve,255,Q.KEEP,Q.KEEP,Q.INVERT)),Me.u_alpha_discard_threshold=0,ze(new h.StencilMode(je,Ve,255,Q.KEEP,Q.KEEP,Q.KEEP))}else ze(p.stencilModeForClipping(J))}ne&&(p.resetStencilClippingMasks(),p.terrain&&G.clear({stencil:0}))},fill:function(p,i,d,m){const y=d.paint.get("fill-color"),v=d.paint.get("fill-opacity");if(0===v.constantOr(1))return;const C=p.colorModeForRenderPass(),M=d.paint.get("fill-pattern"),E=p.opaquePassEnabledForLayer()&&!M.constantOr(1)&&1===y.constantOr(h.Color.transparent).a&&1===v.constantOr(0)?"opaque":"translucent";if(p.renderPass===E){const k=p.depthModeForSublayer(1,"opaque"===p.renderPass?h.DepthMode.ReadWrite:h.DepthMode.ReadOnly);Hl(p,i,d,m,k,C,!1)}if("translucent"===p.renderPass&&d.paint.get("fill-antialias")){const k=p.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,h.DepthMode.ReadOnly);Hl(p,i,d,m,k,C,!0)}},"fill-extrusion":function(p,i,d,m){const y=d.paint.get("fill-extrusion-opacity");if(0!==y&&"translucent"===p.renderPass){const v=new h.DepthMode(p.context.gl.LEQUAL,h.DepthMode.ReadWrite,p.depthRangeFor3D);if(1!==y||d.paint.get("fill-extrusion-pattern").constantOr(1))ql(p,i,d,m,v,h.StencilMode.disabled,h.ColorMode.disabled),ql(p,i,d,m,v,p.stencilModeFor3D(),p.colorModeForRenderPass()),p.resetStencilClippingMasks();else{const C=p.colorModeForRenderPass();ql(p,i,d,m,v,h.StencilMode.disabled,C)}}},hillshade:function(p,i,d,m){if("offscreen"!==p.renderPass&&"translucent"!==p.renderPass)return;const y=p.context,v=p.depthModeForSublayer(0,h.DepthMode.ReadOnly),C=p.colorModeForRenderPass(),M=p.terrain&&p.terrain.renderingToTexture,[E,k]="translucent"!==p.renderPass||M?[{},m]:p.stencilConfigForOverlap(m);for(const I of k){const L=i.getTile(I);if(L.needsHillshadePrepare&&"offscreen"===p.renderPass)Da(p,L,d,v,h.StencilMode.disabled,C);else if("translucent"===p.renderPass){const V=M&&p.terrain?p.terrain.stencilModeForRTTOverlap(I):E[I.overscaledZ];Vr(p,I,L,d,v,V,C)}}y.viewport.set([0,0,p.width,p.height]),p.resetStencilClippingMasks()},raster:function(p,i,d,m,y,v){if("translucent"!==p.renderPass||0===d.paint.get("raster-opacity")||!m.length)return;const C=p.context,M=C.gl,E=i.getSource(),k=p.useProgram("raster"),I=p.colorModeForRenderPass(),L=p.terrain&&p.terrain.renderingToTexture,[V,Z]=E instanceof pe||L?[{},m]:p.stencilConfigForOverlap(m),H=Z[Z.length-1].overscaledZ,U=!p.options.moving;for(const K of Z){const G=L?h.DepthMode.disabled:p.depthModeForSublayer(K.overscaledZ-H,1===d.paint.get("raster-opacity")?h.DepthMode.ReadWrite:h.DepthMode.ReadOnly,M.LESS),Q=K.toUnwrapped(),j=i.getTile(K);if(L&&(!j||!j.hasData()))continue;const ne=L?K.projMatrix:p.transform.calculateProjMatrix(Q,U),J=p.terrain&&L?p.terrain.stencilModeForRTTOverlap(K):V[K.overscaledZ],$=v?0:d.paint.get("raster-fade-duration");j.registerFadeDuration($);const se=i.findLoadedParent(K,0),_e=Ps(j,se,i,p.transform,$);let Ce,ve;p.terrain&&p.terrain.prepareDrawTile();const Le="nearest"===d.paint.get("raster-resampling")?M.NEAREST:M.LINEAR;C.activeTexture.set(M.TEXTURE0),j.texture.bind(Le,M.CLAMP_TO_EDGE),C.activeTexture.set(M.TEXTURE1),se?(se.texture.bind(Le,M.CLAMP_TO_EDGE),Ce=Math.pow(2,se.tileID.overscaledZ-j.tileID.overscaledZ),ve=[j.tileID.canonical.x*Ce%1,j.tileID.canonical.y*Ce%1]):j.texture.bind(Le,M.CLAMP_TO_EDGE);const ie=bu(ne,ve||[0,0],Ce||1,_e,d,E instanceof pe?E.perspectiveTransform:[0,0]);if(p.prepareDrawProgram(C,k,Q),E instanceof pe)E.boundsBuffer&&E.boundsSegments&&k.draw(C,M.TRIANGLES,G,h.StencilMode.disabled,I,h.CullFaceMode.disabled,ie,d.id,E.boundsBuffer,p.quadTriangleIndexBuffer,E.boundsSegments);else{const{tileBoundsBuffer:ge,tileBoundsIndexBuffer:Ee,tileBoundsSegments:Ze}=p.getTileBoundsBuffers(j);k.draw(C,M.TRIANGLES,G,J,I,h.CullFaceMode.disabled,ie,d.id,ge,Ee,Ze)}}p.resetStencilClippingMasks()},background:function(p,i,d,m){const y=d.paint.get("background-color"),v=d.paint.get("background-opacity");if(0===v)return;const C=p.context,M=C.gl,E=p.transform,k=E.tileSize,I=d.paint.get("background-pattern");if(p.isPatternMissing(I))return;const L=!I&&1===y.a&&1===v&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==L)return;const V=h.StencilMode.disabled,Z=p.depthModeForSublayer(0,"opaque"===L?h.DepthMode.ReadWrite:h.DepthMode.ReadOnly),H=p.colorModeForRenderPass(),U=p.useProgram(I?"backgroundPattern":"background");let K,G=m;G||(K=p.getBackgroundTiles(),G=Object.values(K).map(j=>j.tileID)),I&&(C.activeTexture.set(M.TEXTURE0),p.imageManager.bind(p.context));const Q=d.getCrossfadeParameters();for(const j of G){const ne=j.toUnwrapped(),J=m?j.projMatrix:p.transform.calculateProjMatrix(ne);p.prepareDrawTile();const $=i?i.getTile(j):K?K[j.key]:new h.Tile(j,k,E.zoom,p),se=I?Pa(J,v,p,I,{tileID:j,tileSize:k},Q):Mu(J,v,y);p.prepareDrawProgram(C,U,ne);const{tileBoundsBuffer:_e,tileBoundsIndexBuffer:Ce,tileBoundsSegments:ve}=p.getTileBoundsBuffers($);U.draw(C,M.TRIANGLES,Z,V,H,h.CullFaceMode.disabled,se,d.id,_e,Ce,ve)}},sky:function(p,i,d){const m=p.transform,y="mercator"===m.projection.name||"globe"===m.projection.name?1:h.smoothstep(7,8,m.zoom),v=d.paint.get("sky-opacity")*y;if(0===v)return;const C=p.context,M=d.paint.get("sky-type"),E=new h.DepthMode(C.gl.LEQUAL,h.DepthMode.ReadOnly,[0,1]),k=p.frameCounter/1e3%1;"atmosphere"===M?"offscreen"===p.renderPass?d.needsSkyboxCapture(p)&&(function(I,L,V,Z){const H=I.context,U=H.gl;let K=L.skyboxFbo;if(!K){K=L.skyboxFbo=H.createFramebuffer(32,32,!1),L.skyboxGeometry=new Su(H),L.skyboxTexture=H.gl.createTexture(),U.bindTexture(U.TEXTURE_CUBE_MAP,L.skyboxTexture),U.texParameteri(U.TEXTURE_CUBE_MAP,U.TEXTURE_WRAP_S,U.CLAMP_TO_EDGE),U.texParameteri(U.TEXTURE_CUBE_MAP,U.TEXTURE_WRAP_T,U.CLAMP_TO_EDGE),U.texParameteri(U.TEXTURE_CUBE_MAP,U.TEXTURE_MIN_FILTER,U.LINEAR),U.texParameteri(U.TEXTURE_CUBE_MAP,U.TEXTURE_MAG_FILTER,U.LINEAR);for(let ne=0;ne<6;++ne)U.texImage2D(U.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,U.RGBA,32,32,0,U.RGBA,U.UNSIGNED_BYTE,null)}H.bindFramebuffer.set(K.framebuffer),H.viewport.set([0,0,32,32]);const G=L.getCenter(I,!0),Q=I.useProgram("skyboxCapture"),j=new Float64Array(16);h.identity(j),h.rotateY(j,j,.5*-Math.PI),za(H,L,Q,j,G,0),h.identity(j),h.rotateY(j,j,.5*Math.PI),za(H,L,Q,j,G,1),h.identity(j),h.rotateX(j,j,.5*-Math.PI),za(H,L,Q,j,G,2),h.identity(j),h.rotateX(j,j,.5*Math.PI),za(H,L,Q,j,G,3),h.identity(j),za(H,L,Q,j,G,4),h.identity(j),h.rotateY(j,j,Math.PI),za(H,L,Q,j,G,5),H.viewport.set([0,0,I.width,I.height])}(p,d),d.markSkyboxValid(p)):"sky"===p.renderPass&&function(I,L,V,Z,H){const U=I.context,K=U.gl,G=I.transform,Q=I.useProgram("skybox");U.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_CUBE_MAP,L.skyboxTexture);const j={u_matrix:G.skyboxMatrix,u_sun_direction:L.getCenter(I,!1),u_cubemap:0,u_opacity:Z,u_temporal_offset:H};I.prepareDrawProgram(U,Q),Q.draw(U,K.TRIANGLES,V,h.StencilMode.disabled,I.colorModeForRenderPass(),h.CullFaceMode.backCW,j,"skybox",L.skyboxGeometry.vertexBuffer,L.skyboxGeometry.indexBuffer,L.skyboxGeometry.segment)}(p,d,E,v,k):"gradient"===M&&"sky"===p.renderPass&&function(I,L,V,Z,H){const U=I.context,K=U.gl,G=I.transform,Q=I.useProgram("skyboxGradient");L.skyboxGeometry||(L.skyboxGeometry=new Su(U)),U.activeTexture.set(K.TEXTURE0);let j=L.colorRampTexture;j||(j=L.colorRampTexture=new h.Texture(U,L.colorRamp,K.RGBA)),j.bind(K.LINEAR,K.CLAMP_TO_EDGE);const ne=(J=G.skyboxMatrix,$=L.getCenter(I,!1),se=L.paint.get("sky-gradient-radius"),_e=Z,Ce=H,{u_matrix:J,u_color_ramp:0,u_center_direction:$,u_radius:h.degToRad(se),u_opacity:_e,u_temporal_offset:Ce});var J,$,se,_e,Ce;I.prepareDrawProgram(U,Q),Q.draw(U,K.TRIANGLES,V,h.StencilMode.disabled,I.colorModeForRenderPass(),h.CullFaceMode.backCW,ne,"skyboxGradient",L.skyboxGeometry.vertexBuffer,L.skyboxGeometry.indexBuffer,L.skyboxGeometry.segment)}(p,d,E,v,k)},debug:function(p,i,d){for(let m=0;m<d.length;m++)Oa(p,i,d[m])},custom:function(p,i,d){const m=p.context,y=d.implementation;if(p.transform.projection.unsupportedLayers&&p.transform.projection.unsupportedLayers.includes("custom"))h.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if("offscreen"===p.renderPass){const v=y.prerender;v&&(p.setCustomLayerDefaults(),m.setColorMode(p.colorModeForRenderPass()),v.call(y,m.gl,p.transform.customLayerMatrix()),m.setDirty(),p.setBaseState())}else if("translucent"===p.renderPass){p.setCustomLayerDefaults(),m.setColorMode(p.colorModeForRenderPass()),m.setStencilMode(h.StencilMode.disabled);const v="3d"===y.renderingMode?new h.DepthMode(p.context.gl.LEQUAL,h.DepthMode.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,h.DepthMode.ReadOnly);m.setDepthMode(v),y.render(m.gl,p.transform.customLayerMatrix()),m.setDirty(),p.setBaseState(),m.bindFramebuffer.set(null)}}};class Va{constructor(i,d){this.context=new Y(i),this.transform=d,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=h.SourceCache.maxUnderzooming+h.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Or,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(i,d){const m=!!i&&!!i.terrain&&this.transform.projection.supportsTerrain;if(!(m||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Xc(this,i));const y=this._terrain;this.transform.elevation=m?y:null,y.update(i,this.transform,d)}_updateFog(i){const d=i.fog;if(!d||"globe"===this.transform.projection.name||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[m,y]=d.getFovAdjustedRange(this.transform._fov);if(m>y)return void(this.transform.fogCullDistSq=null);const v=m+.78*(y-m);this.transform.fogCullDistSq=v*v}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(i,d){if(this.width=i*h.exported.devicePixelRatio,this.height=d*h.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style.order)this.style._layers[m].resize()}setup(){const i=this.context,d=new h.StructArrayLayout2i4;d.emplaceBack(0,0),d.emplaceBack(h.EXTENT,0),d.emplaceBack(0,h.EXTENT),d.emplaceBack(h.EXTENT,h.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(d,h.posAttributes.members),this.tileExtentSegments=h.SegmentVector.simpleSegment(0,0,4,2);const m=new h.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(h.EXTENT,0),m.emplaceBack(0,h.EXTENT),m.emplaceBack(h.EXTENT,h.EXTENT),this.debugBuffer=i.createVertexBuffer(m,h.posAttributes.members),this.debugSegments=h.SegmentVector.simpleSegment(0,0,4,5);const y=new h.StructArrayLayout2i4;y.emplaceBack(-1,-1),y.emplaceBack(1,-1),y.emplaceBack(-1,1),y.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(y,h.posAttributes.members),this.viewportSegments=h.SegmentVector.simpleSegment(0,0,4,2);const v=new h.StructArrayLayout4i8;v.emplaceBack(0,0,0,0),v.emplaceBack(h.EXTENT,0,h.EXTENT,0),v.emplaceBack(0,h.EXTENT,0,h.EXTENT),v.emplaceBack(h.EXTENT,h.EXTENT,h.EXTENT,h.EXTENT),this.mercatorBoundsBuffer=i.createVertexBuffer(v,h.boundsAttributes.members),this.mercatorBoundsSegments=h.SegmentVector.simpleSegment(0,0,4,2);const C=new h.StructArrayLayout3ui6;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(C);const M=new h.StructArrayLayout1ui2;for(const k of[0,1,3,2,0])M.emplaceBack(k);this.debugIndexBuffer=i.createIndexBuffer(M),this.emptyTexture=new h.Texture(i,new h.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),i.gl.RGBA),this.identityMat=h.create();const E=this.context.gl;this.stencilClearMode=new h.StencilMode({func:E.ALWAYS,mask:0},0,255,E.ZERO,E.ZERO,E.ZERO),this.loadTimeStamps.push(h.window.performance.now()),this.atmosphereBuffer=new lp(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(i){return i._makeTileBoundsBuffers(this.context,this.transform.projection),i._tileBoundsBuffer?{tileBoundsBuffer:i._tileBoundsBuffer,tileBoundsIndexBuffer:i._tileBoundsIndexBuffer,tileBoundsSegments:i._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const i=this.context,d=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(i,d.TRIANGLES,h.DepthMode.disabled,this.stencilClearMode,h.ColorMode.disabled,h.CullFaceMode.disabled,Nr(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(i,d,m){if(!d||this.currentStencilSource===d.id||!i.isTileClipped()||!m||0===m.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let M=!1;for(const E of m)if(void 0===this._tileClippingMaskIDs[E.key]){M=!0;break}if(!M)return}this.currentStencilSource=d.id;const y=this.context,v=y.gl;this.nextStencilID+m.length>256&&this.clearStencil(),y.setColorMode(h.ColorMode.disabled),y.setDepthMode(h.DepthMode.disabled);const C=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const M of m){const E=d.getTile(M),k=this._tileClippingMaskIDs[M.key]=this.nextStencilID++,{tileBoundsBuffer:I,tileBoundsIndexBuffer:L,tileBoundsSegments:V}=this.getTileBoundsBuffers(E);C.draw(y,v.TRIANGLES,h.DepthMode.disabled,new h.StencilMode({func:v.ALWAYS,mask:0},k,255,v.KEEP,v.KEEP,v.REPLACE),h.ColorMode.disabled,h.CullFaceMode.disabled,Nr(M.projMatrix),"$clipping",I,L,V)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,d=this.context.gl;return new h.StencilMode({func:d.NOTEQUAL,mask:255},i,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(i){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(i);const d=this.context.gl;return new h.StencilMode({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(i){const d=this.context.gl,m=i.sort((C,M)=>M.overscaledZ-C.overscaledZ),y=m[m.length-1].overscaledZ,v=m[0].overscaledZ-y+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const C={};for(let M=0;M<v;M++)C[M+y]=new h.StencilMode({func:d.GEQUAL,mask:255},M+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=v,[C,m]}return[{[y]:h.StencilMode.disabled},m]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new h.ColorMode([i.CONSTANT_COLOR,i.ONE],new h.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?h.ColorMode.unblended:h.ColorMode.alphaBlended}depthModeForSublayer(i,d,m){if(!this.opaquePassEnabledForLayer())return h.DepthMode.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new h.DepthMode(m||this.context.gl.LEQUAL,d,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,d){this.style=i,this.options=d,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(h.exported.now()),this.imageManager.beginFrame();const m=this.style.order,y=this.style._sourceCaches;for(const E in y){const k=y[E];k.used&&k.prepare(this.context)}const v={},C={},M={};for(const E in y){const k=y[E];v[E]=k.getVisibleCoordinates(),C[E]=v[E].slice().reverse(),M[E]=k.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let E=0;E<m.length;E++)if(this.style._layers[m[E]].is3D()){this.opaquePassCutoff=E;break}if(this.terrain&&(this.terrain.updateTileBinding(M),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new h.GlobeSharedBuffers(this.context)),h.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const E of m){const k=this.style._layers[E],I=i._getLayerSourceCache(k);if(!k.hasOffscreenPass()||k.isHidden(this.transform.zoom))continue;const L=I?C[I.id]:void 0;("custom"===k.type||k.isSky()||L&&L.length)&&this.renderLayer(this,I,k,L)}if(this.depthRangeFor3D=[0,1-(i.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:d.showOverdrawInspector?h.Color.black:h.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const E=this.style._layers[m[this.currentLayer]],k=i._getLayerSourceCache(E);if(E.isSky())continue;const I=k?C[k.id]:void 0;this._renderTileClippingMasks(E,k,I),this.renderLayer(this,k,E,I)}if(this.style.fog&&this.transform.projection.supportsFog&&function(E,k){const I=E.context,L=I.gl,V=E.transform,Z=new h.DepthMode(L.LEQUAL,h.DepthMode.ReadOnly,[0,1]),H=E.useProgram("globeAtmosphere",null,"globe"===V.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),U=h.globeToMercatorTransition(V.zoom),K=k.properties.get("color").toArray01(),G=k.properties.get("high-color").toArray01(),Q=k.properties.get("space-color").toArray01PremultipliedAlpha(),j=h.identity$1([]);h.rotateY$1(j,j,-h.degToRad(V._center.lng)),h.rotateX$1(j,j,h.degToRad(V._center.lat)),h.rotateZ$1(j,j,V.angle),h.rotateX$1(j,j,-V._pitch);const ne=h.fromQuat(new Float32Array(16),j),J=h.mapValue(k.properties.get("star-intensity"),0,1,0,.25),$=5e-4,se=h.mapValue(k.properties.get("horizon-blend"),0,1,$,.25),_e=h.globeUseCustomAntiAliasing(E,I,V)&&se===$?V.worldSize/(2*Math.PI*1.025)-1:V.globeRadius,Ce=E.frameCounter/1e3%1,ve=h.length(V.globeCenterInViewSpace),Le=Math.sqrt(Math.pow(ve,2)-Math.pow(_e,2)),ie=Math.acos(Le/ve),ge={u_frustum_tl:V.frustumCorners.TL,u_frustum_tr:V.frustumCorners.TR,u_frustum_br:V.frustumCorners.BR,u_frustum_bl:V.frustumCorners.BL,u_horizon:V.frustumCorners.horizon,u_transition:U,u_fadeout_range:se,u_color:K,u_high_color:G,u_space_color:Q,u_star_intensity:J,u_star_size:5*h.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Ce,u_horizon_angle:ie,u_rotation_matrix:ne};E.prepareDrawProgram(I,H);const Ee=E.atmosphereBuffer;Ee&&H.draw(I,L.TRIANGLES,Z,h.StencilMode.disabled,h.ColorMode.alphaBlended,h.CullFaceMode.backCW,ge,"skybox",Ee.vertexBuffer,Ee.indexBuffer,Ee.segments)}(this,this.style.fog),this.renderPass="sky",(h.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const E=this.style._layers[m[this.currentLayer]],k=i._getLayerSourceCache(E);E.isSky()&&this.renderLayer(this,k,E,k?C[k.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;){const E=this.style._layers[m[this.currentLayer]],k=i._getLayerSourceCache(E);if(E.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(E)){if(E.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const I=k?("symbol"===E.type?M:C)[k.id]:void 0;this._renderTileClippingMasks(E,k,k?v[k.id]:void 0),this.renderLayer(this,k,E,I),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let E=null;h.values(this.style._layers).forEach(k=>{const I=i._getLayerSourceCache(k);I&&!k.isHidden(this.transform.zoom)&&(!E||E.getSource().maxzoom<I.getSource().maxzoom)&&(E=I)}),E&&this.options.showTileBoundaries&&Yl.debug(this,E,E.getVisibleCoordinates())}this.options.showPadding&&function(E){const k=E.transform.padding;Vs(E,E.transform.height-(k.top||0),3,Hr),Vs(E,k.bottom||0,3,Ia),Ra(E,k.left||0,3,Fa),Ra(E,E.transform.width-(k.right||0),3,kn);const I=E.transform.centerPoint;var L,V,Z,H;Et(L=E,(V=I.x)-1,(Z=E.transform.height-I.y)-10,2,20,H=La),Et(L,V-10,Z-1,20,2,H)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(h.window.performance.now()),this.saveCanvasCopy())}}renderLayer(i,d,m,y){m.isHidden(this.transform.zoom)||("background"===m.type||"sky"===m.type||"custom"===m.type||y&&y.length)&&(this.id=m.id,this.gpuTimingStart(m),i.transform.projection.unsupportedLayers&&i.transform.projection.unsupportedLayers.includes(m.type)||Yl[m.type](i,d,m,y,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;let m=this.gpuTimers[i.id];m||(m=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:d.createQueryEXT()}),m.calls++,d.beginQueryEXT(d.TIME_ELAPSED_EXT,m.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const i=this.context.extTimerQuery,d=i.createQueryEXT();this.deferredRenderGpuTimeQueries.push(d),i.beginQueryEXT(i.TIME_ELAPSED_EXT,d)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}collectDeferredRenderGpuQueries(){const i=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],i}queryGpuTimers(i){const d={};for(const m in i){const y=i[m],v=this.context.extTimerQuery,C=v.getQueryObjectEXT(y.query,v.QUERY_RESULT_EXT)/1e6;v.deleteQueryEXT(y.query),d[m]=C}return d}queryGpuTimeDeferredRender(i){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.extTimerQuery;let m=0;for(const y of i)m+=d.getQueryObjectEXT(y,d.QUERY_RESULT_EXT)/1e6,d.deleteQueryEXT(y);return m}translatePosMatrix(i,d,m,y,v){if(!m[0]&&!m[1])return i;const C=v?"map"===y?this.transform.angle:0:"viewport"===y?-this.transform.angle:0;if(C){const k=Math.sin(C),I=Math.cos(C);m=[m[0]*I-m[1]*k,m[0]*k+m[1]*I]}const M=[v?m[0]:Fo(d,m[0],this.transform.zoom),v?m[1]:Fo(d,m[1],this.transform.zoom),0],E=new Float32Array(16);return h.translate(E,i,M),E}saveTileTexture(i){const d=this._tileTextures[i.size[0]];d?d.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const d=this._tileTextures[i];return d&&d.length>0?d.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const d=this.imageManager.getPattern(i.from.toString()),m=this.imageManager.getPattern(i.to.toString());return!d||!m}currentGlobalDefines(){const i=this.terrain&&this.terrain.renderingToTexture,d=this.style&&this.style.fog,m=[];return this.terrain&&!this.terrain.renderingToTexture&&m.push("TERRAIN"),d&&!i&&0!==d.getOpacity(this.transform.pitch)&&m.push("FOG"),i&&m.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&m.push("OVERDRAW_INSPECTOR"),m}useProgram(i,d,m){this.cache=this.cache||{};const y=m||[],v=this.currentGlobalDefines().concat(y),C=Ol.cacheKey(i,v,d);return this.cache[C]||(this.cache[C]=new Ol(this.context,i,dr[i],d,sp[i],v)),this.cache[C]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=h.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new h.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(i,d,m){if(this.terrain&&this.terrain.renderingToTexture)return;const y=this.style.fog;if(y){const v=y.getOpacity(this.transform.pitch),C=((M,E,k,I,L,V,Z,H,U,K,G)=>{const Q=M.transform,j=E.properties.get("color").toArray01();j[3]=I;const ne=M.frameCounter/1e3%1;return{u_fog_matrix:k?Q.calculateFogTileMatrix(k):M.identityMat,u_fog_range:E.getFovAdjustedRange(Q._fov),u_fog_color:j,u_fog_horizon_blend:E.properties.get("horizon-blend"),u_fog_temporal_offset:ne,u_frustum_tl:L,u_frustum_tr:V,u_frustum_br:Z,u_frustum_bl:H,u_globe_pos:U,u_globe_radius:K,u_viewport:G,u_globe_transition:h.globeToMercatorTransition(Q.zoom),u_is_globe:+("globe"===Q.projection.name)}})(this,y,m,v,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*h.exported.devicePixelRatio,this.transform.height*h.exported.devicePixelRatio]);d.setFogUniformValues(i,C)}}setTileLoadedFlag(i){this.tileLoaded=i}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const i=this.context.gl,d=i.createTexture();return i.bindTexture(i.TEXTURE_2D,d),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,i.drawingBufferWidth,i.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const i=this.style&&this.style.fog;return!!i&&0!==i.getOpacity(this.transform.pitch)}getBackgroundTiles(){const i=this._backgroundTiles,d=this._backgroundTiles={},m=this.transform.coveringTiles({tileSize:512});for(const y of m)d[y.key]=i[y.key]||new h.Tile(y,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}}class qr{constructor(i=0,d=0,m=0,y=0){if(isNaN(i)||i<0||isNaN(d)||d<0||isNaN(m)||m<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=d,this.left=m,this.right=y}interpolate(i,d,m){return null!=d.top&&null!=i.top&&(this.top=h.number(i.top,d.top,m)),null!=d.bottom&&null!=i.bottom&&(this.bottom=h.number(i.bottom,d.bottom,m)),null!=d.left&&null!=i.left&&(this.left=h.number(i.left,d.left,m)),null!=d.right&&null!=i.right&&(this.right=h.number(i.right,d.right,m)),this}getCenter(i,d){const m=h.clamp((this.left+i-this.right)/2,0,i),y=h.clamp((this.top+d-this.bottom)/2,0,d);return new h.pointGeometry(m,y)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new qr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ql(p,i){const d=h.getColumn(p,3);h.fromQuat(p,i),h.setColumn(p,3,d)}function Na(p,i){const d=h.identity$1([]);return h.rotateZ$1(d,d,-i),h.rotateX$1(d,d,-p),d}function Ns(p,i){const d=[p[0],p[1],0],m=[i[0],i[1],0];if(h.length(d)>=1e-15){const C=h.normalize([],d);h.scale$2(m,C,h.dot(m,C)),i[0]=m[0],i[1]=m[1]}const y=h.cross([],i,p);if(h.len(y)<1e-15)return null;const v=Math.atan2(-y[1],y[0]);return Na(Math.atan2(Math.sqrt(p[0]*p[0]+p[1]*p[1]),-p[2]),v)}class ni{constructor(i,d){this.position=i,this.orientation=d}get position(){return this._position}set position(i){if(i){const d=i instanceof h.MercatorCoordinate?i:new h.MercatorCoordinate(i[0],i[1],i[2]);this._renderWorldCopies&&(d.x=h.wrap(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(i,d){if(this.orientation=null,!this.position)return;const m=this._elevation?this._elevation.getAtPointOrZero(h.MercatorCoordinate.fromLngLat(i)):0,y=this.position,v=h.MercatorCoordinate.fromLngLat(i,m),C=[v.x-y.x,v.y-y.y,v.z-y.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=Ns(C,d)}setPitchBearing(i,d){this.orientation=Na(h.degToRad(i),h.degToRad(-d))}}class Ua{constructor(i,d){this._transform=h.identity([]),this.orientation=d,this.position=i}get mercatorPosition(){const i=this.position;return new h.MercatorCoordinate(i[0],i[1],i[2])}get position(){const i=h.getColumn(this._transform,3);return[i[0],i[1],i[2]]}set position(i){var d;i&&h.setColumn(this._transform,3,[(d=i)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(i){this._orientation=i||h.identity$1([]),i&&Ql(this._transform,this._orientation)}getPitchBearing(){const i=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(i[0]*i[0]+i[1]*i[1]),-i[2])}}setPitchBearing(i,d){this._orientation=Na(i,d),Ql(this._transform,this._orientation)}forward(){const i=h.getColumn(this._transform,2);return[-i[0],-i[1],-i[2]]}up(){const i=h.getColumn(this._transform,1);return[-i[0],-i[1],-i[2]]}right(){const i=h.getColumn(this._transform,0);return[i[0],i[1],i[2]]}getCameraToWorld(i,d){const m=new Float64Array(16);return h.invert(m,this.getWorldToCamera(i,d)),m}getWorldToCameraPosition(i,d,m){const y=this.position;h.scale$2(y,y,-i);const v=new Float64Array(16);return h.fromScaling(v,[m,m,m]),h.translate(v,v,y),v[10]*=d,v}getWorldToCamera(i,d){const m=new Float64Array(16),y=new Float64Array(4),v=this.position;return h.conjugate(y,this._orientation),h.scale$2(v,v,-i),h.fromQuat(m,y),h.translate(m,m,v),m[1]*=-1,m[5]*=-1,m[9]*=-1,m[13]*=-1,m[8]*=d,m[9]*=d,m[10]*=d,m[11]*=d,m}getCameraToClipPerspective(i,d,m,y){const v=new Float64Array(16);return h.perspective(v,i,d,m,y),v}getDistanceToElevation(i){const d=0===i?0:h.mercatorZfromAltitude(i,this.position[1]),m=this.forward();return(d-this.position[2])/m[2]}clone(){return new Ua([...this.position],[...this.orientation])}}function Xe(p,i){const d=Ho(p.projection,p.zoom,p.width,p.height),m=function(v,C,M,E,k){const I=new h.LngLat(M.lng-180*mo,M.lat),L=new h.LngLat(M.lng+180*mo,M.lat),V=v.project(I.lng,I.lat),Z=v.project(L.lng,L.lat),H=-Math.atan2(Z.y-V.y,Z.x-V.x),U=h.MercatorCoordinate.fromLngLat(M);U.y=h.clamp(U.y,-.999975,.999975);const K=U.toLngLat(),G=v.project(K.lng,K.lat),Q=h.MercatorCoordinate.fromLngLat(K);Q.x+=mo;const j=Q.toLngLat(),ne=v.project(j.lng,j.lat),J=ur(ne.x-G.x,ne.y-G.y,H),$=h.MercatorCoordinate.fromLngLat(K);$.y+=mo;const se=$.toLngLat(),_e=v.project(se.lng,se.lat),Ce=ur(_e.x-G.x,_e.y-G.y,H),ve=Math.abs(J.x)/Math.abs(Ce.y),Le=h.identity([]);h.rotateZ(Le,Le,-H*(1-(k?0:E)));const ie=h.identity([]);return h.scale(ie,ie,[1,1-(1-ve)*E,1]),ie[4]=-Ce.x/Ce.y*E,h.rotateZ(ie,ie,H),h.multiply(ie,Le,ie),ie}(p.projection,0,p.center,d,i),y=Gn(p);return h.scale(m,m,[y,y,1]),m}function Gn(p){const i=p.projection,d=Ho(p.projection,p.zoom,p.width,p.height),m=go(i,p.center),y=go(i,h.LngLat.convert(i.center));return Math.pow(2,m*d+(1-d)*y)}function Ho(p,i,d,m,y=1/0){const v=p.range;if(!v)return 0;const C=Math.min(y,Math.max(d,m)),M=Math.log(C/1024)/Math.LN2;return h.smoothstep(v[0]+M,v[1]+M,i)}const mo=1/4e4;function go(p,i){const d=h.clamp(i.lat,-h.MAX_MERCATOR_LATITUDE,h.MAX_MERCATOR_LATITUDE),m=new h.LngLat(i.lng-180*mo,d),y=new h.LngLat(i.lng+180*mo,d),v=p.project(m.lng,d),C=p.project(y.lng,d),M=h.MercatorCoordinate.fromLngLat(m),E=h.MercatorCoordinate.fromLngLat(y),k=C.x-v.x,I=C.y-v.y,L=E.x-M.x,V=E.y-M.y,Z=Math.sqrt((L*L+V*V)/(k*k+I*I));return Math.log(Z)/Math.LN2}function ur(p,i,d){const m=Math.cos(d),y=Math.sin(d);return{x:p*m-i*y,y:p*y+i*m}}class Wl{constructor(i,d,m,y,v,C,M){this.tileSize=512,this._renderWorldCopies=void 0===v||v,this._minZoom=i||0,this._maxZoom=d||22,this._minPitch=null==m?0:m,this._maxPitch=null==y?60:y,this.setProjection(C),this.setMaxBounds(M),this.width=0,this.height=0,this._center=new h.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new qr,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Ua,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._projectionScaler=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const i=new Wl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return i._elevation=this._elevation,i._centerAltitude=this._centerAltitude,i._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,i.tileSize=this.tileSize,i.width=this.width,i.height=this.height,i.cameraElevationReference=this.cameraElevationReference,i._center=this._center,i._setZoom(this.zoom),i._seaLevelZoom=this._seaLevelZoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._nearZ=this._nearZ,i._farZ=this._farZ,i._averageElevation=this._averageElevation,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._camera=this._camera.clone(),i._calcMatrices(),i.freezeTileCoverage=this.freezeTileCoverage,i.frustumCorners=this.frustumCorners,i}get elevation(){return this._elevation}set elevation(i){this._elevation!==i&&(this._elevation=i,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(i){const d=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||d)&&this._updateCameraOnTerrain(),(i||d)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return h.pick(this.projection,["name","center","parallels"])}setProjection(i){this.projectionOptions=i||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=h.getProjection(this.projectionOptions);const m=!Oe(d,this.getProjection());return m&&this._calcMatrices(),m}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(i){void 0===i?i=!0:null===i&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return h.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new h.pointGeometry(this.width,this.height)}get bearing(){return h.wrap(this.rotation,-180,180)}set bearing(i){this.rotation=i}get rotation(){return-this.angle/Math.PI*180}set rotation(i){const d=-i*Math.PI/180;var m,y,v,C,M,E,k,I,L,V;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(m=new h.ARRAY_TYPE(4),h.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m),y=this.rotationMatrix,C=this.angle,M=(v=this.rotationMatrix)[0],E=v[1],k=v[2],I=v[3],L=Math.sin(C),V=Math.cos(C),y[0]=M*V+k*L,y[1]=E*V+I*L,y[2]=M*-L+k*V,y[3]=E*-L+I*V)}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const d=h.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(i){this._averageElevation=i,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(i){const d=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(i){this._zoom=i,this.scale=this.zoomScale(i),this.tileZoom=Math.floor(i),this.zoomFraction=i-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const i=this._elevation;this._centerAltitude=i.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=i.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const i=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],m=this.horizonLineFromTop();let y=0,v=0;for(let C=0;C<d.length;C++){const M=new h.pointGeometry(d[C][0]*this.width,m+d[C][1]*(this.height-m)),E=i.pointCoordinate(M);if(!E)continue;const k=1/Math.hypot(E[0]-this._camera.position[0],E[1]-this._camera.position[1]);y+=E[3]*k,v+=k}return 0===v?NaN:y/v}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const i=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),m=this.pixelsPerMeter/this.worldSize*d,y=this._mercatorZfromZoom(i),v=this._mercatorZfromZoom(this._maxZoom),C=Math.max(y-m,v);this._setZoom(this._zoomFromMercatorZ(C))}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}computeZoomRelativeTo(i){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,i.toAltitude()));let m;m=i.z<this._camera.position[2]?[d.x,d.y,d.z]:[i.x,i.y,i.z];const y=h.length(h.sub([],this._camera.position,m));return h.clamp(this._zoomFromMercatorZ(y),this._minZoom,this._maxZoom)}setFreeCameraOptions(i){if(!this.height||!i.position&&!i.orientation)return;this._updateCameraState();let d=!1;if(i.orientation&&!h.exactEquals(i.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(i.orientation)),i.position){const m=[i.position.x,i.position.y,i.position.z];h.exactEquals$1(m,this._camera.position)||(this._setCameraPosition(m),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const i=this._camera.position,d=new ni;return d.position=new h.MercatorCoordinate(i[0],i[1],i[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(i){if(!h.length$1(i))return!1;h.normalize$1(i,i);const d=h.transformQuat([],[0,0,-1],i),m=h.transformQuat([],[0,-1,0],i);if(m[2]<0)return!1;const y=Ns(d,m);return!!y&&(this._camera.orientation=y,!0)}_setCameraPosition(i){const d=this.zoomScale(this.minZoom)*this.tileSize,m=this.zoomScale(this.maxZoom)*this.tileSize,y=this.cameraToCenterDistance;i[2]=h.clamp(i[2],y/m,y/d),this._camera.position=i}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,d,m){this._unmodified=!1,this._edgeInsets.interpolate(i,d,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const d=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(i){const d=[new h.UnwrappedTileID(0,i)];if(this.renderWorldCopies){const m=this.pointCoordinate(new h.pointGeometry(0,0)),y=this.pointCoordinate(new h.pointGeometry(this.width,0)),v=this.pointCoordinate(new h.pointGeometry(this.width,this.height)),C=this.pointCoordinate(new h.pointGeometry(0,this.height)),M=Math.floor(Math.min(m.x,y.x,v.x,C.x)),E=Math.floor(Math.max(m.x,y.x,v.x,C.x)),k=1;for(let I=M-k;I<=E+k;I++)0!==I&&d.push(new h.UnwrappedTileID(I,i))}return d}coveringTiles(i){let d=this.coveringZoomLevel(i);const m=d,y=this.elevation&&!i.isTerrainDEM,v="mercator"===this.projection.name;if(void 0!==i.minzoom&&d<i.minzoom)return[];void 0!==i.maxzoom&&d>i.maxzoom&&(d=i.maxzoom);const C=this.locationCoordinate(this.center),M=this.center.lat,E=1<<d,k=[E*C.x,E*C.y,0],I="globe"===this.projection.name,L=!I,V=h.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,L),Z=I?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),H=E*h.mercatorZfromAltitude(1,this.center.lat),U=this._camera.position[2]/h.mercatorZfromAltitude(1,this.center.lat),K=[E*Z.x,E*Z.y,U*(L?1:H)],G=this.cameraToCenterDistance/i.tileSize*(i.roundZoom?1:.502),Q=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?d:0,j=i.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ne=i.isTerrainDEM?-j:this._elevation?this._elevation.getMinElevationBelowMSL():0,J=this.projection.isReprojectedInTileSpace?Gn(this):1,$=Me=>{const Ve=new h.MercatorCoordinate(Me.x+25e-6,Me.y,Me.z),je=new h.MercatorCoordinate(Me.x,Me.y+25e-6,Me.z),Ge=Me.toLngLat(),Ne=Ve.toLngLat(),Ye=je.toLngLat(),lt=this.locationCoordinate(Ge),ut=this.locationCoordinate(Ne),tt=this.locationCoordinate(Ye),dt=Math.hypot(ut.x-lt.x,ut.y-lt.y),Ht=Math.hypot(tt.x-lt.x,tt.y-lt.y);return Math.sqrt(dt*Ht)*J/25e-6},se=Me=>{const ze=j,Ve=ne;return{aabb:h.tileAABB(this,E,0,0,0,Me,Ve,ze,this.projection),zoom:0,x:0,y:0,minZ:Ve,maxZ:ze,wrap:Me,fullyVisible:!1}},_e=[];let Ce=[];const ve=d,Le=i.reparseOverscaled?m:d,ie=Me=>Me*Me,ge=ie((U-this._centerAltitude)*H),Ee=Me=>{if(!this._elevation||!Me.tileID||!v)return;const ze=this._elevation.getMinMaxForTile(Me.tileID),Ve=Me.aabb;ze?(Ve.min[2]=ze.min,Ve.max[2]=ze.max,Ve.center[2]=(Ve.min[2]+Ve.max[2])/2):(Me.shouldSplit=Ze(Me),Me.shouldSplit||(Ve.min[2]=Ve.max[2]=Ve.center[2]=this._centerAltitude))},Ze=Me=>{if(Me.zoom<Q)return!0;if(Me.zoom===ve)return!1;if(null!=Me.shouldSplit)return Me.shouldSplit;const ze=Me.aabb.distanceX(K),Ve=Me.aabb.distanceY(K);let je=ge,Ge=1;if(I){je=ie(Me.aabb.distanceZ(K));const Ye=Math.pow(2,Me.zoom),lt=h.latFromMercatorY((Me.y+1)/Ye),ut=h.latFromMercatorY(Me.y/Ye),tt=Math.min(Math.max(M,lt),ut),dt=h.circumferenceAtLatitude(tt)/h.circumferenceAtLatitude(M);if(Ge=tt===M?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,dt/this._mercatorScaleRatio),this.zoom<=h.GLOBE_ZOOM_THRESHOLD_MIN&&Me.zoom===ve-1&&dt>=.9)return!0}else if(y&&(je=ie(Me.aabb.distanceZ(K)*H)),this.projection.isReprojectedInTileSpace&&m<=5){const Ye=Math.pow(2,Me.zoom),lt=$(new h.MercatorCoordinate((Me.x+.5)/Ye,(Me.y+.5)/Ye));Ge=lt>.85?1:lt}const Ne=ze*ze+Ve*Ve+je;return Ne<ie((1<<ve-Me.zoom)*G*Ge*((Ye,lt)=>{if(lt*ie(.707)<Ye)return 1;const ut=Math.sqrt(lt/Ye);return ut/(1.4144271570014144+(Math.pow(1.1,ut-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(je,ge),Ne))};if(this.renderWorldCopies)for(let Me=1;Me<=3;Me++)_e.push(se(-Me)),_e.push(se(Me));for(_e.push(se(0));_e.length>0;){const Me=_e.pop(),ze=Me.x,Ve=Me.y;let je=Me.fullyVisible;if(!je){const Ge=Me.aabb.intersects(V);if(0===Ge)continue;je=2===Ge}if(Me.zoom!==ve&&Ze(Me))for(let Ge=0;Ge<4;Ge++){const Ne=(ze<<1)+Ge%2,Ye=(Ve<<1)+(Ge>>1),lt={aabb:v?Me.aabb.quadrant(Ge):h.tileAABB(this,E,Me.zoom+1,Ne,Ye,Me.wrap,Me.minZ,Me.maxZ,this.projection),zoom:Me.zoom+1,x:Ne,y:Ye,wrap:Me.wrap,fullyVisible:je,tileID:void 0,shouldSplit:void 0,minZ:Me.minZ,maxZ:Me.maxZ};y&&!I&&(lt.tileID=new h.OverscaledTileID(Me.zoom+1===ve?Le:Me.zoom+1,Me.wrap,Me.zoom+1,Ne,Ye),Ee(lt)),_e.push(lt)}else{const Ge=Me.zoom===ve?Le:Me.zoom;if(i.minzoom&&i.minzoom>Ge)continue;const Ne=k[0]-(.5+ze+(Me.wrap<<Me.zoom))*(1<<d-Me.zoom),Ye=k[1]-.5-Ve,lt=Me.tileID?Me.tileID:new h.OverscaledTileID(Ge,Me.wrap,Me.zoom,ze,Ve);Ce.push({tileID:lt,distanceSq:Ne*Ne+Ye*Ye})}}if(this.fogCullDistSq){const Me=this.fogCullDistSq,ze=this.horizonLineFromTop();Ce=Ce.filter(Ve=>{const je=[0,0,0,1],Ge=[h.EXTENT,h.EXTENT,0,1],Ne=this.calculateFogTileMatrix(Ve.tileID.toUnwrapped());h.transformMat4$1(je,je,Ne),h.transformMat4$1(Ge,Ge,Ne);const Ye=h.getAABBPointSquareDist(je,Ge);if(0===Ye)return!0;let lt=!1;const ut=this._elevation;if(ut&&Ye>Me&&0!==ze){const tt=this.calculateProjMatrix(Ve.tileID.toUnwrapped());let dt;i.isTerrainDEM||(dt=ut.getMinMaxForTile(Ve.tileID)),dt||(dt={min:ne,max:j});const Ht=h.furthestTileCorner(this.rotation),Kt=[Ht[0]*h.EXTENT,Ht[1]*h.EXTENT,dt.max];h.transformMat4(Kt,Kt,tt),lt=(1-Kt[1])*this.height*.5<ze}return Ye<Me||lt})}return Ce.sort((Me,ze)=>Me.distanceSq-ze.distanceSq).map(Me=>Me.tileID)}resize(i,d){this.width=i,this.height=d,this.pixelsToGLUnits=[2/i,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const d=h.clamp(i.lat,-h.MAX_MERCATOR_LATITUDE,h.MAX_MERCATOR_LATITUDE),m=this.projection.project(i.lng,d);return new h.pointGeometry(m.x*this.worldSize,m.y*this.worldSize)}unproject(i){return this.projection.unproject(i.x/this.worldSize,i.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(i,d){let m,y;const v=this.centerPoint;if("globe"===this.projection.name){const M=this.worldSize;m=(d.x-v.x)/M,y=(d.y-v.y)/M}else{const M=this.pointCoordinate(d),E=this.pointCoordinate(v);m=M.x-E.x,y=M.y-E.y}const C=this.locationCoordinate(i);this.setLocation(new h.MercatorCoordinate(C.x-m,C.y-y))}setLocation(i){this.center=this.coordinateLocation(i),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(i){return this.projection.locationPoint(this,i)}locationPoint3D(i){return this.projection.locationPoint(this,i,!0)}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}pointLocation3D(i){return this.coordinateLocation(this.pointCoordinate3D(i))}locationCoordinate(i,d){const m=d?h.mercatorZfromAltitude(d,i.lat):void 0,y=this.projection.project(i.lng,i.lat);return new h.MercatorCoordinate(y.x,y.y,m)}coordinateLocation(i){return this.projection.unproject(i.x,i.y)}pointRayIntersection(i,d){const m=null!=d?d:this._centerAltitude,y=[i.x,i.y,0,1],v=[i.x,i.y,1,1];h.transformMat4$1(y,y,this.pixelMatrixInverse),h.transformMat4$1(v,v,this.pixelMatrixInverse);const C=v[3];h.scale$1(y,y,1/y[3]),h.scale$1(v,v,1/C);const M=y[2],E=v[2];return{p0:y,p1:v,t:M===E?0:(m-M)/(E-M)}}screenPointToMercatorRay(i){const d=[i.x,i.y,0,1],m=[i.x,i.y,1,1];return h.transformMat4$1(d,d,this.pixelMatrixInverse),h.transformMat4$1(m,m,this.pixelMatrixInverse),h.scale$1(d,d,1/d[3]),h.scale$1(m,m,1/m[3]),d[2]=h.mercatorZfromAltitude(d[2],this._center.lat)*this.worldSize,m[2]=h.mercatorZfromAltitude(m[2],this._center.lat)*this.worldSize,h.scale$1(d,d,1/this.worldSize),h.scale$1(m,m,1/this.worldSize),new h.Ray([d[0],d[1],d[2]],h.normalize([],h.sub([],m,d)))}rayIntersectionCoordinate(i){const{p0:d,p1:m,t:y}=i,v=h.mercatorZfromAltitude(d[2],this._center.lat),C=h.mercatorZfromAltitude(m[2],this._center.lat);return new h.MercatorCoordinate(h.number(d[0],m[0],y)/this.worldSize,h.number(d[1],m[1],y)/this.worldSize,h.number(v,C,y))}pointCoordinate(i,d=this._centerAltitude){return this.projection.pointCoordinate(this,i.x,i.y,d)}pointCoordinate3D(i){if(!this.elevation)return this.pointCoordinate(i);let d=this.projection.pointCoordinate3D(this,i.x,i.y);if(d)return new h.MercatorCoordinate(d[0],d[1],d[2]);let m=0,y=this.horizonLineFromTop();if(i.y>y)return this.pointCoordinate(i);const v=.02*y,C=i.clone();for(let M=0;M<10&&y-m>v;M++){C.y=h.number(m,y,.66);const E=this.projection.pointCoordinate3D(this,C.x,C.y);E?(y=C.y,d=E):m=C.y}return d?new h.MercatorCoordinate(d[0],d[1],d[2]):this.pointCoordinate(i)}isPointAboveHorizon(i){return this.projection.isPointAboveHorizon(this,i)}_coordinatePoint(i,d){const m=d&&this.elevation?this.elevation.getAtPointOrZero(i,this._centerAltitude):this._centerAltitude,y=[i.x*this.worldSize,i.y*this.worldSize,m+i.toAltitude(),1];return h.transformMat4$1(y,y,this.pixelMatrix),y[3]>0?new h.pointGeometry(y[0]/y[3],y[1]/y[3]):new h.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(i,d){const m=new h.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),y=new h.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),v=new h.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),C=new h.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let M=this.pointCoordinate(m,i),E=this.pointCoordinate(y,i);const k=this.pointCoordinate(v,d),I=this.pointCoordinate(C,d),L=(V,Z)=>(Z.y-V.y)/(Z.x-V.x);return M.y>1&&E.y>=0?M=new h.MercatorCoordinate((1-I.y)/L(I,M)+I.x,1):M.y<0&&E.y<=1&&(M=new h.MercatorCoordinate(-I.y/L(I,M)+I.x,0)),E.y>1&&M.y>=0?E=new h.MercatorCoordinate((1-k.y)/L(k,E)+k.x,1):E.y<0&&M.y<=1&&(E=new h.MercatorCoordinate(-k.y/L(k,E)+k.x,0)),(new h.LngLatBounds).extend(this.coordinateLocation(M)).extend(this.coordinateLocation(E)).extend(this.coordinateLocation(I)).extend(this.coordinateLocation(k))}_getBounds3D(){const i=this.elevation;if(!i.visibleDemTiles.length)return this._getBounds(0,0);const d=i.visibleDemTiles.reduce((m,y)=>{if(y.dem){const v=y.dem.tree;m.min=Math.min(m.min,v.minimums[0]),m.max=Math.max(m.max,v.maximums[0])}return m},{min:Number.MAX_VALUE,max:0});return this._getBounds(d.min*i.exaggeration(),d.max*i.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(i=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,m=this.height/2-d*(1-this._horizonShift);return i?Math.max(0,m):m}getMaxBounds(){return this.maxBounds}setMaxBounds(i){this.maxBounds=i,this.minLat=-h.MAX_MERCATOR_LATITUDE,this.maxLat=h.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,i&&(this.minLat=i.getSouth(),this.maxLat=i.getNorth(),this.minLng=i.getWest(),this.maxLng=i.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=h.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=h.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=h.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=h.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(i,d){return this.projection.createTileMatrix(this,d,i)}calculateDistanceTileData(i){const d=i.key,m=this._distanceTileDataCache;if(m[d])return m[d];const y=i.canonical,v=1/this.height,C=this.cameraWorldSize/this.zoomScale(y.z),M=(y.x+Math.pow(2,y.z)*i.wrap)*C,E=y.y*C,k=this.point,I=this.angle,L=Math.sin(-I),V=-Math.cos(-I);return m[d]={bearing:[L,V],center:[(k.x-M)*v,(k.y-E)*v],scale:C/h.EXTENT*v},m[d]}calculateFogTileMatrix(i){const d=i.key,m=this._fogTileMatrixCache;if(m[d])return m[d];const y=this.projection.createTileMatrix(this,this.cameraWorldSize,i);return h.multiply(y,this.worldToFogMatrix,y),m[d]=new Float32Array(y),m[d]}calculateProjMatrix(i,d=!1){const m=i.key,y=d?this._alignedProjMatrixCache:this._projMatrixCache;if(y[m])return y[m];const v=this.calculatePosMatrix(i,this.worldSize);return h.multiply(v,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:d?this.alignedProjMatrix:this.projMatrix,v),y[m]=new Float32Array(v),y[m]}calculatePixelsToTileUnitsMatrix(i){const d=i.tileID.key,m=this._pixelsToTileUnitsCache;if(m[d])return m[d];const y=function(v,C){const{scale:M}=v.tileTransform,E=M*h.EXTENT/(v.tileSize*Math.pow(2,C.zoom-v.tileID.overscaledZ+v.tileID.canonical.z));return k=new Float32Array(4),V=(I=C.inverseAdjustmentMatrix)[1],Z=I[2],H=I[3],K=(L=[E,E])[1],k[0]=I[0]*(U=L[0]),k[1]=V*U,k[2]=Z*K,k[3]=H*K,k;var k,I,L,V,Z,H,U,K}(i,this);return m[d]=y,m[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const i=this._elevation;this._updateCameraState();const d=h.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,m=this._computeCameraPosition(d),y=this._camera.forward(),v=h.mercatorZfromAltitude(1,this._center.lat);m[2]/=v,y[2]/=v,h.normalize(y,y);const C=i.raycast(m,y,i.exaggeration());if(C){const M=h.scaleAndAdd([],m,y,C),E=new h.MercatorCoordinate(M[0],M[1],h.mercatorZfromAltitude(M[2],h.latFromMercatorY(M[1]))),k=(E.z+h.length([E.x-m[0],E.y-m[1],E.z-m[2]*v]))*this._projectionScaler;this._seaLevelZoom=this._zoomFromMercatorZ(k),this._centerAltitude=E.toAltitude(),this._center=this.coordinateLocation(E),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const i=this._elevation;this._updateCameraState();const d=h.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,m=this._computeCameraPosition(d),y=i.getAtPointOrZero(new h.MercatorCoordinate(...m)),v=this._minimumHeightOverTerrain()*Math.cos(h.degToRad(this._maxPitch)),C=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*y;if(C<v){const M=this.locationCoordinate(this._center,this._centerAltitude),E=[M.x-m[0],M.y-m[1],M.z-m[2]],k=h.length(E);E[2]-=(v-C)/this._projectionScaler;const I=h.length(E);if(0===I)return;h.scale$2(E,E,k/I*this._projectionScaler),this._camera.position=[M.x-E[0],M.y-E[1],M.z*this._projectionScaler-E[2]],this._camera.orientation=Ns(E,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;if(this._constraining=!0,this.projection.isReprojectedInTileSpace){const L=this.center;return L.lat=h.clamp(L.lat,this.minLat,this.maxLat),!this.maxBounds&&this.renderWorldCopies||(L.lng=h.clamp(L.lng,this.minLng,this.maxLng)),this.center=L,void(this._constraining=!1)}const i=this._unmodified,{x:d,y:m}=this.point;let y=0,v=d,C=m;const M=this.width/2,E=this.height/2,k=this.worldMinY*this.scale,I=this.worldMaxY*this.scale;if(m-E<k&&(C=k+E),m+E>I&&(C=I-E),I-k<this.height&&(y=Math.max(y,this.height/(I-k)),C=(I+k)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const L=this.worldMinX*this.scale,V=this.worldMaxX*this.scale,Z=this.worldSize/2-(L+V)/2;v=(d+Z+this.worldSize)%this.worldSize-Z,v-M<L&&(v=L+M),v+M>V&&(v=V-M),V-L<this.width&&(y=Math.max(y,this.width/(V-L)),v=(V+L)/2)}v===d&&C===m||(this.center=this.unproject(new h.pointGeometry(v,C))),y&&(this.zoom+=this.scaleZoom(y)),this._constrainCameraAltitude(),this._unmodified=i,this._constraining=!1}_minZoomForBounds(){let i=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(i=Math.max(i,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),i}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,d=this.pixelsPerMeter;if("globe"===this.projection.name){const J=h.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,$=h.mercatorZfromAltitude(1,h.GLOBE_SCALE_MATCH_LATITUDE)*this.worldSize;this._mercatorScaleRatio=J/$}const m=Ho(this.projection,this.zoom,this.width,this.height,1024);this._projectionScaler=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,m),this.cameraToCenterDistance=this.getCameraToCenterDistance(this.projection),this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const y=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?d:1),v=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);v[8]=2*-i.x/this.width,v[9]=2*i.y/this.height;let C=h.mul([],v,y);if(this.projection.isReprojectedInTileSpace){const J=this.locationCoordinate(this.center),$=h.identity([]);h.translate($,$,[J.x*this.worldSize,J.y*this.worldSize,0]),h.multiply($,$,Xe(this)),h.translate($,$,[-J.x*this.worldSize,-J.y*this.worldSize,0]),h.multiply(C,C,$),this.inverseAdjustmentMatrix=function(se){const _e=Xe(se,!0);return ir([],[_e[0],_e[1],_e[4],_e[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=h.scale([],C,[this.worldSize,this.worldSize,this.worldSize/d,1]),this.projMatrix=C,this.invProjMatrix=h.invert(new Float64Array(16),this.projMatrix);const M=h.invert([],v);this.frustumCorners=h.FrustumCorners.fromInvProjectionMatrix(M,this.horizonLineFromTop(),this.height);const E=new Float32Array(16);h.identity(E),h.scale(E,E,[1,-1,1]),h.rotateX(E,E,this._pitch),h.rotateZ(E,E,this.angle);const k=h.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),I=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;k[8]=2*-i.x/this.width,k[9]=2*(i.y+I)/this.height,this.skyboxMatrix=h.multiply(E,k,E);const L=this.point,V=L.x,Z=L.y,H=this.width%2/2,U=this.height%2/2,K=Math.cos(this.angle),G=Math.sin(this.angle),Q=V-Math.round(V)+K*H+G*U,j=Z-Math.round(Z)+K*U+G*H,ne=new Float64Array(C);if(h.translate(ne,ne,[Q>.5?Q-1:Q,j>.5?j-1:j,0]),this.alignedProjMatrix=ne,C=h.create(),h.scale(C,C,[this.width/2,-this.height/2,1]),h.translate(C,C,[1,-1,0]),this.labelPlaneMatrix=C,C=h.create(),h.scale(C,C,[1,-1,1]),h.translate(C,C,[-1,-1,0]),h.scale(C,C,[2/this.width,2/this.height,1]),this.glCoordMatrix=C,this.pixelMatrix=h.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},C=h.invert(new Float64Array(16),this.pixelMatrix),!C)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=C,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=h.calculateGlobeMatrix(this);const J=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=h.transformMat4(J,J,y),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=C;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const i=this.cameraWorldSize,d=this.cameraPixelsPerMeter,m=this._camera.position,y=1/this.height/this._projectionScaler,v=[i,i,d];h.scale$2(v,v,y),h.scale$2(m,m,-1),h.multiply$2(m,m,v);const C=h.create();h.translate(C,C,m),h.scale(C,C,v),this.mercatorFogMatrix=C,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(i,d,y)}_computeCameraPosition(i){const d=(i=i||this.pixelsPerMeter)/this.pixelsPerMeter,m=this._camera.forward(),y=this.point,v=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-i/this.worldSize*this._centerAltitude;return[y.x/this.worldSize-m[0]*v,y.y/this.worldSize-m[1]*v,i/this.worldSize*this._centerAltitude-m[2]*v]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(i){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),m=i[2];let y=1;m>0&&(y=Math.min((d-this._camera.position[2])/m,1)),this._camera.position=h.scaleAndAdd([],this._camera.position,i,y),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}_updateStateFromCamera(){const i=this._camera.position,d=this._camera.forward(),{pitch:m,bearing:y}=this._camera.getPitchBearing(),v=h.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._projectionScaler,C=this._mercatorZfromZoom(this._maxZoom)*Math.cos(h.degToRad(this._maxPitch)),M=Math.max((i[2]-v)/Math.cos(m),C),E=this._zoomFromMercatorZ(M);h.scaleAndAdd(i,i,d,M),this._pitch=h.clamp(m,h.degToRad(this.minPitch),h.degToRad(this.maxPitch)),this.angle=h.wrap(y,-Math.PI,Math.PI),this._setZoom(h.clamp(E,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new h.MercatorCoordinate(i[0],i[1],i[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(i){return Math.pow(2,i)*this.tileSize}_mercatorZfromZoom(i){return this.cameraToCenterDistance/this._worldSizeFromZoom(i)}_minimumHeightOverTerrain(){const i=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(i)}_zoomFromMercatorZ(i){return this.scaleZoom(this.cameraToCenterDistance/(i*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(h.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(i,d){const m=Math.min(i.x,d.x),y=Math.max(i.x,d.x),v=Math.min(i.y,d.y),C=Math.max(i.y,d.y);if(v<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const M=[new h.pointGeometry(m,v),new h.pointGeometry(y,C),new h.pointGeometry(m,C),new h.pointGeometry(y,v)],E=this.renderWorldCopies?-3:0,k=this.renderWorldCopies?4:1;for(const I of M){const L=this.pointRayIntersection(I);if(L.t<0)return!0;const V=this.rayIntersectionCoordinate(L);if(V.x<E||V.y<0||V.x>k||V.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+h.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new h.pointGeometry(0,0),new h.pointGeometry(this.width,this.height))}zoomDeltaToMovement(i,d){const m=h.length(h.sub([],this._camera.position,i)),y=this._zoomFromMercatorZ(m)+d;return m-this._mercatorZfromZoom(y)}getCameraPoint(){if("globe"===this.projection.name){const i=function(d,m){const y=[d[0],d[1],d[2],1];h.transformMat4$1(y,y,m);const v=Math.max(y[3],1e-6);return[y[0]/v,y[1]/v,y[2]/v,v]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new h.pointGeometry(i[0],i[1])}{const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new h.pointGeometry(0,i))}}getCameraToCenterDistance(i){const d=Ho(i,this.zoom,this.width,this.height,1024),m=i.pixelSpaceConversion(this.center.lat,this.worldSize,d);return.5/Math.tan(.5*this._fov)*this.height*m}}function Us(p,i){let d=!1,m=null;const y=()=>{m=null,d&&(p(),m=setTimeout(y,i),d=!1)};return()=>(d=!0,m||y(),m)}class sd{constructor(i){this._hashName=i&&encodeURIComponent(i),h.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Us(this._updateHashUnthrottled.bind(this),300)}addTo(i){return this._map=i,h.window.addEventListener("hashchange",this._onHashChange,!1),i.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),h.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(i){const d=this._map;if(!d)return"";const m=d.getCenter(),y=Math.round(100*d.getZoom())/100,v=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,v),M=Math.round(m.lng*C)/C,E=Math.round(m.lat*C)/C,k=d.getBearing(),I=d.getPitch();let L="";if(L+=i?`/${M}/${E}/${y}`:`${y}/${E}/${M}`,(k||I)&&(L+="/"+Math.round(10*k)/10),I&&(L+=`/${Math.round(I)}`),this._hashName){const V=this._hashName;let Z=!1;const H=h.window.location.hash.slice(1).split("&").map(U=>{const K=U.split("=")[0];return K===V?(Z=!0,`${K}=${L}`):U}).filter(U=>U);return Z||H.push(`${V}=${L}`),`#${H.join("&")}`}return`#${L}`}_getCurrentHash(){const i=h.window.location.hash.replace("#","");if(this._hashName){let d;return i.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(d=m)}),(d&&d[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._map;if(!i)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(m=>isNaN(m))){const m=i.dragRotate.isEnabled()&&i.touchZoomRotate.isEnabled()?+(d[3]||0):i.getBearing();return i.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:m,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=h.window.location.href.replace(/(#.+)?$/,this.getHashString());h.window.history.replaceState(h.window.history.state,null,i)}}const hr={linearity:.3,easing:h.bezier(0,0,.3,1)},Bu=h.extend({deceleration:2500,maxSpeed:1400},hr),ku=h.extend({deceleration:20,maxSpeed:1400},hr),Ga=h.extend({deceleration:1e3,maxSpeed:360},hr),cp=h.extend({deceleration:1e3,maxSpeed:90},hr);class dp{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:h.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,d=h.exported.now();for(;i.length>0&&d-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new h.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)d.zoom+=v.zoomDelta||0,d.bearing+=v.bearingDelta||0,d.pitch+=v.pitchDelta||0,v.panDelta&&d.pan._add(v.panDelta),v.around&&(d.around=v.around),v.pinchAround&&(d.pinchAround=v.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(d.pan.mag()){const v=Yr(d.pan.mag(),m,h.extend({},Bu,i||{}));y.offset=d.pan.mult(v.amount/d.pan.mag()),y.center=this._map.transform.center,Gs(y,v)}if(d.zoom){const v=Yr(d.zoom,m,ku);y.zoom=this._map.transform.zoom+v.amount,Gs(y,v)}if(d.bearing){const v=Yr(d.bearing,m,Ga);y.bearing=this._map.transform.bearing+h.clamp(v.amount,-179,179),Gs(y,v)}if(d.pitch){const v=Yr(d.pitch,m,cp);y.pitch=this._map.transform.pitch+v.amount,Gs(y,v)}if(y.zoom||y.bearing){const v=void 0===d.pinchAround?d.around:d.pinchAround;y.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),y.noMoveStart=!0,y}}function Gs(p,i){(!p.duration||p.duration<i.duration)&&(p.duration=i.duration,p.easing=i.easing)}function Yr(p,i,d){const{maxSpeed:m,linearity:y,deceleration:v}=d,C=h.clamp(p*y/(i/1e3),-m,m),M=Math.abs(C)/(v*y);return{easing:d.easing,duration:1e3*M,amount:C*(M/2)}}class ln extends h.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,d,m,y={}){const v=_t(d.getCanvasContainer(),m),C=d.unproject(v);super(i,h.extend({point:v,lngLat:C,originalEvent:m},y)),this._defaultPrevented=!1,this.target=d}}class Zs extends h.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,d,m){const y="touchend"===i?m.changedTouches:m.touches,v=rn(d.getCanvasContainer(),y),C=v.map(E=>d.unproject(E)),M=v.reduce((E,k,I,L)=>E.add(k.div(L.length)),new h.pointGeometry(0,0));super(i,{points:v,point:M,lngLats:C,lngLat:d.unproject(M),originalEvent:m}),this._defaultPrevented=!1}}class Pu extends h.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,d,m){super(i,{originalEvent:m}),this._defaultPrevented=!1}}class pr{constructor(i,d){this._map=i,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(i){return this._firePreventable(new Pu(i.type,this._map,i))}mousedown(i,d){return this._mousedownPos=d,this._firePreventable(new ln(i.type,this._map,i))}mouseup(i){this._map.fire(new ln(i.type,this._map,i))}preclick(i){const d=h.extend({},i);d.type="preclick",this._map.fire(new ln(d.type,this._map,d))}click(i,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(i),this._map.fire(new ln(i.type,this._map,i)))}dblclick(i){return this._firePreventable(new ln(i.type,this._map,i))}mouseover(i){this._map.fire(new ln(i.type,this._map,i))}mouseout(i){this._map.fire(new ln(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Zs(i.type,this._map,i))}touchmove(i){this._map.fire(new Zs(i.type,this._map,i))}touchend(i){this._map.fire(new Zs(i.type,this._map,i))}touchcancel(i){this._map.fire(new Zs(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class js{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(i){this._map.fire(new ln(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ln("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new ln(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qr{constructor(i,d){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,d){this.isEnabled()&&i.shiftKey&&0===i.button&&(so(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(i,d){if(!this._active)return;const m=d;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=m,this._box||(this._box=gt("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const v=Math.min(y.x,m.x),C=Math.max(y.x,m.x),M=Math.min(y.y,m.y),E=Math.max(y.y,m.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${v}px,${M}px)`,this._box.style.width=C-v+"px",this._box.style.height=E-M+"px")})}mouseupWindow(i,d){if(!this._active||0!==i.button)return;const m=this._startPos,y=d;if(this.reset(),Xn(),m.x!==y.x||m.y!==y.y)return this._map.fire(new h.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:v=>v.fitScreenCoordinates(m,y,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&27===i.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",i))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Tr(),delete this._startPos,delete this._lastPos}_fireEvent(i,d){return this._map.fire(new h.Event(i,{originalEvent:d}))}}function Za(p,i){const d={};for(let m=0;m<p.length;m++)d[p[m].identifier]=i[m];return d}class ld{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(i,d,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=i.timeStamp),m.length===this.numTouches&&(this.centroid=function(y){const v=new h.pointGeometry(0,0);for(const C of y)v._add(C);return v.div(y.length)}(d),this.touches=Za(m,d)))}touchmove(i,d,m){if(this.aborted||!this.centroid)return;const y=Za(m,d);for(const v in this.touches){const C=this.touches[v],M=y[v];(!M||M.dist(C)>30)&&(this.aborted=!0)}}touchend(i,d,m){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),0===m.length){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class ja{constructor(i){this.singleTap=new ld(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(i,d,m){this.singleTap.touchstart(i,d,m)}touchmove(i,d,m){this.singleTap.touchmove(i,d,m)}touchend(i,d,m){const y=this.singleTap.touchend(i,d,m);if(y){const v=i.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(y)<30;if(v&&C||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class cd{constructor(){this._zoomIn=new ja({numTouches:1,numTaps:2}),this._zoomOut=new ja({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,d,m){this._zoomIn.touchstart(i,d,m),this._zoomOut.touchstart(i,d,m)}touchmove(i,d,m){this._zoomIn.touchmove(i,d,m),this._zoomOut.touchmove(i,d,m)}touchend(i,d,m){const y=this._zoomIn.touchend(i,d,m),v=this._zoomOut.touchend(i,d,m);return y?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()+1,around:C.unproject(y)},{originalEvent:i})}):v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()-1,around:C.unproject(v)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const qo={0:1,2:2};class Ha{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(i,d){return!1}_move(i,d){return{}}mousedown(i,d){if(this._lastPoint)return;const m=Rn(i);this._correctButton(i,m)&&(this._lastPoint=d,this._eventButton=m)}mousemoveWindow(i,d){const m=this._lastPoint;if(m)if(i.preventDefault(),null!=this._eventButton&&function(y,v){const C=qo[v];return void 0===y.buttons||(y.buttons&C)!==C}(i,this._eventButton))this.reset();else if(this._moved||!(d.dist(m)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(m,d)}mouseupWindow(i){this._lastPoint&&Rn(i)===this._eventButton&&(this._moved&&Xn(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xl extends Ha{mousedown(i,d){super.mousedown(i,d),this._lastPoint&&(this._active=!0)}_correctButton(i,d){return 0===d&&!i.ctrlKey}_move(i,d){return{around:d,panDelta:d.sub(i)}}}class Hs extends Ha{_correctButton(i,d){return 0===d&&i.ctrlKey||2===d}_move(i,d){const m=.8*(d.x-i.x);if(m)return this._active=!0,{bearingDelta:m}}contextmenu(i){i.preventDefault()}}class Jl extends Ha{_correctButton(i,d){return 0===d&&i.ctrlKey||2===d}_move(i,d){const m=-.5*(d.y-i.y);if(m)return this._active=!0,{pitchDelta:m}}contextmenu(i){i.preventDefault()}}class dd{constructor(i,d){this._map=i,this._el=i.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),h.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new h.pointGeometry(0,0)}touchstart(i,d,m){return this._calculateTransform(i,d,m)}touchmove(i,d,m){if(this._active&&!(m.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===m.length)return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return i.preventDefault(),this._calculateTransform(i,d,m)}}touchend(i,d,m){this._calculateTransform(i,d,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,d,m){m.length>0&&(this._active=!0);const y=Za(m,d),v=new h.pointGeometry(0,0),C=new h.pointGeometry(0,0);let M=0;for(const k in y){const I=y[k],L=this._touches[k];L&&(v._add(I),C._add(I.sub(L)),M++,y[k]=I)}if(this._touches=y,M<this._minTouches||!C.mag())return;const E=C.div(M);return this._sum._add(E),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(M),panDelta:E}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=gt("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){"hidden"===this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show")},500)}}class Wr{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(i){}_move(i,d,m){return{}}touchstart(i,d,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([d[0],d[1]]))}touchmove(i,d,m){const y=this._firstTwoTouches;if(!y)return;i.preventDefault();const[v,C]=y,M=ui(m,d,v),E=ui(m,d,C);if(!M||!E)return;const k=this._aroundCenter?null:M.add(E).div(2);return this._move([M,E],k,i)}touchend(i,d,m){if(!this._firstTwoTouches)return;const[y,v]=this._firstTwoTouches,C=ui(m,d,y),M=ui(m,d,v);C&&M||(this._active&&Xn(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&"center"===i.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ui(p,i,d){for(let m=0;m<p.length;m++)if(p[m].identifier===d)return i[m]}function qa(p,i){return Math.log(p/i)/Math.LN2}class ud extends Wr{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,d){const m=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(qa(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:qa(this._distance,m),pinchAround:d}}}function Kl(p,i){return 180*p.angleWith(i)/Math.PI}class up extends Wr{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,d){const m=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Kl(this._vector,m),pinchAround:d}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const d=25/(Math.PI*this._minDiameter)*360,m=Kl(i,this._startVector);return Math.abs(m)<d}}function oo(p){return Math.abs(p.y)>Math.abs(p.x)}class Iu extends Wr{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(i){this._lastPoints=i,oo(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,d,m){const y=this._lastPoints;if(!y)return;const v=i[0].sub(y[0]),C=i[1].sub(y[1]);return this._map._cooperativeGestures&&m.touches.length<3||(this._valid=this.gestureBeginsVertically(v,C,m.timeStamp),!this._valid)?void 0:(this._lastPoints=i,this._active=!0,{pitchDelta:(v.y+C.y)/2*-.5})}gestureBeginsVertically(i,d,m){if(void 0!==this._valid)return this._valid;const y=i.mag()>=2,v=d.mag()>=2;if(!y&&!v)return;if(!y||!v)return null==this._firstMove&&(this._firstMove=m),m-this._firstMove<100&&void 0;const C=i.y>0==d.y>0;return oo(i)&&oo(d)&&C}}const Ya={panStep:100,bearingStep:15,pitchStep:10};class _o{constructor(){const i=Ya;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let d=0,m=0,y=0,v=0,C=0;switch(i.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:i.shiftKey?m=-1:(i.preventDefault(),v=-1);break;case 39:i.shiftKey?m=1:(i.preventDefault(),v=1);break;case 38:i.shiftKey?y=1:(i.preventDefault(),C=-1);break;case 40:i.shiftKey?y=-1:(i.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(m=0,y=0),{cameraAnimation:M=>{const E=M.getZoom();M.easeTo({duration:300,easeId:"keyboardHandler",easing:$l,zoom:d?Math.round(E)+d*(i.shiftKey?2:1):E,bearing:M.getBearing()+m*this._bearingStep,pitch:M.getPitch()+y*this._pitchStep,offset:[-v*this._panStep,-C*this._panStep],center:M.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function $l(p){return p*(2-p)}const Je=4.000244140625;class Fu{constructor(i,d){this._map=i,this._el=i.getCanvasContainer(),this._handler=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,h.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert","_isFullscreen"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&"center"===i.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(i.ctrlKey||i.metaKey||this.isZooming()||this._isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=i.deltaMode===h.window.WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const m=h.exported.now(),y=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,0!==d&&d%Je==0?this._type="wheel":0!==d&&Math.abs(d)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(y*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),i.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=i,this._delta-=d,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=_t(this._el,i);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform,d=()=>i._terrainEnabled()&&this._aroundCoord?i.computeZoomRelativeTo(this._aroundCoord):i.zoom;if(0!==this._delta){const E="wheel"===this._type&&Math.abs(this._delta)>Je?this._wheelZoomRate:this._defaultZoomRate;let k=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&0!==k&&(k=1/k);const I=d(),L=Math.pow(2,I),V="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):L;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(V*k))),"wheel"===this._type&&(this._startZoom=d(),this._easing=this._smoothOutEasing(200)),this._delta=0}const m="number"==typeof this._targetZoom?this._targetZoom:d(),y=this._startZoom,v=this._easing;let C,M=!1;if("wheel"===this._type&&y&&v){const E=Math.min((h.exported.now()-this._lastWheelEventTime)/200,1),k=v(E);C=h.number(y,m,k),E<1?this._frameId||(this._frameId=!0):M=!0}else C=m,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!M,zoomDelta:C-d(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let d=h.ease;if(this._prevEase){const m=this._prevEase,y=(h.exported.now()-m.start)/m.duration,v=m.easing(y+.01)-m.easing(y),C=.27/Math.sqrt(v*v+1e-4)*.01,M=Math.sqrt(.0729-C*C);d=h.bezier(C,M,.25,1)}return this._prevEase={start:h.exported.now(),duration:i,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=gt("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(h.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_isFullscreen(){return!!h.window.document.fullscreenElement||!!h.window.document.webkitFullscreenElement}_showBlockerAlert(){"hidden"===this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show")},200)}}class Lu{constructor(i,d){this._clickZoom=i,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class qs{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(i,d){return i.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:m.getZoom()+(i.shiftKey?-1:1),around:m.unproject(d)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ys{constructor(){this._tap=new ja({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(i,d,m){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?m.length>0&&(this._swipePoint=d[0],this._swipeTouch=m[0].identifier):this._tap.touchstart(i,d,m))}touchmove(i,d,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const y=d[0],v=y.y-this._swipePoint.y;return this._swipePoint=y,i.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(i,d,m)}touchend(i,d,m){this._tapTime?this._swipePoint&&0===m.length&&this.reset():this._tap.touchend(i,d,m)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ru{constructor(i,d,m){this._el=i,this._mousePan=d,this._touchPan=m}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ou{constructor(i,d,m){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=d,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class hd{constructor(i,d,m,y){this._el=i,this._touchZoom=d,this._touchRotate=m,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Qa=p=>p.zoom||p.drag||p.pitch||p.rotate;class zu extends h.Event{}class pd{constructor(){this.constants=[1,1,.01],this.radius=0}setup(i,d){const m=h.sub([],d,i);this.radius=h.length(m[2]<0?h.div([],m,this.constants):[m[0],m[1],0])}projectRay(i){h.div(i,i,this.constants),h.normalize(i,i),h.mul$1(i,i,this.constants);const d=h.scale$2([],i,this.radius);if(d[2]>0){const m=h.scale$2([],[0,0,1],h.dot(d,[0,0,1])),y=h.scale$2([],h.normalize([],[d[0],d[1],0]),this.radius),v=h.add([],d,h.scale$2([],h.sub([],h.add([],y,m),d),2));d[0]=v[0],d[1]=v[1]}return d}}function Wa(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class Qs{constructor(i,d){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new dp(i),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new pd,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),h.bindAll(["handleEvent","handleWindowEvent"],this);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[h.window.document,"mousemove",{capture:!0}],[h.window.document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[h.window,"blur",void 0]];for(const[y,v,C]of this._listeners)y.addEventListener(v,y===h.window.document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[i,d,m]of this._listeners)i.removeEventListener(d,i===h.window.document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(i){const d=this._map,m=d.getCanvasContainer();this._add("mapEvent",new pr(d,i));const y=d.boxZoom=new Qr(d,i);this._add("boxZoom",y);const v=new cd,C=new qs;d.doubleClickZoom=new Lu(C,v),this._add("tapZoom",v),this._add("clickZoom",C);const M=new Ys;this._add("tapDragZoom",M);const E=d.touchPitch=new Iu(d);this._add("touchPitch",E);const k=new Hs(i),I=new Jl(i);d.dragRotate=new Ou(i,k,I),this._add("mouseRotate",k,["mousePitch"]),this._add("mousePitch",I,["mouseRotate"]);const L=new Xl(i),V=new dd(d,i);d.dragPan=new Ru(m,L,V),this._add("mousePan",L),this._add("touchPan",V,["touchZoom","touchRotate"]);const Z=new up,H=new ud;d.touchZoomRotate=new hd(m,H,Z,M),this._add("touchRotate",Z,["touchPan","touchZoom"]),this._add("touchZoom",H,["touchPan","touchRotate"]),this._add("blockableMapEvent",new js(d));const U=d.scrollZoom=new Fu(d,this);this._add("scrollZoom",U,["mousePan"]);const K=d.keyboard=new _o;this._add("keyboard",K);for(const G of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[G]&&d[G].enable(i[G])}_add(i,d,m){this._handlers.push({handlerName:i,handler:d,allowed:m}),this._handlersById[i]=d}stop(i){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Qa(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,d,m){for(const y in i)if(y!==m&&(!d||d.indexOf(y)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const d=[];for(const m of i)this._el.contains(m.target)&&d.push(m);return d}handleEvent(i,d){this._updatingCamera=!0;const m="renderFrame"===i.type,y=m?void 0:i,v={needsRenderFrame:!1},C={},M={},E=i.touches?this._getMapTouches(i.touches):void 0,k=E?rn(this._el,E):m?void 0:_t(this._el,i);for(const{handlerName:V,handler:Z,allowed:H}of this._handlers){if(!Z.isEnabled())continue;let U;this._blockedByActive(M,H,V)?Z.reset():Z[d||i.type]&&(U=Z[d||i.type](i,k,E),this.mergeHandlerResult(v,C,U,V,y),U&&U.needsRenderFrame&&this._triggerRenderFrame()),(U||Z.isActive())&&(M[V]=Z)}const I={};for(const V in this._previousActiveHandlers)M[V]||(I[V]=y);this._previousActiveHandlers=M,(Object.keys(I).length||Wa(v))&&(this._changes.push([v,C,I]),this._triggerRenderFrame()),(Object.keys(M).length||Wa(v))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:L}=v;L&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],L(this._map))}mergeHandlerResult(i,d,m,y,v){if(!m)return;h.extend(i,m);const C={handlerName:y,originalEvent:m.originalEvent||v};void 0!==m.zoomDelta&&(d.zoom=C),void 0!==m.panDelta&&(d.drag=C),void 0!==m.pitchDelta&&(d.pitch=C),void 0!==m.bearingDelta&&(d.rotate=C)}_applyChanges(){const i={},d={},m={};for(const[y,v,C]of this._changes)y.panDelta&&(i.panDelta=(i.panDelta||new h.pointGeometry(0,0))._add(y.panDelta)),y.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+y.pitchDelta),void 0!==y.around&&(i.around=y.around),void 0!==y.aroundCoord&&(i.aroundCoord=y.aroundCoord),void 0!==y.pinchAround&&(i.pinchAround=y.pinchAround),y.noInertia&&(i.noInertia=y.noInertia),h.extend(d,v),h.extend(m,C);this._updateMapTransform(i,d,m),this._changes=[]}_updateMapTransform(i,d,m){const y=this._map,v=y.transform,C=Q=>[Q.x,Q.y,Q.z];if((Q=>{const j=this._eventsInProgress.drag;return j&&!this._handlersById[j.handlerName].isActive()})()&&!Wa(i)){const Q=v.zoom;v.cameraElevationReference="sea",v.recenterOnTerrain(),v.cameraElevationReference="ground",Q!==v.zoom&&this._map._update(!0)}if(!Wa(i))return void this._fireEvents(d,m,!0);let{panDelta:M,zoomDelta:E,bearingDelta:k,pitchDelta:I,around:L,aroundCoord:V,pinchAround:Z}=i;void 0!==Z&&(L=Z),(Q=>d.drag&&!this._eventsInProgress.drag)()&&L&&(this._dragOrigin=C(v.pointCoordinate3D(L)),this._trackingEllipsoid.setup(v._camera.position,this._dragOrigin)),v.cameraElevationReference="sea",y._stop(!0),L=L||y.transform.centerPoint,k&&(v.bearing+=k),I&&(v.pitch+=I),v._updateCameraState();const H=[0,0,0];if(M){const Q=v.pointCoordinate(L);if("globe"===v.projection.name){const j=h.latFromMercatorY(Q.y),ne=v.center.lat,J=Math.min(h.mercatorZfromAltitude(1,j)/h.mercatorZfromAltitude(1,ne),2);M=M.rotate(-v.angle),H[0]=-M.x/v.worldSize*J,H[1]=-M.y/v.worldSize*J}else{const j=v.pointCoordinate(L.sub(M));Q&&j&&(H[0]=j.x-Q.x,H[1]=j.y-Q.y)}}const U=v.zoom,K=[0,0,0];if(E){const Q=C(V||v.pointCoordinate3D(L)),j={dir:h.normalize([],h.sub([],Q,v._camera.position))};if(j.dir[2]<0){const ne=v.zoomDeltaToMovement(Q,E);h.scale$2(K,j.dir,ne)}}const G=h.add(H,H,K);v._translateCameraConstrained(G),E&&Math.abs(v.zoom-U)>1e-4&&v.recenterOnTerrain(),v.cameraElevationReference="ground",this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(d,m,!0)}_fireEvents(i,d,m){const y=Qa(this._eventsInProgress),v=Qa(i),C={};for(const I in i){const{originalEvent:L}=i[I];this._eventsInProgress[I]||(C[`${I}start`]=L),this._eventsInProgress[I]=i[I]}!y&&v&&this._fireEvent("movestart",v.originalEvent);for(const I in C)this._fireEvent(I,C[I]);v&&this._fireEvent("move",v.originalEvent);for(const I in i){const{originalEvent:L}=i[I];this._fireEvent(I,L)}const M={};let E;for(const I in this._eventsInProgress){const{handlerName:L,originalEvent:V}=this._eventsInProgress[I];this._handlersById[L].isActive()||(delete this._eventsInProgress[I],E=d[L]||V,M[`${I}end`]=E)}for(const I in M)this._fireEvent(I,M[I]);const k=Qa(this._eventsInProgress);if(m&&(y||v)&&!k){this._updatingCamera=!0;const I=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),L=V=>0!==V&&-this._bearingSnap<V&&V<this._bearingSnap;I?(L(I.bearing||this._map.getBearing())&&(I.bearing=0),this._map.easeTo(I,{originalEvent:E})):(this._map.fire(new h.Event("moveend",{originalEvent:E})),L(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,d){this._map.fire(new h.Event(i,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{this._frameId=void 0,this.handleEvent(new zu("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Ws="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class ec extends h.Evented{constructor(i,d){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=d.bearingSnap,h.bindAll(["_renderFrameCallback"],this)}getCenter(){return new h.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,d){return this.jumpTo({center:i},d)}panBy(i,d,m){return i=h.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,h.extend({offset:i},d),m)}panTo(i,d,m){return this.easeTo(h.extend({center:i},d),m)}getZoom(){return this.transform.zoom}setZoom(i,d){return this.jumpTo({zoom:i},d),this}zoomTo(i,d,m){return this.easeTo(h.extend({zoom:i},d),m)}zoomIn(i,d){return this.zoomTo(this.getZoom()+1,i,d),this}zoomOut(i,d){return this.zoomTo(this.getZoom()-1,i,d),this}getBearing(){return this.transform.bearing}setBearing(i,d){return this.jumpTo({bearing:i},d),this}getPadding(){return this.transform.padding}setPadding(i,d){return this.jumpTo({padding:i},d),this}rotateTo(i,d,m){return this.easeTo(h.extend({bearing:i},d),m)}resetNorth(i,d){return this.rotateTo(0,h.extend({duration:1e3},i),d),this}resetNorthPitch(i,d){return this.easeTo(h.extend({bearing:0,pitch:0,duration:1e3},i),d),this}snapToNorth(i,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,d):this}getPitch(){return this.transform.pitch}setPitch(i,d){return this.jumpTo({pitch:i},d),this}cameraForBounds(i,d){"globe"===this.transform.projection.name&&h.warnOnce('Globe projection does not support cameraForBounds API, this API may behave unexpectedly."'),i=h.LngLatBounds.convert(i);const m=d&&d.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),m,d)}_extendCameraOptions(i){const d={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=h.extend({padding:d,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){const m=i.padding;i.padding={top:m,bottom:m,right:m,left:m}}return i.padding=h.extend(d,i.padding),i}_cameraForBoxAndBearing(i,d,m,y){const v=this._extendCameraOptions(y),C=this.transform,M=C.padding,E=C.project(h.LngLat.convert(i)),k=C.project(h.LngLat.convert(d)),I=new h.pointGeometry(E.x,k.y),L=new h.pointGeometry(k.x,E.y),V=-h.degToRad(m),Z=E.rotate(V),H=k.rotate(V),U=I.rotate(V),K=L.rotate(V),G=new h.pointGeometry(Math.max(Z.x,H.x,U.x,K.x),Math.max(Z.y,H.y,U.y,K.y)),Q=new h.pointGeometry(Math.min(Z.x,H.x,U.x,K.x),Math.min(Z.y,H.y,U.y,K.y)),j=G.sub(Q),ne=(C.width-((M.left||0)+(M.right||0)+v.padding.left+v.padding.right))/j.x,J=(C.height-((M.top||0)+(M.bottom||0)+v.padding.top+v.padding.bottom))/j.y;if(J<0||ne<0)return void h.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const $=Math.min(C.scaleZoom(C.scale*Math.min(ne,J)),v.maxZoom),se="number"==typeof v.offset.x&&"number"==typeof v.offset.y?new h.pointGeometry(v.offset.x,v.offset.y):h.pointGeometry.convert(v.offset),_e=new h.pointGeometry((v.padding.left-v.padding.right)/2,(v.padding.top-v.padding.bottom)/2).rotate(m*Math.PI/180),Ce=se.add(_e).mult(C.scale/C.zoomScale($));return{center:C.unproject(E.add(k).div(2).sub(Ce)),zoom:$,bearing:m}}_cameraForBox(i,d,m,y,v){const C=this._extendCameraOptions(v);m=m||0,y=y||0,i=h.LngLat.convert(i),d=h.LngLat.convert(d);const M=this.transform.clone();M.padding=C.padding;const E=this.getFreeCameraOptions(),k=new h.LngLat(.5*(i.lng+d.lng),.5*(i.lat+d.lat)),I=.5*(m+y);if(M._camera.position[2]<h.mercatorZfromAltitude(I,k.lat))return void h.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");E.lookAtPoint(k),M.setFreeCameraOptions(E);const L=h.MercatorCoordinate.fromLngLat(i),V=h.MercatorCoordinate.fromLngLat(d),Z=M.pointRayIntersection(M.centerPoint,I),H=[(U=M.rayIntersectionCoordinate(Z)).x,U.y,U.z];var U;const K=M.screenPointToMercatorRay(M.centerPoint),G="globe"!==M.projection.name;let Q,j=0;do{const ne=Math.floor(M.zoom),J=1<<ne,$=Math.min(J*L.x,J*V.x),se=Math.min(J*L.y,J*V.y),_e=Math.max(J*L.x,J*V.x),Ce=Math.max(J*L.y,J*V.y),ve=new h.Aabb([$,se,m],[_e,Ce,y]),Le=h.Frustum.fromInvProjectionMatrix(M.invProjMatrix,M.worldSize,ne,G);if(2!==ve.intersects(Le)){Q&&(M._camera.position=h.scaleAndAdd([],M._camera.position,K.dir,-Q),M._updateStateFromCamera());break}const ie=h.sub([],M._camera.position,H);Q=.5*h.length(ie),M._camera.position=h.scaleAndAdd([],M._camera.position,K.dir,Q);try{M._updateStateFromCamera()}catch(ge){return void h.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++j<10);return{center:M.center,zoom:M.zoom,bearing:M.bearing,pitch:M.pitch}}fitBounds(i,d,m){return"globe"===this.transform.projection.name&&h.warnOnce("Globe projection does not support fitBounds API, this API may behave unexpectedly."),this._fitInternal(this.cameraForBounds(i,d),d,m)}_raycastElevationBox(i,d){const m=this.transform.elevation;if(!m)return;const y=new h.pointGeometry(i.x,d.y),v=new h.pointGeometry(d.x,i.y),C=m.pointCoordinate(i);if(!C)return;const M=m.pointCoordinate(d);if(!M)return;const E=m.pointCoordinate(y);if(!E)return;const k=m.pointCoordinate(v);if(!k)return;const I=new h.MercatorCoordinate(C[0],C[1]).toLngLat(),L=new h.MercatorCoordinate(M[0],M[1]).toLngLat(),V=new h.MercatorCoordinate(E[0],E[1]).toLngLat(),Z=new h.MercatorCoordinate(k[0],k[1]).toLngLat(),H=Math.min(I.lng,Math.min(L.lng,Math.min(V.lng,Z.lng))),U=Math.min(I.lat,Math.min(L.lat,Math.min(V.lat,Z.lat))),K=Math.max(I.lng,Math.max(L.lng,Math.max(V.lng,Z.lng))),G=Math.max(I.lat,Math.max(L.lat,Math.max(V.lat,Z.lat))),Q=Math.min(C[3],Math.min(M[3],Math.min(E[3],k[3]))),j=Math.max(C[3],Math.max(M[3],Math.max(E[3],k[3])));return{minLngLat:new h.LngLat(H,U),maxLngLat:new h.LngLat(K,G),minAltitude:Q,maxAltitude:j}}fitScreenCoordinates(i,d,m,y,v){let C,M,E,k;"globe"===this.transform.projection.name&&h.warnOnce("Globe projection does not support fitScreenCoordinates API, this API may behave unexpectedly.");const I=h.pointGeometry.convert(i),L=h.pointGeometry.convert(d),V=this._raycastElevationBox(I,L);if(V)C=V.minLngLat,M=V.maxLngLat,E=V.minAltitude,k=V.maxAltitude;else{if(this.transform.anyCornerOffEdge(I,L))return this;C=this.transform.pointLocation(I),M=this.transform.pointLocation(L)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(h.pointGeometry.convert(i)),this.transform.pointLocation(h.pointGeometry.convert(d)),m,y):this._cameraForBox(C,M,E,k,y),y,v)}_fitInternal(i,d,m){return i?(delete(d=h.extend(i,d)).padding,d.linear?this.easeTo(d,m):this.flyTo(d,m)):this}jumpTo(i,d){this.stop();const m=i.preloadOnly?this.transform.clone():this.transform;let y=!1,v=!1,C=!1;return"zoom"in i&&m.zoom!==+i.zoom&&(y=!0,m.zoom=+i.zoom),void 0!==i.center&&(m.center=h.LngLat.convert(i.center)),"bearing"in i&&m.bearing!==+i.bearing&&(v=!0,m.bearing=+i.bearing),"pitch"in i&&m.pitch!==+i.pitch&&(C=!0,m.pitch=+i.pitch),null==i.padding||m.isPaddingEqual(i.padding)||(m.padding=i.padding),i.preloadOnly?(this._preloadTiles(m),this):(this.fire(new h.Event("movestart",d)).fire(new h.Event("move",d)),y&&this.fire(new h.Event("zoomstart",d)).fire(new h.Event("zoom",d)).fire(new h.Event("zoomend",d)),v&&this.fire(new h.Event("rotatestart",d)).fire(new h.Event("rotate",d)).fire(new h.Event("rotateend",d)),C&&this.fire(new h.Event("pitchstart",d)).fire(new h.Event("pitch",d)).fire(new h.Event("pitchend",d)),this.fire(new h.Event("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||h.warnOnce(Ws),this.transform.getFreeCameraOptions()}setFreeCameraOptions(i,d){const m=this.transform;if(!m.projection.supportsFreeCamera)return h.warnOnce(Ws),this;this.stop();const y=m.zoom,v=m.pitch,C=m.bearing;m.setFreeCameraOptions(i);const M=y!==m.zoom,E=v!==m.pitch,k=C!==m.bearing;return this.fire(new h.Event("movestart",d)).fire(new h.Event("move",d)),M&&this.fire(new h.Event("zoomstart",d)).fire(new h.Event("zoom",d)).fire(new h.Event("zoomend",d)),k&&this.fire(new h.Event("rotatestart",d)).fire(new h.Event("rotate",d)).fire(new h.Event("rotateend",d)),E&&this.fire(new h.Event("pitchstart",d)).fire(new h.Event("pitch",d)).fire(new h.Event("pitchend",d)),this.fire(new h.Event("moveend",d)),this}easeTo(i,d){this._stop(!1,i.easeId),(!1===(i=h.extend({offset:[0,0],duration:500,easing:h.ease},i)).animate||!i.essential&&h.exported.prefersReducedMotion)&&(i.duration=0);const m=this.transform,y=this.getZoom(),v=this.getBearing(),C=this.getPitch(),M=this.getPadding(),E="zoom"in i?+i.zoom:y,k="bearing"in i?this._normalizeBearing(i.bearing,v):v,I="pitch"in i?+i.pitch:C,L="padding"in i?i.padding:m.padding,V=h.pointGeometry.convert(i.offset);let Z,H,U;if("globe"===m.projection.name){const Ce=h.MercatorCoordinate.fromLngLat(m.center),ve=V.rotate(-m.angle);Ce.x+=ve.x/m.worldSize,Ce.y+=ve.y/m.worldSize;const Le=Ce.toLngLat(),ie=h.LngLat.convert(i.center||Le);this._normalizeCenter(ie),Z=m.centerPoint.add(ve),H=new h.pointGeometry(Ce.x,Ce.y).mult(m.worldSize),U=new h.pointGeometry(h.mercatorXfromLng(ie.lng),h.mercatorYfromLat(ie.lat)).mult(m.worldSize).sub(H)}else{Z=m.centerPoint.add(V);const Ce=m.pointLocation(Z),ve=h.LngLat.convert(i.center||Ce);this._normalizeCenter(ve),H=m.project(Ce),U=m.project(ve).sub(H)}const K=m.zoomScale(E-y);let G,Q;i.around&&(G=h.LngLat.convert(i.around),Q=m.locationPoint(G));const j=this._zooming||E!==y,ne=this._rotating||v!==k,J=this._pitching||I!==C,$=!m.isPaddingEqual(L),se=Ce=>ve=>{if(j&&(Ce.zoom=h.number(y,E,ve)),ne&&(Ce.bearing=h.number(v,k,ve)),J&&(Ce.pitch=h.number(C,I,ve)),$&&(Ce.interpolatePadding(M,L,ve),Z=Ce.centerPoint.add(V)),G)Ce.setLocationAtPoint(G,Q);else{const Le=Ce.zoomScale(Ce.zoom-y),ie=E>y?Math.min(2,K):Math.max(.5,K),ge=Math.pow(ie,1-ve),Ee=Ce.unproject(H.add(U.mult(ve*ge)).mult(Le));Ce.setLocationAtPoint(Ce.renderWorldCopies?Ee.wrap():Ee,Z)}return i.preloadOnly||this._fireMoveEvents(d),Ce};if(i.preloadOnly){const Ce=this._emulate(se,i.duration,m);return this._preloadTiles(Ce),this}const _e={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=j,this._rotating=ne,this._pitching=J,this._padding=$,this._easeId=i.easeId,this._prepareEase(d,i.noMoveStart,_e),this._ease(se(m),Ce=>{m.recenterOnTerrain(),this._afterEase(d,Ce)},i),this}_prepareEase(i,d,m={}){this._moving=!0,this.transform.cameraElevationReference="sea",d||m.moving||this.fire(new h.Event("movestart",i)),this._zooming&&!m.zooming&&this.fire(new h.Event("zoomstart",i)),this._rotating&&!m.rotating&&this.fire(new h.Event("rotatestart",i)),this._pitching&&!m.pitching&&this.fire(new h.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new h.Event("move",i)),this._zooming&&this.fire(new h.Event("zoom",i)),this._rotating&&this.fire(new h.Event("rotate",i)),this._pitching&&this.fire(new h.Event("pitch",i))}_afterEase(i,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const m=this._zooming,y=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new h.Event("zoomend",i)),y&&this.fire(new h.Event("rotateend",i)),v&&this.fire(new h.Event("pitchend",i)),this.fire(new h.Event("moveend",i))}flyTo(i,d){if(!i.essential&&h.exported.prefersReducedMotion){const je=h.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(je,d)}this.stop(),i=h.extend({offset:[0,0],speed:1.2,curve:1.42,easing:h.ease},i);const m=this.transform,y=this.getZoom(),v=this.getBearing(),C=this.getPitch(),M=this.getPadding(),E="zoom"in i?h.clamp(+i.zoom,m.minZoom,m.maxZoom):y,k="bearing"in i?this._normalizeBearing(i.bearing,v):v,I="pitch"in i?+i.pitch:C,L="padding"in i?i.padding:m.padding,V=m.zoomScale(E-y),Z=h.pointGeometry.convert(i.offset);let H=m.centerPoint.add(Z);const U=m.pointLocation(H),K=h.LngLat.convert(i.center||U);this._normalizeCenter(K);const G=m.project(U),Q=m.project(K).sub(G);let j=i.curve;const ne=Math.max(m.width,m.height),J=ne/V,$=Q.mag();if("minZoom"in i){const je=h.clamp(Math.min(i.minZoom,y,E),m.minZoom,m.maxZoom),Ge=ne/m.zoomScale(je-y);j=Math.sqrt(Ge/$*2)}const se=j*j;function _e(je){const Ge=(J*J-ne*ne+(je?-1:1)*se*se*$*$)/(2*(je?J:ne)*se*$);return Math.log(Math.sqrt(Ge*Ge+1)-Ge)}function Ce(je){return(Math.exp(je)-Math.exp(-je))/2}function ve(je){return(Math.exp(je)+Math.exp(-je))/2}const Le=_e(0);let ie=function(je){return ve(Le)/ve(Le+j*je)},ge=function(je){return ne*((ve(Le)*(Ce(Ge=Le+j*je)/ve(Ge))-Ce(Le))/se)/$;var Ge},Ee=(_e(1)-Le)/j;if(Math.abs($)<1e-6||!isFinite(Ee)){if(Math.abs(ne-J)<1e-6)return this.easeTo(i,d);const je=J<ne?-1:1;Ee=Math.abs(Math.log(J/ne))/j,ge=function(){return 0},ie=function(Ge){return Math.exp(je*j*Ge)}}i.duration="duration"in i?+i.duration:1e3*Ee/("screenSpeed"in i?+i.screenSpeed/j:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0);const Ze=v!==k,Me=I!==C,ze=!m.isPaddingEqual(L),Ve=je=>Ge=>{const Ne=Ge*Ee,Ye=1/ie(Ne);je.zoom=1===Ge?E:y+je.scaleZoom(Ye),Ze&&(je.bearing=h.number(v,k,Ge)),Me&&(je.pitch=h.number(C,I,Ge)),ze&&(je.interpolatePadding(M,L,Ge),H=je.centerPoint.add(Z));const lt=1===Ge?K:je.unproject(G.add(Q.mult(ge(Ne))).mult(Ye));return je.setLocationAtPoint(je.renderWorldCopies?lt.wrap():lt,H),je._updateCameraOnTerrain(),i.preloadOnly||this._fireMoveEvents(d),je};if(i.preloadOnly){const je=this._emulate(Ve,i.duration,m);return this._preloadTiles(je),this}return this._zooming=!0,this._rotating=Ze,this._pitching=Me,this._padding=ze,this._prepareEase(d,!1),this._ease(Ve(m),()=>this._afterEase(d),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const m=this._onEaseEnd;this._onEaseEnd=void 0,m.call(this,d)}if(!i){const m=this.handlers;m&&m.stop(!1)}return this}_ease(i,d,m){!1===m.animate||0===m.duration?(i(1),d()):(this._easeStart=h.exported.now(),this._easeOptions=m,this._onEaseFrame=i,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((h.exported.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,d){i=h.wrap(i,-180,180);const m=Math.abs(i-d);return Math.abs(i-360-d)<m&&(i-=360),Math.abs(i+360-d)<m&&(i+=360),i}_normalizeCenter(i){const d=this.transform;if(!d.renderWorldCopies||d.maxBounds)return;const m=i.lng-d.center.lng;i.lng+=m>180?-360:m<-180?360:0}_emulate(i,d,m){const y=Math.ceil(15*d/1e3),v=[],C=i(m.clone());for(let M=0;M<=y;M++){const E=C(M/y);v.push(E.clone())}return v}}class tc{constructor(i={}){this.options=i,h.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){const d=this.options&&this.options.compact;return this._map=i,this._container=gt("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=gt("button","mapboxgl-ctrl-attrib-button",this._container),gt("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=gt("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===d&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(i,d){const m=this._map._getUIString(`AttributionControl.${d}`);i.setAttribute("aria-label",m),i.removeAttribute("title"),i.firstElementChild&&i.firstElementChild.setAttribute("title",m)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||h.config.ACCESS_TOKEN}];if(i){const m=d.reduce((y,v,C)=>(v.value&&(y+=`${v.key}=${v.value}${C<d.length-1?"&":""}`),y),"?");i.href=`${h.config.FEEDBACK_URL}/${m}${this._map._hash?this._map._hash.getHashString(!0):""}`,i.rel="noopener nofollow",this._setElementTitle(i,"MapFeedback")}}_updateData(i){!i||"metadata"!==i.sourceDataType&&"visibility"!==i.sourceDataType&&"style"!==i.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let i=[];if(this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const d=this._map.style._sourceCaches;for(const y in d){const v=d[y];if(v.used){const C=v.getSource();C.attribution&&i.indexOf(C.attribution)<0&&i.push(C.attribution)}}i.sort((y,v)=>y.length-v.length),i=i.filter((y,v)=>{for(let C=v+1;C<i.length;C++)if(i[C].indexOf(y)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=[...this.options.customAttribution,...i]:i.unshift(this.options.customAttribution));const m=i.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,i.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class fd{constructor(){h.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(i){this._map=i,this._container=gt("div","mapboxgl-ctrl");const d=gt("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&"metadata"!==i.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const i=this._map.style._sourceCaches;if(0===Object.entries(i).length)return!0;for(const d in i){const m=i[d].getSource();if(m.hasOwnProperty("mapbox_logo")&&!m.mapbox_logo)return!1}return!0}_updateCompact(){const i=this._container.children;if(i.length){const d=i[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class md{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const d=++this._id;return this._queue.push({callback:i,id:d,cancelled:!1}),d}remove(i){const d=this._currentlyRunning,m=d?this._queue.concat(d):this._queue;for(const y of m)if(y.id===i)return void(y.cancelled=!0)}run(i=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const m of d)if(!m.cancelled&&(m.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function gd(p,i,d){if(p=new h.LngLat(p.lng,p.lat),i){const m=new h.LngLat(p.lng-360,p.lat),y=new h.LngLat(p.lng+360,p.lat),v=360*Math.ceil(Math.abs(p.lng-d.center.lng)/360),C=d.locationPoint(p).distSqr(i),M=i.x<0||i.y<0||i.x>d.width||i.y>d.height;d.locationPoint(m).distSqr(i)<C&&(M||Math.abs(m.lng-d.center.lng)<v)?p=m:d.locationPoint(y).distSqr(i)<C&&(M||Math.abs(y.lng-d.center.lng)<v)&&(p=y)}for(;Math.abs(p.lng-d.center.lng)>180;){const m=d.locationPoint(p);if(m.x>=0&&m.y>=0&&m.x<=d.width&&m.y<=d.height)break;p.lng>d.center.lng?p.lng-=360:p.lng+=360}return p}const ic={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class nc extends h.Evented{constructor(i,d){if(super(),(i instanceof h.window.HTMLElement||d)&&(i=h.extend({element:i},d)),h.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),i&&i.element)this._element=i.element,this._offset=h.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=gt("div");const y=41,v=27,C=fn("svg",{display:"block",height:y*this._scale+"px",width:v*this._scale+"px",viewBox:`0 0 ${v} ${y}`},this._element),M=fn("radialGradient",{id:"shadowGradient"},fn("defs",{},C));fn("stop",{offset:"10%","stop-opacity":.4},M),fn("stop",{offset:"100%","stop-opacity":.05},M),fn("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},C),fn("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},C),fn("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},C),fn("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},C),this._offset=h.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",y=>{y.preventDefault()}),this._element.addEventListener("mousedown",y=>{y.preventDefault()});const m=this._element.classList;for(const y in ic)m.remove(`mapboxgl-marker-anchor-${y}`);m.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(i){return i===this._map||(this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._updateMoving),i.on("moveend",this._update),i.on("remove",this._clearFadeTimer),i._addMarker(this),this.setDraggable(this._draggable),this._update(),i.on("click",this._onMapClick)),this}remove(){const i=this._map;return i&&(i.off("click",this._onMapClick),i.off("move",this._updateMoving),i.off("moveend",this._update),i.off("mousedown",this._addDragHandler),i.off("touchstart",this._addDragHandler),i.off("mouseup",this._onUp),i.off("touchend",this._onUp),i.off("mousemove",this._onMove),i.off("touchmove",this._onMove),i.off("remove",this._clearFadeTimer),i._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=h.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const y=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(24.6+y)],"bottom-right":[-y,-1*(24.6+y)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=i,i._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(i){const d=i.code,m=i.charCode||i.keyCode;"Space"!==d&&"Enter"!==d&&32!==m&&13!==m||this.togglePopup()}_onMapClick(i){const d=i.originalEvent.target,m=this._element;this._popup&&(d===m||m.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?(i.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(i.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const i=this._map;if(!i)return!1;const d=i.unproject(this._pos),m=i.getFreeCameraOptions();if(!m.position)return!1;const y=m.position.toLngLat();return y.distanceTo(d)<.9*y.distanceTo(this._lngLat)}_evaluateOpacity(){const i=this._map;if(!i)return;const d=this._pos;if(!d||d.x<0||d.x>i.transform.width||d.y<0||d.y>i.transform.height)return void this._clearFadeTimer();const m=i.unproject(d);let y;i._usingGlobe()&&h.isLngLatBehindGlobe(i.transform,this._lngLat)?y=0:(y=1-i._queryFogOpacity(m),i.transform._terrainEnabled()&&i.getTerrain()&&this._behindTerrain()&&(y*=.2)),this._element.style.opacity=`${y}`,this._element.style.pointerEvents=y>0?"auto":"none",this._popup&&this._popup._setOpacity(y),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const i=this._pos;if(!i||!this._map)return;const d=this._calculateXYTransform()+this._calculateZTransform(),m=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${i.x}px,${i.y}px) ${ic[this._anchor]}\n            ${d}\n            translate(${m.x}px,${m.y}px)\n        `}_calculateXYTransform(){const i=this._pos,d=this._map;if("map"!==this.getPitchAlignment()||!d||!i)return"";if(!d._usingGlobe()){const E=d.getPitch();return E?`rotateX(${E}deg)`:""}const m=h.radToDeg(h.globeTiltAtLngLat(d.transform,this._lngLat)),y=i.sub(h.globeCenterToScreenPoint(d.transform)),v=m/(Math.abs(y.x)+Math.abs(y.y)),C=y.x*v,M=-y.y*v;return M||C?`rotateX(${M}deg) rotateY(${C}deg)`:""}_calculateZTransform(){const i=this._calculateRotation();return i?`rotateZ(${i}deg)`:""}_calculateRotation(){if("viewport"===this._rotationAlignment||"auto"===this._rotationAlignment)return this._rotation;if(this._map&&"map"===this._rotationAlignment){const i=this._map;if(this._pos&&i&&i._usingGlobe()){const d=i.project(new h.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),m=i.project(new h.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(d);return this._rotation+h.radToDeg(Math.atan2(m.y,m.x))-90}return this._rotation-this._map.getBearing()}return 0}_update(i){h.window.cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=gd(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat),!0===i?this._updateFrameId=h.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._usingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(i){return this._offset=h.pointGeometry.convert(i),this._update(),this}_onMove(i){const d=this._map;if(d){if(!this._isDragging){const m=this._clickTolerance||d._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=d.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new h.Event("dragstart"))),this.fire(new h.Event("drag")))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const i=this._map;i&&(i.off("mousemove",this._onMove),i.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new h.Event("dragend")),this._state="inactive"}_addDragHandler(i){const d=this._map;d&&this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos),this._pointerdownPos=i.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(i){this._draggable=!!i;const d=this._map;return d&&(i?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment?"viewport":this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}}class Vu{constructor(i){this.jumpTo(i)}getValue(i){if(i<=this._startTime)return this._start;if(i>=this._endTime)return this._end;const d=h.easeCubicInOut((i-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(i){return i>=this._startTime&&i<=this._endTime}jumpTo(i){this._startTime=-1/0,this._endTime=-1/0,this._start=i,this._end=i}easeTo(i,d,m){this._start=this.getValue(d),this._end=i,this._startTime=d,this._endTime=d+m}}const _d={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Nu={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function oc(p){p.parentNode&&p.parentNode.removeChild(p)}const Uu={showCompass:!0,showZoom:!0,visualizePitch:!1};class Gu{constructor(i,d,m=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new Hs({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,m&&(this.mousePitch=new Jl({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),h.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(i,d){this.mouseRotate.mousedown(i,d),this.mousePitch&&this.mousePitch.mousedown(i,d),so()}move(i,d){const m=this.map,y=this.mouseRotate.mousemoveWindow(i,d),v=y&&y.bearingDelta;if(v&&m.setBearing(m.getBearing()+v),this.mousePitch){const C=this.mousePitch.mousemoveWindow(i,d),M=C&&C.pitchDelta;M&&m.setPitch(m.getPitch()+M)}}off(){const i=this.element;i.removeEventListener("mousedown",this.mousedown),i.removeEventListener("touchstart",this.touchstart,{passive:!1}),i.removeEventListener("touchmove",this.touchmove),i.removeEventListener("touchend",this.touchend),i.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Tr(),h.window.removeEventListener("mousemove",this.mousemove),h.window.removeEventListener("mouseup",this.mouseup)}mousedown(i){this.down(h.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),_t(this.element,i)),h.window.addEventListener("mousemove",this.mousemove),h.window.addEventListener("mouseup",this.mouseup)}mousemove(i){this.move(i,_t(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){1!==i.targetTouches.length?this.reset():(this._startPos=this._lastPos=rn(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){1!==i.targetTouches.length?this.reset():(this._lastPos=rn(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){0===i.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const yd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Zu={maxWidth:100,unit:"metric"};function Xr(p,i,d,m,y,v){const C=function(E){const k=Math.pow(10,`${Math.floor(E)}`.length-1);let I=E/k;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(L){const V=Math.pow(10,Math.ceil(-Math.log(L)/Math.LN10));return Math.round(L*V)/V}(I),k*I}(d),M=C/d;v._requestDomTask(()=>{p.style.width=i*M+"px",p.innerHTML="nautical-mile"!==y?new Intl.NumberFormat(m,{style:"unit",unitDisplay:"narrow",unit:y}).format(C):`${C}&nbsp;nm`})}const ju={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},xd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function rc(p=new h.pointGeometry(0,0),i="bottom"){if("number"==typeof p){const d=Math.round(Math.sqrt(.5*Math.pow(p,2)));switch(i){case"top":return new h.pointGeometry(0,p);case"top-left":return new h.pointGeometry(d,d);case"top-right":return new h.pointGeometry(-d,d);case"bottom":return new h.pointGeometry(0,-p);case"bottom-left":return new h.pointGeometry(d,-d);case"bottom-right":return new h.pointGeometry(-d,-d);case"left":return new h.pointGeometry(p,0);case"right":return new h.pointGeometry(-p,0)}return new h.pointGeometry(0,0)}return p instanceof h.pointGeometry||Array.isArray(p)?h.pointGeometry.convert(p):h.pointGeometry.convert(p[i]||[0,0])}const Xa={version:h.version,supported:tr,setRTLTextPlugin:h.setRTLTextPlugin,getRTLTextPluginStatus:h.getRTLTextPluginStatus,Map:class extends ec{constructor(p){if(null!=(p=h.extend({},Nu,p)).minZoom&&null!=p.maxZoom&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=p.minPitch&&null!=p.maxPitch&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=p.minPitch&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=p.maxPitch&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(p.antialias&&h.isSafariWithAntialiasingBug(h.window)&&(p.antialias=!1,h.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Wl(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),p),this._interactive=p.interactive,this._minTileCacheSize=p.minTileCacheSize,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=p.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=p.collectResourceTiming,this._optimizeForTerrain=p.optimizeForTerrain,this._language="auto"===p.language?h.window.navigator.language:p.language,this._worldview=p.worldview,this._renderTaskQueue=new md,this._domRenderTaskQueue=new md,this._controls=[],this._markers=[],this._mapId=h.uniqueId(),this._locale=h.extend({},_d,p.locale),this._clickTolerance=p.clickTolerance,this._cooperativeGestures=p.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Vu(0),this._explicitProjection=null,this._requestManager=new h.RequestManager(p.transformRequest,p.accessToken,p.testMode),this._silenceAuthErrors=!!p.testMode,"string"==typeof p.container){if(this._container=h.window.document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof h.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(this._container.childNodes.length>0&&h.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),p.maxBounds&&this.setMaxBounds(p.maxBounds),h.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==h.window&&(h.window.addEventListener("online",this._onWindowOnline,!1),h.window.addEventListener("resize",this._onWindowResize,!1),h.window.addEventListener("orientationchange",this._onWindowResize,!1),h.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new Qs(this,p),this._localFontFamily=p.localFontFamily,this._localIdeographFontFamily=p.localIdeographFontFamily,p.style&&this.setStyle(p.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),p.projection&&this.setProjection(p.projection),this._hash=p.hash&&new sd("string"==typeof p.hash&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,h.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),p.attributionControl&&this.addControl(new tc({customAttribution:p.customAttribution})),this._logoControl=new fd,this.addControl(this._logoControl,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update("style"===i.dataType),this.fire(new h.Event(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new h.Event(`${i.dataType}dataloading`,i))})}_getMapId(){return this._mapId}addControl(p,i){if(void 0===i&&(i=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new h.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=p.onAdd(this);this._controls.push(p);const m=this._controlPositions[i];return-1!==i.indexOf("bottom")?m.insertBefore(d,m.firstChild):m.appendChild(d),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new h.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(p);return i>-1&&this._controls.splice(i,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(p){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const i=!this._moving;return i&&this.fire(new h.Event("movestart",p)).fire(new h.Event("move",p)),this.fire(new h.Event("resize",p)),i&&this.fire(new h.Event("moveend",p)),this}getBounds(){return"globe"===this.transform.projection.name&&h.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly."'),this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(p){return this.transform.setMaxBounds(h.LngLatBounds.convert(p)),this._update()}setMinZoom(p){if((p=null==p?-2:p)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p?this.setZoom(p):this.fire(new h.Event("zoomstart")).fire(new h.Event("zoom")).fire(new h.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=null==p?22:p)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p?this.setZoom(p):this.fire(new h.Event("zoomstart")).fire(new h.Event("zoom")).fire(new h.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=null==p?0:p)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p?this.setPitch(p):this.fire(new h.Event("pitchstart")).fire(new h.Event("pitch")).fire(new h.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=null==p?85:p)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p?this.setPitch(p):this.fire(new h.Event("pitchstart")).fire(new h.Event("pitch")).fire(new h.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this._update()}getLanguage(){return this._language}setLanguage(p){if(this._language="auto"===p?h.window.navigator.language:p,this.style)for(const i in this.style._sourceCaches){const d=this.style._sourceCaches[i]._source;d._setLanguage&&d._setLanguage(this._language)}for(const i of this._controls)i._setLanguage&&i._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(p){if(this._worldview=p,this.style)for(const i in this.style._sourceCaches){const d=this.style._sourceCaches[i]._source;d._setWorldview&&d._setWorldview(p)}return this}getProjection(){return this._explicitProjection?this._explicitProjection:this.style&&this.style.stylesheet&&this.style.stylesheet.projection?this.style.stylesheet.projection:{name:"mercator",center:[0,0]}}_usingGlobe(){return"globe"===this.transform.projection.name}setProjection(p){return this._lazyInitEmptyStyle(),p?"string"==typeof p&&(p={name:p}):p=null,this._updateProjection(p)}_updateProjection(p){const i=this.getProjection();null===p&&(this._explicitProjection=null);const d=p||this.getProjection();let m;if(d&&"globe"===d.name&&this.transform.zoom>=h.GLOBE_ZOOM_THRESHOLD_MAX?(m=this.transform.setProjection({name:"mercator"}),this.transform.mercatorFromTransition=!0):(m=this.transform.setProjection(d),this.transform.mercatorFromTransition=!1),p&&(this._explicitProjection="globe"===p.name?{name:"globe",center:[0,0]}:this.transform.getProjection()),this.style.applyProjectionUpdate(),m){if("globe"===i.name&&"globe"===this.getProjection().name)this.style._forceSymbolLayerUpdate();else{this.painter.clearBackgroundTiles();for(const y in this.style._sourceCaches)this.style._sourceCaches[y].clearTiles()}this._update(!0)}return this}project(p){return this.transform.locationPoint3D(h.LngLat.convert(p))}unproject(p){return this.transform.pointLocation3D(h.pointGeometry.convert(p))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(p,i,d){if("mouseenter"===p||"mouseover"===p){let m=!1;const y=C=>{const M=i.filter(k=>this.getLayer(k)),E=M.length?this.queryRenderedFeatures(C.point,{layers:M}):[];E.length?m||(m=!0,d.call(this,new ln(p,this,C.originalEvent,{features:E}))):m=!1},v=()=>{m=!1};return{layers:new Set(i),listener:d,delegates:{mousemove:y,mouseout:v}}}if("mouseleave"===p||"mouseout"===p){let m=!1;const y=C=>{const M=i.filter(E=>this.getLayer(E));(M.length?this.queryRenderedFeatures(C.point,{layers:M}):[]).length?m=!0:m&&(m=!1,d.call(this,new ln(p,this,C.originalEvent)))},v=C=>{m&&(m=!1,d.call(this,new ln(p,this,C.originalEvent)))};return{layers:new Set(i),listener:d,delegates:{mousemove:y,mouseout:v}}}{const m=y=>{const v=i.filter(M=>this.getLayer(M)),C=v.length?this.queryRenderedFeatures(y.point,{layers:v}):[];C.length&&(y.features=C,d.call(this,y),delete y.features)};return{layers:new Set(i),listener:d,delegates:{[p]:m}}}}on(p,i,d){if(void 0===d)return super.on(p,i);Array.isArray(i)||(i=[i]);const m=this._createDelegatedListener(p,i,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(m);for(const y in m.delegates)this.on(y,m.delegates[y]);return this}once(p,i,d){if(void 0===d)return super.once(p,i);Array.isArray(i)||(i=[i]);const m=this._createDelegatedListener(p,i,d);for(const y in m.delegates)this.once(y,m.delegates[y]);return this}off(p,i,d){if(void 0===d)return super.off(p,i);i=new Set(Array.isArray(i)?i:[i]);const m=(v,C)=>{if(v.size!==C.size)return!1;for(const M of v)if(!C.has(M))return!1;return!0},y=this._delegatedListeners?this._delegatedListeners[p]:void 0;return y&&(v=>{for(let C=0;C<v.length;C++){const M=v[C];if(M.listener===d&&m(M.layers,i)){for(const E in M.delegates)this.off(E,M.delegates[E]);return v.splice(C,1),this}}})(y),this}queryRenderedFeatures(p,i){return this.style?(void 0!==i||void 0===p||p instanceof h.pointGeometry||Array.isArray(p)||(i=p,p=void 0),this.style.queryRenderedFeatures(p=p||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(p,i){return this.style.querySourceFeatures(p,i)}queryTerrainElevation(p,i){const d=this.transform.elevation;return d?(i=h.extend({},{exaggerated:!0},i),d.getAtPoint(h.MercatorCoordinate.fromLngLat(p),null,i.exaggerated)):null}setStyle(p,i){return!1!==(i=h.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&p?(this._diffStyle(p,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(p,i))}_getUIString(p){const i=this._locale[p];if(null==i)throw new Error(`Missing UI string '${p}'`);return i}_updateStyle(p,i){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),p&&(this.style=new gn(this,i||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof p?this.style.loadURL(p):this.style.loadJSON(p)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new gn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,i){if("string"==typeof p){const d=this._requestManager.normalizeStyleURL(p),m=this._requestManager.transformRequest(d,h.ResourceType.Style);h.getJSON(m,(y,v)=>{y?this.fire(new h.ErrorEvent(y)):v&&this._updateDiff(v,i)})}else"object"==typeof p&&this._updateDiff(p,i)}_updateDiff(p,i){try{this.style.setState(p)&&this._update(!0)}catch(d){h.warnOnce(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(p,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(h.warnOnce("There is no style added to the map."),!1)}addSource(p,i){return this._lazyInitEmptyStyle(),this.style.addSource(p,i),this._update(!0)}isSourceLoaded(p){return!!this.style&&this.style._isSourceCacheLoaded(p)}areTilesLoaded(){const p=this.style&&this.style._sourceCaches;for(const i in p){const d=p[i]._tiles;for(const m in d){const y=d[m];if("loaded"!==y.state&&"errored"!==y.state)return!1}}return!0}addSourceType(p,i,d){this._lazyInitEmptyStyle(),this.style.addSourceType(p,i,d)}removeSource(p){return this.style.removeSource(p),this._updateTerrain(),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,i,{pixelRatio:d=1,sdf:m=!1,stretchX:y,stretchY:v,content:C}={}){if(this._lazyInitEmptyStyle(),i instanceof h.window.HTMLImageElement||h.window.ImageBitmap&&i instanceof h.window.ImageBitmap){const{width:M,height:E,data:k}=h.exported.getImageData(i);this.style.addImage(p,{data:new h.RGBAImage({width:M,height:E},k),pixelRatio:d,stretchX:y,stretchY:v,content:C,sdf:m,version:0})}else if(void 0===i.width||void 0===i.height)this.fire(new h.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:M,height:E}=i,k=i;this.style.addImage(p,{data:new h.RGBAImage({width:M,height:E},new Uint8Array(k.data)),pixelRatio:d,stretchX:y,stretchY:v,content:C,sdf:m,version:0,userImage:k}),k.onAdd&&k.onAdd(this,p)}}updateImage(p,i){const d=this.style.getImage(p);if(!d)return void this.fire(new h.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=i instanceof h.window.HTMLImageElement||h.window.ImageBitmap&&i instanceof h.window.ImageBitmap?h.exported.getImageData(i):i,{width:y,height:v}=m;void 0!==y&&void 0!==v?y===d.data.width&&v===d.data.height?(d.data.replace(m.data,!(i instanceof h.window.HTMLImageElement||h.window.ImageBitmap&&i instanceof h.window.ImageBitmap)),this.style.updateImage(p,d)):this.fire(new h.ErrorEvent(new Error(`The width and height of the updated image (${y}, ${v})\n                must be that same as the previous version of the image\n                (${d.data.width}, ${d.data.height})`))):this.fire(new h.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new h.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,i){h.getImage(this._requestManager.transformRequest(p,h.ResourceType.Image),(d,m)=>{i(d,m instanceof h.window.HTMLImageElement?h.exported.getImageData(m):m)})}listImages(){return this.style.listImages()}addLayer(p,i){return this._lazyInitEmptyStyle(),this.style.addLayer(p,i),this._update(!0)}moveLayer(p,i){return this.style.moveLayer(p,i),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,i,d){return this.style.setLayerZoomRange(p,i,d),this._update(!0)}setFilter(p,i,d={}){return this.style.setFilter(p,i,d),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,i,d,m={}){return this.style.setPaintProperty(p,i,d,m),this._update(!0)}getPaintProperty(p,i){return this.style.getPaintProperty(p,i)}setLayoutProperty(p,i,d,m={}){return this.style.setLayoutProperty(p,i,d,m),this._update(!0)}getLayoutProperty(p,i){return this.style.getLayoutProperty(p,i)}setLight(p,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,i),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(p){return this._lazyInitEmptyStyle(),!p&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(p),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(p){return this._lazyInitEmptyStyle(),this.style.setFog(p),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(p){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(h.LngLat.convert(p),this.transform):0}setFeatureState(p,i){return this.style.setFeatureState(p,i),this._update()}removeFeatureState(p,i){return this.style.removeFeatureState(p,i),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}_updateContainerDimensions(){if(!this._container)return;const p=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300;let d,m,y,v=this._container;for(;v&&(!m||!y);){const C=h.window.getComputedStyle(v).transform;C&&"none"!==C&&(d=C.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&"0"!==d[0]&&"1"!==d[0]&&(m=d[0]),d[3]&&"0"!==d[3]&&"1"!==d[3]&&(y=d[3])),v=v.parentElement}this._containerWidth=m?Math.abs(p/m):p,this._containerHeight=y?Math.abs(i/y):i}_detectMissingCSS(){"rgb(250, 128, 114)"!==h.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&h.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const p=this._container;p.classList.add("mapboxgl-map"),(this._missingCSSCanary=gt("div","mapboxgl-canary",p)).style.visibility="hidden",this._detectMissingCSS();const i=this._canvasContainer=gt("div","mapboxgl-canvas-container",p);this._interactive&&i.classList.add("mapboxgl-interactive"),this._canvas=gt("canvas","mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=gt("div","mapboxgl-control-container",p),m=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(y=>{m[y]=gt("div",`mapboxgl-ctrl-${y}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,i){const d=h.exported.devicePixelRatio||1;this._canvas.width=d*Math.ceil(p),this._canvas.height=d*Math.ceil(i),this._canvas.style.width=`${p}px`,this._canvas.style.height=`${i}px`}_addMarker(p){this._markers.push(p)}_removeMarker(p){const i=this._markers.indexOf(p);-1!==i&&this._markers.splice(i,1)}_setupPainter(){const p=h.extend({},tr.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",p)||this._canvas.getContext("experimental-webgl",p);i?(h.storeAuthState(i,!0),this.painter=new Va(i,this.transform),this.on("data",d=>{"source"===d.dataType&&this.painter.setTileLoadedFlag(!0)}),h.exported$1.testSupport(i)):this.fire(new h.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new h.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new h.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_requestDomTask(p){!this.loaded()||this.loaded()&&!this.isMoving()?p():this._domRenderTaskQueue.add(p)}_render(p){let i;const d=this.painter.context.extTimerQuery,m=h.exported.now();if(this.listens("gpu-timing-frame")&&(i=d.createQueryEXT(),d.beginQueryEXT(d.TIME_ELAPSED_EXT,i)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(p),this._domRenderTaskQueue.run(p),this._removed)return;"globe"===this.getProjection().name&&(this.transform.zoom>=h.GLOBE_ZOOM_THRESHOLD_MAX?"globe"===this.transform.projection.name&&this._updateProjection():"mercator"===this.transform.projection.name&&this._updateProjection());let y=!1;const v=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const E=this.transform.zoom,k=this.transform.pitch,I=h.exported.now();this.style.zoomHistory.update(E,I);const L=new h.EvaluationParameters(E,{now:I,fadeDuration:v,pitch:k,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),V=L.crossFadingFactor();1===V&&V===this._crossFadingFactor||(y=!0,this._crossFadingFactor=V),this.style.update(L)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let C=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),C=this._updateAverageElevation(m),this.style._updateSources(this.transform),this._forceMarkerUpdate()):C=this._updateAverageElevation(m),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,v,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:v,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new h.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new h.Event("load"))),this.style&&(this.style.hasTransitions()||y)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),i){const E=h.exported.now()-m;d.endQueryEXT(d.TIME_ELAPSED_EXT,i),setTimeout(()=>{const k=d.getQueryObjectEXT(i,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(i),this.fire(new h.Event("gpu-timing-frame",{cpuTime:E,gpuTime:k})),h.window.performance.mark("frame-gpu",{startTime:m,detail:{gpuTime:k}})},50)}if(this.listens("gpu-timing-layer")){const E=this.painter.collectGpuTimers();setTimeout(()=>{const k=this.painter.queryGpuTimers(E);this.fire(new h.Event("gpu-timing-layer",{layerTimes:k}))},50)}if(this.listens("gpu-timing-deferred-render")){const E=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const k=this.painter.queryGpuTimeDeferredRender(E);this.fire(new h.Event("gpu-timing-deferred-render",{gpuTime:k}))},50)}const M=this._sourcesDirty||this._styleDirty||this._placementDirty||C;if(M||this._repaint)this.triggerRepaint();else{const E=!this.isMoving()&&this.loaded();if(E&&(C=this._updateAverageElevation(m,!0)),C)this.triggerRepaint();else if(this._triggerFrame(!1),E&&(this.fire(new h.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const k=this._calculateSpeedIndex();this.fire(new h.Event("speedindexcompleted",{speedIndex:k})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||M||(this._fullyLoaded=!0,this._authenticate())}_forceMarkerUpdate(){for(const p of this._markers)p._update()}_updateAverageElevation(p,i=!1){const d=m=>(this.transform.averageElevation=m,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&d(0);if((i||p-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(p)){const m=this.transform.averageElevation;let y=this.transform.sampleAverageElevation(),v=!1;this.transform.elevation&&(v=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(y)?y=0:this._averageElevationLastSampledAt=p;const C=Math.abs(m-y);if(C>1){if(this._isInitialLoad||v)return this._averageElevation.jumpTo(y),d(y);this._averageElevation.easeTo(y,p,300)}else if(C>1e-4)return this._averageElevation.jumpTo(y),d(y)}return!!this._averageElevation.isEasing(p)&&d(this._averageElevation.getValue(p))}_authenticate(){h.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,p=>{if(p&&(p.message===h.AUTH_ERR_MSG||401===p.status)){const i=this.painter.context.gl;h.storeAuthState(i,!1),this._logoControl instanceof fd&&this._logoControl._updateLogo(),i&&i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT|i.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new h.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),h.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const p=this.painter.canvasCopy(),i=this.painter.getCanvasCopiesAndTimestamps();i.timeStamps.push(performance.now());const d=this.painter.context.gl,m=d.createFramebuffer();function y(v){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,v,0);const C=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,C),C}return d.bindFramebuffer(d.FRAMEBUFFER,m),this._canvasPixelComparison(y(p),i.canvasCopies.map(y),i.timeStamps)}_canvasPixelComparison(p,i,d){let m=d[1]-d[0];const y=p.length/4;for(let v=0;v<i.length;v++){const C=i[v];let M=0;for(let E=0;E<C.length;E+=4)C[E]===p[E]&&C[E+1]===p[E+1]&&C[E+2]===p[E+2]&&C[E+3]===p[E+3]&&(M+=1);m+=(d[v+2]-d[v+1])*(1-M/y)}return m}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==h.window&&(h.window.removeEventListener("resize",this._onWindowResize,!1),h.window.removeEventListener("orientationchange",this._onWindowResize,!1),h.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),h.window.removeEventListener("online",this._onWindowOnline,!1));const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),oc(this._canvasContainer),oc(this._controlContainer),oc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),h.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new h.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(p){this._renderNextFrame=this._renderNextFrame||p,this.style&&!this._frame&&(this._frame=h.exported.frame(i=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(i)}))}_preloadTiles(p){const i=this.style?Object.values(this.style._sourceCaches):[];return h.asyncAll(i,(d,m)=>d._preloadTiles(p,m),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(p){this._showTerrainWireframe!==p&&(this._showTerrainWireframe=p,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(p){this._speedIndexTiming!==p&&(this._speedIndexTiming=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}_setCacheLimits(p,i){h.setCacheLimits(p,i)}get version(){return h.version}},NavigationControl:class{constructor(p){this.options=h.extend({},Uu,p),this._container=gt("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(h.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",i=>{this._map&&this._map.zoomIn({},{originalEvent:i})}),gt("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",i=>{this._map&&this._map.zoomOut({},{originalEvent:i})}),gt("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(h.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",i=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:i}):d.resetNorth({},{originalEvent:i}))}),this._compassIcon=gt("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map;if(!p)return;const i=p.getZoom(),d=i===p.getMaxZoom(),m=i===p.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())}_rotateCompassArrow(){const p=this._map;if(!p)return;const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(p.transform.pitch*(Math.PI/180)),.5)}) rotateX(${p.transform.pitch}deg) rotateZ(${p.transform.angle*(180/Math.PI)}deg)`:`rotate(${p.transform.angle*(180/Math.PI)}deg)`;p._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=i)})}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),p.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&p.on("pitch",this._rotateCompassArrow),p.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Gu(p,this._compass,this.options.visualizePitch)),this._container}onRemove(){const p=this._map;p&&(this._container.remove(),this.options.showZoom&&p.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&p.off("pitch",this._rotateCompassArrow),p.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(p,i){const d=gt("button",p,this._container);return d.type="button",d.addEventListener("click",i),d}_setButtonTitle(p,i){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${i}`);p.setAttribute("aria-label",d),p.firstElementChild&&p.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends h.Evented{constructor(p){super(),this.options=h.extend({geolocation:h.window.navigator.geolocation},yd,p),h.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Us(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(p){return this._map=p,this._container=gt("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(p){void 0!==this._supportsGeolocation?p(this._supportsGeolocation):void 0!==h.window.navigator.permissions?h.window.navigator.permissions.query({name:"geolocation"}).then(i=>{this._supportsGeolocation="denied"!==i.state,p(this._supportsGeolocation)}):(this._supportsGeolocation=!!this.geolocation,p(this._supportsGeolocation))}_isOutOfMapMaxBounds(p){const i=this._map.getMaxBounds(),d=p.coords;return!!i&&(d.longitude<i.getWest()||d.longitude>i.getEast()||d.latitude<i.getSouth()||d.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new h.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(p),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new h.Event("geolocate",p)),this._finish()}}_updateCamera(p){const i=new h.LngLat(p.coords.longitude,p.coords.latitude),d=p.coords.accuracy,m=this._map.getBearing(),y=h.extend({bearing:m},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(d),y,{geolocateSource:!0})}_updateMarker(p){if(p){const i=new h.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map.transform,i=h.mercatorZfromAltitude(1,p._center.lat)*p.worldSize,d=Math.ceil(2*this._accuracy*i);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(p){if(this._map){if(this.options.trackUserLocation)if(1===p.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===p.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new h.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=gt("button","mapboxgl-ctrl-geolocate",this._container),gt("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===p){h.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=gt("div","mapboxgl-user-location"),this._dotElement.appendChild(gt("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(gt("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new nc({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=gt("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new nc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||"ACTIVE_LOCK"!==this._watchState||i.originalEvent&&"resize"===i.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new h.Event("trackuserlocationend")))})}_onDeviceOrientation(p){this._userLocationDotMarker&&(p.webkitCompassHeading?this._heading=p.webkitCompassHeading:!0===p.absolute&&(this._heading=-1*p.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return h.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new h.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new h.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new h.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let p;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(p={maximumAge:6e5,timeout:0},this._noTimeout=!0):(p=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,p),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const p=()=>{h.window.addEventListener("ondeviceorientationabsolute"in h.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==h.window.DeviceMotionEvent&&"function"==typeof h.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(i=>{"granted"===i&&p()}).catch(console.error):p()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),h.window.removeEventListener("deviceorientation",this._onDeviceOrientation),h.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:tc,ScaleControl:class{constructor(p){this.options=h.extend({},Zu,p),h.bindAll(["_update","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){!function(p,i,d,m){const y=m&&m.maxWidth||100,v=p._containerHeight/2,C=p._containerWidth/2-y/2,M=p.unproject([C,v]),E=p.unproject([C+y,v]),k=M.distanceTo(E);if(m&&"imperial"===m.unit){const I=3.2808*k;I>5280?Xr(i,y,I/5280,d,"mile",p):Xr(i,y,I,d,"foot",p)}else m&&"nautical"===m.unit?Xr(i,y,k/1852,d,"nautical-mile",p):k>=1e3?Xr(i,y,k/1e3,d,"kilometer",p):Xr(i,y,k,d,"meter",p)}(this._map,this._container,this._language,this.options)}onAdd(p){return this._map=p,this._language=p.getLanguage(),this._container=gt("div","mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(p){this._language=p,this._update()}setUnit(p){this.options.unit=p,this._update()}},FullscreenControl:class{constructor(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof h.window.HTMLElement?this._container=p.container:h.warnOnce("Full screen control 'container' must be a DOM element.")),h.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in h.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in h.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=gt("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",h.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,h.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!h.window.document.fullscreenEnabled&&!h.window.document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=gt("button","mapboxgl-ctrl-fullscreen",this._controlContainer);gt("span","mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),h.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",p)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(h.window.document.fullscreenElement||h.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?h.window.document.exitFullscreen?h.window.document.exitFullscreen():h.window.document.webkitCancelFullScreen&&h.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends h.Evented{constructor(p){super(),this.options=h.extend(Object.create(ju),p),h.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(p&&p.className?p.className.trim().split(/\s+/):[])}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&p.on("preclick",this._onClose),this.options.closeOnMove&&p.on("move",this._onClose),p.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(p.on("mousemove",this._onMouseEvent),p.on("mouseup",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")):p.on("move",this._update),this.fire(new h.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const p=this._map;return p&&(p.off("move",this._update),p.off("move",this._onClose),p.off("preclick",this._onClose),p.off("click",this._onClose),p.off("remove",this.remove),p.off("mousemove",this._onMouseEvent),p.off("mouseup",this._onMouseEvent),p.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new h.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){this._lngLat=h.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update();const i=this._map;return i&&(i.on("move",this._update),i.off("mousemove",this._onMouseEvent),i._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const p=this._map;return p&&(p.off("move",this._update),p.on("mousemove",this._onMouseEvent),p.on("drag",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(h.window.document.createTextNode(p))}setHTML(p){const i=h.window.document.createDocumentFragment(),d=h.window.document.createElement("body");let m;for(d.innerHTML=p;m=d.firstChild,m;)i.appendChild(m);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){let i=this._content;if(i)for(;i.hasChildNodes();)i.firstChild&&i.removeChild(i.firstChild);else i=this._content=gt("div","mapboxgl-popup-content",this._container||void 0);if(i.appendChild(p),this.options.closeButton){const d=this._closeButton=gt("button","mapboxgl-popup-close-button",i);d.type="button",d.setAttribute("aria-label","Close popup"),d.setAttribute("aria-hidden","true"),d.innerHTML="&#215;",d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(p){return this._classList.add(p),this._updateClassList(),this}removeClassName(p){return this._classList.delete(p),this._updateClassList(),this}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){let i;return this._classList.delete(p)?i=!1:(this._classList.add(p),i=!0),this._updateClassList(),i}_onMouseEvent(p){this._update(p.point)}_getAnchor(p){if(this.options.anchor)return this.options.anchor;const i=this._map,d=this._container,m=this._pos;if(!i||!d||!m)return"bottom";const y=d.offsetWidth,v=d.offsetHeight,C=m.x<y/2,M=m.x>i.transform.width-y/2;if(m.y+p<v)return C?"top-left":M?"top-right":"top";if(m.y>i.transform.height-v){if(C)return"bottom-left";if(M)return"bottom-right"}return C?"left":M?"right":"bottom"}_updateClassList(){const p=this._container;if(!p)return;const i=[...this._classList];i.push("mapboxgl-popup"),this._anchor&&i.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&i.push("mapboxgl-popup-track-pointer"),p.className=i.join(" ")}_update(p){const i=this._map,d=this._content;if(!i||!this._lngLat&&!this._trackPointer||!d)return;let m=this._container;if(m||(m=this._container=gt("div","mapboxgl-popup",i.getContainer()),this._tip=gt("div","mapboxgl-popup-tip",m),m.appendChild(d)),this.options.maxWidth&&m.style.maxWidth!==this.options.maxWidth&&(m.style.maxWidth=this.options.maxWidth),i.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=gd(this._lngLat,this._pos,i.transform)),!this._trackPointer||p){const y=this._pos=this._trackPointer&&p?p:i.project(this._lngLat),v=rc(this.options.offset),C=this._anchor=this._getAnchor(v.y),M=rc(this.options.offset,C),E=y.add(M).round();i._requestDomTask(()=>{this._container&&C&&(this._container.style.transform=`${ic[C]} translate(${E.x}px,${E.y}px)`)})}if(!this._marker&&i._usingGlobe()){const y=h.isLngLatBehindGlobe(i.transform,this._lngLat)?0:1;this._setOpacity(y)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(xd);p&&p.focus()}_onClose(){this.remove()}_setOpacity(p){this._container&&(this._container.style.opacity=`${p}`),this._content&&(this._content.style.pointerEvents=p?"auto":"none")}},Marker:nc,Style:gn,LngLat:h.LngLat,LngLatBounds:h.LngLatBounds,Point:h.pointGeometry,MercatorCoordinate:h.MercatorCoordinate,FreeCameraOptions:ni,Evented:h.Evented,config:h.config,prewarm:function(){Nt().acquire(ot)},clearPrewarmedResources:function(){const p=At;p&&(p.isPreloaded()&&1===p.numActive()?(p.release(ot),At=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return h.config.ACCESS_TOKEN},set accessToken(p){h.config.ACCESS_TOKEN=p},get baseApiUrl(){return h.config.API_URL},set baseApiUrl(p){h.config.API_URL=p},get workerCount(){return ct.workerCount},set workerCount(p){ct.workerCount=p},get maxParallelImageRequests(){return h.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){h.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){h.clearTileCache(p)},workerUrl:"",workerClass:null,setNow:h.exported.setNow,restoreNow:h.exported.restoreNow};return Xa}),$e}()}}]);